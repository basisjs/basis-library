(function(){var qa={"0.js":"library","1.js":"basis.ui","2.js":"basis.l10n","3.js":"basis.event","4.js":"basis.data","5.js":"basis.dom.wrapper","6.js":"basis.template","7.js":"basis.template.html","8.js":"basis.dom.event","9.js":"basis.template.htmlfgen","a.js":"basis.dragdrop","b.js":"basis.dom.computedStyle","c.js":"basis.layout","d.js":"basis.data.dataset","e.js":"basis.data.value","f.js":"basis.data.index","g.js":"basis.data.object","h.js":"basis.entity","i.js":"basis.net.jsonp","j.js":"basis.net",
"k.js":"basis.net.service","l.js":"basis.net.ajax","m.js":"basis.ua","n.js":"basis.net.action","o.js":"basis.router","p.js":"basis.app"},ra,sa={"d.js":function(n,V,a,q,H,v,E,Q){function G(a,c){var w={},d;a&&a.length&&(d=w.inserted=a);c&&c.length&&(d=w.deleted=c);if(d)return w}function F(d,c){return function I(c){if(!c)return null;if(c.__extend__)return c;"string"==typeof c||Array.isArray(c)||(c=null);return S(a.event.createHandler(c,d),{__extend__:I})}(c)}function z(a,c,w,d){return new k(S({keyGetter:c,
itemClass:w,create:function(a,c){var w=k.prototype.create.call(this,a,c);w.ruleValue=a;w.setDataset(new d({ruleValue:a}));return w}},a))}function D(a,c){if(!a.length)return 0;var w=c.value,d=c.object.basisObjectId,f,h,L,b,e=0,k=a.length-1;do if(L=e+k>>1,b=a[L],f=b.value,w<f)k=L-1;else if(w>f)e=L+1;else if(h=b.object.basisObjectId,d<h)k=L-1;else if(d>h)e=L+1;else return L;while(e<=k);return L+(f==w?h<d:f<w)}function x(a,c){return+(a.value>c.value)||-(a.value<c.value)||a.object.basisObjectId-c.object.basisObjectId}
function l(a,c,w){if((c=a.sourceMap_[c.basisObjectId])&&c.visited!==w){for(var d=c;d=d.ref;)if(d.object===a.source)return!0;c.visited=w;for(d=c;d=d.ref;)if(l(a,d.object,w||{}))return!0}}function g(a,c,d){var I=a.sourceMap_,b=a.members_;c=P(c);for(var h=[],L=0;L<c.length;L++){var e=c[L],k=e.basisObjectId;k||(d=e.ref,e=e.object,k=e.basisObjectId);var g=I[k];if(g)g.ref={object:d,ref:g.ref};else if(g=I[k]={source:e,ref:{object:d,ref:null},visited:null,value:null},e instanceof f){var l=a.rule(e)||null;
if(l instanceof f||l instanceof y)g.value=l,c.push({object:l,ref:e});b[k]=g;h.push(e);a.ruleEvents&&e.addHandler(a.ruleEvents,a)}else for(e.addHandler(X,a),k=0,g=e.getItems();k<g.length;k++)c.push({object:g[k],ref:e})}return h}function e(a,c,d){var I=a.sourceMap_,e=a.members_;c=P(c);for(var h=[],L=0;L<c.length;L++){var b=c[L],k=b.basisObjectId;k||(d=b.ref,b=b.object,k=b.basisObjectId);for(var g=I[k],p=g.value,m=g,s=g;m=m.ref;){if(m.object===d){s.ref=m.ref;break}s=m}if(g.ref)p&&!l(a,b)&&(g.value=null,
c.push({object:p,ref:b}));else{if(b instanceof f)delete e[k],h.push(b),a.ruleEvents&&b.removeHandler(a.ruleEvents,a),p&&c.push({object:p,ref:b});else for(b.removeHandler(X,a),g=0,p=b.getItems();g<p.length;g++)c.push({object:p[g],ref:b});delete I[k]}}return h}a.require("./3.js");a.require("./4.js");E=this.path;var p=a.Class,S=a.object.extend,M=a.object.values,u=a.getter,K=a.fn.$self,A=a.fn.$true,t=a.fn.$false,b=a.fn.$undef,P=a.array.from;Q=a.event.create;var N=a.data.SUBSCRIPTION,f=a.data.Object,k=
a.data.KeyObjectMap,y=a.data.ReadOnlyDataset,U=a.data.DatasetWrapper,aa=a.data.Dataset.setAccumulateState;N.add("SOURCE",{sourceChanged:function(a,c){c&&N.unlink("source",a,c);a.source&&N.link("source",a,a.source)},sourcesChanged:function(a,c){var d;if(d=c.inserted)for(var I=0;d[I];I++)N.link("source",a,d[I]);if(d=c.deleted)for(I=0;d[I];I++)N.unlink("source",a,d[I])}},function(a,c){for(var d=c.sources||(c.source?[c.source]:[]),I=0,f;f=d[I++];)a("source",c,f)});N.addProperty("minuend");N.addProperty("subtrahend");
var d=p(y,{className:E+".Merge",subscribeTo:N.SOURCE,emit_sourcesChanged:Q("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:function(a,c){return 0<a},emit_ruleChanged:Q("ruleChanged","oldRule"),listen:{source:{itemsChanged:function(a,c){var d=this.members_,I={},f,h;if(c.inserted)for(var b=0;f=c.inserted[b];b++)h=f.basisObjectId,d[h]?d[h].count++:d[h]={count:1,object:f},I[h]=d[h];if(c.deleted)for(b=0;f=c.deleted[b];b++)h=f.basisObjectId,I[h]=d[h],d[h].count--;
this.applyRule(I)}},sourceValue:{destroy:function(a){this.removeSource(a)}}},init:function(){y.prototype.init.call(this);var a=this.sources;this.sources=[];this.sourcesMap_={};this.sourceValues_=[];a&&this.setSources(a)},setRule:function(a){a=u(a||d.UNION);if(this.rule!==a){var c=this.rule;this.rule=a;this.emit_ruleChanged(c);return this.applyRule()}},applyRule:function(a){var c=this.members_,d=this.rule,I=this.sources.length,f=[],h=[],b,e;a||(a=c);for(var k in a)a=c[k],b=I&&a.count&&d(a.count,I),
b!=k in this.items_&&(b?f.push(a.object):h.push(a.object)),0==a.count&&delete c[k];(e=G(f,h))&&this.emit_itemsChanged(e);return e},addDataset_:function(a){this.sources.push(a);this.listen.source&&a.addHandler(this.listen.source,this);var c=this.members_,d;for(d in a.items_)c[d]?c[d].count++:c[d]={count:1,object:a.items_[d]};return!0},removeDataset_:function(d){a.array.remove(this.sources,d);this.listen.source&&d.removeHandler(this.listen.source,this);var c=this.members_,w;for(w in d.items_)c[w].count--},
updateDataset_:function(d){var c=this.owner,w=c.sourcesMap_;d=a.data.resolveDataset(this,c.updateDataset_,d,"adapter");var I,f;if(this.dataset!==d){if(d){var h=(w[d.basisObjectId]||0)+1;w[d.basisObjectId]=h;1==h&&(c.addDataset_(d),I=[d])}this.dataset&&(h=(w[this.dataset.basisObjectId]||0)-1,w[this.dataset.basisObjectId]=h,0==h&&(c.removeDataset_(this.dataset),f=[this.dataset]));this.dataset=d;c.applyRule();if(w=G(I,f))(I=c.sourceDelta_)?(w.inserted&&w.inserted.forEach(function(c){a.array.remove(this.deleted,
c)||a.array.add(this.inserted,c)},I),w.deleted&&w.deleted.forEach(function(c){a.array.remove(this.inserted,c)||a.array.add(this.deleted,c)},I)):c.emit_sourcesChanged(w);return w}},getSourceValues:function(){return this.sourceValues_.map(function(a){return a.source})},addSource:function(d){if(d&&("object"==typeof d||"function"==typeof d)&&!this.hasSource(d)){var c={owner:this,source:d,adapter:null,dataset:null};this.sourceValues_.push(c);this.updateDataset_.call(c,d);this.listen.sourceValue&&d instanceof
a.event.Emitter&&d.addHandler(this.listen.sourceValue,this)}},removeSource:function(d){for(var c=0,w;w=this.sourceValues_[c];c++)if(w.source===d){this.listen.sourceValue&&d instanceof a.event.Emitter&&d.removeHandler(this.listen.sourceValue,this);this.updateDataset_.call(w,null);this.sourceValues_.splice(c,1);break}},hasSource:function(a){for(var c=0,d;d=this.sourceValues_[c];c++)if(d.source===a)return!0;return!1},setSources:function(d){var c=this.sourceValues_.map(function(a){return a.source}),w=
[],I=[],f;d||(d=[]);this.sourceDelta_={inserted:w,deleted:I};for(var h=0;h<d.length;h++){var b=d[h];a.array.remove(c,b)||this.addSource(b)}c.forEach(this.removeSource,this);this.sourceDelta_=null;(f=G(w,I))&&this.emit_sourcesChanged(f);return f},destroy:function(){this.setSources();y.prototype.destroy.call(this);this.sources=this.sourceDelta_=this.sourcesMap_=this.sourceValues_=null}});d.UNION=d.prototype.rule;d.INTERSECTION=function(a,c){return a==c};d.DIFFERENCE=function(a,c){return 1==a};d.MORE_THAN_ONE_INCLUDE=
function(a,c){return 1==c||1<a};d.AT_LEAST_ONE_EXCLUDE=function(a,c){return 1==c||a<c};var ca=function(a){return!this.has(a)};n=p(y,{className:E+".Subtract",subscribeTo:N.MINUEND+N.SUBTRAHEND,minuend:null,minuendAdapter_:null,emit_minuendChanged:Q("minuendChanged","oldMinuend"),subtrahend:null,subtrahendAdapter_:null,emit_subtrahendChanged:Q("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,c){if(this.subtrahend){var d=G(c.inserted&&c.inserted.filter(ca,this.subtrahend),
c.deleted&&c.deleted.filter(this.has,this));d&&this.emit_itemsChanged(d)}},destroy:function(){this.minuendAdapter_||this.setMinuend(null)}},subtrahend:{itemsChanged:function(a,c){if(this.minuend){var d=G(c.deleted&&c.deleted.filter(this.minuend.has,this.minuend),c.inserted&&c.inserted.filter(this.has,this));d&&this.emit_itemsChanged(d)}},destroy:function(){this.subtrahendAdapter_||this.setSubtrahend(null)}}},init:function(){y.prototype.init.call(this);var a=this.minuend,c=this.subtrahend;this.subtrahend=
this.minuend=null;(a||c)&&this.setOperands(a,c)},setOperands:function(d,c){var w,f=!1;d=a.data.resolveDataset(this,this.setMinuend,d,"minuendAdapter_");c=a.data.resolveDataset(this,this.setSubtrahend,c,"subtrahendAdapter_");var b=this.minuend,h=this.subtrahend;if(b!==d){f=!0;this.minuend=d;var e=this.listen.minuend;e&&(b&&b.removeHandler(e,this),d&&d.addHandler(e,this));this.emit_minuendChanged(b)}if(h!==c){f=!0;this.subtrahend=c;if(e=this.listen.subtrahend)h&&h.removeHandler(e,this),c&&c.addHandler(e,
this);this.emit_subtrahendChanged(h)}if(!f)return!1;if(d&&c){var f=[],b=[],k;for(k in this.items_)d.items_[k]&&!c.items_[k]||f.push(this.items_[k]);for(k in d.items_)this.items_[k]||c.items_[k]||b.push(d.items_[k]);(w=G(b,f))&&this.emit_itemsChanged(w)}else this.itemCount&&this.emit_itemsChanged(w={deleted:this.getItems()});return w},setMinuend:function(a){return this.setOperands(a,this.subtrahendAdapter_?this.subtrahendAdapter_.source:this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuendAdapter_?
this.minuendAdapter_.source:this.minuend,a)},destroy:function(){this.setOperands();y.prototype.destroy.call(this)}});var T=p(y,{className:E+".SourceDataset",subscribeTo:N.SOURCE,source:null,emit_sourceChanged:Q("sourceChanged","oldSource"),sourceAdapter_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceAdapter_||this.setSource()}}},init:function(){this.sourceMap_={};y.prototype.init.call(this);var a=this.source;a&&(this.source=null,this.setSource(a))},setSource:function(d){d=a.data.resolveDataset(this,
this.setSource,d,"sourceAdapter_");if(this.source!==d){var c=this.source,w=this.listen.source;this.source=d;if(w){var f=w.itemsChanged;aa(!0);c&&(c.removeHandler(w,this),f&&f.call(this,c,{deleted:c.getItems()}));d&&(d.addHandler(w,this),f&&f.call(this,d,{inserted:d.getItems()}));aa(!1)}this.emit_sourceChanged(c)}},destroy:function(){this.setSource();y.prototype.destroy.call(this);this.sourceMap_=null}}),Y=p(T,{className:E+".MapFilter",map:K,filter:t,rule:u(A),emit_ruleChanged:Q("ruleChanged","oldRule"),
ruleEvents:F(function(a){var c=this.map?this.map(a):object;if(!1==c instanceof f||this.filter(c))c=null;var d=this.sourceMap_[a.basisObjectId],b=d.member;if(b!==c){var e=this.members_,h,k,g;d.member=c;b&&(d=b.basisObjectId,this.removeMemberRef&&this.removeMemberRef(b,a),0==--e[d]&&(delete e[d],g=[b]));c&&(b=c.basisObjectId,this.addMemberRef&&this.addMemberRef(c,a),e[b]?e[b]++:(e[b]=1,k=[c]));(h=G(k,g))&&this.emit_itemsChanged(h)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,
c){var d=this.sourceMap_,b=this.members_,e=[],h=[],k,g,l,p=this.ruleEvents;aa(!0);if(c.inserted)for(var y=0;k=c.inserted[y];y++){l=this.map?this.map(k):k;if(!1==l instanceof f||this.filter(l))l=null;p&&k.addHandler(p,this);d[k.basisObjectId]={sourceObject:k,member:l};l&&(g=l.basisObjectId,b[g]?b[g]++:(b[g]=1,e.push(l)),this.addMemberRef&&this.addMemberRef(l,k))}if(c.deleted)for(y=0;k=c.deleted[y];y++)g=k.basisObjectId,l=d[g].member,p&&k.removeHandler(p,this),delete d[g],l&&(g=l.basisObjectId,0==--b[g]&&
(delete b[g],h.push(l)),this.removeMemberRef&&this.removeMemberRef(l,k));aa(!1);(c=G(e,h))&&this.emit_itemsChanged(c)}}},setMap:function(a){"function"!=typeof a&&(a=K);if(this.map!==a)return this.map=a,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=t);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){a=u(a||A);if(this.rule!==a){var c=this.rule;this.rule=a;this.emit_ruleChanged(c);return this.applyRule()}},applyRule:function(){var a=this.sourceMap_,c=this.members_,
d,b,k,h,e,g=[],l=[],p,y;for(y in a){e=a[y];h=e.sourceObject;d=e.member;b=this.map?this.map(h):h;if(!1==b instanceof f||this.filter(b))b=null;d!=b&&(e.member=b,d&&(k=d.basisObjectId,this.removeMemberRef&&this.removeMemberRef(d,h),c[k]--),b&&(d=b.basisObjectId,this.addMemberRef&&this.addMemberRef(b,h),d in c?c[d]++:(c[d]=1,g.push(b))))}for(k in this.items_)0==c[k]&&(delete c[k],l.push(this.items_[k]));(p=G(g,l))&&this.emit_itemsChanged(p);return p}});q=p(Y,{className:E+".Filter",filter:function(a){return!this.rule(a)}});
H=p(Y,{className:E+".Split",subsetClass:y,subsetWrapperClass:U,keyMap:null,map:function(a){return this.keyMap.resolve(a)},rule:u(b),setRule:function(a){a=u(a||b);if(this.rule!==a){var c=this.rule;this.rule=a;this.keyMap.keyGetter=a;this.emit_ruleChanged(c);return this.applyRule()}},addMemberRef:function(a,c){a.dataset.emit_itemsChanged({inserted:[c]})},removeMemberRef:function(a,c){a.dataset.emit_itemsChanged({deleted:[c]})},init:function(){this.keyMap&&!1!=this.keyMap instanceof k||(this.keyMap=
z(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));Y.prototype.init.call(this)},getSubset:function(a,c){return this.keyMap.get(a,c)},destroy:function(){Y.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});v=p(T,{className:E+".Slice",rule:u(A),emit_ruleChanged:Q("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:F(function(a){var c=this.sourceMap_[a.basisObjectId];a=this.rule(a);var d=this.index_;if(a!==c.value){var b=D(d,c),f=d[b-1],h=d[b+1];c.value=a;if(f&&(f.value>
a||f.value==a&&f.object.basisObjectId>c.object.basisObjectId)||h&&(h.value<a||h.value==a&&h.object.basisObjectId<c.object.basisObjectId))d.splice(b,1),d.splice(D(d,c),0,c),this.applyRule()}},"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,c){var d=this.sourceMap_,b=this.index_,f=this.ruleEvents,h=!1,k=!1,e,g=c.inserted,l=c.deleted;if(l){l.length>b.length-l.length&&(h=!0,k=l.length!=b.length,b.length=0);for(var p=0,m;m=l[p];p++)h||(e=d[m.basisObjectId],
b.splice(D(b,e),1)),delete d[m.basisObjectId],f&&m.removeHandler(f,this);if(k)for(var s in d)e=d[s],b.splice(D(b,e),0,e)}if(g){k=!b.length;for(p=0;m=g[p];p++)e={object:m,value:this.rule(m)},d[m.basisObjectId]=e,k?b.push(e):b.splice(D(b,e),0,e),f&&m.addHandler(f,this);k&&b.sort(x)}this.applyRule()}}},emit_rangeChanged:Q("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];T.prototype.init.call(this)},setRange:function(a,d){var b=this.offset,f=this.limit,k=!1;if(b!=a||f!=d)this.offset=
a,this.limit=d,k=this.applyRule(),this.emit_rangeChanged(b,f);return k},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},setRule:function(a,d){a=u(a||A);d=!!d;if(this.rule!=a||this.orderDesc!=d){var b=this.rule,f=this.orderDesc;if(this.rule!=a){for(var k=this.index_,h=0;h<k.length;h++)k[h].value=a(k[h].object);k.sort(x);this.rule=a}this.orderDesc=d;this.rule=a;this.emit_ruleChanged(b,f);return this.applyRule()}},applyRule:function(){var d=
this.offset,c=d+this.limit;this.orderDesc&&(d=this.index_.length-c,c=d+this.limit);for(var b=a.object.slice(this.members_),d=this.index_.slice(Math.max(0,d),Math.max(0,c)),c=[],f,k=0,h;h=d[k];k++){var e=h.object.basisObjectId;b[e]?delete b[e]:(c.push(h.object),this.members_[e]=h.object)}for(e in b)delete this.members_[e];(f=G(c,M(b)))&&this.emit_itemsChanged(f);return f},destroy:function(){T.prototype.destroy.call(this);this.index_=null}});var p=p(T,{className:E+".Cloud",subsetClass:y,subsetWrapperClass:U,
rule:u(b),ruleEvents:F(function(a){var d=this.sourceMap_,b=this.members_,f=a.basisObjectId,k=d[f].list,d=d[f].list={},f=this.rule(a),h,e=[],g=[],l;if(Array.isArray(f))for(var p=0;p<f.length;p++)(l=this.keyMap.get(f[p],!0))&&!l.has(a)&&(y=l.basisObjectId,d[y]=l,k[y]||(l.dataset.emit_itemsChanged({inserted:[a]}),b[y]?b[y]++:(e.push(l),b[y]=1)));for(var y in k)d[y]||(l=k[y],l.dataset.emit_itemsChanged({deleted:[a]}),--b[y]||(delete b[y],g.push(l)));(h=G(e,g))&&this.emit_itemsChanged(h)},"update"),keyMap:null,
map:K,listen:{source:{itemsChanged:function(a,d){var b=this.sourceMap_,f=this.members_,k=this.ruleEvents,h,e,g,l=[],p=[];aa(!0);if(h=d.inserted)for(var y=0,m;m=h[y];y++){var s=this.rule(m),J={object:m,list:{}};b[m.basisObjectId]=J;if(Array.isArray(s))for(var R=0,x={};R<s.length;R++)(e=this.keyMap.get(s[R],!0))&&!x[e.basisObjectId]&&(g=e.basisObjectId,x[g]=!0,J.list[g]=e,e.dataset.emit_itemsChanged({inserted:[m]}),f[g]?f[g]++:(l.push(e),f[g]=1));k&&m.addHandler(k,this)}if(h=d.deleted)for(y=0;m=h[y];y++){e=
m.basisObjectId;s=b[e].list;delete b[e];for(g in s)e=s[g],e.dataset.emit_itemsChanged({deleted:[m]}),--f[g]||(delete f[g],p.push(e));k&&m.removeHandler(k,this)}aa(!1);(d=G(l,p))&&this.emit_itemsChanged(d)}}},init:function(){this.keyMap&&!1!=this.keyMap instanceof k||(this.keyMap=z(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));T.prototype.init.call(this)},getSubset:function(a,d){return this.keyMap.get(a,d)},destroy:function(){T.prototype.destroy.call(this);this.keyMap.destroy();
this.keyMap=null}}),U=function(a,d){var b=d.inserted,f=d.deleted;b&&(b=g(this,b,a));f&&(f=e(this,f,a));(d=G(b,f))&&this.emit_itemsChanged(d)},X={itemsChanged:U,destroy:function(a){for(var d=this.sourceMap_,b=d[a.basisObjectId];b=b.ref;)d[b.object.basisObjectId].value=null;delete d[a.basisObjectId]}};E=T.subclass({className:E+".Extract",rule:u(b),emit_ruleChanged:Q("ruleChanged","oldRule"),ruleEvents:F(function(a){var d=this.sourceMap_[a.basisObjectId],b=this.rule(a)||null,k=d.value,l,h,p;if(b!==k){if(b instanceof
f||b instanceof y)l=g(this,b,a);k&&(h=e(this,k,a));d.value=b;(p=G(l,h))&&this.emit_itemsChanged(p)}},"update"),listen:{source:{itemsChanged:U}},setRule:function(a){a=u(a||b);if(this.rule!==a){var d=this.rule;this.rule=a;this.emit_ruleChanged(d);return this.applyRule()}},applyRule:function(){var a={},d={},b,k;for(k in this.sourceMap_){var l=this.sourceMap_[k],h=l.source;if(h instanceof f){var p=this.rule(h)||null,x=l.value;if(p!==x){if(p instanceof f||p instanceof y)for(var A=g(this,p,h),P=0;P<A.length;P++){var t=
A[P],m=t.basisObjectId;d[m]?delete d[m]:a[m]=t}if(x)for(h=e(this,x,h),P=0;P<h.length;P++)t=h[P],m=t.basisObjectId,a[m]?delete a[m]:d[m]=t;l.value=p}}}(b=G(M(a),M(d)))&&this.emit_itemsChanged(b);return b}});V.exports={getDelta:G,createRuleEvents:F,Merge:d,Subtract:n,SourceDataset:T,MapFilter:Y,Filter:q,Split:H,Extract:E,Slice:v,Cloud:p}},"0.js":function(n,V,a,q,H,v,E,Q){a.require("./1.js");a.require("./a.js");a.require("./d.js");a.require("./e.js");a.require("./f.js");a.require("./g.js");a.require("./h.js");
a.require("./i.js");a.require("./k.js");a.require("./n.js");a.require("./o.js");a.require("./p.js");q.basis=a},"2.js":function(n,V,a,q,H,v,E,Q){function G(a,b,f,k){var e=a.cultureValues[b];k=k?k+".":"";for(var l in f)if(g.call(f,l)){var c=k+l,w=f[l];(e[c]=w)&&("object"==typeof w||Array.isArray(w))&&G(a,b,w,c)}}function F(d){var f;if("string"==typeof d){var k=a.path.extname(d);".l10n"!=k&&(d=a.path.dirname(d)+"/"+a.path.basename(d,k)+".l10n");d=a.resource(d)}a.resource.isResource(d)&&(f=A[d.url]);
return f||new b(d)}function z(a,b){a&&!f[a]&&(f[a]=new aa(a,b));return f[a||N]}function D(d){if(d&&N!=d&&-1!=P.indexOf(d)){N=d;for(var b=0,f;f=K[b];b++)f.syncValues();a.Token.prototype.set.call(z,d)}}function x(d){"string"==typeof d&&(d=d.trim().split(" "));if(d.length){var b={},f,e;k={};for(var g=0,l;f=d[g];g++)f=f.split("/"),2<f.length&&(f=f.slice(0,2)),l=f[0],e||(e=l),b[l]=z(l),k[l]=f;for(l in k)k[l]=a.array.flatten(k[l].map(function(a){return k[a]})).concat(e).filter(function(a,d,b){return!d||
-1==b.lastIndexOf(a,d-1)});P=a.object.keys(b);!1==N in b&&D(e)}}a.require("./3.js");n=this.path;q=a.Class;var l=a.event.Emitter,g=Object.prototype.hasOwnProperty;a.resource.extensions[".l10n"]=function(d,b){return F(b).update(a.resource.extensions[".json"](d,b))};var e=[],p={},S=a.Token.prototype.set,M=q(a.Token,{className:n+".ComputeToken",init:function(d,b){b.computeTokens[this.basisObjectId]=this;this.token=b;a.Token.prototype.init.call(this,d)},get:function(){var a="plural"==this.token.type?f[N].plural(this.value):
this.value;return this.token.dictionary.getValue(this.token.name+"."+a)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];this.token=null;a.Token.prototype.destroy.call(this)}}),u=q(a.Token,{className:n+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(d,b,f,k){a.Token.prototype.init.call(this,k);this.index=e.push(this)-1;this.name=b;this.dictionary=d;this.computeTokens={};f?this.setType(f):this.apply()},
toString:function(){return this.get()},apply:function(){for(var d in this.computeTokens)this.computeTokens[d].apply();a.Token.prototype.apply.call(this)},set:function(){},setType:function(d){"plural"==d||a.l10n.enableMarkup&&"markup"==d||(d="default");this.type!=d&&(this.type=d,this.apply())},compute:function(d,b){1==arguments.length&&(b=d,d="");b=a.getter(b);d=String(d).trim().split(/\s+|\s*,\s*/).sort();var f=d.concat(this.basisObjectId,b[a.getter.ID]).join("_");if(p[f])return p[f];for(var k=this,
e={},g=function(a){S.call(this,b(a))},c={destroy:function(a){delete e[a.basisObjectId];this.destroy()}},w=0,y;y=d[w];w++)"destroy"!=y&&(c[y]=g);return p[f]=function(a){if(!1==a instanceof l)throw 3;var d=a.basisObjectId,f=e[d];f||(f=e[d]=new M(b(a),k),a.addHandler(c,f));return f}},computeToken:function(a){return new M(a,this)},token:function(a){"plural"==this.type&&(a=f[N].plural(a));if(this.dictionary)return this.dictionary.token(this.name+"."+a)},destroy:function(){for(var d in this.computeTokens)this.computeTokens[d].destroy();
this.value=this.computeTokens=null;a.Token.prototype.destroy.call(this)}}),K=[],A={},t=new a.Token,b=q(null,{className:n+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(d){this.tokens={};this.types={};this.cultureValues={};this.index=K.push(this)-1;a.resource.isResource(d)?(this.resource=d,A[d.url]||(A[d.url]=this,t.set(d.url)),d.fetch()):this.update(d||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]=
{},G(this,b,a[b]));this.types=a._meta&&a._meta.type||{};for(var f in this.tokens)this.tokens[f].setType(this.types[f]);this.syncValues();return this},syncValues:function(){for(var a in this.tokens)S.call(this.tokens[a],this.getValue(a))},getValue:function(a){for(var b=k[N]||[],f=0,e;e=b[f];f++)if((e=this.cultureValues[e])&&a in e)return e[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new u(this,
a,this.types[a],this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;a.array.remove(K,this);this.resource&&(delete A[this.resource.url],this.resource=null)}}),P=[],N=null,f={},k={},y={},U=[[1,function(a){return 0}],[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==a?0:1}],[2,function(a){return 0==a||1==a?0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=
a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=
a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){y[a]=this},U[b])});var aa=a.Class(null,{className:n+".Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;f[a]||(f[a]=this);this.pluralForm=b||y[a]||y[a.split("-")[0]]||U[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});a.object.extend(z,new a.Token);z.set=D;x("en-US");D("en-US");V.exports={ComputeToken:M,Token:u,token:function(b){if("#"==b.charAt(0))return e[parseInt(b.substr(1),36)];if(b=b.match(/^(.+?)@(.+)$/))return F(a.path.resolve(b[2])).token(b[1])},
Dictionary:b,dictionary:F,getDictionaries:function(){return K.slice(0)},addCreateDictionaryHandler:t.attach.bind(t),removeCreateDictionaryHandler:t.detach.bind(t),Culture:aa,culture:z,getCulture:function(){return N},setCulture:D,getCultureList:function(){return P.slice(0)},setCultureList:x,pluralForms:U,onCultureChange:function(a,b,f){z.attach(a,b);f&&a.call(b,N)}}},"3.js":function(n,V,a,q,H,v,E,Q){function G(a){var l=z[a];l||(l=function(){for(var g=this,e,l;g=g.handler;){l=g.callbacks[a];if("function"==
typeof l){if(!e){e=[this];for(var q=0;q<arguments.length;q++)e.push(arguments[q])}l.apply(g.context||this,e)}l=g.callbacks["*"];if("function"==typeof l){if(!e)for(e=[this],q=0;q<arguments.length;q++)e.push(arguments[q]);l.call(g.context||this,{sender:this,type:a,args:e})}}},z[a]=l);return l}n=a.Class;var F={},z={},D=function(){};n=n(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:G("destroy"),listen:n.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&
(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(a,l){this.handler={callbacks:a,context:l||this,handler:this.handler}},removeHandler:function(a,l){var g=this,e;for(l=l||this;e=g,g=g.handler;)if(g.callbacks===a&&g.context===l){g.callbacks=F;e.handler=g.handler;break}},destroy:function(){this.destroy=D;this.emit_destroy();this.handler=null}});V.exports={create:G,createHandler:function(a,l){var g={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var g=
{events:a},e=0,p;p=a[e];e++)"destroy"!=p&&(g[p]=l)}return g},events:z,Emitter:n}},"4.js":function(n,V,a,q,H,v,E,Q){function G(a,m){return function(){a.apply(this,arguments);m.apply(this,arguments)}}function F(a){var m=aa[a];if(!m)for(var c=[],b={},s=1,m=aa[a]={actions:c,handler:b};a;){if(a&1){var C=k[s];c.push(C.action);for(var d in C.handler)b[d]=b[d]?G(b[d],C.handler[d]):C.handler[d]}s<<=1;a>>=1}return m}function z(a,m){for(;m&&m!==a&&m!==m.delegate;)m=m.delegate;return m===a}function D(a,m,c){var b=
a.delegate;b&&(a.root=b.root,a.target=b.target,a.data=b.data,a.state=b.state);if(a.root!==m){if(b=a.listen.root)m&&m!==a&&m.removeHandler(b,a),a.root&&a.root!==a&&a.root.addHandler(b,a);a.emit_rootChanged(m)}if(a.target!==c){if(b=a.listen.target)c&&c!==a&&c.removeHandler(b,a),a.target&&a.target!==a&&a.target.addHandler(b,a);a.emit_targetChanged(c)}for(a=a.delegates_;a;)a.delegate&&D(a.delegate,m,c),a=a.next}function x(a,m){var c={},b;a&&a.length&&(b=c.inserted=a);m&&m.length&&(b=c.deleted=m);if(b)return c}
function l(a,m){if(a&&a.itemCount){if(m&&m.itemCount){var c=[],b=[],s;for(s in a.items_){var C=a.items_[s];!1==C.basisObjectId in m.items_&&b.push(C)}for(s in m.items_)C=m.items_[s],!1==C.basisObjectId in a.items_&&c.push(C);return x(c,b)}if(a.itemCount)return{deleted:a.getItems()}}else if(m&&m.itemCount)return{inserted:m.getItems()}}function g(a,c,b,d){var f=a[d]||null,C=null;"function"==typeof b&&(b=b.call(a,a));b&&(b instanceof ja?(C=new m(a,c,b,R),b=b.dataset):b instanceof w?(C=new m(a,c,b,la),
b=g(C,C.proxy,b.value,"next")):b.bindingBridge&&(C=new s(a,c,b,J),b=g(C,C.proxy,b.value,"next")));!1==b instanceof da&&(b=null);d&&f!==C&&(f&&(f.detach(),f.next&&g(f,null,null,"next")),C&&C.attach(),a[d]=C);return b}function e(a,b,c,d){var f=a[d]||null,C=null;"function"==typeof c&&(c=c.call(a,a));c&&(c instanceof w?(C=new m(a,b,c,la),c=e(C,C.proxy,c.value,"next")):c.bindingBridge&&(C=new s(a,b,c,J),c=e(C,C.proxy,c.value,"next")));!1==c instanceof L&&(c=null);d&&f!==C&&(f&&(f.detach(),f.next&&e(f,
null,null,"next")),C&&C.attach(),a[d]=C);return c}function p(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function S(a){a&&a.constructor===Object||(a={value:a});return new L({data:a})}a.require("./3.js");n=this.path;q=a.Class;var M=Array.prototype.slice,u=a.object.values,K=a.fn.$self,A=a.event.Emitter;H=a.event.create;var t=a.event.events,b={},P=[],N={},f={priority:[],values:{},add:function(a,m){var c=a.toLowerCase();f[a]=c;N[c]=a;this.values[c]=a;m=m?this.priority.indexOf(m):
-1;-1==m?this.priority.push(c):this.priority.splice(m,0,c)},getList:function(){return u(N)}};f.add("READY");f.add("DEPRECATED");f.add("UNDEFINED");f.add("ERROR");f.add("PROCESSING");var k={},y=1,U={NONE:0,ALL:0,link:function(a,m,c){a+=m.basisObjectId;var b=c.subscribers_;b||(b=c.subscribers_={});b[a]||(b[a]=m,1==(c.subscriberCount+=1)&&c.emit_subscribersChanged(1))},unlink:function(a,m,c){a+=m.basisObjectId;(m=c.subscribers_)&&m[a]&&(delete m[a],0==(c.subscriberCount-=1)&&(c.emit_subscribersChanged(-1),
c.subscribers_=null))},add:function(a,m,c){k[y]={handler:m,action:c};U[a]=y;U.ALL|=y;y<<=1},addProperty:function(a,m){var c={};c[m||a+"Changed"]=function(m,c){c instanceof d&&U.unlink(a,m,c);m[a]instanceof d&&U.link(a,m,m[a])};this.add(a.toUpperCase(),c,function(m,c){c[a]&&m(a,c,c[a])})}},aa={};U.addProperty("delegate");U.addProperty("target");U.addProperty("dataset");U.addProperty("value","change");var d=q(A,{className:n+".AbstractData",state:f.UNDEFINED,emit_stateChanged:H("stateChanged","oldState"),
active:!1,emit_activeChanged:H("activeChanged"),subscribeTo:U.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:H("subscribersChanged","delta"),syncEvents:q.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){A.prototype.init.call(this);this.active&&this.addHandler(F(this.subscribeTo).handler);var a=this.syncAction;a&&(this.syncAction=null,this.setSyncAction(a))},setState:function(a,m){var c=
String(a);if(!N[c])throw 4;if(this.state!=c||this.state.data!=m){var b=this.state;this.state=Object(c);this.state.data=m;this.emit_stateChanged(b);return!0}return!1},deprecate:function(){this.state!=f.PROCESSING&&this.setState(f.DEPRECATED)},setActive:function(a){a=!!a;if(this.active!=a){this.active=a;this.emit_activeChanged();if(a){a=F(this.subscribeTo);for(var m=0,c;c=a.actions[m];m++)c(U.link,this);this.addHandler(a.handler)}else{a=F(this.subscribeTo);for(m=0;c=a.actions[m++];)c(U.unlink,this);
this.removeHandler(a.handler)}return!0}return!1},setSubscription:function(a){var m=this.subscribeTo,c=a&U.ALL;if(a=m^c){this.subscribeTo=c;if(this.active){var b=F(m),c=F(c);this.removeHandler(b.handler);this.addHandler(c.handler);for(b=1;a;)a&1&&(c=k[b],m&b?c.action(U.unlink,this):c.action(U.link,this)),b<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==f.UNDEFINED||this.state==f.DEPRECATED)},setSyncAction:function(a){var m=this.syncAction;"function"!=
typeof a&&(a=null);(this.syncAction=a)?(m||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):m&&this.removeHandler(this.syncEvents)},destroy:function(){A.prototype.destroy.call(this);if(this.active)for(var a=F(this.subscribeTo),m=0,c;c=a.actions[m];m++)c(U.unlink,this);this.state=f.UNDEFINED}}),ca=a.getter.ID,T={destroy:function(a){this.value.unlink(a,this.fn)}},Y={destroy:function(a){this.set(null)}},X={},ea={},c=function(a){this.set(this.fn(a))},w=q(d,{className:n+".Value",
subscribeTo:U.VALUE,emit_change:H("change","oldValue")&&function(a){t.change.call(this,a);for(var m=this;m=m.links_;)m.fn.call(m.context,this.value,a)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,m,c){a.link(c,m,!0)},detach:function(a,m,c){a.unlink(c,m)},get:function(a){return a.value}},init:function(){d.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.setNullOnEmitterDestroy&&
this.value instanceof A&&this.value.addHandler(Y,this);this.initValue=this.value},set:function(a){var m=this.value;a=this.proxy?this.proxy(a):a;var c=a!==m;c&&(this.setNullOnEmitterDestroy&&(m instanceof A&&m.removeHandler(Y,this),a instanceof A&&a.addHandler(Y,this)),this.value=a,this.locked||this.emit_change(m));return c},reset:function(){this.set(this.initValue)},isLocked:function(){return 0<this.locked},lock:function(){this.locked++;1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&
(this.locked--,!this.locked)){var a=this.lockedValue_;this.lockedValue_=null;this.value!==a&&this.emit_change(a)}},compute:function(m,c){c||(c=m,m=null);c||(c=K);var b=this,s=a.event.createHandler(m,function(a){this.set(c(a,b.value))}),d=s.events.concat(c[ca]||String(c),this.basisObjectId).join("_"),C=X[d];if(!C){var f={};s.destroy=function(a){delete f[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in f){var m=f[a];m.token.set(c(m.object,this.value))}},destroy:function(){for(var a in f){var m=
f[a];m.object.removeHandler(s,m.token);m.token.destroy()}b=f=null}});C=X[d]=function(m){var r=m.basisObjectId,B=f[r],ba=c(m,b.value);B?B.token.set(ba):(B=new a.Token(ba),m.addHandler(s,B),B=f[r]={token:B,object:m});return B.token};C.deferred=function(){return function(a){return C(a).deferred()}}}return C},as:function(m,b){m||(m=K);if(this.links_)for(var s=this,d=m[ca]||String(m);s=s.links_;){var f=s.context;if(f instanceof a.Token&&(f.fn[ca]||String(f.fn))==d)return b?f.deferred():f}s=new a.Token;
s.fn=m;this.link(s,c);return b?s.deferred():s},deferred:function(a){return this.as(a,!0)},link:function(a,m,c){if("function"!=typeof m){var b=String(m);(m=ea[b])||(m=ea[b]=function(a){this[b]=a})}this.links_={value:this,context:a,fn:m,links_:this.links_};a instanceof A&&a.addHandler(T,this.links_);c||m.call(a,this.value);return a},unlink:function(m,c){for(var b=this,s;s=b,b=b.links_;)b.context!==m||c&&b.fn!==c||(b.fn=a.fn.$undef,s.links_=b.links_,b.context instanceof A&&b.context.removeHandler(T,
b))},destroy:function(){d.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof A&&this.value.removeHandler(Y,this);for(var a=this;a=a.links_;)a.context instanceof A&&a.context.removeHandler(T,a);this.links_=this.lockedValue_=this.value=this.initValue=this.proxy=null}}),I={},Z=function(a){w.prototype.set.call(this,a)};w.from=function(m,c,b){var s;if(!m)return null;if(m instanceof A){b||(b=c,c=null);b||(b=K);var f=a.event.createHandler(c,Z),d=f.events.concat(b[ca]||String(b),
m.basisObjectId).join("_");s=I[d];s||(s=I[d]=new w({value:m,proxy:a.getter(b),set:a.fn.$undef,handler:{destroy:function(){I[d]=null;m.removeHandler(f,this)}}}),f.destroy=function(a){I[d]=null;this.destroy()},m.addHandler(f,s))}s||(d=m.basisObjectId,c=m.bindingBridge,d&&c&&(s=I[d],s||(s=I[d]=new w({value:c.get(m)}),c.attach(m,s.set,s))));if(!s)throw 5;return s};w.factory=function(a,m){return function(c){return w.from(c,a,m)}};var h={},L=q(d,{className:n+".Object",subscribeTo:U.DELEGATE+U.TARGET,data:null,
emit_update:H("update","delta")&&function(a){var m=this.delegates_;for(t.update.call(this,a);m;)m.delegate&&m.delegate.emit_update(a),m=m.next},emit_stateChanged:function(a){var m=this.delegates_;for(d.prototype.emit_stateChanged.call(this,a);m;)m.delegate&&(m.delegate.state=this.state,m.delegate.emit_stateChanged(a)),m=m.next},delegate:null,delegateAdapter_:null,delegates_:null,emit_delegateChanged:H("delegateChanged","oldDelegate"),target:null,emit_targetChanged:H("targetChanged","oldTarget"),root:null,
emit_rootChanged:H("rootChanged","oldRoot"),init:function(){this.root=this;d.prototype.init.call(this);var a=this.delegate,m=this.data;a?(this.target=this.delegate=null,this.data=h,this.setDelegate(a),this.data===h&&(this.data=m||{})):(m||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(a){if((a=e(this,this.setDelegate,a,"delegateAdapter_"))&&a instanceof L){if(a.delegate&&z(this,a))return!1}else a=null;if(this.delegate!==a){var m=this.state,c=this.data,b=this.delegate,
s=this.target,d=this.root,f=this.listen.delegate,W=!1,r;if(b){f&&b.removeHandler(f,this);for(var B=b.delegates_,ba=b;B;){if(B.delegate===this){B.delegate=null;ba===b?b.delegates_=B.next:ba.next=B.next;break}ba=B;B=B.next}}if(a){if(this.delegate=a,f&&a.addHandler(f,this),a.delegates_={delegate:this,next:a.delegates_},this.data!==h){r={};for(var ha in a.data)!1===ha in c&&(W=!0,r[ha]=void 0);for(ha in c)c[ha]!==a.data[ha]&&(W=!0,r[ha]=c[ha])}}else for(ha in this.target=this.delegate=null,this.root=
this,this.data={},c)this.data[ha]=c[ha];D(this,d,s);W&&this.emit_update(r);!r||m===this.state||String(m)==this.state&&m.data===this.state.data||this.emit_stateChanged(m);this.emit_delegateChanged(b);return!0}return!1},setState:function(a,m){return this.delegate?this.root.setState(a,m):d.prototype.setState.call(this,a,m)},update:function(a){if(this.delegate)return this.root.update(a);if(a){var m={},c=!1,b;for(b in a)this.data[b]!==a[b]&&(c=!0,m[b]=this.data[b],this.data[b]=a[b]);if(c)return this.emit_update(m),
m}return!1},destroy:function(){d.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.data=b;this.target=this.root=null}});v=q(L,{className:n+".Slot"});var O={destroy:function(){delete this.map[this.id]}};E=q(d,{className:n+".KeyObjectMap",itemClass:L,keyGetter:K,autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={};d.prototype.init.call(this)},resolve:function(a){return this.get(this.keyGetter(a),
a)},create:function(a,m){return new this.itemClass(a instanceof L?{delegate:a}:{data:{id:a,title:a}})},get:function(a,m){var c=a instanceof L?a.basisObjectId:a,b=this.map_[c];!b&&m&&(b=this.map_[c]={map:this.map_,id:c,item:this.create(a,m)},b.item.addHandler(O,b));if(b)return b.item},destroy:function(){d.prototype.destroy.call(this);var a=this.map_;this.map_=null;for(var m in a){var c=a[m];this.autoDestroyMembers?c.item.destroy():c.item.removeHandler(O,c)}}});var ja=q(L,{className:n+".DatasetWrapper",
subscribeTo:L.prototype.subscribeTo+U.DATASET,listen:{dataset:{itemsChanged:function(a,m){this.itemCount=a.itemCount;this.emit_itemsChanged(m)},destroy:function(){this.setDataset()}}},dataset:null,datasetAdapter_:null,emit_datasetChanged:H("datasetChanged","oldDataset"),emit_itemsChanged:H("itemsChanged","delta"),init:function(){L.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=g(this,this.setDataset,a,"datasetAdapter_");if(this.dataset!==
a){var m=this.listen.dataset,c=this.dataset,b;m&&(c&&c.removeHandler(m,this),a&&a.addHandler(m,this));this.itemCount=a?a.itemCount:0;(b=l(c,a))&&this.emit_itemsChanged(b);this.dataset=a;this.emit_datasetChanged(c)}},has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},
destroy:function(){(this.dataset||this.datasetAdapter_)&&this.setDataset();L.prototype.destroy.call(this)}}),da=q(d,{className:n+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:H("itemsChanged","delta")&&function(a){var m,c=0,b=0,s;if(m=a.inserted)for(;s=m[c];)this.items_[s.basisObjectId]=s,c++;if(m=a.deleted)for(;s=m[b];)delete this.items_[s.basisObjectId],b++;this.itemCount+=c-b;this.cache_=c==this.itemCount?a.inserted:null;t.itemsChanged.call(this,a)},init:function(){d.prototype.init.call(this);
this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},getItems:function(){this.cache_||(this.cache_=u(this.items_));return this.cache_},getValues:function(m){return this.getItems().map(a.getter(m||K))},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var m=[];if(a)for(var c in this.items_)if(m.push(this.items_[c])>=a)break;return m},forEach:function(a){for(var m=this.getItems(),c=0;c<m.length;c++)a(m[c])},destroy:function(){d.prototype.destroy.call(this);
this.cache_=P;this.itemCount=0;this.items_=this.members_=null}}),ka=q(da,{className:n+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){da.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var m=this.members_,c=this.listen.item,b=[],s;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var d=a[f];if(d instanceof L){var W=d.basisObjectId;m[W]||(m[W]=d,c&&d.addHandler(c,this),b.push(d))}}b.length&&this.emit_itemsChanged(s=
{inserted:b});return s},remove:function(a){var m=this.members_,c=this.listen.item,b=[],s;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var d=a[f];if(d instanceof L){var W=d.basisObjectId;m[W]&&(c&&d.removeHandler(c,this),delete m[W],b.push(d))}}b.length&&this.emit_itemsChanged(s={deleted:b});return s},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var m=this.members_,c=this.listen.item,b={},s=[],d=[],f,W,r,B=0;B<a.length;B++)f=a[B],f instanceof
L&&(W=f.basisObjectId,b[W]=f,m[W]||(m[W]=f,c&&f.addHandler(c,this),d.push(f)));for(W in m)b[W]||(f=m[W],c&&f.removeHandler(c,this),delete m[W],s.push(f));(r=x(d,s))&&this.emit_itemsChanged(r);return r},sync:function(a){a=this.set(a)||{};var m=a.deleted;ka.setAccumulateState(!0);if(m)for(var c=0,b;b=m[c];c++)b.destroy();ka.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),m=this.listen.item,c;if(a.length){if(m)for(c=0;c<a.length;c++)a[c].removeHandler(m,this);this.emit_itemsChanged(c=
{deleted:a});this.members_={}}return c},destroy:function(){this.clear();da.prototype.destroy.call(this)}}),m=function(a,m,c,b){this.context=a;this.fn=m;this.source=c;this.handler=b};m.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)},proxy:function(){this.fn.call(this.context,this.source)}};var s=function(){m.apply(this,arguments)};s.prototype=new m;s.prototype.attach=
function(){this.source.bindingBridge.attach(this.source,this.handler,this)};s.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var J=function(){this.fn.call(this.context,this.source)},R={datasetChanged:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}},la={change:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}};ka.setAccumulateState=function(){function m(){var a=
f;f={};for(var c in a){var b=a[c];b&&W.call(b.dataset,b)}}function c(a){var m=this.basisObjectId,b=a.inserted,s=a.deleted,d=f[m];if(b&&s||d&&d.mixed)d&&(f[m]=null,W.call(d.dataset,d)),W.call(this,a);else if(d){a=b?"inserted":"deleted";var C=d[a];if(C)C.push.apply(C,b||s);else{for(var C=b?"deleted":"inserted",h=d[C],k={},b=b||s,s=[],e=0,J=0;J<h.length;J++)k[h[J].basisObjectId]=J;for(J=0;J<b.length;J++){var g=b[J].basisObjectId;!1==g in k?s.push(b[J]):(e||(h=M.call(h)),e++,h[k[g]]=null)}e&&(h=e<h.length?
h.filter(Boolean):null,d[C]=h);s.length?(d[a]=s,h&&(d.mixed=!0)):h||(f[m]=null)}}else f[m]={inserted:b,deleted:s,dataset:this,mixed:!1}}function b(){h=null;d&&(d=0,s.emit_itemsChanged=W,m())}var s=da.prototype,f={},d=0,h,W;return function(r){r?(0==d&&(W=s.emit_itemsChanged,s.emit_itemsChanged=c,h||(h=a.setImmediate(b))),d++):(d-=0<d,0==d&&(s.emit_itemsChanged=W,m()))}}();V.exports={STATE:f,SUBSCRIPTION:U,AbstractData:d,Value:w,Object:L,Slot:v,KeyObjectMap:E,ReadOnlyDataset:da,Dataset:ka,DatasetWrapper:ja,
isConnected:z,getDatasetDelta:l,ResolveAdapter:m,resolveDataset:g,resolveObject:e,wrapData:p,wrapObject:S,wrap:function(a,m){var c=m?S:p;return Array.isArray(a)?a.map(c):c(a)}}},"5.js":function(n,V,a,q,H,v,E,Q){function G(){}function F(){}function z(){}function D(a){var c=a.constructor.prototype;a.setDelegate=c.setDelegate;a.destroy=c.destroy}function x(a){return a.sortingValue||0}function l(a,c){a=a.sortingValue||0;c=c.sortingValue||0;return+(a>c)||-(a<c)}function g(a,c){a=a.sortingValue||0;c=c.sortingValue||
0;return-(a>c)||+(a<c)}function e(a){return a.childNodes.sort(a.sortingDesc?g:l)}function p(a,c,b,d){if(!a.length)return 0;d=!!d;var f,h,k=0,e=a.length-1;do if(f=k+e>>1,h=b(a[f]),d?c>h:c<h)e=f-1;else if(d?c<h:c>h)k=f+1;else return c==h?f:0;while(k<=e);return f+(h<c^d)}function S(a,c,b,d,f){if(c!==b){var h=a,k=[];d&&(a.contextSelection=b,a.selected&&k.push(a));for(;h;){if((d=!h.selection||f&&h===a?h.firstChild:null)&&d.contextSelection!==c)throw 6;for(;!d;){if(h===a){k.length&&(c&&c.remove(k),b&&b.add(k));
return}d=h.nextSibling;d||(h=h.parentNode)}h=d;h.selected&&k.push(h);h.contextSelection=b}}}function M(a,c){a.contextDisabled!=c&&(a.contextDisabled=c,a.disabled||(c?a.emit_disable():a.emit_enable()))}function u(a){if(!a)return null;if(a.isSatelliteConfig||a instanceof I)return a;t.isClass(a)&&(a={instanceOf:a});if(a&&a.constructor===Object){var b=!1,d={isSatelliteConfig:!0},f,h;for(h in a)switch(h){case "instance":a[h]instanceof I&&(d[h]=a[h]);break;case "instanceOf":t.isClass(a[h])&&a[h].isSubclassOf(I)&&
(f=a[h]);break;case "existsIf":case "delegate":case "dataSource":b=!0;d[h]=k(a[h]);break;case "config":d[h]=a[h]}d.instance||(d.instanceOf=f||I);if(b&&(a="events"in a?a.events:"update",Array.isArray(a)&&(a=a.join(" ")),"string"==typeof a))for(b={},a=a.split(/\s+/),f=0;h=a[f];f++)b[h]=c,d.handler=b;return d}return null}function K(a,c){var b=c.length-1;a.childNodes=c;a.firstChild=c[0]||null;a.lastChild=c[b]||null;for(var d=b;b=c[d];d--)b.nextSibling=c[d+1]||null,b.previousSibling=c[d-1]||null,a.insertBefore(b,
b.nextSibling)}function A(a,c){var b;if("function"==typeof a.childFactory&&(b=a.childFactory(c),b instanceof a.childClass))return b;if(!b)throw 9;throw 10;}a.require("./3.js");a.require("./4.js");n=this.path;var t=a.Class,b=a.object.complete,P=a.array,N=a.array.remove,f=a.fn.$undef,k=a.getter,y=a.fn.nullGetter;q=a.event.create;var U=a.event.events;H=a.data.SUBSCRIPTION;var aa=a.data.STATE,d=a.data.Object,ca=a.data.ReadOnlyDataset,T=a.data.Dataset,Y={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},X=
{};H.addProperty("owner");H.addProperty("dataSource");var ea=t.customExtendProperty({},function(a,c){for(var b in c)a[b]=u(c[b])}),c=function(a){var c=this.name,b=this.config,d=!b.existsIf||b.existsIf(a),f=a.satellite[c];if(d)if(f)b.delegate&&f.setDelegate(b.delegate(a)),b.dataSource&&f.setDataSource(b.dataSource(a));else{if(f=b.instance)b.delegate&&f.setDelegate(b.delegate(a)),b.dataSource&&f.setDataSource(b.dataSource(a));else{var h,d=("function"==typeof b.config?b.config(a):b.config)||{};d.owner=
a;b.delegate&&(d.autoDelegate=!1,d.delegate=b.delegate(a));b.dataSource&&(d.dataSource=b.dataSource(a));f=new b.instanceOf(d);f.destroy=z;(h=a.listen.satellite)&&f.addHandler(h,a);(h=a.listen["satellite:"+c])&&f.addHandler(h,a)}a.satellite.__auto__[c].instance=f;a.setSatellite(c,f,!0)}else f&&(b.instance&&(b.delegate&&f.setDelegate(),b.dataSource&&f.setDataSource()),a.satellite.__auto__[c].instance=null,a.setSatellite(c,null,!0))},w={destroy:function(){this.owner.setSatellite(this.name,null)}},I=
t(d,{className:n+".AbstractNode",subscribeTo:d.prototype.subscribeTo+H.DATASOURCE,isSyncRequired:function(){return this.state==aa.UNDEFINED||this.state==aa.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){d.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:Y.NONE,name:null,childNodes:null,emit_childNodesModified:q("childNodesModified",
"delta")&&function(a){U.childNodesModified.call(this,a);var c=this.listen.childNode,b;if(c){if(b=a.inserted)for(var d=0,f;f=b[d];d++)f.addHandler(c,this);if(b=a.deleted)for(d=0;f=b[d];d++)f.removeHandler(c,this)}},childNodesState:aa.UNDEFINED,emit_childNodesStateChanged:q("childNodesStateChanged","oldState"),childClass:I,dataSource:null,emit_dataSourceChanged:q("dataSourceChanged","oldDataSource"),dataSourceAdapter_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,
previousSibling:null,firstChild:null,lastChild:null,sorting:y,sortingDesc:!1,emit_sortingChanged:q("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:q("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:ea,ownerSatelliteName:null,emit_satelliteChanged:q("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:q("ownerChanged","oldOwner"),init:function(){d.prototype.init.call(this);var a=this.childNodes,c=this.dataSource;
a&&(this.childNodes=null);c&&(this.dataSource=null);var b=this.grouping;b&&(this.grouping=null,this.setGrouping(b));this.childClass&&(this.childNodes=[],c?this.setDataSource(c):a&&this.setChildNodes(a));a=this.satellite;if(a!==ea){this.satellite=ea;for(var f in a)a[f]&&"object"==typeof a[f]&&this.setSatellite(f,a[f])}if(f=this.owner)this.owner=null,this.setOwner(f)},setChildNodesState:function(a,c){var b=String(a),d=this.childNodesState;if(!aa.values[b])throw 7;if(d!=b||d.data!=c)this.childNodesState=
Object(b),this.childNodesState.data=c,this.emit_childNodesStateChanged(d)},appendChild:function(a){},insertBefore:function(a,c){},removeChild:function(a){},replaceChild:function(a,c){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,c){},setSorting:function(a,c){},setDataSource:function(a){},setOwner:function(a){a&&!1!=a instanceof I||(a=null);if(a&&this.parentNode)throw 8;var c=this.owner;if(c!==a){var b=this.listen.owner;if(c){if(this.ownerSatelliteName&&c.satellite.__auto__&&
this.ownerSatelliteName in c.satellite.__auto__)return;b&&c.removeHandler(b,this);this.ownerSatelliteName&&(this.owner=null,c.setSatellite(this.ownerSatelliteName,null))}a&&b&&a.addHandler(b,this);this.owner=a;this.emit_ownerChanged(c);this.autoDelegate!=Y.OWNER&&this.autoDelegate!==Y.ANY||this.setDelegate(a)}},setSatellite:function(a,b,d){var f=this.satellite[a]||null,h=this.satellite.__auto__,k=h&&h[a],e=d&&k;if(e)b=k.instance,k.config.instance&&b&&delete k.config.instance.setOwner;else{if((b=u(b))&&
b.owner&&h&&b.ownerSatelliteName&&h[b.ownerSatelliteName])return;k&&(delete h[a],k.config.instance&&k.config.instance.removeHandler(w,k),k.config.handler&&this.removeHandler(k.config.handler,k))}if(f!==b){d=this.listen.satellite;var g=this.listen["satellite:"+a],l;f&&(delete this.satellite[a],f.ownerSatelliteName=null,k&&f.destroy===z?l=f:(d&&f.removeHandler(d,this),g&&f.removeHandler(g,this),f.setOwner(null)),e&&!b&&k.config.instance&&(k.config.instance.setOwner=F));if(b){if(!1==b instanceof I){k=
{owner:this,name:a,config:b,instance:null};b.handler&&this.addHandler(b.handler,k);b.instance&&(b.instance.addHandler(w,k),b.instance.setOwner=F);h||(this.satellite===ea&&(this.satellite={}),h=this.satellite.__auto__={});h[a]=k;c.call(k,this);!k.instance&&f&&this.emit_satelliteChanged(a,f);l&&(delete l.destroy,l.destroy());return}if(b.owner!==this){k&&k.config.delegate?(h=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),b.autoDelegate=h):b.setOwner(this);if(b.owner!==this)return;d&&b.addHandler(d,
this);g&&b.addHandler(g,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==ea&&(this.satellite={});this.satellite[a]=b;b.ownerSatelliteName=a}this.emit_satelliteChanged(a,f);l&&(delete l.destroy,l.destroy())}},getChildNodesDataset:function(){return X[this.basisObjectId]||new da({sourceNode:this})},destroy:function(){d.prototype.destroy.call(this);this.dataSource||this.dataSourceAdapter_?this.setDataSource():
this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==ea){var c=a.__auto__;delete a.__auto__;for(var b in c)c[b].config.instance&&!c[b].instance&&c[b].config.instance.destroy();for(b in a)c=a[b],c.owner=null,c.ownerSatelliteName=null,c.destroy===z&&delete c.destroy,c.destroy();this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=
this.parentNode=this.childNodes=null}}),Z=t(I,{className:n+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];I.prototype.init.call(this)},insert:function(a,c){var b=this.nodes,d=c?b.indexOf(c):-1;-1==d?(b.push(a),this.last=a):b.splice(d,0,a);this.first=b[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var c=this.nodes;N(c,a)&&(this.first=c[0]||null,this.last=c[c.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));
!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,c=a.length;0<c--;)a[c].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){I.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),h={childClass:I,childFactory:null,listen:{dataSource:{itemsChanged:function(c,b){var d={},f=[];if(b.deleted)if(d.deleted=f,this.childNodes.length==
b.deleted.length){for(var f=P(this.childNodes),h=0,k;k=f[h];h++)D(k);h=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=h;this.dataSourceMap_={}}else for(h=0;k=b.deleted[h];h++){k=k.basisObjectId;var e=this.dataSourceMap_[k];D(e);delete this.dataSourceMap_[k];this.removeChild(e);f.push(e)}if(b.inserted)for(d.inserted=[],h=0;k=b.inserted[h];h++){var g=e=A(this,{delegate:k});g.setDelegate=a.fn.$undef;g.destroy=G;this.dataSourceMap_[k.basisObjectId]=e;d.inserted.push(e);this.firstChild&&
this.insertBefore(e)}this.firstChild?this.emit_childNodesModified(d):this.setChildNodes(d.inserted);if(this.destroyDataSourceMember&&f.length)for(h=0;k=f[h];h++)k.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(a){this.dataSourceAdapter_||this.setDataSource()}}},getChild:function(c,b){return a.array.search(this.childNodes,c,b)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,
c){if(!this.childClass)throw 11;if(a.firstChild)for(var b=this;b=b.parentNode;)if(b===a)throw 12;var f=a&&a instanceof this.childClass;if(this.dataSource){if(!f||!a.delegate||this.dataSourceMap_[a.delegate.basisObjectId]!==a)throw 13;}else if(this.dataSourceAdapter_)throw 14;f||(a=A(this,a instanceof d?{delegate:a}:a));if(a.owner)throw 15;var f=a.parentNode===this,h=this.childNodes,k=this.grouping,e=a.groupNode,g=null,l=this.sorting,w,C=!1,fa,b=-1,W,r;f&&(W=a.nextSibling,r=a.previousSibling);l!==
y&&(c=null,w=this.sortingDesc,fa=l(a)||0,f&&(fa===a.sortingValue?C=!0:(!W||(w?W.sortingValue<=fa:W.sortingValue>=fa))&&(!r||(w?r.sortingValue>=fa:r.sortingValue<=fa))&&(a.sortingValue=fa,C=!0)));if(k){g=k.getGroupNode(a,!0);k=g.nodes;if(e===g&&(C||l===y&&W===c))return a;l!==y?e===g&&C?b=W&&W.groupNode===g?k.indexOf(W):k.length:(b=p(k,fa,x,w),a.sortingValue=fa):b=c&&c.groupNode===g?k.indexOf(c):k.length;if(b<k.length)c=k[b];else if(g.last)c=g.last.nextSibling;else for(b=g,c=null;(b=b.nextSibling)&&
!(c=b.first););if(a===c||f&&W===c)return e!==g&&(e&&e.remove(a),g.insert(a,c)),a;b=-1}else if(l!==y){if(C)return a;b=p(h,fa,x,w);c=h[b];a.sortingValue=fa;if(a===c||f&&W===c)return a}else{if(c&&c.parentNode!==this)throw 16;if(f){if(W===c)return a;if(a===c)throw 17;}}f?(W?(W.previousSibling=r,a.nextSibling=null):this.lastChild=r,r?(r.nextSibling=W,a.previousSibling=null):this.firstChild=W,-1==b?N(h,a):(w=h.indexOf(a),h.splice(w,1),b-=w<b),e&&(e.remove(a),e=null)):a.parentNode&&a.parentNode.removeChild(a);
e!=g&&g.insert(a,c);if(c){-1==b&&(b=h.indexOf(c));if(-1==b)throw 18;a.nextSibling=c;h.splice(b,0,a)}else b=h.length,h.push(a),c={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=c.previousSibling;0==b?this.firstChild=a:c.previousSibling.nextSibling=a;c.previousSibling=a;f||(S(a,a.contextSelection,this.selection||this.contextSelection,!0),M(a,this.disabled||this.contextDisabled),(a.underMatch_||this.matchFunction)&&a.match&&a.match(this.matchFunction),a.autoDelegate!=
Y.PARENT&&a.autoDelegate!==Y.ANY||a.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[a]}),a.listen.parentNode&&this.addHandler(a.listen.parentNode,a));return a},removeChild:function(a){if(!a||a.parentNode!==this)throw 19;if(!1==a instanceof this.childClass)throw 20;if(this.dataSource){if(this.dataSource.has(a.delegate))throw 21;}else if(this.dataSourceAdapter_)throw 22;var c=this.childNodes.indexOf(a);if(-1==c)throw 23;this.childNodes.splice(c,1);a.parentNode=null;a.nextSibling?
a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);S(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);this.dataSource||this.emit_childNodesModified({deleted:[a]});a.autoDelegate!=Y.PARENT&&a.autoDelegate!==Y.ANY||a.setDelegate();return a},replaceChild:function(a,
c){if(this.dataSource)throw 24;if(this.dataSourceAdapter_)throw 25;if(null==c||c.parentNode!==this)throw 26;this.insertBefore(a,c);return this.removeChild(c)},clear:function(a){if(this.dataSource&&this.dataSource.itemCount)throw 27;if(this.firstChild){a&&S(this,this.selection||this.contextSelection,null,!1,!0);var c=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:c});for(var b=c.length;0<b--;){var f=c[b];f.listen.parentNode&&f.parentNode.removeHandler(f.listen.parentNode,
f);f.parentNode=null;f.groupNode=null;a?(f.nextSibling=null,f.previousSibling=null,f.autoDelegate!=Y.PARENT&&f.autoDelegate!==Y.ANY||f.setDelegate()):f.destroy()}if(this.grouping)for(c=this.grouping.childNodes,b=c.length-1;a=c[b];b--)a.clear()}},setChildNodes:function(a,c){this.dataSource||this.dataSourceAdapter_||this.clear(c);if(a&&(!1=="length"in a&&(a=[a]),a.length)){var b=this.emit_childNodesModified;this.emit_childNodesModified=f;for(var d=0,h=a.length;d<h;d++)this.insertBefore(a[d]);this.emit_childNodesModified=
b;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(c){if(!this.childClass)throw 28;c=a.data.resolveDataset(this,this.setDataSource,c,"dataSourceAdapter_");if(this.dataSource!==c){var b=this.dataSource,f=this.listen.dataSource;b&&(this.dataSource=this.dataSourceMap_=null,f&&b.removeHandler(f,this));if(this.firstChild){if(b)for(var d=0,h;h=this.childNodes[d];d++)D(h);this.clear()}(this.dataSource=c)?(this.dataSourceMap_={},this.setChildNodesState(c.state,c.state.data),
f&&(c.addHandler(f,this),c.itemCount&&f.itemsChanged&&f.itemsChanged.call(this,c,{inserted:c.getItems()}))):this.setChildNodesState(aa.UNDEFINED);this.emit_dataSourceChanged(b)}},setGrouping:function(a,c){if("function"==typeof a||"string"==typeof a)a={rule:a};!1==a instanceof O&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var b=this.grouping,f;if(b){this.grouping=null;if(!a&&this.firstChild){f=this.sorting!==y?e(this):this.childNodes;b.nullGroup.clear();for(var d=
b.childNodes.slice(0),h=0;h<d.length;h++)d[h].clear();K(this,f)}b.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){f=this.sorting!==y?e(this):this.childNodes;for(h=0;d=f[h];h++)d.groupNode=this.grouping.getGroupNode(d,!0);for(h=0;d=f[h];h++)d.groupNode.nodes.push(d);f.length=0;for(h=this.grouping.nullGroup;h;h=h.nextSibling)d=h.nodes,h.first=d[0]||null,h.last=d[d.length-1]||null,f.push.apply(f,d),h.emit_childNodesModified({inserted:d});K(this,f)}this.emit_groupingChanged(b)}},
setSorting:function(a,c){a=k(a);c=!!c;if(this.sorting!==a||this.sortingDesc!=!!c){var b=this.sorting,f=this.sortingDesc;this.sorting=a;this.sortingDesc=!!c;if(a!==y&&this.firstChild){var d=[],h;for(h=this.firstChild;h;h=h.nextSibling)h.sortingValue=a(h)||0;if(this.grouping)for(var g=this.grouping.nullGroup;g;g=g.nextSibling)h=g.nodes=e({childNodes:g.nodes,sortingDesc:this.sortingDesc}),g.first=h[0]||null,g.last=h[h.length-1]||null,d.push.apply(d,h);else d=e(this);K(this,d)}this.emit_sortingChanged(b,
f)}},setMatchFunction:function(a){if(this.matchFunction!=a){var c=this.matchFunction;this.matchFunction=a;for(var b=this.lastChild;b;b=b.previousSibling)b.match(a);this.emit_matchFunctionChanged(c)}}},L=t(I,h,{className:n+".Node",emit_enable:q("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)M(a,!1);U.enable.call(this)},emit_disable:q("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)M(a,!0);U.disable.call(this)},emit_satelliteChanged:function(a,c){I.prototype.emit_satelliteChanged.call(this,
a,c);this.satellite[a]instanceof L&&M(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:q("select"),emit_unselect:q("unselect"),emit_match:q("match"),emit_unmatch:q("unmatch"),emit_matchFunctionChanged:q("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,contextDisabled:!1,listen:{owner:{enable:function(){M(this,!1)},disable:function(){M(this,!0)}}},init:function(){this.selection&&(!1==
this.selection instanceof ca&&(this.selection=new ka(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this));I.prototype.init.call(this);this.disabled&&this.emit_disable();this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(a){if(this.selection!==a)return S(this,this.selection||this.contextSelection,a||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=
a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},select:function(a){var c=this.selected,b=this.contextSelection;b?a?c?b.remove([this]):b.add([this]):this.selectable&&b.set([this]):!c&&this.selectable&&(this.selected=!0,this.emit_select());return this.selected!=c},unselect:function(){var a=this.selected;if(a){var c=this.contextSelection;c?c.remove([this]):(this.selected=!1,this.emit_unselect())}return this.selected!=a},setSelected:function(a,c){return a?this.select(c):this.unselect()},
enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.contextDisabled||this.emit_enable());return this.disabled!=a},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.contextDisabled||this.emit_disable());return this.disabled!=a},setDisabled:function(a){return a?this.disable():this.enable()},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=
!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect();this.contextSelection=null;this.selection&&this.setSelection();I.prototype.destroy.call(this)}}),O=t(I,h,{className:n+".GroupingNode",emit_childNodesModified:function(a){U.childNodesModified.call(this,a);this.nullGroup.nextSibling=this.firstChild;var c;if(c=a.inserted){a=0;for(var b;b=c[a++];)b.groupId_=b.delegate?b.delegate.basisObjectId:b.data.id,this.map_[b.groupId_]=b;if(this.dataSource&&
this.nullGroup.first)for(c=this.owner,b=P(this.nullGroup.nodes),a=b.length;0<a--;)c.insertBefore(b[a],b[a].nextSibling)}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);U.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:y,childClass:Z,childFactory:function(a){return new this.childClass(b({autoDestroyIfEmpty:this.dataSource?
!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new Z;I.prototype.init.call(this)},getGroupNode:function(a,c){var b=this.rule(a),f=b instanceof d,h=this.map_[f?b.basisObjectId:b];this.dataSource&&(c=!1);!h&&c&&(h=this.appendChild(f?b:{data:{id:b,title:b}}));return h||this.nullGroup},setDataSource:function(a){var c=this.dataSource;h.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==c)for(var c=P(a.childNodes),b=c.length-1;0<=b;b--)a.insertBefore(c[b],
c[b+1])},insertBefore:function(a,c){a=h.insertBefore.call(this,a,c);var b=a.first;if(b){for(var f=b.parentNode,d=a.last,k,e,g,l=null,w=a;(w=w.nextSibling)&&!(l=w.first););g=l?l.previousSibling:f.lastChild;k=b.previousSibling;e=d.nextSibling;if(e!==l){var C=f.childNodes,w=a.nodes,p=w.length;k&&(k.nextSibling=e);e&&(e.previousSibling=k);g&&(g.nextSibling=b);l&&(l.previousSibling=d);b.previousSibling=g;d.nextSibling=l;var d=C.indexOf(b),W=l?C.indexOf(l):C.length;W>d&&(W-=p);C.splice(d,p);C.splice.apply(C,
[W,0].concat(w));g&&k||(f.firstChild=C[0]);l&&e||(f.lastChild=C[C.length-1]);if(b instanceof Z)for(b=p;0<b--;)f.insertBefore(w[b],l),l=w[b]}}return a},removeChild:function(a){if(a=h.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var c=0,b;b=a.nodes[c];c++)b.parentNode.insertBefore(b)}return a},clear:function(a){var c=[],b=this.getGroupNode,f=this.nullGroup;this.getGroupNode=function(){return f};for(var d=this.firstChild;d;d=d.nextSibling)c.push.apply(c,d.nodes);for(var d=0,k;k=c[d];d++)k.parentNode.insertBefore(k);
this.getGroupNode=b;h.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;I.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});I.prototype.groupingClass=O;var ja={childNodesModified:function(a,c){var b=this.members_,f={},d,h=0,k=0,e=c.inserted,g=c.deleted;if(e&&e.length)for(f.inserted=e;d=e[h];)b[d.basisObjectId]=d,h++;if(g&&g.length)for(f.deleted=g;d=g[k];)delete b[d.basisObjectId],k++;(h||k)&&this.emit_itemsChanged(f)},destroy:function(){this.destroy()}},
da=t(ca,{className:n+".ChildNodesDataset",sourceNode:null,init:function(){ca.prototype.init.call(this);var a=this.sourceNode;X[a.basisObjectId]=this;a.firstChild&&ja.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(ja,this)},destroy:function(){this.sourceNode.removeHandler(ja,this);delete X[this.sourceNode.basisObjectId];ca.prototype.destroy.call(this)}}),ka=t(T,{className:n+".Selection",multiple:!1,emit_itemsChanged:function(a){T.prototype.emit_itemsChanged.call(this,a);if(a.inserted)for(var c=
0,b;b=a.inserted[c];c++)b.selected||(b.selected=!0,b.emit_select());if(a.deleted)for(c=0;b=a.deleted[c];c++)b.selected&&(b.selected=!1,b.emit_unselect())},add:function(a){if(!this.multiple){if(this.itemCount)return this.set(a);a=[a[0]]}for(var c=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&c.push(f);return T.prototype.add.call(this,c)},set:function(a){for(var c=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&c.push(f);this.multiple||c.splice(1);return T.prototype.set.call(this,
c)}});V.exports={DELEGATE:Y,AbstractNode:I,Node:L,GroupingNode:O,PartitionNode:Z,ChildNodesDataset:da,Selection:ka,nullSelection:new ca}},"6.js":function(n,V,a,q,H,v,E,Q){function G(c){"string"==typeof c&&(c=a.l10n.token(c));if(!c)return null;var b=c.basisObjectId,f=da[b];f||(f=da[b]=new J(new ka(c)));return f}function F(){return"i"+a.genUID()+"__"}function z(a,c){function b(c){m>k&&(f.push((c||"")+a.substring(k,m)),k=m)}var f=[],d=a.split(""),h=d.length,k=0,e=!1,C;c||(c=F());for(var m=0;m<h;m++)switch(d[m]){case "'":case '"':for(C=
d[m];++m<h;)if("\\"==d[m])m++;else if(d[m]==C){m++;break}break;case "/":if("*"==d[m+1])for(m++;++m<h;)if("*"==d[m]&&"/"==d[m+1]){m+=2;break}break;case "{":e=!0;break;case "}":e=!1;break;case ".":if(!e)for(m++,b();++m<h;)if(!/[a-z0-9\-\_]/.test(d[m])){b(c);m-=1;break}}b();return f.join("")}function D(c){c=a.resource(c).fetch();"function"==typeof c.startUse&&c.startUse()}function x(c){c=a.resource(c).fetch();"function"==typeof c.stopUse&&c.stopUse()}function l(){this.destroyBuilder&&p.call(this);for(var a=
0,c;c=this.attaches_[a];a++)c.handler.call(c.context)}function g(a){for(var c=[],b=0;b<a.length;b++)c.push(Array.isArray(a[b])?g(a[b]):a[b]);return c}function e(c,b,f,d){var h=c,k;"function"==typeof h&&(b="baseURI"in c?c.baseURI:b,k="url"in c?c.url:k,h=h());h instanceof a.Token&&(b="baseURI"in c?c.baseURI:b,k="url"in c?c.url:k,h=h.get());Array.isArray(h)?(f&&(h=g(h)),h={tokens:h}):"object"==typeof h&&Array.isArray(h.tokens)||(h=String(h));"string"==typeof h&&(h=m(h,b,d,k,c));return h}function p(){var a=
e(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),c=this.destroyBuilder,b=this.builder(a.tokens,this),f=this.deps_;if(f){this.deps_=null;for(var d=0,h;h=f[d];d++)h.bindingBridge.detach(h,p,this)}if(a.deps&&a.deps.length)for(this.deps_=f=a.deps,d=0;h=f[d];d++)h.bindingBridge.attach(h,p,this);this.createInstance=b.createInstance;this.clearInstance=b.destroyInstance;this.getBinding=function(){return{names:b.keys}};this.destroyBuilder=b.destroy;if(a=a.resources&&0<a.resources.length?a.resources:
null)for(d=0;f=a[d];d++)D(f);if(this.resources)for(d=0;f=this.resources[d];d++)x(f);this.resources=a;c&&c(!0)}function S(a){var c=s[a];c||(c=s[a]=function(){var c;c=S(a);if(c.template)c=c.template;else{var b=document.getElementById(a),r="";b&&"SCRIPT"==b.tagName&&"text/basis-template"==b.type&&(r=b.textContent||b.text);c=c.template=new J(r)}return c.source});return c}function M(){var c=a.array(arguments).join("."),b=$[c];b||(b=new na("",c),$[c]=b);return b}function u(a,c){for(var b=[],f={},d=[],h=
0;h<c.length;h++)f[c[h]]||(f[c[h]]=!0,d.push(c[h]));b.source=d.join("/");f={base:!0};for(d=0;d<c.length;d++)h=c[d]||"base",h==a||f[h]||(A(h),f[h]=!0,b.push(h),c.splice.apply(c,[d+1,0].concat(ia[h].fallback)));b.unshift(a);"base"!=a&&b.push("base");b.value=b.join("/");return b}function K(a,c){for(var b=ia[a].sourcesList,f=0,d;d=b[f];f++)if(d.hasOwnProperty(c))return d[c];return""}function A(c){c||(c="base");if(ia[c])return ia[c].theme;if(!/^([a-z0-9\_\-]+)$/.test(c))throw 31;var b={},f=[b],d=new ma;
ia[c]={theme:d,sources:b,sourcesList:f,fallback:[]};var h=function(a,f){!1==a in b&&(b[a]=f,-1!=ia[C].fallback.indexOf(c)&&M(a).set());return M(a)};a.object.extend(d,{name:c,fallback:function(a){if(d!==ga&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],f={},b=u(c,b);if(ia[c].fallback.source!=b.source){ia[c].fallback.source=b.source;for(var r in ia){var h=ia[r].fallback,b=u(r,(h.source||"").split("/"));if(b.value!=h.value){f[r]=!0;ia[r].fallback=b;h=ia[r].sourcesList;h.length=b.length;
for(var B=0;B<h.length;B++)h[B]=ia[b[B]].sources}}}for(r in f)if(-1!=ia[C].fallback.indexOf(r)){b=void 0;for(b in $)M(b).set();break}}b=ia[c].fallback.slice(1);b.source=ia[c].fallback.source;return b},define:function(a,c){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof c){var b=a,f=c,r={},B;for(B in f)f.hasOwnProperty(B)&&(r[B]=h(b+"."+B,f[B]));return r}return 1==arguments.length?M(a):h(a,c)}if("object"==typeof a){f=a;for(b in f)f.hasOwnProperty(b)&&h(b,f[b]);return d}},apply:function(){if(c!=
C){C=c;for(var a in $)M(a).set();a=0;for(var b;b=fa[a];a++)b.fn.call(b.context,c)}return d},getSource:function(a,f){return f?K(c,a):b[a]},drop:function(a){b.hasOwnProperty(a)&&(delete b[a],-1!=ia[C].fallback.indexOf(c)&&M(a).set())}});ia[c].fallback=u(c,[]);f.push(ia.base.sources);return d}a.require("./2.js");n=this.path;q=a.Class;var t=a.cleaner,b=a.path,P=a.array.search,N=a.array.add,f=a.array.remove,k=[],y={},U=/^event-(.+)$/,aa={4:"class",5:"style"},d={"class":4,style:5},ca={2:4,4:3,5:3,6:2},
T=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,Y=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,X=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,ea=/(.|[\r\n])*?--\x3e/g,c=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,w=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,I=/"((?:(\\")|[^"])*?)"\s*/g,Z=/^/g,h=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,L={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,
style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},O=/\\"/g,ja=function(a){var b=[],f=[],d={childs:b},k,e,C,m=!1,g=0,l,p=T,y=0,s;for(a=a.trim();y<a.length||p!=T;)if(k=p.lastIndex=y,(s=p.exec(a))&&s.index===y){y=p.lastIndex;switch(p){case T:l=k+s[1].length;g!=l&&(k=g==k?s[1]:a.substring(g,l),(e=k.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&d.childs.push({type:3,len:k.length,value:e}));g=l;s[3]?d.childs.push({type:3,refs:["l10n:"+s[3]],value:"{l10n:"+s[3]+"}"}):"{"==s[2]?(C=y-1,d.childs.push(e={type:3}),p=w):s[4]?
"/"==s[4]?(e=null,p=c):(d.childs.push(e={type:8}),s[5]?(C=y-s[5].length,p=w):(C=y,p=ea)):s[2]&&(m=!0,f.push(d),d.childs.push(e={type:1,attrs:[],childs:[]}),d=e,p=Y);break;case c:s[1]!==(d.prefix?d.prefix+":":"")+d.name?d.childs.push({type:3,value:"</"+s[0]}):d=f.pop();p=T;break;case Y:case X:if(":"==s[2]){e.prefix?p=Z:e.prefix=s[1];break}s[1]&&(e.name=s[1],2==e.type&&d.attrs.push(e));if("{"==s[2]){p=1==e.type?w:Z;break}if(s[3]){m=!1;if("/>"==s[3]||!d.prefix&&h.test(d.name))d=f.pop();else if("b"==
d.prefix&&d.name in L){p=L[d.name];break}p=T;break}if("="==s[2]){p=I;break}e={type:2};p=X;break;case ea:e.value=a.substring(C,y-3);p=T;break;case w:e.refs?e.refs.push(s[1]):e.refs=[s[1]];"|"!=s[2]&&(3==e.type?(y-=s[2].length-1,e.value=a.substring(C,y),p=T):8==e.type?p=ea:2==e.type&&"="==a[y]?(y++,p=I):(e={type:2},p=X));break;case I:e.value=s[1].replace(O,'"');e={type:2};p=X;break;case L.text:case L.style:d.childs.push({type:3,value:s[1]});d=f.pop();p=T;break;default:throw 29;}p==T&&(g=y)}else if(p==
w&&e&&8==e.type)p=ea;else{m&&(d=f.pop());e&&d.childs.pop();if(e=d.childs.pop())3!=e.type||e.refs?d.childs.push(e):g-="len"in e?e.len:e.value.length;m=!1;p=T}g!=y&&d.childs.push({type:3,value:a.substring(g,y)});b.templateTokens=!0;return b},da={},ka=a.Token.subclass({className:n+".L10nProxyToken",token:null,url:"",init:function(a){this.url=a.dictionary.resource.url+":"+a.name;this.token=a;this.set();a.attach(this.set,this)},set:function(){return a.Token.prototype.set.call(this,"markup"==this.token.type?
'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+'">'+String(this.token.value)+"</span>":"")},destroy:function(){a.Token.prototype.destroy.call(this);this.token=null}}),m=function(){function c(a){return(a.prefix?a.prefix+":":"")+a.name}function r(a,c){ga[c]||("#"==c.charAt(0)?ga[c]=String.fromCharCode("x"==c.charAt(1)||"X"==c.charAt(1)?parseInt(c.substr(2),16):c.substr(1)):O&&(O.innerHTML=a,ga[c]=O.firstChild?O.firstChild.nodeValue:a));return ga[c]||
a}function h(a){return(a=a.refs)&&a.length?a:0}function ba(a){for(var c,b=[],d=[],f={},h=0;h<a.length;h++)h%2?(c=a[h],f[c]||(f[c]=b.length,b.push(c)),d.push(f[c])):a[h]&&d.push(a[h].replace(Z,r));return[b,d]}function ha(a,c){var b=0,f,h;if(c)switch(a){case "class":if(f=c.match(L)){for(var k=[],b=[],B=0,e;e=f[B];B++)(h=e.match(q))?b.push([h[1]||"",h[2]]):k.push(e);c=k.join(" ")}break;case "style":k=[];b=[];if(f=c.match(u))for(B=0;e=f[B];B++)h=e.match(K),e=h[1],c=h[2].trim(),h=c.split(D),1<h.length?
(h=ba(h),h.push(e),b.push(h)):k.push(e+": "+c.replace(Z,r));(c=k.join("; "))&&(c+=";");break;default:f=c.split(n),1<f.length?b=ba(f):c=c.replace(Z,r)}b&&!b.length&&(b=0);return{binding:b,value:c,type:d[a]||2}}function C(a,b,f){var d=a.attrs;a=[];for(var r,k,e,g=0,l;l=d[g];g++)if("b"==l.prefix)switch(l.name){case "ref":l=(l.value||"").trim().split(/\s+/);for(e=0;e<l.length;e++)m(b,l[e]);break;case "show":case "hide":k=l}else if(e=l.name.match(U))a.push(e[1]==l.value?[6,e[1]]:[6,e[1],l.value]);else{e=
ha(l.name,l.value);var oa=[e.type,e.binding,h(l)];2==e.type&&oa.push(c(l));!e.value||f&&e.binding&&2==e.type||oa.push(e.value);5==e.type&&(r=oa);a.push(oa)}k&&(r||(r=[5,0,0],a.push(r)),r[1]||(r[1]=[]),b=ba((k.value||k.name).split(n)),b[0].length-b[1].length?r[3]=(r[3]?r[3]+"; ":"")+("show"==k.name^""===k.value?"":"display: none"):("show"==k.name&&(r[3]=(r[3]?r[3]+"; ":"")+"display: none"),r[1].push(b.concat("display",k.name))));return a.length?a:0}function m(a,c){a[2]||(a[2]=[]);N(a[2],c);"element"!=
c&&(a[1]=1==a[2].length?c:0)}function g(a,c){var b=a[2].indexOf(c);if(-1!=b){var f=a[1]&&"number"==typeof a[1];a[2].splice(b,1);f&&b==a[1]-1&&(a[1]=c);a[2].length?f&&(a[1]-=b<a[1]-1):a[2]=0}}function l(a){var b={};if(a.attrs)for(var f=0,d;d=a.attrs[f];f++)b[c(d)]=d.value;return b}function p(a,c){for(var b=0;b<c.length;b++)N(a,c[b])}function w(a,c,b){for(var f=0,d;d=c[f];f++)d[1]!==X&&(d[1]=b+d[1]);a.unshift.apply(a,c)}function s(c,f,d,r){d?f=b.resolve(c.baseURI+d):(f=f.childs[0],f=a.resource.virtual("css",
f?f.value:"",c.sourceUrl).url);c.resources.push([f,r]);return f}function y(ba,t,L,q){function u(a,c,b){var r=l(a);c&&(r.name=c);if(r.name&&x.test(r.name)){var h=H[r.ref||"element"];if(h&&1==h.token[0]){c=h.token;var k=(a=r.name.match(U))?6:d[r.name]||2,e=ca[k]||4,B=c&&P(c,r.name,function(a){return 6==a[0]?"event-"+a[1]:aa[a[0]]||a[3]},4);B||"remove"==b||(a?B=[k,a[1]]:(B=[k,0,0,2==k?r.name:""],2==k&&B.push("")),c||(c=[],h.token.push(c)),c.push(B));h="class"==r.name||"style"==r.name;switch(b){case "set":if(6==
B[0]){r.value==a[1]?B.length=2:B[e]=r.value;break}b=ha(r.name,r.value);B[1]=b.binding;L.optimizeSize&&B[1]&&!h?B.length=e:B[e]=b.value||"";if(h&&!B[1]&&!B[e]){f(c,B);break}break;case "append":b=ha(r.name,r.value);if(!a)if(b.binding)if(k=B[1])switch(r.name){case "style":for(var ba={},r=0,C;C=k[r];r++)ba[C[2]]=r;for(r=0;C=b.binding[r];r++)C[2]in ba?k[ba[C[2]]]=C:k.push(C);break;case "class":k.push.apply(k,b.binding);break;default:for(b.binding[0].forEach(function(a){N(this,a)},k[0]),r=0;r<b.binding[1].length;r++)ba=
b.binding[1][r],"number"==typeof ba&&(ba=k[0].indexOf(b.binding[0][ba])),k[1].push(ba)}else B[1]=b.binding,h||B[1][1].unshift(B[e]);else!h&&B[1]&&B[1][1].push(r.value);b.value&&(B[e]=(B[e]||"")+(B[e]&&(a||h)?" ":"")+b.value);if(h&&!B[1]&&!B[e]){f(c,B);break}break;case "remove":B&&f(c,B)}}}}for(var K=[],D=0,n,ga;n=ba[D];D++){var O=h(n),z=O&&1==O.length?O[0]:0;switch(n.type){case 1:if("b"==n.prefix){var J=l(n);switch(n.name){case "style":var $=J.namespace||J.ns,Y=$?X:q&&q.isolate||"";n=s(t,n,J.src,
Y);$&&(!1==n in X&&(X[n]=F()),t.styleNSPrefix[$]=X[n]);break;case "isolate":t.isolate||(t.isolate=J.prefix||L.isolate||F());break;case "l10n":J.src&&(t.dictURI=b.resolve(t.baseURI,J.src));break;case "define":if("name"in J&&!t.defines[J.name])switch(J.type){case "bool":t.defines[J.name]=["true"==J["default"]?1:0];break;case "enum":n=J.values?J.values.trim().split(" "):[],t.defines[J.name]=[n.indexOf(J["default"])+1,n]}break;case "text":n=n.childs[0];ba[D--]=a.object.extend(n,{refs:(J.ref||"").trim().split(/\s+/),
value:"notrim"in J?n.value:n.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case "include":if(O=J.src){var z=/^#\d+$/.test(O),T=/^id:/.test(O),O=z?O.substr(1):O,E;E=z?k[O]:T?S(O.substr(3)):/^[a-z0-9\.]+$/i.test(O)&&!/\.tmpl$/.test(O)?M(O):a.resource(b.resolve(t.baseURI+O));if(!E)continue;if(-1==da.indexOf(E)){O="isolate"in J?J.isolate||F():"";T||N(t.deps,E);z?(E.source.bindingBridge&&N(t.deps,E.source),z=e(E.source,E.baseURI,!0,L)):z=e(E,E.url?b.dirname(E.url)+"/":"",!0,L);z.resources&&!1=="no-style"in
J&&w(t.resources,z.resources,O);z.deps&&p(t.deps,z.deps);var H=A(z.tokens),T=(n.childs||[]).slice();E=a.object.slice(z.styleNSPrefix);J["class"]&&T.push({type:1,prefix:"b",name:"append-class",attrs:[{type:2,name:"value",value:J["class"]}]});J.id&&T.push({type:1,prefix:"b",name:"set-attr",attrs:[{type:2,name:"name",value:"id"},{type:2,name:"value",value:J.id}]});J.ref&&H.element&&J.ref.trim().split(/\s+/).map(function(a){m(H.element.token,a)});for(var J=0,R;R=T[J];J++)if(1==R.type&&"b"==R.prefix)switch(R.name){case "style":var v=
l(R),Y=($=v.namespace||v.ns)?X:O;n=s(t,R,v.src,Y);$&&(!1==n in X&&(X[n]=F()),E[$]=X[n]);break;case "replace":case "remove":case "before":case "after":n="replace"==R.name||"remove"==R.name;v=l(R);if($=($="ref"in v||!n?v.ref:"element")&&H[$])v=$.owner.indexOf($.token),-1!=v&&(n=[v+("after"==R.name),n],"remove"!=R.name&&(n=n.concat(y(R.childs,t,L)||[])),$.owner.splice.apply($.owner,n));break;case "prepend":case "append":v=l(R);(n=($=($="ref"in v?v.ref:"element")&&H[$])&&$.token)&&1==n[0]&&(v=y(R.childs,
t,L)||[],"prepend"==R.name?n.splice.apply(n,[4,0].concat(v)):n.push.apply(n,v));break;case "attr":case "set-attr":u(R,!1,"set");break;case "append-attr":u(R,!1,"append");break;case "remove-attr":u(R,!1,"remove");break;case "class":case "append-class":u(R,"class","append");break;case "set-class":u(R,"class","set");break;case "remove-class":u(R,"class","remove");break;case "add-ref":v=l(R);(n=($=($="ref"in v?v.ref:"element")&&H[$])&&$.token)&&v.name&&m(n,v.name);break;case "remove-ref":v=l(R),(n=($=
($="ref"in v?v.ref:"element")&&H[$])&&$.token)&&g(n,v.name||v.ref)}else z.tokens.push.apply(z.tokens,y([R],t,L)||[]);H.element&&g(H.element.token,"element");a.object.complete(t.styleNSPrefix,E);O?I(z.tokens,O):z.isolate&&!t.isolate&&(t.isolate=L.isolate||F());K.push.apply(K,z.tokens)}}}continue}ga=[1,z,O,c(n)];ga.push.apply(ga,C(n,ga,L.optimizeSize)||[]);ga.push.apply(ga,y(n.childs,t,L)||[]);break;case 3:O&&2==O.length&&P(O,"element")&&(z=O[+!O.lastSearchIndex]);if(z&&(T=fa(z,t.dictURI).split(/[:@\{]/),
"l10n"==T[0]&&3==T.length))if(T[2]){if(T=T.slice(1).join("@"),T=a.l10n.token(T),E=G(T),t.l10nResolved=!0,E&&"markup"==T.type){ba[D--]=ja('<b:include src="#'+E.templateId+'"/>')[0];continue}}else f(O,z),0==O.length&&(O=null),z=0,n.value=n.value.replace(/\}$/,"@undefined}");ga=[3,z,O];O&&n.value=="{"+O.join("|")+"}"||ga.push(n.value.replace(Z,r));break;case 8:if(L.optimizeSize&&!z&&!O)continue;ga=[8,z,O];L.optimizeSize||O&&n.value=="{"+O.join("|")+"}"||ga.push(n.value.replace(Z,r))}for(;0===ga[ga.length-
1];)ga.pop();K.push(ga)}return K.length?K:0}function fa(a,c){if("string"!=typeof a)return a;var b=a.split(":");2==b.length&&"l10n"==b[0]&&-1==b[1].indexOf("@")&&(b[1]=b[1]+"@"+c);return b.join(":")}function A(a,c,b,f){b||(b={});f=f||0;for(var d;d=a[f];f++)if(6!=d[0]){var r=d[2];if(r)for(var h=r.length-1,B;B=r[h];h--)-1!=B.indexOf(":")?g(d,B):(b[B]&&g(b[B].token,B),d[1]==B&&(d[1]=h+1),b[B]={owner:a,token:d});switch(d[0]){case 3:d[1]=fa(d[1],c);break;case 2:if(d[1])for(d=d[1][0],h=0;h<d.length;h++)d[h]=
fa(d[h],c);break;case 1:A(d,c,b,4)}}return b}function t(a,c,b,d){var f=0;d=d||0;for(var r;r=a[d];d++){var h=r[0];1==h&&(f+=t(r,c,b,4));if(4==h||2==h&&"class"==r[3]){var B=r[1],h=ca[h];if(B){for(var k=(r[h]||"").trim().split(" "),e=0,ba;ba=B[e];e++)if(!(2<ba.length)){var C=ba[1].split(":").pop(),ha=c.defines[C];ha?(ba.push.apply(ba,ha),ha.used=!0,ha[0]&&(1==ha.length?N(k,ba[0]+C):N(k,ba[0]+ha[1][ha[0]-1]))):f++}r[h]=k.join(" ");b.optimizeSize&&!r[h]&&(r.length=h)}}}return f}function I(a,c,b,d){function f(a){var d=
a.split(":");return 1==d.length?c+d[0]:b?d[0]?!1==d[0]in b.styleNSPrefix?a:b.styleNSPrefix[d[0]]+d[1]:d[1]:a}d=d||0;for(var r;r=a[d];d++){var h=r[0];1==h&&I(r,c,b,4);if(4==h||2==h&&"class"==r[3]){var B=r[1],h=ca[h];r[h]&&(r[h]=r[h].split(/\s+/).map(f).join(" "));if(B)for(r=0;h=B[r];r++)h[0]=f(h[0])}}}var x=/^[a-z_][a-z0-9_\-]*$/i,L=/(\S+)/g,q=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,u=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,K=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,
D=/\{([a-z_][a-z0-9_]*)\}/i,n=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,Z=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,ga=a.NODE_ENV?__nodejsRequire("./template/htmlentity.json"):{},O=a.NODE_ENV?null:document.createElement("div"),da=[],X={};return function(c,b,d,f,r){d=d||{};var h=[],B={sourceUrl:f,baseURI:b||"",tokens:null,resources:[],styleNSPrefix:{},deps:[],defines:{},unpredictable:!0,warns:h,isolate:!1};B.dictURI=f?a.path.resolve(f):b||"";B.dictURI&&
(b=a.path.extname(B.dictURI))&&".l10n"!=b&&(B.dictURI=B.dictURI.substr(0,B.dictURI.length-b.length)+".l10n");c.templateTokens||(c=ja(String(c)));c.warns&&h.push.apply(h,c.warns);da.push(!0!==r&&r||{});B.tokens=y(c,B,d);da.pop();B.tokens||(B.tokens=[[3,0,0,""]]);m(B.tokens[0],"element");A(B.tokens,B.dictURI);B.unpredictable=!!t(B.tokens,B,d);if(0==da.length){I(B.tokens,B.isolate||"",B);if(B.isolate)for(c=0;d=B.resources[c];c++)d[1]!==X&&(d[1]=B.isolate+d[1]);B.resources=B.resources.filter(function(c,
b,d){return!a.array.search(d,String(c),String,b+1)}).map(function(c){var b=c[0],d=c[1];d===X&&(d=X[b]);if(!d)return b;var f=a.resource.virtual("css","").ready(function(c){r();a.object.extend(c,{url:b+"?isolate-prefix="+d,baseURI:a.path.dirname(b)+"/"})}),r=a.resource(b).ready(function(a){a=z(a.cssText||"",d);f.update(a)});return f.url})}delete B.defines;delete B.l10nResolved;h.length||(B.warns=!1);return B}}(),s={},J=q(null,{className:n+".Template",__extend__:function(a){return a instanceof J?a:a instanceof
R?new la(a):new J(a)},source:"",baseURI:"",init:function(a){if(4096==k.length)throw 30;this.attaches_=[];this.setSource(a||"");this.templateId=k.push(this)-1},bindingBridge:{attach:function(a,c,b){for(var d=0,f;f=a.attaches_[d];d++)if(f.handler==c&&f.context==b)return;a.attaches_.push({handler:c,context:b})},detach:function(a,c,b){for(var d=0,f;f=a.attaches_[d];d++)if(f.handler==c&&f.context==b){a.attaches_.splice(d,1);break}},get:function(){}},createInstance:function(a,c,b,d,f){p.call(this);return this.createInstance(a,
c,b,d,f)},clearInstance:function(a){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},getBinding:function(a){p.call(this);return this.getBinding(a)},setSource:function(c){var d=this.source;if(d!=c){if("string"==typeof c){var h=c.match(/^([a-z]+):/);if(h){var k=h[1];c=c.substr(h[0].length);switch(k){case "file":c=a.resource(c);break;case "id":c=S(c);break;case "tokens":c=a.string.toObject(c);c.isDecl=!0;break;case "path":c=M(c)}}}if(d&&d.bindingBridge){if(h=d.url&&y[d.url])f(h,this),h.length||
delete y[d.url];this.baseURI="";this.source.bindingBridge.detach(d,l,this)}c&&c.bindingBridge&&(c.url&&(this.baseURI=b.dirname(c.url)+"/",y[c.url]||(y[c.url]=[]),N(y[c.url],this)),c.bindingBridge.attach(c,l,this));this.source=c;l.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder();this.source=this.resources=this.getBinding=this.createInstance=this.attaches_=null}}),R=function(c){a.object.extend(this,c)},la=a.Class(null,{className:n+".TemplateSwitcher",ruleRet_:null,templates_:null,
templateClass:J,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var c=0,b;b=a[c];c++)this.ruleEvents[b]=!0}t.add(this)},resolve:function(a){a=this.rule(a);var c=this.ruleRet_.indexOf(a);-1==c&&(this.ruleRet_.push(a),c=this.templates_.push(new this.templateClass(a))-1);return this.templates_[c]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),ma=q(null,{className:n+".Theme",get:M}),
na=q(a.Token,{className:n+".SourceWrapper",path:"",url:"",baseURI:"",init:function(c,b){this.path=b;a.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=K(C,this.path);this.value!=a&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,na.prototype.apply,this),this.url=(this.value=a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in
a?a.baseURI:b.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,na.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);a.Token.prototype.destroy.call(this)}}),ia={},$={},ga=A(),C="base",fa=[];t.add({destroy:function(){for(var a in $)$[a].destroy();$=ia=null;a=0;for(var c;c=k[a];a++)c.destroy();k=null}});V.exports={DECLARATION_VERSION:2,
TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:aa,ELEMENT_NAME:3,ELEMENT_ATTRS:4,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:ka,TemplateSwitchConfig:R,TemplateSwitcher:la,Template:J,SourceWrapper:na,switcher:function(c,b){var d=a.array(arguments);b=d.pop();return new R({rule:b,events:d.join(" ").trim().split(/\s+/)})},
tokenize:ja,isolateCss:z,getDeclFromSource:e,makeDeclaration:m,getL10nTemplate:G,Theme:ma,theme:A,getThemeList:function(){return a.object.keys(ia)},currentTheme:function(){return ia[C].theme},setTheme:function(a){return A(a).apply()},onThemeChange:function(a,c,b){fa.push({fn:a,context:c});b&&a.call(c,C)},define:ga.define,get:M,getPathList:function(){return a.object.keys($)}}},"7.js":function(n,V,a,q,H,v,E,Q){function G(c){c=a.template.getL10nTemplate(c);var b=c.templateId,d=ja[b];d||(d=ja[b]=new ka(c.source));
return d}function F(a){return function(c){if("click"!=c.type||3!=c.which){for(var b=X[c.type]||"mouseenter"!=c.type&&"mouseleave"!=c.type,d=c.sender,f;d;){f=d.getAttribute&&d.getAttribute(a);if(!b||"string"==typeof f)break;d=d.parentNode}if("string"==typeof f){var h=d,b=h,k,e;X[c.type]&&(k=c.relatedTarget)&&(h===k||h.contains(k))&&(h=null);for(;h;){k=h[aa];if("number"==typeof k&&(e=z(k)))break;h=h.parentNode}if(e&&e.action)for(f=f.trim().split(/\s+/),c.actionTarget=b,b=0;h=f[b++];)switch(h){case "prevent-default":c.preventDefault();
break;case "stop-propagation":c.stopPropagation();break;default:e.action.call(e.context,h,c)}}if(c.type in Y)Y[c.type](c,d)}}}function z(a){var c=ca[a&4095];return c&&c.instances[a>>12]}a.require("./8.js");a.require("./2.js");a.require("./6.js");a.require("./9.js");n=this.path;var D=q.document,x=a.dom.event,l=a.string.camelize,g=a.l10n.token,e=a.template.htmlfgen.getFunctions,p=a.template.TemplateSwitchConfig;H=a.template.TemplateSwitcher;v=a.template.Template;var S=a.template.TYPE_ELEMENT,M=a.template.TYPE_ATTRIBUTE,
u=a.template.TYPE_TEXT,K=a.template.TYPE_COMMENT,A=a.template.TOKEN_TYPE,t=a.template.TOKEN_BINDINGS,b=a.template.TOKEN_REFS,P=a.template.ATTR_NAME,N=a.template.ATTR_VALUE,f=a.template.ATTR_NAME_BY_TYPE,k=a.template.ELEMENT_NAME,y=a.template.TEXT_VALUE,U=a.template.COMMENT_VALUE,aa="basisTemplateId_"+a.genUID(),d={},ca={},T={svg:"http://www.w3.org/2000/svg"},Y={},X={},ea="onmouseenter"in D.documentElement,c=!D.addEventListener&&"__basisTemplate"+parseInt(1E9*Math.random());c&&(q[c]=function(a,c){x.fireEvent(D,
a);c.returnValue=!0;var b=d[a];b&&b(new x.Event(c))});var w=function(){var a=D.createElement("div");a.appendChild(D.createTextNode("a"));a.appendChild(D.createTextNode("a"));return 1==a.cloneNode(!0).childNodes.length}(),I=function(){var a=D.createElement("div");a.setAttribute("class","a");return!a.className}(),Z=function(){var a=D.createElement("div");a.setAttribute("style","position:absolute");return"absolute"!=a.style.position}(),h;a:{try{h=D.documentElement.style.color="x";break a}catch(L){}h=
void 0}var O=!!h;"undefined"==typeof Node||Node.prototype.contains||(Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)});var ja={},da=function(a,h){function e(a,c){m(c);X[a]=!0;Y[c]=function(c){c=new x.Event(c);c.type=a;d[a](c)};Y[a]=function(c,b){if(b=b&&b.parentNode)c=new x.Event(c),c.type=a,c.sender=b,d[a](c)}}function m(a){if(!d[a]&&(d[a]=F("event-"+a),!c)){if(!ea&&"mouseenter"==a)return e(a,"mouseover");if(!ea&&"mouseleave"==a)return e(a,"mouseout");for(var b=0,
f=x.browserEvents(a),h;h=f[b];b++)x.addGlobalHandler(h,d[a])}}function g(a,b){m(a);c&&p.setAttribute("on"+a,c+'("'+a+'",event)');p.setAttribute("event-"+a,b)}function l(a,c){I&&"class"==a&&(a="className");if(Z&&"style"==a)return p.style.cssText=c;p.setAttribute(a,c)}for(var p=h||D.createDocumentFragment(),L=h?4:0,n;n=a[L];L++)switch(n[A]){case S:var C=n[k],fa=C.split(/:/),C=1<fa.length?D.createElementNS(T[fa[0]],C):D.createElement(C);da(n,C);p.appendChild(C);break;case M:var C=n[P],fa=n[N],W=C.replace(/^event-/,
"");W!=C?g(W,fa):("class"!=C&&"style"!=C?!n[t]:fa)&&l(C,fa||"");break;case 4:case 5:(fa=n[N-1])&&l(f[n[A]],fa);break;case 6:g(n[1],n[2]||n[1]);break;case K:p.appendChild(D.createComment(n[U]||(n[b]?"{"+n[b].join("|")+"}":"")));break;case u:w&&L&&a[L-1][A]==u&&p.appendChild(D.createComment("")),p.appendChild(D.createTextNode(n[y]||(n[b]?"{"+n[b].join("|")+"}":"")||(n[t]?"{"+n[t]+"}":"")))}h||1!=a.length||(p=p.firstChild);return p};h=function(){function c(){this.set(this.name,this.value)}function b(d,
f,h){var k=f&&f.bindingBridge,e=this.attaches&&this.attaches[d],r=null;if(k||e)if(k){if(e&&f===e.value)r=f&&"markup"==f.type?e.tmpl:null;else{e&&(e.tmpl&&(e.tmpl.element.toString=null,G(e.value).clearInstance(e.tmpl)),e.value.bindingBridge.detach(e.value,c,e));if("markup"==f.type&&f instanceof a.l10n.Token){var B=G(f),ba=this.context,m=this.bindings,g=this.bindingInterface,r=B.createInstance(ba,null,function pa(){r=l.tmpl=B.createInstance(ba,null,pa,m,g);r.element.toString=function(){return f.value};
c.call(l)},m,g);r.element.toString=function(){return f.value}}this.attaches||(this.attaches=new h);var l=this.attaches[d]={name:d,value:f,tmpl:r,set:this.tmpl.set};k.attach(f,c,l)}if(r)return r.element;f=k.get(f)}else e&&(e.tmpl&&(e.tmpl.element.toString=null,G(e.value).clearInstance(e.tmpl)),e.value.bindingBridge.detach(e.value,c,e),this.attaches[d]=null);return f}function d(a,c){var b=a[0],f=a[1],h=c[b],r=c[f];switch(a.length){case 1:return function(a){this(b,h(a))};case 2:return function(a){this(b,
h(a));this(f,r(a))};default:var e=a.map(function(a){return c[a]});return function(c){for(var b=0;b<a.length;b++)this(a[b],e[b](c))}}}var f=/\s+/,h="function"==typeof Node&&D instanceof Node?function(a,c,b){a=b&&b instanceof Node?b:a;a!==c&&c.parentNode.replaceChild(a,c);return a}:function(a,c,b){b=b&&"object"==typeof b?b:a;if(b!==c)try{c.parentNode.replaceChild(b,c)}catch(d){b=a,c!==b&&c.parentNode.replaceChild(b,c)}return b},k=function(a,c,b,d){b!==d&&(d?a.setAttribute(c,d):a.removeAttribute(c));
return d},m={bind_textNode:function(a,c,b){c=h(a,c,b);c===a&&(a.nodeValue=b);return c},bind_node:h,bind_element:function(a,c,b){c=h(a,c,b);c===a&&"string"==typeof b&&(a.innerHTML=b);return c},bind_comment:h,bind_attr:k,bind_attrClass:q.DOMTokenList&&D&&D.documentElement.classList instanceof q.DOMTokenList?function(c,b,d,f,h){var r=d?f+d:"";r!=b&&(b&&c.classList.remove(b),r&&(c.classList.add(r),h&&(c.classList.add(r+"-anim"),a.nextTick(function(){c.classList.remove(r+"-anim")}))));return r}:function(c,
b,d,h,e){var r=d?h+d:"";if(r!=b){d=c.className;var k="string"!=typeof d;k&&(d=d.baseVal);d=d.split(f);b&&a.array.remove(d,b);r&&(d.push(r),e&&(a.array.add(d,r+"-anim"),a.nextTick(function(){var b=(k?c.className.baseVal:c.className).split(f);a.array.remove(b,r+"-anim");k?c.className.baseVal=b.join(" "):c.className=b.join(" ")})));k?c.className.baseVal=d.join(" "):c.className=d.join(" ")}return r},bind_attrStyle:O?function(a,c,b,d){b!==d&&(a.style[l(c)]=d);return d}:function(a,c,b,d){if(b!==d)try{a.style[l(c)]=
d}catch(f){}return d},resolve:b,l10nToken:g,createBindingFunction:function(a){var c={};return function(b,f,h,r){if(!b)return{};var e="bindingId"in b?b.bindingId:null,k=c[e];if(!k){for(var k=[],m={},g={},l=0,p;p=a[l];l++){var w=b[p],y=w&&w.getter;if(y&&(m[p]=y,k.push(p),w.events))for(var w=String(w.events).trim().split(/\s+|\s*,\s*/),y=0,t;t=w[y];y++)g[t]?g[t].push(p):g[t]=[p]}b=d(k,m);for(var s in g)g[s]=d(g[s],m);k={names:k,sync:b,handler:s?g:null};e&&(c[e]=k)}f&&h&&k.sync.call(h,f);if(r)return k.handler&&
r.attach(f,k.handler,h),k.handler}}};return function(a){var c=e(a,!0,this.source.url,a.source_,!w,aa),d,f={},h={},r=[],B=0,ba=da(a),ha=this.templateId;ca[ha]={template:this,instances:f};if(c.createL10nSync){var l=c.createL10nSync(ba,h,k,w);a=0;for(var p;p=c.l10nKeys[a];a++)l(p,g(p).value);if(c.l10nKeys)for(a=0;p=c.l10nKeys[a];a++)p={path:p,token:g(p),handler:function(a){l(this.path,a);for(var c in f)f[c].tmpl.set(this.path,a)}},p.token.attach(p.handler,p),r.push(p),p=null}d=c.createInstance(ha,f,
ba,m,h,w);return{createInstance:function(a,c,b,h,r){var k=B++;a=d(k,a,c,b,h,r);f[k]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var c=f[a];if(c){c.handler&&c.bindingInterface.detach(c.context,c.handler,c.tmpl.set);for(var d in c.attaches)b.call(c,d,null);delete f[a]}},keys:c.keys,destroy:function(a){for(var d=0,k;k=r[d];d++)k.token.detach(k.handler,k);for(var e in f)if(d=f[e],a&&d.rebuild&&d.rebuild.call(d.context),!a||e in f)for(e in d.handler&&d.bindingInterface.detach(d.context,
d.handler,d.tmpl.set),d.attaches)b.call(e,null);ca[ha]&&ca[ha].instances===f&&delete ca[ha];f=l=r=h=ba=c=null}}}}();var ka=v.subclass({className:n+".Template",__extend__:function(a){return a instanceof ka?a:a instanceof p?new m(a):new ka(a)},builder:h}),m=H.subclass({className:n+".TemplateSwitcher",templateClass:ka});V.exports={marker:aa,Template:ka,TemplateSwitcher:m};a.template.extend({buildHtml:da,resolveTemplateById:function(a){return(a=ca[a&4095])&&a.template},resolveObjectById:function(a){return(a=
z(a))&&a.context},resolveTmplById:function(a){return(a=z(a))&&a.tmpl}})},"8.js":function(n,V,a,q,H,v,E,Q){function G(a){return a instanceof ea?a.event_:a||q.event}function F(a){return"string"==typeof a?y.getElementById(a):a}function z(a){a=a.target||a.srcElement||y;return 3==a.nodeType?a.parentNode:a}function D(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function x(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function l(a,c){(c=F(c))?P(c,a,l):(x(a),D(a))}function g(a){return a.keyCode||
a.which||0}function e(a){return a.charCode||a.keyCode||0}function p(a,c){return"number"==typeof a.which?a.which==c.VALUE:!!(a.button&c.BIT)}function S(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==y.compatMode?y.documentElement.scrollLeft:y.body.scrollLeft):0}function M(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==y.compatMode?y.documentElement.scrollTop:y.body.scrollTop):
0}function u(a){var c=0;"wheelDelta"in a?c=a.wheelDelta:"DOMMouseScroll"==a.type&&(c=-a.detail);return c&&c/Math.abs(c)}function K(a){var b=aa(c[a.type]),d=w[a.type],f=new ea(a);if(d)d.handler.call(d.thisObject,f),l(a);else if(b)for(a=b.length;0<a--;)d=b[a],d.handler.call(d.thisObject,f)}function A(a){var c=w[a];c&&(b(a,c.handler,c.thisObject),delete w[a])}function t(a,b,d){var f=c[a];if(f){a=0;for(var k;k=f[a];a++)if(k.handler===b&&k.thisObject===d)return}else I?P(y,a,U):y.addEventListener(a,K,!0),
f=c[a]=[];f.push({handler:b,thisObject:d})}function b(a,b,d){var f=c[a];if(f)for(var k=0,e;e=f[k];k++)if(e.handler===b&&e.thisObject===d){f.splice(k,1);f.length||(delete c[a],I?N(y,a,U):y.removeEventListener(a,K,!0));break}}function P(a,b,f,k){a=F(a);if(!a)throw 32;if("function"!=typeof f)throw 33;a.__basisEvents||(a.__basisEvents={});var e={handler:f,thisObject:k},g=a.__basisEvents,m=g[b];if(m){for(a=0;g=m[a];a++)if(g.handler===f&&g.thisObject===k)return;m.push(e)}else m=g[b]=[e],m.fireEvent=function(a){a=
G(a);if(I&&a&&c[b]&&"undefined"==typeof a.returnValue){K(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var d=0;a=new ea(a);for(var f;f=m[d++];)f.handler.call(f.thisObject,a)},d?a.addEventListener(b,m.fireEvent,!1):a.attachEvent("on"+b,m.fireEvent)}function N(a,c,b,d){a=F(a);var k=a.__basisEvents;if(k&&(k=k[c]))for(var e=0,m;m=k[e];e++)if(m.handler===b&&m.thisObject===d){k.splice(e,1);k.length||f(a,c);break}}function f(a,c){a=F(a);var b=a.__basisEvents;if(b)if("string"!=
typeof c)for(c in b)f(a,c);else{var d=b[c];d&&(a.removeEventListener?a.removeEventListener(c,d.fireEvent,!1):a.detachEvent("on"+c,d.fireEvent),delete b[c])}}function k(a){return function(c,b){return a(G(c),b)}}var y=q.document,U=a.fn.$null,aa=a.array.from,d=!!y.addEventListener;n={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,
F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var ca={VALUE:1,BIT:1},T={VALUE:2,BIT:4},Y={VALUE:3,BIT:2},X={mousewheel:["mousewheel","DOMMouseScroll"]},ea=a.Class(null,{className:this.path+".Event",KEY:n,init:function(c){c=G(c);for(var b in c)"function"!=typeof c[b]&&!1==b in this&&(this[b]=c[b]);b=z(c);a.object.extend(this,{event_:c,sender:b,target:b,key:g(c),charCode:e(c),mouseLeft:p(c,ca),mouseMiddle:p(c,T),mouseRight:p(c,Y),mouseX:S(c),mouseY:M(c),wheelDelta:u(c)})},stopBubble:function(){D(this.event_)},
stopPropagation:function(){D(this.event_)},preventDefault:function(){x(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),c={},w={},I=!d,Z={};V.exports={W3CSUPPORT:d,browserEvents:function(a){return X[a]||[a]},getEventInfo:function(a,c){c||(c="div");var b=c+"-"+a;if(Z[b])return Z[b];var f=!1,k=!1;if(!d){var e="on"+a,m=y.createElement("div"),g=m.appendChild(y.createElement(c));m[e]=function(){k=!0};try{g.fireEvent(e),f=!0}catch(l){}}return Z[b]={supported:f,bubble:k}},KEY:n,MOUSE_LEFT:ca,
MOUSE_RIGHT:Y,MOUSE_MIDDLE:T,Event:ea,sender:k(z),cancelBubble:k(D),cancelDefault:k(x),kill:k(l),key:k(g),charCode:k(e),mouseButton:k(p),mouseX:k(S),mouseY:k(M),wheelDelta:k(u),addGlobalHandler:t,removeGlobalHandler:b,captureEvent:function(a,c,b){w[a]&&A(a);t(a,c,b);w[a]={handler:c,thisObject:b}},releaseEvent:A,addHandler:P,addHandlers:function(a,c,b){a=F(a);for(var d in c)P(a,d,c[d],b)},removeHandler:N,clearHandlers:f,fireEvent:function(a,c,b){a=F(a);(a=a.__basisEvents)&&a[c]&&a[c].fireEvent(b)},
onUnload:function(a,c){P(q,"unload",a,c)},wrap:G}},"9.js":function(n,V,a,q,H,v,E,Q){function G(a,e){return new Function(a,e)}a.require("./6.js");var F=a.template.TYPE_ELEMENT,z=a.template.TYPE_ATTRIBUTE,D=a.template.TYPE_TEXT,x=a.template.TYPE_COMMENT,l=a.template.TOKEN_TYPE,g=a.template.TOKEN_BINDINGS,e=a.template.TOKEN_REFS,p=a.template.ATTR_NAME,S=a.template.ATTR_NAME_BY_TYPE,M=a.template.ELEMENT_NAME,u=a.template.ELEMENT_ATTRS,K={},A=function(){function a(b,d){for(var f=0,k;k=b[f];f++)-1==k.indexOf(":")&&
y.push(k+":"+d)}function t(a){var b=k.length,b=f[b]||"r"+b;k.push(b+"="+a);return b}function n(f,y,z,G){for(var c,w,I,Z,h=0,L=0,O=0,E;E=f[h];h++,L++,Z=!1){h?f[h+1]?(E[l]==f[h-1][l]&&E[l]==D&&O++,c=y+".childNodes["+(z?L:L+(O?" + "+O+" * TEXT_BUG":""))+"]"):c=y+".lastChild":c=y+".firstChild";if(w=E[e])Z=!0,c=t(c),a(w,c);E[g]&&(E[g]&&"number"==typeof E[g]&&(E[g]=E[e][E[g]-1]),Z||(Z=!0,c=t(c)),A.push([E[l],c,E[g]]));if(E[l]==F){I=-1;y==d&&q.push(c+"."+G);Z||(c=t(c),I=k.length);for(var v=[],H=[],m=u,s;s=
E[m];m++)s[l]==F||s[l]==D||s[l]==x?H.push(s):v.push(s);for(var m=0,J;J=v[m];m++)if(6!=J[l]){s=S[J[l]]||J[p];if(w=J[e])Z=!0,a(w,t(c+'.getAttributeNode("'+s+'")'));if(w=J[g])switch(Z=!0,s){case "class":J=0;for(var R;R=w[J];J++)R=[2,c,R[1],s,R[0]].concat(R.slice(2)),A.push(R);break;case "style":for(J=0;R=w[J];J++){K++;for(var Q=0,V;V=R[0][Q];Q++)A.push([2,c,V,s,R[0],R[1],R[2],R[3],K])}break;default:for(K++,J=0;V=w[0][J];J++)A.push([2,c,V,s,w[0],w[1],E[M],K])}}H.length&&n(H,c,z);Z||I!=k.length||k.pop()}}}
var f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),k,y,A,q,d,K;return function(a,b,f,e){k=[];y=[];A=[];q=[];d=b||"_";K=0;n(a,d,f,e);return{path:k,ref:y,binding:A,markedElementList:q}}}(),t=function(){function b(a,b,f){var d=[],k=a[5];a=a[4];for(var g,l,p=0;p<k.length;p++)if("string"==typeof k[p])d.push('"'+k[p].replace(/"/g,'\\"')+'"');else if(g=a[k[p]],l=g.indexOf(":"),-1==l)d.push("l10n"==b?'"{'+g+'}"':"bool"==b?"(__"+g+'||"")':"__"+g);else{var t=null,c=g.substr(l+1).replace(e,
function(a,c){t=c;return""});t?d.push(f[g.substr(l+1)]):d.push('__l10n["'+c+'"]')}1==d.length&&d.push('""');return d.join("+")}var e=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,g={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},f={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},k={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(l){function t(c){E[c]=
!0;d.push(A+"="+c+"("+a.array(arguments,1)+");")}for(var n={},d,A,x=[],q=[],u,K,c=[],w={},I=1,M,h,S={},E={resolve:!0},G=0,v;v=l[G];G++){M=v[0];var H=v[1],m=v[2];if(-1==["get","set","templateId_"].indexOf(m)){var s=m.split(":");(h="anim"==s[0])&&(m=s[1]);d=n[m];A="_"+G;u="__"+m;if("l10n"==s[0]&&s[1]){var s=s[1],J=null,R=s.replace(e,function(a,c){J=c;return""});if(J){!1==s in w&&(u="$l10n_"+I++,w[s]=u,c.push('set("'+u+'",'+u+")"),x.push(u+'=tools.l10nToken("'+R+'").computeToken()'),d=n[J],d||(d=n[J]=
[],x.push("__"+J)),d.push(u+".set(__"+J+");"));m=w[s];A="_"+G;u="__"+m;d=n[m];d||(d=n[m]=[],x.push(u));M==D?(x.push(A+"="+H),t(k[M],H,A,"value")):(u='"'+v[p]+'"',x.push(A),t("bind_attr",H,u,A,b(v,!1,w)));continue}K||(K={});n[R]||(n[R]=[],K[R]=[]);d=n[R];d.l10n=!0;if(M==D){K[R].push(H+".nodeValue=value;");d.push(H+'.nodeValue=__l10n["'+R+'"]'+(J?"[__"+J+"]":"")+";");continue}else K[R].push("bind_attr("+[H,'"'+v[p]+'"',"NaN",b(v,"l10n",w)]+");")}d||(d=n[m]=[],x.push(u));if(M!=z)if(d.nodeBind)switch(M){case F:t(k[M],
H,H,"value!==null?String(value):null");break;case D:d.push(H+".nodeValue=value;")}else x.push(A+"="+H),t(k[M],H,A,"value"),d.nodeBind=A;else switch(u=v[p],u){case "class":u="";s="value";M=v[4];s=v.length;if(6<=s)if(6==s||"string"==typeof v[6])6==s?(s='value?"'+m+'":""',v[5]&&(u=M+m)):(M="",s='value?"'+v[6]+'":""',v[5]&&(u=v[6]));else{if(!v[6].length)continue;7==s?(s=v[6].map(function(a){return'value=="'+a+'"'}).join("||")+'?value:""',v[5]&&(u=M+v[6][v[5]-1])):(M="",s=v[6].map(function(a,c){return'value=="'+
a+'"?"'+this[c]+'"'},v[7]).join(":")+':""',v[5]&&(u=v[7][v[5]-1]))}else s='typeof value=="string"||typeof value=="number"?value:(value?"'+m+'":"")';x.push(A+'="'+u+'"');t("bind_attrClass",H,A,s,'"'+M+'"',h);break;case "style":u=b(v,!1,w);h=v[8];S[h]||(S[h]=A,x.push(A+"="+("hide"==v[7]?'""':'"none"')));v[7]&&(u=u.replace(/\+""$/,"")+("hide"==v[7]?'?"none":""':'?"":"none"'));A=S[h];t("bind_attrStyle",H,'"'+v[6]+'"',A,u);break;default:M=g[u],h=v[7],S[h]||(x.push(A+"="+b(v,"l10n",w)),S[h]=A),A=S[h],t("bind_attr",
H,'"'+u+'"',A,M&&f[u]?b(v,"bool",w)+'?"'+u+'":""':b(v,!1,w)),!M||"*"!=M&&-1==M.indexOf(v[6].toLowerCase())||d.push("if("+H+"."+u+"!="+A+")"+H+"."+u+"="+(f[u]?"!!"+A:A)+";")}}}q.push(';function set(bindName,value){if(typeof bindName!="string")');for(m in n)n[m].nodeBind&&q.push("if(bindName==="+n[m].nodeBind+')bindName="'+m+'";else ');q.push("return;");q.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(m in n)q.push('case"'+m+'":'+(n[m].l10n?n[m].join(""):"if(__"+
m+"!==value){__"+m+"=value;"+n[m].join("")+"}")+"break;");q.push("}}");l=[];for(var Q in E)l.push(Q+"=tools."+Q);return{keys:a.object.keys(n).filter(function(a){return-1==a.indexOf("@")}),tools:l,vars:x,set:q.join(""),l10n:K,l10nCompute:c}}}();V.exports={getFunctions:function(b,e,g,f,k,l){if(e=K[g&&a.path.relative(g)])return e;k=A(b,"_",k,l);l=t(k.binding);e=k.markedElementList.join("=");g={keys:l.keys,l10nKeys:a.object.keys(l.l10n)};1==b.length&&(k.path[0]="a=_");if(l.l10n){b=[];for(var p in l.l10n)b.push('case"'+
p+'":if(value==null)value="{'+p+'}";__l10n[token]=value;'+l.l10n[p].join("")+"break;");g.createL10nSync=G(["_","__l10n","bind_attr","TEXT_BUG"],"var "+k.path+";return function(token, value){switch(token){"+b.join("")+"}}")}g.createInstance=G("tid map proto tools __l10n TEXT_BUG".split(" "),"var getBindings=tools.createBindingFunction(["+l.keys.map(function(a){return'"'+a+'"'})+"]),"+(l.tools.length?l.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+l.keys.map(function(a){return a+":null"})+
"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=proto.cloneNode(true),"+k.path.concat(l.vars)+",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[k.ref,"templateId_:id","set:set"]+"}}"+(e?";if(obj||onAction)"+e+"=(id<<12)|tid":"")+l.set+";if(bindings)instance.handler=getBindings(bindings,obj,set,bindingInterface);"+l.l10nCompute+";return instance}");return g}}},
"a.js":function(n,V,a,q,H,v,E,Q){function G(a){return"string"==typeof a?x.getElementById(a):a}function F(a){if(!b&&!this.ignoreTarget(a.sender,a)){var k=K(a.sender);a.mouseX<k.left||a.mouseX>k.right||a.mouseY<k.top||a.mouseY>k.bottom||(b=this,P={initX:a.mouseX,initY:a.mouseY,deltaX:0,minDeltaX:-Infinity,maxDeltaX:Infinity,deltaY:0,minDeltaY:-Infinity,maxDeltaY:Infinity},e("mousemove",z),e("mouseup",D),e("mousedown",D),A&&e("selectstart",g.kill),a.preventDefault(),this.prepareDrag(P,a))}}function z(f){var k=
f.mouseX-P.initX,e=f.mouseY-P.initY;if(!t){if(!b.startRule(k,e))return;t=!0;b.emit_start(P,f)}b.axisX&&(P.deltaX=b.axisXproxy(a.number.fit(k,P.minDeltaX,P.maxDeltaX)));b.axisY&&(P.deltaY=b.axisYproxy(a.number.fit(e,P.minDeltaY,P.maxDeltaY)));b.emit_drag(P,f)}function D(a){p("mousemove",z);p("mouseup",D);p("mousedown",D);A&&p("selectstart",g.kill);var k=b,e=P;P=b=null;t&&(t=!1,k.emit_over(e,a));a.die()}a.require("./3.js");a.require("./8.js");a.require("./b.js");a.require("./c.js");n=this.path;var x=
q.document,l=a.cleaner,g=a.dom.event,e=g.addGlobalHandler,p=g.removeGlobalHandler,S=a.event.Emitter;q=a.event.create;var M=a.dom.computedStyle.get,u=a.layout.getBoundingRect,K=a.layout.getViewportRect,A=g.getEventInfo("selectstart").supported,t,b,P,N=S.subclass({className:n+".DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:a.fn.$self,axisYproxy:a.fn.$self,prepareDrag:a.fn.$undef,startRule:a.fn.$true,ignoreTarget:function(a,b){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(a.tagName)},
emit_start:q("start"),emit_drag:q("drag"),emit_over:q("over"),init:function(){S.prototype.init.call(this);var a=this.element,b=this.trigger;this.trigger=this.element=null;this.setElement(a,b);this.setBase(this.baseElement);l.add(this)},setElement:function(a,b){this.element=G(a);b=G(b)||this.element;this.trigger!==b&&(this.trigger&&g.removeHandler(this.trigger,"mousedown",F,this),(this.trigger=b)&&g.addHandler(this.trigger,"mousedown",F,this))},setBase:function(a){this.baseElement=G(a)},getBase:function(){return this.baseElement||
("CSS1Compat"==x.compatMode?x.documentElement:x.body)},isDragging:function(){return b===this},start:function(a){this.isDragging()||F.call(this,a)},stop:function(){this.isDragging()&&D()},destroy:function(){this.stop();l.remove(this);S.prototype.destroy.call(this);this.setElement();this.setBase()}});q=a.Class(null,{className:n+".DeltaWriter",property:null,invert:!1,format:a.fn.$self,init:function(a){"function"==typeof this.property&&(this.property=this.property(a));"function"==typeof this.invert&&
(this.invert=this.invert(this.property));this.value=this.read(a)},read:function(){return element[this.property]},write:function(a,b){a[this.property]=b},applyDelta:function(a,b){this.invert&&(b=-b);this.write(a,this.format(this.value+b,b))}});H=q.subclass({className:n+".StyleDeltaWriter",format:function(a,b){return a+"px"},read:function(a){return parseFloat(M(a,this.property))},write:function(a,b){a.style[this.property]=b}});v=H.subclass({property:function(a){return"auto"==M(a,"left")?"right":"left"},
invert:function(a){return"left"!=a}});E=H.subclass({property:function(a){return"auto"==M(a,"top")?"bottom":"top"},invert:function(a){return"top"!=a}});n=N.subclass({className:n+".MoveableElement",fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:v,axisY:E,emit_start:function(a,b){var e=this.element;if(e){var g=K(this.getBase()),l=u(e);a.element=e;this.axisX&&(a.axisX=new this.axisX(e),this.fixLeft&&(a.minDeltaX=g.left-l.left),this.fixRight&&(a.maxDeltaX=g.right-l.right));this.axisY&&(a.axisY=new this.axisY(e),
this.fixTop&&(a.minDeltaY=g.top-l.top),this.fixBottom&&(a.maxDeltaY=g.bottom-l.bottom))}N.prototype.emit_start.call(this,a,b)},emit_drag:function(a,b){a.element&&(a.axisX&&a.axisX.applyDelta(a.element,a.deltaX),a.axisY&&a.axisY.applyDelta(a.element,a.deltaY),N.prototype.emit_drag.call(this,a,b))}});V.exports={DragDropElement:N,MoveableElement:n,DeltaWriter:q,StyleDeltaWriter:H}},"b.js":function(n,V,a,q,H,v,E,Q){var G=q.document;if("getComputedStyle"in q){var F={top:!0,bottom:!0,left:!0,right:!0,height:!0,
width:!0},z=a.fn.runOnce(function(){var l=G.createElement("div");l.setAttribute("style","position:absolute;top:auto!important");a.doc.body.add(l);"auto"==q.getComputedStyle(l).top&&(F={});a.doc.remove(l)});n=function(a,g){var e=q.getComputedStyle(a);if(e){g in F&&z();if(F[g]&&"static"!=e.position){var p=a.style.display;a.style.display="none";e=e.getPropertyValue(g);a.style.display=p}else e=e.getPropertyValue(g);return e}}}else{var D=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,x=/\dpx$/i;n=function(l,g){var e=l.currentStyle;
if(e){var e=e["float"==g?"styleFloat":a.string.camelize(g)],p=(e||"").match(D);if(p&&p[2]&&"px"!=p[2])if(x.test(e))e=parseInt(e,10)+"px";else{var p=l.style,n=l.runtimeStyle,q=p.left,u=n.left;n.left=l.currentStyle.left;p.left=e||0;e=p.pixelLeft;p.left=q;n.left=u;e+="px"}return e}}}V.exports={get:n}},"c.js":function(n,V,a,q,H,v,E,Q){function G(a){var g=0,e=0;if(a&&a.getBoundingClientRect)a=a.getBoundingClientRect(),e=-a.left,g=-a.top;else if("CSS1Compat"==z.compatMode)g=q.pageYOffset||D.scrollTop,e=
q.pageXOffset||D.scrollLeft;else{var p=z.body;a!==p&&(g=p.scrollTop-p.clientTop,e=p.scrollLeft-p.clientLeft)}return{x:e,y:g}}function F(a,g){var e=0,p=0;if(a&&a.getBoundingClientRect)var e=a.getBoundingClientRect(),n=G(g),p=e.top+n.y,e=e.left+n.x;return{top:p,left:e}}a.require("./b.js");var z=q.document,D=z.documentElement,x=a.dom.computedStyle.get;V.exports={getOffsetParent:function(a){for(a=a.offsetParent||D;a&&a!==D&&"static"==x(a,"position");)a=a.offsetParent;return a||D},getTopLeftPoint:F,getBoundingRect:function(a,
g){var e=0,p=0,n=0,x=0;if(a&&a.getBoundingClientRect)var x=a.getBoundingClientRect(),u=G(g),e=x.top+u.y,p=x.left+u.x,n=x.right+u.x,x=x.bottom+u.y;return{top:e,left:p,right:n,bottom:x,width:n-p,height:x-e}},getViewportRect:function(a,g){var e=F(a,g),p=e.top+a.clientTop,e=e.left+a.clientLeft,n=a.clientWidth,x=a.clientHeight;return{top:p,left:e,bottom:p+x,right:e+n,width:n,height:x}}}},"1.js":function(n,V,a,q,H,v,E,Q){function G(a){if(a=a.nodes)for(var b=a.length-1,e;e=a[b];b--)e.parentNode.insertBefore(e,
e.nextSibling)}a.require("./2.js");a.require("./4.js");a.require("./5.js");a.require("./6.js");a.require("./7.js");n=this.path;var F=q.document;q=a.Class;var z=a.event.create,D=a.template.html.Template,x=a.template.html.marker,l=a.template.TemplateSwitcher;H=a.dom.wrapper.Node;Q=a.dom.wrapper.PartitionNode;var g=a.dom.wrapper.GroupingNode,e=1,p=function(){var a={},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,e){a[b]||(a[b]=e)},process:function(e,g){var l,d=g.match(b);d&&(l=a[d[1]],g=d[2]||
e);return l?l(g):g}}}();p.add("data",function(a){return{events:"update",getter:"data."+a}});p.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var S=q.customExtendProperty({state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?
a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(b,k){b.bindingId=e++;for(var g in k){var l=null,n=k[g];N&&n instanceof N||a.resource.isResource(n)?l={events:"satelliteChanged",getter:function(a,b){var f="function"==typeof b?b:null,e=function(k){e=!1;if(f){b=f();if(!1==b instanceof N)return;f=null}k.setSatellite(a,b)};return function(b){e&&e(b);return f||
(b.satellite[a]?b.satellite[a].element:null)}}(g,n)}:n&&("string"==typeof n?n=p.process(g,n):n.bindingBridge&&(n=a.fn.$const(n)),l="object"!=typeof n?{getter:"function"==typeof n?n:a.getter(n)}:Array.isArray(n)?{events:n[0],getter:a.getter(n[1])}:{events:n.events,getter:a.getter(n.getter)});b[g]=l}}),M={attach:function(a,b,e){a.addHandler(b,e)},detach:function(a,b,e){a.removeHandler(b,e)}},u=q.extensibleProperty({select:function(a){this.isDisabled()||(this.contextSelection&&this.contextSelection.multiple?
this.select(a.ctrlKey||a.metaKey):this.select())}}),K={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&this.setTemplate(b.resolve(this))}},A=new D("<div/>"),t=[],b;v=function(f){return{template:A,emit_templateChanged:z("templateChanged"),templateSwitcher_:null,binding:S,action:u,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=t.pop()||F.createDocumentFragment();f.init.call(this)},postInit:function(){f.postInit.call(this);
var a=this.template;if(a){var b=this.element;this.template=null;this.setTemplate(a);t.push(b);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.tmpl,f=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,M);f.childNodesHere&&(f.childNodesElement=f.childNodesHere.parentNode,f.childNodesElement.insertPoint=f.childNodesHere);this.tmpl=f;this.element=f.element;this.childNodesElement=f.childNodesElement||
f.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=F.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();for(f=this;f.grouping;)f=f.grouping;for(var e=f.lastChild;e;e=e.previousSibling)e instanceof P?f.insertBefore(e,e.nextSibling):G(e);G(f.nullGroup)}else for(f=this.lastChild;f;f=f.previousSibling)this.insertBefore(f,f.nextSibling);this instanceof P&&G(this);a&&a!==this.element&&11!=a.nodeType&&(f=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,
this.element),this.element.parentNode!==f&&f.replaceChild(this.element,a));b&&this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,f;a instanceof l&&(f=a,a=f.resolve(this));!1==a instanceof D&&(a=null);a&&(f&&(this.templateSwitcher_=f,b||this.addHandler(K,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(K,this)),b=this.tmpl,f=this.template,f!==a&&(this.template=a,this.templateSync(),f&&f.clearInstance(b)))},updateBind:function(a){var b=this.binding[a];
(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var f=this.action[a];f&&f.call(this,b)},focus:function(f){var e=this.tmpl?this.tmpl.focus||this.element:null;e&&(b&&(b=a.clearImmediate(b)),b=a.setImmediate(function(){try{e.focus(),f&&e.select()}catch(a){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,b=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(K,
this));a.clearInstance(this.tmpl);f.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=b&&b.parentNode)&&1==a.nodeType&&a.removeChild(b)}}};E=function(a){return{insertBefore:function(b,e){b=a.insertBefore.call(this,b,e);var g=(b.groupNode||this).childNodesElement||this.childNodesElement,l=b.nextSibling,d=b.element,l=(l&&l.element.parentNode==g?l.element:null)||g.insertPoint||null;d.parentNode===g&&d.nextSibling===l||g.insertBefore(d,l);return b},removeChild:function(b){a.removeChild.call(this,
b);var e=b.element,g=e.parentNode;g&&g.removeChild(e);return b},clear:function(b){if(b)for(var e=this.firstChild;e;){var g=e.element,l=g.parentNode;l&&l.removeChild(g);e=e.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,e){var g=F.createDocumentFragment(),l=this.grouping||this,d=l.childNodesElement;l.childNodesElement=g;a.setChildNodes.call(this,b,e);d.insertBefore(g,d.insertPoint||null);l.childNodesElement=d}}};var P=q(Q,v,{className:n+".PartitionNode",binding:{title:"data:"}});Q=q(g,
E,{className:n+".GroupingNode",childClass:P,groupingClass:q.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();g.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=F.createDocumentFragment();g.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,e=null;b&&(e=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement);do a.element=a.childNodesElement=e;while(a=a.grouping)},destroy:function(){g.prototype.destroy.call(this);
this.childNodesElement=this.element=null}});var N=q(H,v,E,{className:n+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},disabled:{events:"disable enable",getter:function(a){return a.isDisabled()}},enabled:{events:"disable enable",getter:function(a){return!a.isDisabled()}}},childClass:q.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:Q});n=N.subclass({className:n+
".ShadowNodeList",emit_ownerChanged:function(a){N.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:n+".ShadowNode",getElement:function(a){return a.element},templateSync:function(){N.prototype.templateSync.call(this);
var a=this.getElement(this.delegate);a&&(a[x]=this.delegate.element[x],this.element=a)},listen:{delegate:{templateChanged:function(){var a=this.element,b=a.parentNode,e=this.getElement(this.delegate);e&&(e[x]=this.delegate.element[x]);this.element=e||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});V.exports={BINDING_PRESET:p,Node:N,PartitionNode:P,GroupingNode:Q,ShadowNodeList:n,ShadowNode:n.prototype.childClass}},"e.js":function(n,V,a,q,H,v,E,Q){a.require("./3.js");a.require("./4.js");
q=this.path;var G=a.cleaner,F=a.data.AbstractData,z=a.data.Value,D=a.data.STATE;n=z.subclass({className:q+".Property",extendConstructor_:!1,init:function(a,e,l){this.value=a;this.handler=e;this.proxy=l;z.prototype.init.call(this)}});var x={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},l=z.subclass({className:q+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+
1},calculateOnInit:!1,statePriority:D.priority,stateChanged_:!0,timer_:!1,init:function(){z.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var g=0,e=arguments.length;g<e;g++){var l=arguments[g];if(l instanceof F)a.array.add(this.objects,l)&&l.addHandler(x,this);else throw 34;}this.fire(!0,!0)},remove:function(g){a.array.remove(this.objects,
g)&&g.removeHandler(x,this);this.fire(!0,!0)},clear:function(){for(var a=0,e;e=this.objects[a];a++)e.removeHandler(x,this);this.objects.length=0;this.fire(!0,!0)},fire:function(g,e){this.locked||(this.valueChanged_=this.valueChanged_||!!g,this.stateChanged_=this.stateChanged_||!!e,this.timer_||!this.valueChanged_&&!this.stateChanged_||(this.timer_=a.setImmediate(this.update.bind(this))))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var g=this.valueChanged_,
e=this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;this.timer_=a.clearImmediate(this.timer_);if(!G.globalDestroy&&(g&&this.set(this.calculateValue()),e))if(g=this.objects.length){for(var e=-2,l,n=0;n<g;n++){var x=this.objects[n],u=this.statePriority.indexOf(String(x.state));u>e&&(l=x,e=u)}l&&this.setState(l.state,l.state.data)}else this.setState(D.UNDEFINED)},destroy:function(){this.lock();this.clear();this.timer_&&a.clearImmediate(this.timer_);z.prototype.destroy.call(this)}});q=n.subclass({className:q+
".Expression",init:function(g,e){z.prototype.init.call(this);g=a.array(arguments);e=g.pop();"function"!=typeof e&&(e=a.fn.$undef);1==g.length&&g[0].link(this,function(a){this.set(e.call(this,a))});if(1<g.length){var p=new l({objects:g,calculateOnInit:!0,calculateValue:function(){return e.apply(this,g.map(function(a){return a.value}))}});p.link(this,this.set);this.addHandler({destroy:function(){G.globalDestroy||p.destroy()}})}}});V.exports={Property:n,ObjectSet:l,Expression:q}},"f.js":function(n,V,
a,q,H,v,E,Q){function G(a,b){if(!a.length)return 0;var d,f,e=0,k=a.length-1;do if(d=e+k>>1,f=a[d]||0,b<f)k=d-1;else if(b>f)e=d+1;else return b==f?d:0;while(e<=k);return d+(f<b)}function F(){}function z(a,b,d){var f=a.indexCache_;a.lock();if(b)for(var e=0,k;k=b[e++];){var g=a.normalize(a.valueGetter(k));f[k.basisObjectId]=g;a.add_(g)}if(d)for(e=0;k=d[e++];)b=k.basisObjectId,a.remove_(f[b]),delete f[b];a.unlock()}function D(a,d){if(!1==d instanceof F)throw 37;var f=a.basisObjectId,e=Y[f];e||(e=Y[f]=
{},a.addHandler(T),T.itemsChanged.call(a,a,{inserted:a.getItems()}));var f=d.indexId,h=e[f];if(!h){d=b[f];if(!d)throw 38;h=new d.indexClass;h.addHandler(P,a);e[f]=h;z(h,a.getItems())}return h}function x(a,b){var d=Y[a.basisObjectId];if(d&&d[b.indexId]){delete d[b.indexId];b.removeHandler(P,a);for(var f in d)return;a.removeHandler(T);delete Y[a.basisObjectId]}}function l(){return"calc-index-preset-"+a.number.lead(ea++,8)}a.require("./4.js");a.require("./d.js");a.require("./e.js");var g=this.path,e=
a.Class,p=a.data.KeyObjectMap,S=a.data.ReadOnlyDataset,M=a.data.DatasetWrapper,u=a.data.Value,K=a.data.dataset.MapFilter,A=e(u,{className:g+".Index",autoDestroy:!0,indexCache_:null,valueGetter:a.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};u.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,b){},normalize:function(a){return Number(a)||0},destroy:function(){u.prototype.destroy.call(this);this.indexCache_=null}});
n=e(A,{className:g+".Sum",add_:function(a){this.value+=a},remove_:function(a){this.value-=a},update_:function(a,b){this.set(this.value-b+a)}});q=e(A,{className:g+".Count",valueGetter:a.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,b){this.set(this.value-!!b+!!a)}});H=e(A,{className:g+".Avg",sum_:0,count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=a;
this.value=(this.count_-=1)?this.sum_/this.count_:0},update_:function(a,b){this.sum_+=a-b;this.set(this.sum_/this.count_)}});v=e(A,{className:g+".VectorIndex",vectorGetter:a.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];A.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(G(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},remove_:function(a){null!==a&&(this.vector_.splice(G(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},
update_:function(a,b){null!==b&&this.vector_.splice(G(this.vector_,b),1);null!==a&&this.vector_.splice(G(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){A.prototype.destroy.call(this);this.vector_=null}});E=e(v,{className:g+".Min",vectorGetter:function(a){return a[0]}});Q=e(v,{className:g+".Max",vectorGetter:function(a){return a[a.length-1]}});var t=e(A,{className:g+".Distinct",map_:null,
init:function(){this.map_={};A.prototype.init.call(this)},add_:function(a){this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(this.value+=1)},remove_:function(a){0==--this.map_[a]&&(this.value-=1)},update_:function(a,b){var d=0;this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(d+=1);0==--this.map_[b]&&(d-=1);d&&this.set(this.value+d)},normalize:String,destroy:function(){A.prototype.destroy.call(this);this.map_=null}}),b={},P={destroy:function(a){x(this,a)}},N=function(c,
d){return function(f,k,h){var g;if(f instanceof S||f instanceof M)g=f,f=k,k=h;k||(k=f,f="");k=k||d;if(!e.isClass(c)||!c.isSubclassOf(A))throw 35;k=a.getter(k);f=f||"update";if("string"!=typeof f)throw 36;f=f.trim().split(" ").sort();h=[c.basisClassId_,k[a.getter.ID],f].join("_");var l=b[h];if(l)k=l.owner;else{for(var p={},l=0;l<f.length;l++)p[f[l]]=!0;l=new F;b[h]={owner:l,indexClass:c.subclass({indexId:h,updateEvents:p,valueGetter:k})};l.indexId=h;k=l}return g?D(g,k):k}},f=N(q,a.fn.$true),k=N(n),
y=N(H),U=N(E),aa=N(Q),d=N(t),ca={"*":function(a){var b,d,f=a.type,e=a.sender,k=e.basisObjectId,g=Y[this.basisObjectId],l;for(l in g)d=g[l],d.updateEvents[f]&&(a=d.indexCache_[k],b=d.normalize(d.valueGetter(e)),b!==a&&(d.update_(b,a),d.indexCache_[k]=b))}},T={itemsChanged:function(a,b){var d;if(d=b.inserted)for(var f=d.length;0<f--;)d[f].addHandler(ca,this);if(d=b.deleted)for(f=d.length;0<f--;)d[f].removeHandler(ca,this);d=Y[this.basisObjectId];for(var e in d)z(d[e],b.inserted,b.deleted)},destroy:function(){var a=
Y[this.basisObjectId],b;for(b in a)x(this,a[b])}},Y={},X=e(null,{className:g+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:a.fn.$null}),ea=1,g=e(K,{className:g+".IndexMap",calcs:null,indexes:null,indexes_:null,indexesBind_:null,timer_:void 0,indexUpdated:null,indexValues:null,memberSourceMap:null,keyMap:null,map:function(a){return this.keyMap.get(a,!0)},addMemberRef:function(a,b){this.memberSourceMap[a.basisObjectId]=b.basisObjectId;this.listen.member&&a.addHandler(this.listen.member,this);
this.sourceMap_[b.basisObjectId].updated=!0;0<a.subscriberCount&&this.calcMember(a)},removeMemberRef:function(a,b){delete this.memberSourceMap[a.basisObjectId];this.listen.member&&a.removeHandler(this.listen.member,this)},emit_sourceChanged:function(a){K.prototype.emit_sourceChanged.call(this,a);for(var b in this.indexes_){var d=this.indexes_[b];a&&(this.removeIndex(b),x(a,this.indexes[b]));this.source&&this.addIndex(b,D(this.source,d))}},listen:{index:{change:function(a){var b=this.indexMap;b.indexValues[this.key]=
a.value;b.indexUpdated=!0;b.recalcRequest()}},member:{subscribersChanged:function(a,b){0<a.subscriberCount&&this.calcMember(a)}}},ruleEvents:a.data.dataset.createRuleEvents(function(a,b){K.prototype.ruleEvents.update.call(this,a,b);this.sourceMap_[a.basisObjectId].updated=!0;this.recalcRequest()},"update"),init:function(){this.recalc=this.recalc.bind(this);this.indexUpdated=!1;this.indexesBind_={};this.memberSourceMap={};var b=this.indexes;this.indexes={};this.indexes_={};this.indexValues={};var d=
this.calcs;this.calcs={};this.keyMap&&!1!=this.keyMap instanceof p||(this.keyMap=new p(a.object.complete({create:function(a,b){return new this.itemClass(b)}},this.keyMap)));K.prototype.init.call(this);a.object.iterate(b,this.addIndex,this);a.object.iterate(d,this.addCalc,this)},addIndex:function(a,b){if(!this.indexes[a]){if(b instanceof F){if(this.indexes_[a])return;this.indexes_[a]=b;b=this.source?D(this.source,b):null}if(b instanceof A){this.indexValues[a]=b.value;this.indexes[a]=b;this.indexesBind_[a]=
{key:a,indexMap:this};var d=this.listen.index;d&&(b.addHandler(d,this.indexesBind_[a]),d.change&&d.change.call(this.indexesBind_[a],b,b.value))}}},removeIndex:function(a){if(this.indexes_[a]||this.indexes[a])this.indexes[a]&&this.listen.index&&this.indexes[a].removeHandler(this.listen.index,this.indexesBind_[a]),delete this.indexValues[a],delete this.indexesBind_[a],delete this.indexes[a],delete this.indexes_[a]},addCalc:function(a,b){if(b instanceof X){this.calcs[a]=b.calc;for(var d in b.indexes)this.addIndex(d,
b.indexes[d])}else this.calcs[a]=b;this.recalcRequest()},removeCalc:function(a){var b=this.calcs[a];if(b&&b.preset instanceof X){var b=b.preset.indexes,d;for(d in b)this.removeIndex(d,b[d])}delete this.calcs[a]},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},recalcRequest:function(){this.timer_||(this.timer_=a.setImmediate(this.recalc))},recalc:function(){for(var b in this.items_)this.calcMember(this.items_[b]);
this.indexUpdated=!1;this.timer_=a.clearImmediate(this.timer_)},calcMember:function(a){var b=this.sourceMap_[this.memberSourceMap[a.basisObjectId]];if(a.subscriberCount&&(b.updated||this.indexUpdated)){b.updated=!1;var d={},f,e,k,g;for(g in this.calcs)f=this.calcs[g](b.sourceObject.data,this.indexValues,b.sourceObject),e=a.data[g],a.data[g]===f||"number"==typeof f&&"number"==typeof e&&isNaN(f)&&isNaN(e)||(d[g]=f,k=!0);k&&a.update(d)}},getMember:function(a){return this.keyMap.get(a,!0)},destroy:function(){this.keyMap.destroy();
this.keyMap=null;for(var b in this.indexes)this.removeIndex(b);K.prototype.destroy.call(this);this.timer_=a.clearImmediate(this.timer_);this.indexesBind_=this.memberSourceMap=this.indexValues=this.indexes_=this.indexes=this.calcs=null}});V.exports={IndexConstructor:F,createIndexConstructor:N,getDatasetIndex:D,removeDatasetIndex:x,Index:A,Count:q,Sum:n,Avg:H,VectorIndex:v,Min:E,Max:Q,Distinct:t,count:f,sum:k,avg:y,max:aa,min:U,distinct:d,CalcIndexPreset:X,percentOfRange:function(b,d){var f="min_"+
l(),e="max_"+l(),h={};h[f]=U(b,d);h[e]=aa(b,d);d=a.getter(d||b);var k=function(a,b,c){return(d(c)-b[f])/(b[e]-b[f])};return k.preset=new X({indexes:h,calc:k})},percentOfMax:function(b,d){var f="max_"+l(),e={};e[f]=aa(b,d);d=a.getter(d||b);var h=function(a,b,c){return d(c)/b[f]};return h.preset=new X({indexes:e,calc:h})},percentOfSum:function(b,d){var f="sum_"+l(),e={};e[f]=k(d,b);b=a.getter(b||d);var h=function(a,d,e){return b(e)/d[f]};return h.preset=new X({indexes:e,calc:h})},IndexMap:g}},"g.js":function(n,
V,a,q,H,v,E,Q){function G(n){return new Function("data","return {"+a.object.iterate(n,function(a,g){a=a.replace(/"/g,'\\"');g=g.replace(/"/g,'\\"');return'"'+a+'": data["'+g+'"]'})+"}")}a.require("./4.js");var F=a.data.Object,z={update:function(a,l){var g=this.host.fields,e={};if(this.name==g.defaultSource)for(var p in l)!1==p in g.fieldSource&&(e[p]=a.data[p]);else for(p in l){var n=g.fromNames[this.name][p];n&&this.host.fields.fieldSource[n]==this.name&&(e[n]=a.data[p])}for(p in e)return this.host.update(e)},
destroy:function(){this.host.setSource(this.name,null)}},D=function(a){var l={},g={},e={},p={defaultSource:!1,fieldSource:{},toNames:g,fromNames:e,sources:l,__extend__:D};a["*"]&&(p.defaultSource=a["*"]);for(var n in a){var q=a[n].split(":"),u=q.shift(),q=q.length?q.join(":"):n;u==p.defaultSource||"-"==u&&q!=n||(g[u]||(g[u]={},e[u]={}),g[u][n]=q,e[u][q]=n,p.fieldSource[n]=u)}for(u in g)l[u]=G(g[u]);p.defaultSource&&(l[p.defaultSource]=function(a){var e={},g;for(g in a)!1==g in p.fieldSource&&(e[g]=
a[g]);return e});return p};n=F.subclass({className:this.path+".Merge",emit_sourceChanged:a.event.create("sourceChanged","name","oldSource"),fields:D({"*":"-"}),sources:null,sourcesContext_:null,delta_:null,init:function(){var a=this.data,l=this.sources;this.data={};this.delegate=null;F.prototype.init.call(this);for(var g in a)"-"==(this.fields.fieldSource[g]||this.fields.defaultSource)&&(this.data[g]=a[g]);this.sources={};this.sourcesContext_={};l&&this.setSources(l)},update:function(a){if(this.delta_)for(var l in a){var g=
this.fields.fieldSource[l]||this.fields.defaultSource;if(g){var e=g!=this.fields.defaultSource?this.fields.toNames[g][l]:l;a=this.sources[g].data[e];a!==this.data[l]&&(!1==l in this.delta_?this.delta_[l]=this.data[l]:this.delta_[l]===a&&delete this.delta_[l],this.data[l]=a)}}else{var p,n={};this.delta_=n;for(l in a)if(g=this.fields.fieldSource[l]||this.fields.defaultSource)"-"==g?(n[l]=this.data[l],this.data[l]=a[l]):this.sources[g]&&(e=g!=this.fields.defaultSource?this.fields.toNames[g][l]:l,this.sources[g].data[e]!==
a[l]?(p||(p={}),!1==g in p&&(p[g]={}),p[g][e]=a[l]):this.data[l]!==a[l]&&(n[l]=this.data[l],this.data[l]=a[l]));if(p)for(g in p)this.sources[g].update(p[g]);this.delta_=null;for(l in n)return this.emit_update(n),n;return!1}},setDelegate:function(){},setSource:function(a,l){var g=this.sources[a];if(!1!=a in this.fields.sources&&"-"!=a&&(!1==l instanceof F&&(l=null),g!==l)){var e=this.listen["source:"+a];g&&(e&&g.removeHandler(e,this),g.removeHandler(z,this.sourcesContext_[a]));if(this.sources[a]=l)!1==
a in this.sourcesContext_&&(this.sourcesContext_[a]={host:this,name:a}),l.addHandler(z,this.sourcesContext_[a]),e&&l.addHandler(e,this),this.update(this.fields.sources[a](l.data));this.emit_sourceChanged(a,g)}},setSources:function(a){a||(a={});for(var l in this.fields.sources)this.setSource(l,a[l])},destroy:function(){this.setSources();this.sourcesContext_=this.sources=null;F.prototype.destroy.call(this)}});V.exports={Merge:n}},"h.js":function(n,V,a,q,H,v,E,Q){function G(a){Z[a]=Z[a]||0;return a+
Z[a]++}function F(a,b){var c=O[a];if(c){for(var d=0,f;f=c[d];d++)f[0][f[1]]=b;delete O[a]}h[a]=b}function z(a,b,c){if(h[a])return h[a];var d=O[a];d||(d=O[a]=[]);d.push([b,c]);return function(b,c){var d=h[a];if(d)return d(b,c)}}function D(){var a=k(arguments),b=a.pop(),c=a[0],d=a[1],f=a[2],e;if("function"!=typeof b)throw 40;switch(a.length){case 0:e=function(){return b()};break;case 1:e=function(a,d,f){return c in a?b(d[c]):f};break;case 2:e=function(a,f,e){return c in a||d in a?b(f[c],f[d]):e};break;
case 3:e=function(a,e,h){return c in a||d in a||f in a?b(e[c],e[d],e[f]):h};break;default:e=function(c,d,f){for(var e=!1,r=[],h=0,k;k=a[h];h++)e=e||k in c,r.push(d[k]);return e?b.apply(null,r):f}}e.args=a;return e.calc=e}function x(a){return 1==arguments.length?function(b,c,d){return a in b?null!=c[a]?String(c[a]):null:d}:D.apply(null,k(arguments).concat(function(){for(var a=arguments.length-1;0<=a;a--)if(null==arguments[a])return null;return Array.prototype.join.call(arguments,"-")}))}function l(a,
c){var d=["has"],f=[b],e=[],h;for(h in a)if(b.call(a,h)){var k="v"+e.length,g="f"+e.length,l=a[h];d.push(k,g);f.push(l,c[h]);e.push('"'+h+'":has.call(data,"'+h+'")?'+g+'(data["'+h+'"],'+k+"):"+k+("function"==typeof l?"(data)":""))}e=e.sort().join(",");(h=la[e])||(h=la[e]=new Function(d,"return function(data){return {"+e+"};};"));return h.apply(null,f)}function g(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;
return b}function e(a,b){return"string"==typeof a?na(a):"number"==typeof a?new Date(a):null==a?null:a&&a.constructor===Date?a:b}function p(b,d,h){b.aliases[d]=d;h="string"==typeof h||Array.isArray(h)||"function"==typeof h&&h.calc!==h?{type:h}:h?a.object.slice(h):{};if("type"in h){"string"==typeof h.type&&(h.type=z(h.type,b.fields,d));if(Array.isArray(h.type)){var r=h.type.slice();1==r.length?(h.type=a.fn.$const(r[0]),h.defValue=r[0]):(h.type=function(a,b){return-1!=r.indexOf(a)?a:b},h.defValue=-1!=
r.indexOf(h.defValue)?h.defValue:r[0])}h.type===Array&&(h.type=g);h.type===Date&&(h.type=e);"function"!=typeof h.type&&(h.type=null)}var k=h.type||f;if(h.id||h.index||-1!=[ea,c,w,I].indexOf(k))b.idFields[d]=h;h.calc?(M(b,d,h.calc),b.fields[d]=ma):b.fields[d]=k;b.defaults[d]="defValue"in h?h.defValue:k();R[d]||(R[d]={destroy:function(){this.set(d,null)}})}function S(a,b,c){!1!=c in a.fields&&(b in a.aliases||(a.aliases[b]=c))}function M(b,c,d){b.calcs||(b.calcs=[]);var f=b.calcs,e=b.deps,h=d.args||
[];d={args:h,wrapper:d};b=b.calcs.length;var k=0;if(h)for(var g=0,l;l=f[g];g++)-1!=h.indexOf(l.key)&&(k=g+1);if(c){d.key=c;for(g=0;l=f[g];g++)if(-1!=l.args.indexOf(c)){b=g;break}if(k>b)return;e[c]=h.reduce(function(b,c){for(var d=e[c]||[c],f=0;f<d.length;f++)a.array.add(b,d[f]);return b},[]);for(var m in e)h=e[m].indexOf(c),-1!=h&&Array.prototype.splice.apply(e[m],[h,1].concat(e[c]))}else b=k;f.splice(Math.min(b,k),0,d)}function u(a){return function(b){return b&&this.modified&&a in this.modified?
this.modified[a]:this.data[a]}}function K(a){return function(b,c){return this.set(a,b,c)}}a.require("./3.js");a.require("./4.js");a.require("./d.js");var A=this.path,t=a.Class,b=Object.prototype.hasOwnProperty,P=a.object.keys,N=a.object.extend,f=a.fn.$self,k=a.array.from,y=a.event.Emitter;n=a.event.create;var U=a.data.Object,aa=a.data.Slot,d=a.data.Dataset;v=a.data.dataset.Filter;var ca=a.data.dataset.Split,T={},Y=[],X={string:!0,number:!0},ea=function(a){return isNaN(a)?null:Number(a)},c=function(a){return isNaN(a)?
null:Number(a)},w=function(a){return isNaN(a)?null:parseInt(a,10)},I=function(a){return null==a?null:String(a)},Z={},h={},L={},O={},ja=t(null,{className:A+".Index",items:null,init:function(a){this.items={}},get:function(a,c){var d=b.call(this.items,a)&&this.items[a];if(d&&(!c||d.entityType===c))return d},add:function(a,b){if(b){var c=this.get(a);if(!c)return this.items[a]=b,!0;if(c!==b)throw 39;}},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=
null}});E=function(a,b){return function(c){return a.prototype[b].call(this,c&&c.map(this.wrapper))}};q=function(a,b){return function(){this.name||(this.name=G(b));a.prototype.init.call(this)}};H=function(b){return function(b){var c=a.object.slice(this.items_),f=[],e=[];if(b){d.setAccumulateState(!0);for(var h=0;h<b.length;h++){var k=this.wrapper(b[h]);k&&(c[k.basisObjectId]=!1)}d.setAccumulateState(!1)}for(var g in this.items_)!1==g in c&&f.push(this.items_[g]);for(g in c)c[g]&&e.push(c[g]);e.length&&
this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:e});d.setAccumulateState(!0);for(h=0;h<e.length;h++)e[h].destroy();d.setAccumulateState(!1);return f.length?f:null}};var da=t(d,{className:A+".EntitySet",name:null,wrapper:f,init:q(d,"EntitySet"),sync:H(d),set:E(d,"set"),add:E(d,"add"),remove:E(d,"remove"),destroy:function(){d.prototype.destroy.call(this);this.wrapper=null}}),ka=t(da,{className:A+".ReadOnlyEntitySet",set:a.fn.$false,add:a.fn.$false,remove:a.fn.$false,clear:a.fn.$false});
v=t(v,{className:A+".EntityCollection",name:null,init:q(v,"EntityCollection"),sync:H(v)});q=t(ca,{className:A+".EntityGrouping",name:null,subsetClass:ka,init:q(ca,"EntityGrouping"),sync:H(ca),getSubset:function(a,b){var c=ca.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=this.wrapper);return c}});var m=function(a,b){if(this instanceof m){a||(a=f);if(!b||h[b])b=G("UntitledEntitySetType");var c=new s({entitySetClass:{wrapper:a}}),e=c.entitySetClass,g=function(a,b){return null!=
a?(!1==b instanceof da&&(b=c.createEntitySet()),b.set(a instanceof d?a.getItems():k(a)),b):null};"string"==typeof a&&(e.prototype.wrapper=z(a,e.prototype,"wrapper"));F(b,g);N(g,{type:c,typeName:b,toString:function(){return b+"()"},reader:function(a){if(Array.isArray(a)){var b=e.prototype.wrapper;return a.map(b.reader||b)}return a},extendClass:function(a){e.extend.call(e,a);return g},extendReader:function(a){var b=g.reader;g.reader=function(c){Array.isArray(c)&&a(c);return b(c)};return g},entitySetType:c,
extend:function(){return e.extend.apply(e,arguments)}});return g}},s=t(null,{className:A+".EntitySetConstructor",entitySetClass:da,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),J=function(a){if(this instanceof J){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){if(a===b||a.entityType===c)return a;var f,e=c.idField;if(X[typeof a]){if(!e)return;if(b=c.index.get(a,c))return b;f=a;a={};a[e]=f}else c.compositeKey&&
(f=c.compositeKey(a,a)),null!=f&&(b=c.index.get(f,c));b&&b.entityType===c?b.update(a):b=new d(a);return b}};var c=new ia(a||{},b),d=c.entityClass,f=c.name;F(f,b);N(b,{all:c.all,type:c,typeName:f,toString:function(){return f+"()"},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},reader:function(a){return c.reader(a)},extendClass:function(a){d.extend.call(d,a);return b},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&"object"==typeof b&&a(b);return c(b)};
return b},entityType:c,extend:function(){return d.extend.apply(d,arguments)}});return b}},R={},la={},ma=function(a,b){return b},na=function(){function a(c,d,f,e,h,k,g){c=new Date(c,d-1,f,e||0,0,k||0,g?g.substr(0,3):0);c.setMinutes((h||0)-b-c.getTimezoneOffset());return c}var b;return function(c){b=0;return a.apply(null,String(c||"").replace(reIsoTimezoneDesignator,function(a,c,d,f){b=f?60*d+1*f:1*d;return c}).split(reIsoStringSplit))}}(),ia=t(null,{className:A+".EntityType",wrapper:null,all:null,
fields:null,idField:null,idFields:null,defaults:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(b,c){this.name=b.name;if(!this.name||h[this.name])this.name=G("UntitledEntityType");this.fields={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var d=b.index;d&&d instanceof ja&&(this.index=d);this.wrapper=c;if(!1=="all"in b||b.all||b.singleton)this.all=new ka(a.object.complete({wrapper:c},b.all));if(this.singleton=!!b.singleton){var f;
this.get=function(){return f};this.all.addHandler({itemsChanged:function(a,b){f=b.inserted?b.inserted[0]:null}},this)}for(var e in b.fields)p(this,e,b.fields[e]);for(e in b.aliases)S(this,e,b.aliases[e]);b.constrains&&b.constrains.forEach(function(a){M(this,null,a)},this);var k={};if(P(this.idFields).length){for(var g in this.idFields){var d=this.idFields[g].index,m;d&&!1!=d instanceof ja||("string"==typeof d?(!1==d in L&&(L[d]=new ja),d=L[d]):(this.index||(this.index=new ja),d=this.index));(m=k[d.basisObjectId])||
(m=k[d.basisObjectId]={index:d,fields:[]});m.fields.push(g);this.idFields[g]=m}this.index&&!1==this.index.basisObjectId in k&&(this.index=null);for(var n in k)m=k[n],m.property="__id__"+n,m.compositeKey=x.apply(null,m.fields),1==m.fields.length&&(m.idField=m.fields[0]);d=P(k);d=k[this.index?this.index.basisObjectId:d[0]];this.index=d.index;this.idField=d.idField;this.compositeKey=d.compositeKey;this.idProperty=d.property;this.indexes=k}else this.index&&(this.index=null);k={};for(e in this.defaults)k[e]=
void 0;this.entityClass=ga(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:c,typeName:this.name,state:b.state||this.entityClass.prototype.state,generateData:l(this.defaults,this.fields),initDelta:k});for(var t in this.fields)this.entityClass.prototype["get_"+t]=u(t),this.fields[t]!==ma&&(this.entityClass.prototype["set_"+t]=K(t));Y.push(this)},reader:function(a){var b={};if(X[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=
this.aliases[c];if(d){var f=this.fields[d].reader;b[d]=f?f(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(this.index&&null!=a)return this.index.get(a,this)},getId:function(a){if(this.compositeKey&&null!=a){if(X[typeof a])return a;if(a&&a.entityType===this)return a[this.idProperty];a instanceof U&&(a=a.data);if(this.compositeKey)return this.compositeKey(a,a)}},getSlot:function(a){var c=this.getId(a);if(null!=c){var d=b.call(this.slots,c)&&this.slots[c];d||(X[typeof a]&&(d={},this.idField&&
(d[this.idField]=a),a=d),d=this.slots[c]=new aa({delegate:this.get(c)||null,data:a}));return d}}}),$=t(U,{className:A+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:n("rollbackUpdate")}),ga=function(c,d,f,e){function h(a,b,d){var f=c.calcs,e=a.data,r=!1;try{if(f)for(var g=0,l;l=f[g];g++){var m=l.key,B=e[m],p=l.wrapper(b,e,B);m&&p!==B&&(b[m]=B,e[m]=p,r=!0)}for(var n in c.indexes){var t=c.indexes[n],A=a[t.property],f=A;t.compositeKey&&
(f=t.compositeKey(b,e,A));f!==A&&(k(t.index,a,A,f),a[t.property]=f)}return r}catch(u){for(m in b)a.data[m]=b[m];d&&!a.modified&&(a.modified=d)}}function k(a,c,d,f){null!=f&&(a.add(f,c),b.call(e,f)&&e[f].setDelegate(c));null!=d&&(a.remove(d,c),b.call(e,d)&&e[d].setDelegate())}return t($,{className:c.name,init:function(a){this.delegate=null;this.data=this.generateData(a);$.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof y&&(a.addHandler(R[b],this),this.fieldHandlers_||
(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);h(this,this.initDelta);d&&d.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[c.idProperty]},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(a,b,d,e){var r=f[a];if(!r)return!1;var k,m=this.modified;r===g&&m&&a in m&&(b=g(b,m[a]));b=r(b,this.data[a]);r=this.data[a];if(b===r||b&&r&&
b.constructor===Date&&r.constructor===Date&&+b===+r)!d&&m&&a in m&&(k={rollback:{key:a,value:m[a]}},delete m[a],P(m).length||(this.modified=null));else a:{k={};if(!c.idFields[a])if(d)m||(this.modified=m={}),!1===a in m?(k.rollback={key:a,value:void 0},m[a]=r):m[a]===b&&(k.rollback={key:a,value:b},delete m[a],P(m).length||(this.modified=null));else if(m&&a in m)if(m[a]!==b){k.rollback={key:a,value:m[a]};m[a]=b;break a}else return!1;this.data[a]=b;this.fieldHandlers_&&this.fieldHandlers_[a]&&(r.removeHandler(R[a],
this),this.fieldHandlers_[a]=!1);b&&b!==this&&b instanceof y&&(b.addHandler(R[a],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[a]=!0);k.key=a;k.value=r;k.delta={};k.delta[a]=r}if(!e&&k){a=k.key;d=k.delta||{};var l;k.rollback&&(l={},l[k.rollback.key]=k.rollback.value);h(this,d,l)&&(a=!0);a&&(this.emit_update(d),k.delta=d);l&&this.emit_rollbackUpdate(l)}return k||!1},update:function(a,b){var c=!1,d={};if(a){var f,e,r;for(r in a)if(e=this.set(r,a[r],b,!0))e.key&&(c=!0,d[e.key]=
e.value),e.rollback&&(f||(f={}),f[e.rollback.key]=e.rollback.value);h(this,d,f)&&(c=!0);c&&this.emit_update(d);f&&this.emit_rollbackUpdate(f)}return c?d:!1},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(b){var d=this.modified;d&&b&&(Array.isArray(b)||(b=
[b]),d=a.object.slice(d,b.reduce(function(a,b){return a.concat(c.deps[b]||b)},[])));this.update(d,!0)},destroy:function(){if(this.fieldHandlers_){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(R[a],this);this.fieldHandlers_=null}for(a in c.indexes){var b=c.indexes[a],f=this[b.property];null!=f&&k(b.index,this,f,null)}d&&d.has(this)&&d.emit_itemsChanged({deleted:[this]});U.prototype.destroy.call(this);this.data=T;this.modified=null}})};V.exports={isEntity:function(a){return a&&
a instanceof $},createType:function(b,c){var d=b||{};"string"==typeof b?d={name:d,fields:c||{}}:c&&(d=a.object.merge(d,{fields:c}));return new J(d)},createSetType:function(a,b){return 1<arguments.length?new m(b,a):new m(a)},validate:function(){for(var b in O)a.dev.warn(A+": type `"+b+"` is not defined, but used by "+O[b].length+" type(s)")},getTypeByName:function(a){return h[a]},getIndexByName:function(a){return L[a]},get:function(a,b){var c=h[a];if(c)return c.get(b)},resolve:function(a,b){var c=
h[a];if(c)return c(b)},getByIndex:function(a,b){if(a in L)return L[a].get(b)},NumericId:ea,NumberId:c,IntId:w,StringId:I,Index:ja,CalculateField:D,ConcatStringField:x,calc:D,EntityType:J,Entity:ga,BaseEntity:$,EntitySetType:m,EntitySet:da,ReadOnlyEntitySet:ka,Collection:v,Grouping:q}},"i.js":function(n,V,a,q,H,v,E,Q){function G(){var a="basisjsJsonpCallback"+parseInt(1E11*Math.random());q[a]=function(b){K[a]=b};return a}function F(a){var b=K[a];delete K[a];return b}function z(a){delete K[a];delete q[a]}
function D(a,b){var e,g;e=!1;if("number"!=typeof a){if(!a||this.script!==a.target)return;a=(e=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?4:3}if(a!=this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);if(4==a){this.clearTimeout();this.script.onload=this.script.onerror=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;b?(this.emit_abort(),e=this.stateOnAbort):
(this.processResponse(),this.isSuccessful()&&!e?(e=u.READY,this.emit_success(this.getResponseData())):(e=u.ERROR,g=this.getResponseError(),this.emit_failure(g)));this.emit_complete(this);var f=this.callback;b?setTimeout(q[f]=function(){z(f)},3E5):z(f)}else e=u.PROCESSING;this.setState(e,g)}}a.require("./j.js");a.require("./4.js");n=this.path;var x=q.document,l=q.encodeURIComponent,g=a.object.extend,e=a.object.slice,p=a.object.merge;H=a.net.createRequestEvent;var S=a.net.AbstractRequest,M=a.net.AbstractTransport,
u=a.data.STATE,K={};v=S.subclass({className:n+".Request",timeout:3E4,timer_:null,emit_readyStateChanged:H("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==this.data.status},processResponse:function(){this.callback in K&&this.update({contentType:"application/javascript",data:F(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:a.fn.$true,prepareRequestData:function(a){var b=
[],g=a.url;a=e(a);this.callback=G();for(var p in a.params){var f=a.params[p];null!=f&&null!=f.toString()&&b.push(l(p)+"="+l(f.toString()))}b.push(l(a.callbackParam)+"="+l(this.callback));b=b.join("&");a.routerParams&&(g=g.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,f){return f in a.routerParams?a.routerParams[f]:b}));b&&(g+=(-1==g.indexOf("?")?"?":"&")+b);a.requestUrl=g;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!x)throw 41;var b=
x.head||x.getElementByName("head")[0]||x.documentElement,e=x.createElement("script");this.update({data:void 0,status:"",error:""});this.script=e;e.async=!0;e.src=a.requestUrl;e.charset=a.encoding;e.onload=e.onerror=e.onreadystatechange=D.bind(this);this.prevReadyState_=-1;this.emit_start();D.call(this,0);this.setTimeout(this.timeout);b.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),D.call(this,4,!0))},
setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();S.prototype.destroy.call(this)}});var A=M.subclass({className:n+".Transport",requestClass:v,emit_readyStateChanged:H("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",
init:function(){M.prototype.init.call(this);this.params=e(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw 42;g(a,{url:b,encoding:a.encoding||this.encoding,params:p(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||
this.callbackParam,influence:a.influence});return a}});V.exports={Request:v,Transport:A,request:function(e,b,g){"string"==typeof e&&(e={url:e});var l=new A(e);l.addHandler({success:b&&function(a,e,g){b(g)},failure:g&&function(a,b,e){g(e)},complete:function(){a.nextTick(function(){l.destroy()})}});l.request()}}},"j.js":function(n,V,a,q,H,v,E,Q){function G(a){var e=x(a);return function(){e.apply(S,arguments);this.service&&e.apply(this.service,arguments);e.apply(this,arguments)}}function F(a){var e=
x(a);return function(){var g=[this].concat(z(arguments));e.apply(S,g);this.transport&&this.transport["emit_"+a].apply(this.transport,g);e.apply(this,arguments)}}a.require("./3.js");a.require("./4.js");q=this.path;var z=a.array.from,D=a.object.slice,x=a.event.create,l=a.data.STATE,g=a.data.Object,e=a.event.Emitter,p=[],S=new e({abort:function(){for(var a=z(p),e=0;e<a.length;e++)a[e].abort();return a},handler:{start:function(e){a.array.add(p,e.transport)},complete:function(e){a.array.remove(p,e.transport)}}});
n=g.subclass({className:q+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,stateOnAbort:l.UNDEFINED,emit_start:F("start"),emit_timeout:F("timeout"),emit_abort:F("abort"),emit_success:F("success"),emit_failure:F("failure"),emit_complete:F("complete"),emit_stateChanged:function(a){g.prototype.emit_stateChanged.call(this,a);if(this.influence)for(a=0;a<this.influence.length;a++)this.influence[a].setState(this.state,this.state.data)},init:function(){g.prototype.init.call(this);
this.influence=[]},setInfluence:function(a){this.influence=z(a)},clearInfluence:function(){this.influence=null},doRequest:a.fn.$undef,getResponseData:a.fn.$undef,destroy:function(){g.prototype.destroy.call(this);this.requestData=this.initData=null;this.clearInfluence()}});var M={start:function(e,g){a.array.add(this.inprogressRequests,g)},complete:function(e,g){a.array.remove(this.inprogressRequests,g)}},u={complete:function(){var e=this.requestQueue.shift();e&&a.nextTick(function(){e.doRequest()})}};
q=e.subclass({className:q+".AbstractTransport",requestClass:n,requests:null,poolLimit:null,poolHashGetter:a.fn.$true,emit_start:G("start"),emit_timeout:G("timeout"),emit_abort:G("abort"),emit_success:G("success"),emit_failure:G("failure"),emit_complete:G("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];e.prototype.init.call(this);this.addHandler(M,this);this.poolLimit&&this.addHandler(u,this)},getRequestByHash:function(a){var e=this.requests[a];if(!e){for(var g in this.requests)if(this.requests[g].isIdle()&&
-1==this.requestQueue.indexOf(this.requests[g])){e=this.requests[g];delete this.requests[g];break}e||(e=new this.requestClass({transport:this}));this.requests[a]=e}return e},prepare:a.fn.$true,prepareRequestData:a.fn.$self,request:function(a){if(this.prepare()){a=D(a);var e=this.poolHashGetter(this.prepareRequestData(a)),e=this.getRequestByHash(e,!0);e.initData&&e.abort();e.initData=a;e.requestData=a;e.setInfluence(a.influence||this.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?
(this.requestQueue.push(e),e.setState(l.PROCESSING)):e.doRequest();return e}},abort:function(){for(var a=0,e;e=this.inprogressRequests[a];a++)e.abort();for(a=0;e=this.requestQueue[a];a++)e.setState(l.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var a=0,e;e=this.stoppedRequests[a];a++)e.transport.request(e.initData);
this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var a in this.requests)this.requests[a].destroy();this.requests={};this.stoppedRequests=this.requestQueue=this.inprogressRequests=null;e.prototype.destroy.call(this)}});V.exports={createTransportEvent:G,createRequestEvent:F,transportDispatcher:S,AbstractRequest:n,AbstractTransport:q}},"k.js":function(n,V,a,q,H,v,E,Q){a.require("./3.js");a.require("./l.js");a.require("./n.js");n=a.event.create;var G=a.net.action.create,F=a.event.Emitter,
z={start:function(n,q){a.array.add(this.inprogressTransports,q.transport)},complete:function(n,q){a.array.remove(this.inprogressTransports,q.transport)}};n=F.subclass({className:this.path+".Service",inprogressTransports:null,transportClass:a.net.ajax.Transport,emit_sessionOpen:n("sessionOpen"),emit_sessionClose:n("sessionClose"),emit_sessionFreeze:n("sessionFreeze"),emit_sessionUnfreeze:n("sessionUnfreeze"),isSecure:!1,prepare:a.fn.$true,signature:a.fn.$undef,isSessionExpiredError:a.fn.$false,init:function(){F.prototype.init.call(this);
this.inprogressTransports=[];var a=this.transportClass;this.transportClass=a.subclass({service:this,needSignature:this.isSecure,emit_failure:function(n,l){a.prototype.emit_failure.call(this,n,l);this.needSignature&&this.service.isSessionExpiredError(n)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(n){if(this.service.prepare(this,n)&&(!this.needSignature||this.service.sign(this)))return a.prototype.request.call(this,n)}});this.addHandler(z)},sign:function(a){if(this.sessionKey)return this.signature(a,
this.sessionData),!0},openSession:function(a,n){this.sessionKey=a;this.sessionData=n;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(a){return a.needSignature});for(var a=0,n;n=this.inprogressTransports[a];a++)n.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports)for(var a=
0,n;n=this.stoppedTransports[a];a++)n.resume();this.emit_sessionUnfreeze()},createTransport:function(a){return new this.transportClass(a)},createAction:function(n){return G(a.object.complete({service:this},n))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=null;F.prototype.destroy.call(this)}});V.exports={Service:n}},"l.js":function(n,V,a,q,H,v,E,Q){function G(b,e){var g={};u.test(e.method)?x&&!1!=e.postBody instanceof x||(g["Content-Type"]=e.contentType+
(e.encoding?";charset="+e.encoding:"")):z.test("ie")&&(g["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");a.object.iterate(l(g,e.headers),function(a,b){null!=b&&"function"!=typeof b&&this.setRequestHeader(a,b)},b)}function F(b){var e=this.xhr,g;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);e&&("number"!=typeof b&&(b=e.readyState),b!=this.prevReadyState_&&(this.prevReadyState_=b,this.emit_readyStateChanged(b),4==b?(this.clearTimeout(),e.onreadystatechange=a.fn.$undef,(b=0==e.status)||
e.responseType||(b="unknown"==typeof e.responseText||!e.responseText&&!e.getAllResponseHeaders()),b?(this.emit_abort(),e=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(e=M.READY,this.emit_success(this.getResponseData())):(e=M.ERROR,g=this.getResponseError(),!g&&this.data.error&&(g=this.data.error),this.emit_failure(g))),this.emit_complete(this)):e=M.PROCESSING,this.setState(e,g)))}a.require("./m.js");a.require("./j.js");a.require("./4.js");n=this.path;var z=a.ua,D=q.encodeURIComponent,
x=q.FormData,l=a.object.extend,g=a.object.slice,e=a.object.merge;H=a.net.createTransportEvent;v=a.net.createRequestEvent;var p=a.net.AbstractRequest,S=a.net.AbstractTransport,M=a.data.STATE,u=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,K="native",A=function(){if("XMLHttpRequest"in q)return function(){return new XMLHttpRequest};var a=q.ActiveXObject;if(a)for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],g=0;K=e[g];g++)try{if(new a(K))return function(){return new a(K)}}catch(f){}throw 43;
}();v=p.subclass({className:n+".Request",requestStartTime:0,timeout:3E4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:v("readyStateChanged"),init:function(){p.prototype.init.call(this);this.xhr=A()},isIdle:function(){return 4==this.xhr.readyState||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},
getResponseData:function(){var b=this.xhr;if(!b.responseType&&("json"==this.responseType||/^application\/json/i.test(this.data.contentType))){var e;a:{try{e=a.json.parse(b.responseText);break a}catch(g){}e=void 0}return e}return"response"in b?b.response:b.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){return{code:"SERVER_ERROR",msg:this.responseType?this.xhr.response||this.xhr.statusText||"Error":this.xhr.responseText}},prepare:a.fn.$true,
prepareRequestData:function(a){var e=[],l=a.url;a=g(a);for(var f in a.params){var k=a.params[f];null!=k&&null!=k.toString()&&e.push(D(f)+"="+D(k.toString()))}e=e.join("&");!a.postBody&&u.test(a.method)&&(a.postBody=e||"",e="");a.routerParams&&(l=l.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(e,f){return f in a.routerParams?a.routerParams[f]:e}));e&&(l+=(-1==l.indexOf("?")?"?":"&")+e);a.requestUrl=l;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",
status:""});z.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=A());this.emit_start();var e=this.xhr;this.prevReadyState_=-1;e.onreadystatechange=F.bind(this);a.asynchronous||F.call(this,0);e.open(a.method,a.requestUrl,a.asynchronous);this.lastRequestUrl_=a.requestUrl;if(a.responseType&&a.asynchronous&&"responseType"in e)try{e.responseType=a.responseType}catch(g){}this.responseType=a.responseType||"";G(e,a);this.setTimeout(this.timeout);var f=a.postBody;if(u.test(a.method)&&z.test("ie9-"))if("object"==
typeof f&&"undefined"!=typeof f.documentElement&&"string"==typeof f.xml)f=f.xml;else if("string"==typeof f)f=f.replace(/\r/g,"");else if(null==f||""==f)f="[No data]";this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null;this.xhr===e&&1==e.readyState&&e.send(f)}.bind(this),this.sendDelay)):e.send(f);return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||
(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&0!=this.xhr.readyState&&F.call(this,4))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},
destroy:function(){this.abort();this.xhr=null;p.prototype.destroy.call(this)}});var t=S.subclass({className:n+".Transport",requestClass:v,emit_readyStateChanged:H("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:a.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",postBody:null,init:function(){S.prototype.init.call(this);this.params=g(this.params);this.routerParams=g(this.routerParams)},setParam:function(a,
e){this.params[a]=e},setParams:function(a){this.clearParams();for(var e in a)this.setParam(e,a[e])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(b){if(!b.url&&!this.url)throw 44;l(b,{headers:e(this.requestHeaders,b.headers),params:e(this.params,b.params),routerParams:e(this.routerParams,b.routerParams)});a.object.complete(b,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,
encoding:this.encoding,postBody:this.postBody,responseType:this.responseType});return b}});V.exports={Request:v,Transport:t,request:function(b,e,g){"string"==typeof b&&(b={url:b,asynchronous:!(!e&&!g)});var f=new t(b);f.addHandler({success:e&&function(a,b,f){e(f)},failure:g&&function(a,b,e){g(e)},complete:function(){a.nextTick(function(){f.destroy()})}});b=f.request();if(!b.requestData.asynchronous)return b.getResponseData()}}},"m.js":function(n,V,a,q,H,v,E,Q){function G(a){var g=1E6;a=String(a).split(".");
for(var l=0,n=0;4>l&&l<a.length;l++,g/=100)n+=a[l]*g;return n}function F(a){a=a.toLowerCase();if(a in x)return x[a];var g=a.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(g){x[a]=!1;var l=g[1].toLowerCase(),n=G(g[3]),g=g[4]||"=";if(l=D[l])return x[a]=!n||"="==g&&l==n||"+"==g&&l>=n||"-"==g&&l<n}return!1}var z=q.document;n=q.navigator&&q.navigator.userAgent||"";q=q.opera;var D={},x={};Q="unknown";H={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone",
"iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var l in H)if(!("MSIE"==l&&q||"Safari"==l&&/chrome/i.test(n)||"AppleWebKit"==l&&/iphone/i.test(n))&&n.match(new RegExp(l+".(\\d+(\\.\\d+)*)","i"))){v=H[l];Q=q&&"function"==typeof q.version?q.version():RegExp.$1;E=G(Q);Q=v[0]+" "+Q;for(var g=0;g<v.length;g++)D[v[g].toLowerCase()]=
E}V.exports={prettyName:Q,is:F,test:function(){return a.array(arguments).some(F)},cookies:{set:function(a,g,l,n,u){z.cookie=a+"="+(null==g?"":escape(g))+";path="+(n||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(l?";expires="+(new Date(Date.now()+1E3*l)).toGMTString():"")+(u?";domain="+u:"")},get:function(a){return(a=z.cookie.match(new RegExp("(^|;)\\s*"+a+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(a[2])},remove:function(a,g,l){z.cookie=a+"=;expires="+(new Date(0)).toGMTString()+";path="+
(g||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(l?";domain="+l:"")}}}},"n.js":function(n,V,a,q,H,v,E,Q){a.require("./4.js");a.require("./l.js");var G=a.data.STATE.UNDEFINED,F=a.data.STATE.READY,z=a.data.STATE.PROCESSING,D=a.data.STATE.ERROR,x=function(){},l={start:function(a,g){var l=g.requestData.origin;this.start.call(g.requestData.origin);l.state!=z&&l.setState(z)},success:function(a,g,l){a=g.requestData.origin;this.success.call(a,l);a.state==z&&a.setState(F)},failure:function(a,
g,l){a=g.requestData.origin;this.failure.call(a,l);a.state==z&&a.setState(D,l)},abort:function(a,g){var l=g.requestData.origin;this.abort.call(l);l.state==z&&l.setState(G)},complete:function(a,g){this.complete.call(g.requestData.origin)}},g={start:x,success:x,failure:x,abort:x,complete:x};V.exports={create:function(e){e=a.object.extend({prepare:x,request:x},e);var n=a.object.splice(e,["prepare","request"]),q=a.object.merge(g,a.object.splice(e,["start","success","failure","abort","complete"])),v=a.fn.lazyInit(function(){var g;
g=e;g=g.transport?g.transport:g.service?g.service.createTransport(g):g.createTransport?g.createTransport(g):new a.net.ajax.Transport(g);g.addHandler(l,q);return g});return function(){this.state!=z&&(n.prepare.apply(this,arguments),this.request=v().request(a.object.complete({origin:this},n.request.apply(this,arguments))))}}}},"o.js":function(n,V,a,q,H,v,E,Q){function G(e){function g(e,n){for(var b="",p,q=e;q<l.length;q++)switch(p=l.charAt(q),p){case n:return{result:b,offset:q};case "\\":b+="\\"+l.charAt(++q);
break;case "|":b+=")"!=n?"\\|":"|";break;case "(":(p=g(q+1,")"))?(q=p.offset,b+="(?:"+p.result+")?"):b+="\\(";break;case ":":(p=l.substr(q+1).match(/^\w+/))?(q+=p[0].length,b+="([^/]+)"):b+=":";break;case "*":(p=l.substr(q+1).match(/^\w+/))?(q+=p[0].length,b+="(.*?)"):b+="\\*";break;default:b+=a.string.forRegExp(p)}return n?null:b}var l=String(e||"");return new RegExp("^"+g(0)+"$","i")}function F(){var a=z.hash.substr(1)||"";if(a!=p){var e=[],n=[];p=a;for(var q in l){var t=l[q],b=a.match(t.regexp);
b?(g[q]||e.push(t),g[q]=b):g[q]&&(n.push(t),delete g[q])}for(a=0;t=n[a];a++)for(var t=x(t.callbacks),v=0;b=t[v];v++)b.callback.leave&&b.callback.leave.call(b.context);for(a=0;t=e[a];a++)for(t=x(t.callbacks),v=0;b=t[v];v++)b.callback.enter&&b.callback.enter.call(b.context);for(q in g)for(t=l[q],e=x(g[q],1),t=x(t.callbacks),a=0;b=t[a];a++)b.callback.match&&b.callback.match.apply(b.context,e)}}a.require("./8.js");a.namespace(String(this.path));var z=q.location;n=q.document.documentMode;var D="onhashchange"in
q&&(void 0===n||7<n),x=a.array.from,l={},g={},e=!1,p,S;V.exports={debug:!1,add:function(a,e,n){var q=l[a];if(!q&&(q=l[a]={source:a,callbacks:[],regexp:"[object RegExp]"!=Object.prototype.toString.call(a)?G(a):a},"string"==typeof p)){var t=p.match(q.regexp);t&&(g[a]=t)}e={cb_:e,context:n,callback:"function"!=typeof e?e||{}:{match:e}};q.callbacks.push(e);a in g&&(e.callback.enter&&e.callback.enter.call(n),e.callback.match&&e.callback.match.apply(n,x(g[a],1)))},remove:function(a,e,n){var p=l[a];if(p)for(var q=
0,b;b=p.callbacks[q];q++)if(b.cb_===e&&b.context===n){p.callbacks.splice(q,1);p.callbacks.length||(delete l[a],delete g[a]);break}},stop:function(){e&&(D?a.dom.event.removeHandler(q,"hashchange",F):clearInterval(S),e=!1)},start:function(){e||(D?a.dom.event.addHandler(q,"hashchange",F):S=setInterval(F,50),e=!0,F())},checkUrl:F,navigate:function(a,g){g?z.replace(z.pathname+"#"+a):z.hash=a;e&&F()}}},"p.js":function(n,V,a,q,H,v,E,Q){function G(a){z.title=a}function F(a){return"string"==typeof a?z.getElementById(a):
a}var z=q.document||{title:"unknown"},D=z.title,x=a.fn.$undef,l,g;n=a.fn.lazyInit(function(e){var n=[],q=!1,v={inited:!1,setTitle:function(e){e!=D&&(D instanceof a.Token&&D.detach(G),e instanceof a.Token?(e.attach(G),G(e.get())):G(e),D=e)},setElement:function(a){a=F(a);g!=a&&(g?g.parentNode.replaceChild(a,g):(g=a,l||(l={type:"append",node:z.body}),(a=F(l.node))&&("append"==l.type?a.appendChild(g):a.parentNode.replaceChild(g,a))))},ready:function(a,e){q?a.call(e,v):n.push({fn:a,context:e})}},u;for(u in e){var E=
e[u];switch(u){case "title":v.setTitle(E);break;case "container":l={type:"append",node:E};break;case "replace":l={type:"replace",node:E};break;case "element":g=E;break;case "init":x="function"==typeof E?E:x}}a.ready(function(){var a=g,e=x.call(v);e&&(a=e.element?e.element:e);g=null;v.setElement(a);q=!0;for(v.inited=!0;a=n.shift();)a.fn.call(a.context,v)});return v});V.exports={create:n}}};(function V(a,q,H){function v(a){function b(a){return Math.round(a).toString(36)}var c=b(10+25*Math.random());
for(a||(a=16);c.length<a;)c+=b(new Date*Math.random());return c.substr(0,a)}function E(a,b){for(var c in b)a[c]=b[c];return a}function Q(a,b){for(var c in b)!1==c in a&&(a[c]=b[c]);return a}function G(a){var b=[],c;for(c in a)b.push(c);return b}function F(a,b){var c={};if(!b)return E(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e]);return c}function z(a,b,c){var d=[],e;for(e in a)d.push(b.call(c,e,a[e]));return d}function D(a){return a}function x(){}function l(a){var b=ea[a.url];if(b)for(var c=0;c<
b.length;c++)b[c](a.get(),a.url)}function g(a,c,d){try{return new Function(c,d)}catch(e){b.error("Compilation error at "+a+("line"in e?":"+(e.line-1):"")+": "+e)}}function e(a){if(!1==a in O){var b=a.split("."),c=b.shift(),b=b.join("/")+".js";!1==c in da&&(da[c]=k.baseURI+c+"/");b=c==a?da[c].replace(/\/$/,"")+".js":da[c]+b;O[a]=b;ja[b]=a}return O[a]}function p(b){b=b.split(".");var c;c=b[0];var d=L[c];d||(d=L[c]=new ka(c),d.namespaces_={},d.namespaces_[c]=d,U.noConflict||(a[c]=d));"library"!=c||ra||
(ra=L[c]);for(var d=c=d,e=1,f;f=b[e];e++){if(!d[f]){var h=b.slice(0,e+1).join(".");d[f]=new ka(h);c.namespaces_[h]=d[f]}d=d[f]}return L[b.join(".")]=d}function S(a,b){if(null!=a){var c=a.length;if("undefined"==typeof c||"[object Function]"==K.call(a))return[a];b||(b=0);if(0<c-b){for(var d=[],e=0,f=b;f<c;)d[e++]=a[f++];return d}}return[]}function M(a,b,c){for(var d=[],e="function"==typeof b,f=0;f<a;f++)d[f]=e?b.call(c,f,d):b;return d}var u=a.document,K=Object.prototype.toString,A=function(){function a(b){if(d.test(b)){var c=
b.split("."),e=c[0],f=c[1],h=c[2];switch(c.length){case 1:b=function(a){return null!=a?a[e]:a};break;case 2:b=function(a){return null!=a?a[e][f]:a};break;case 3:b=function(a){return null!=a?a[e][f][h]:a};break;default:b=function(a){if(null!=a){a=a[e][f][h];for(var b=3,d;d=c[b];b++)a=a[d]}return a}}return b}return new Function("object","return object != null ? object."+b+" : object")}var b="basisGetterId"+v()+"_",c=1,d=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,e=[],f={},h={},g=function(d,g){var k,
l,m;if(!d||d===t)return t;"function"==typeof d?(m=d[b])?k=e[Math.abs(m)-1]:(k=function(a){return d(a)},k.base=d,k.__extend__=A,m=e.push(k),d[b]=-m,k[b]=m):(k=f[d])?m=k[b]:(k=a(d),k.base=d,k.__extend__=A,m=e.push(k),k[b]=m,f[d]=k);l=null!=g&&typeof g;if(!l)return k;var p=h[m],q;if("string"==l)q=l+g;else if("function"==l)q=g.basisModId_;else if("object"!=l)return k;if(q&&p&&p[q])return p[q];"function"==typeof k.base&&(k=k.base);switch(l){case "string":l=function(a){return ma.format(g,k(a))};break;case "function":q||
(q=l+c++,g.basisModId_=q);l=function(a){return g(k(a))};break;default:l=function(a){return g[k(a)]}}l.base=k.base||k;l.__extend__=A;q&&(p||(p={},h[m]=p),p[q]=l,l.mod=g,l[b]=e.push(l));return l};g.ID=b;return g}(),t=E(function(){},{__extend__:A}),b=function(){var a={log:x,info:x,warn:x,error:x};"undefined"!=typeof console&&z(a,function(b){a[b]="bind"in Function.prototype&&"function"==typeof console[b]?Function.prototype.bind.call(console[b],console):function(){Function.prototype.apply.call(console[b],
console,arguments)}});return a}(),P=a.setImmediate||a.msSetImmediate,N=a.clearImmediate||a.msSetImmediate;P&&(P=P.bind(a));N&&(N=N.bind(a));P||function(){var b=function(){var a={},b=1;P=function(d){if("function"==typeof d)return a[++b]={fn:d,args:S(arguments,1)},c(b),b};N=function(b){delete a[b]};return function(b){var c=a[b];if(c)return delete a[b],c.fn.apply(void 0,c.args)}}(),c=function(a){setTimeout(function(){b(a)},0)};if(a.process&&"function"==typeof process.nextTick)c=function(a){process.nextTick(function(){b(a)})};
else if(a.MessageChannel){var d=new a.MessageChannel;d.port1.onmessage=function(a){b(a.data)};c=function(a){d.port2.postMessage(a)}}else{var e=a.postMessage&&!a.importScripts;if(e){var f=a.onmessage;a.onmessage=function(){e=!1};a.postMessage("","*");a.onmessage=f}if(e)f=function(c){c&&c.source==a&&(c=String(c.data).split("basisjs.setImmediate")[1])&&b(c)},a.addEventListener?a.addEventListener("message",f,!0):a.attachEvent("onmessage",f),c=function(b){a.postMessage("basisjs.setImmediate"+b,"*")};else if(u&&
"onreadystatechange"in u.createElement("script"))var g=c,c=function pa(a){"undefined"!=typeof C&&(c=g,C.head.ready(function(){c=function(a){var c=u.createElement("script");c.onreadystatechange=function(){c.onreadystatechange=null;C.remove(c);c=null;b(a)};C.head.add(c)}}));c===pa?g(a):c(a)}}}();var f="object"==typeof process&&"[object process]"==K.call(process),k=function(){var a=/^([^\/]+:|\/)/,b=/^[a-zA-Z0-9\-]+:\/?/,c=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,d=/[\?#].*$/,e,g,h;f?(g=(process.basisjsBaseURI||
require("path").resolve(".")).replace(/\\/g,"/"),e=g.replace(/^[^\/]*/,""),g=g.replace(/\/.*/,"")):(e=location.pathname.replace(/[^\/]+$/,""),g=location.protocol+"//"+location.host);return h={baseURI:e,origin:g,normalize:function(a){a=(a||"").replace(b,"/").replace(c,"/").replace(d,"");for(var e=[],f=a.split("/"),g=0;g<f.length;g++)".."==f[g]?(1<e.length||e[0])&&e.pop():!f[g]&&g||"."==f[g]||e.push(f[g]);return e.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=h.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,
"")||("/"==a[0]?"/":".")},extname:function(a){return(a=h.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?a[1]:""},basename:function(a,b){var c=h.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==h.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(b,c){for(var d=S(arguments).reverse(),f=[],g=!1,k=0;!g&&k<d.length;k++)"string"==typeof d[k]&&(f.unshift(d[k]),g=a.test(d[k]));g||f.unshift("/"==e?"":e);return h.normalize(f.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=e);
a=h.normalize(a);b=h.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;if("/"==b[0]&&"/"!=a[0])return b;for(var c=a.replace(/^\/$/,"").split(/\//),d=b.replace(/^\/$/,"").split(/\//),f=[],g=0;d[g]==c[g]&&"string"==typeof c[g];)g++;for(c=c.length-g;0<c;c--)f.push("..");return f.concat(d.slice(g).filter(Boolean)).join("/")}}}(),y=q||"",U=H||{noConflict:!0,modules:{},autoload:["./0.js"]},aa=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;
return c===a}function c(h,l){var m=f++;"function"!=typeof h&&(h=k);var p=function(){};p.prototype=h.prototype;for(var p=new p,m={basisClassId_:m,superClass_:h,extendConstructor_:!!h.extendConstructor_,isSubclassOf:b,subclass:function(){return c.apply(null,[t].concat(S(arguments)))},extend:d,__extend__:function(b){return b&&b!==g&&("object"==typeof b||"function"==typeof b&&!a(b))?k.create.call(null,t,b):b},prototype:p},q=1,s;s=arguments[q];q++)m.extend(s);var t=m.extendConstructor_?function(a){this.basisObjectId=
e.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=e.id++;this.init.apply(this,arguments);this.postInit()};p.constructor=t;for(var u in p)p[u]===g&&(p[u]=t);E(t,m);return t}function d(b){var c=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype,F(c)));b.prototype&&(b=b.prototype);for(var e in b){var f=b[e],g=c[e];"className"==e||"extendConstructor_"==e?this[e]=f:c[e]=g&&g.__extend__?
g.__extend__(f):f}h&&b[e="toString"]!==K&&(c[e]=b[e]);return this}var e={id:1},f=1,g={},h=function(){for(var a in{toString:1})return!1;return!0}(),k=E(c,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.destroy=x}}}),l=function(a,b,c){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=
new c;b(c,a);return c}}.__extend__(a||{})},m=function(a){return l(a,E,"extensibleProperty")};return E(k,{SELF:g,create:c,isClass:a,customExtendProperty:l,extensibleProperty:m,nestedExtendProperty:function(a){return l(a,function(a,b){for(var c in b){var d=a[c];a[c]=d&&d.__extend__?d.__extend__(b[c]):m(b[c])}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var d={__extend__:c};if(b){if(b.__extend__)return b;for(var e in b)b[e]&&(d[e]=a)}return d};return c(b||{})}})}(),
d=aa(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c){a.attach(b,c)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b){this.handler={fn:a,context:b,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=x;d.handler=
c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new T(this.value),this.attach(a.set,a));return a},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.value=this.handler=null;this.detach=this.attach=x}}),ca=function(){function a(){var d=b;b={};c=null;for(var e in d)d[e].apply()}var b={},c;return function(d){d.basisObjectId in b||(b[d.basisObjectId]=
d,c||P(a))}}(),T=d.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,ca(this))},deferred:function(){return this}}),Y={},X={},ea={},c=1;(function(){var a="undefined"!=typeof sa?sa:null;if(a)for(var b in a)X[k.resolve(b)]=a[b]})();var w=function(a,b){if(b||!X.hasOwnProperty(a)){var c="";if(f)try{c=process.basisjsReadFile?process.basisjsReadFile(a):require("fs").readFileSync(a,"utf-8")}catch(d){}else{var e=new XMLHttpRequest;e.open("GET",a,!1);e.setRequestHeader("If-Modified-Since",
(new Date(0)).toGMTString());e.setRequestHeader("X-Basis-Resource",1);e.send("");200<=e.status&&400>e.status&&(c=e.responseText)}X[a]=c}return X[a]},I=function(a,b){var c=k.extname(a),e=Z.extensions[c],f=1<arguments.length,g=!1,h=!1;f&&(a+="#virtual");var m=function(){if(g)return b;var c=f?b:w(a);e?h||(h=!0,b=e(c,a)):b=c;g=!0;l(m);m.apply();return b};E(m,E(new d,{url:a,type:c,virtual:f,fetch:function(){return m()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return g},
update:function(c){if(!g||f||c!=X[a])f||(X[a]=c),e?(!h&&f&&(b=c),h&&!e.permanent&&(b=e(c,a,b),l(m),m.apply())):(b=c,g=!0,l(m),m.apply())},reload:function(){if(!f){var b=X[a],c=w(a,!0);c!=b&&(g=!1,m.update(c))}},get:function(c){return f&&c?e?wrappedContent:b:c?w(a):m()},ready:function(a,b){if(g&&(a.call(b,m()),e&&e.permanent))return;m.attach(a,b);return m}}));return Y[a]=m},Z=function(a){var b=Y[a];if(b)return b;a=k.resolve(a);return(b=Y[a])||I(a)};E(Z,{isResource:function(a){return a?Y[a.url]===a:
!1},isResolved:function(a){return(a=Z.get(a))?a.isResolved():!1},exists:function(a){return Y.hasOwnProperty(k.resolve(a))},get:function(a){a=k.resolve(a);return Z.exists(a)?Z(a):null},getFiles:function(a){return G(a?X:Y).map(k.relative)},virtual:function(a,b,d){return I((d?d+":":k.normalize("/"==k.baseURI?"":k.baseURI)+"/")+"virtual-resource"+c++ +"."+a,b)},extensions:{".js":E(function(a,b){var c=ja[b];if(!c){var d=!0,c=k.dirname(b)+"/"+k.basename(b,k.extname(b)),e;for(e in da){var f=da[e]+e+"/";
if(c.substr(0,f.length)==f){d=!1;c=c.substr(da[e].length);break}}c=c.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,".");d&&(c="implicit."+c)}L[c]||(e=p(c),e.exports=h({path:e.path,exports:e.exports},b,a).exports,e.exports&&e.exports.constructor===Object&&Q(e,e.exports));return L[c].exports},{permanent:!0}),".css":function(a,b,c){c||(c=new fa(b));c.updateCssText(a);return c},".json":function(a,b){if("object"==typeof a)return a;var c;try{a=String(a),c=W.json.parse(a)}catch(d){}return c||null}}});
var h=function(b,c,d){var e=k.dirname(c)+"/",f=d;b.exports||(b.exports={});"function"!=typeof f&&(f=g(c,"exports module basis global __filename __dirname resource require".split(" "),'"use strict";\n'+d));"function"==typeof f&&f.call(b.exports,b.exports,b,W,a,c,e,function(a){return Z(k.resolve(e,a))},function(a,b){return m(a,b||e)});return b},L={},O={},ja={},da={};z(U.modules,function(a,b){da[a]=b.path+"/";O[a]=b.filename;ja[b.filename]=a});(function(a){if(a="undefined"!=typeof qa?qa:null)for(var b in a){var c=
k.resolve(b),d=a[b];ja[c]=d;O[d]=c}})();var ka=aa(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(a){E(this.exports,a);return Q(this,a)}}),m=function(){if(f){var a=module.constructor.prototype;return function(b,c){if(/[^a-z0-9_\.]/i.test(b)&&".js"!=k.extname(b))return b=k.resolve(c,b),require(b);var d=a._compile,e=p(b);a._compile=function(a,b){this.basis=W;a='var __nodejsRequire = require;\nvar basis = module.basis;\nvar resource = function(filename){ return basis.resource(__dirname + "/" + filename) };\nvar require = function(filename, baseURI){ return basis.require(filename, baseURI || __dirname) };\n'+
a;d.call(E(this,e),a,b)};var f=require(__dirname+"/"+b.replace(/\./g,"/"));(e.exports=f)&&f.constructor===Object&&Q(e,f);a._compile=d;return f}}return function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==k.extname(a)?k.resolve(b,a):e(a);return Z(a).fetch()}}();Q(Function.prototype,{bind:function(a){var b=this,c=S(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});Q(Array,{isArray:function(a){return"[object Array]"===K.call(a)}});
Q(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=
0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw 1;var e,f=0;1<d&&(e=b,f=1);for(d=0;d<c;d++)d in this&&(e=f++?a.call(null,e,this[d],d,this):this[d]);return e}});
var s={from:S,create:M,flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return s.flatten(M(parseInt(b,10)||0,a))},search:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||D);d=parseInt(d,10)||0;for(var e=a.length;d<e;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||D);var e=a.length;d=isNaN(d)||null==d?e:parseInt(d,10);for(e=d>e?e:d;0<e--;)if(c(a[e])===b)return a[a.lastSearchIndex=e]},add:function(a,b){return-1==a.indexOf(b)&&
!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(){return s.sort.apply(this,arguments)},sort:function(a,b,c,d){b=A(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(a){return this[a.i]},a)}};if(![1,2].splice(1).length){var J=Array.prototype.splice;Array.prototype.splice=function(){var a=S(arguments);2>a.length&&
(a[1]=this.length);return J.apply(this,a)}}var R=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,la=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;Q(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});Q(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,
"")},trim:function(){return this.trimLeft().trimRight()}});var ma={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw 2;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(R,"\\$1")},format:function(a,b){var c=S(arguments,1);"object"==typeof b&&E(c,b);return a.replace(la,function(a,b,d,e,f){a=b in c?c[b]:f?"":a;return d&&!isNaN(a)?(a=Number(a),"."==d?a.toFixed(e):
$.lead(a,e)):a})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}};if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var na=String.prototype.split;String.prototype.split=function(a,
b){if(!a||!1==a instanceof RegExp||""==a.source)return na.apply(this,arguments);var c=[],d=0,e;for(a.global||(a=new RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=a.exec(this);)e[0]=this.substring(d,e.index),c.push.apply(c,e),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var ia=String.prototype.substr;String.prototype.substr=function(a,b){return ia.call(this,0>a?Math.max(0,this.length+a):a,b)}}var $={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):
a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,function(d,e){return!e+(a.length-e)%(b||3)?d:(c||" ")+d})})},format:function(a,b,c,d,e,f){a=a.toFixed(b);if(c||f)a=a.replace(/(\d+)(\.?)/,function(a,b,d){return(c?W.number.group(Number(b),3,c):b)+(d?f||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(e||"")}};Q(Date,{now:function(){return Number(new Date)}});
var ga=function(){function b(){if("complete"==u.readyState&&u.body&&!d++)for(;e;)e.callback.call(e.context),e=e.next}function c(){try{u.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,1)}}var d=!u||"complete"==u.readyState&&!!u.body,e;if(!d)if(u.addEventListener)u.addEventListener("DOMContentLoaded",b,!1),a.addEventListener("load",b,!1);else{u.attachEvent("onreadystatechange",b);a.attachEvent("onload",b);try{!a.frameElement&&u.documentElement.doScroll&&c()}catch(f){}}return function(a,
b){d?a.call(b):e={callback:a,context:b,next:e}}}(),C=function(){function a(b){if(u&&!f[b]&&(f[b]=u[b]||u.getElementsByTagName(b)[0],f[b])){var c=g[b];delete g[b];for(var d=0,e;e=c[d];d++)e[0].call(e[1],f[b])}return f[b]}function b(){var d=this[0],e=this[1],f=this[2];c(e);var h=a(d);h?(!0===f&&(f=h.firstChild),f&&f.parentNode===h||(f=null),h.insertBefore(e,f)):g[d].push([b,[d,e,f]])}function c(a){for(var b in g){var d=s.search(g[b],a,function(a){return a[1]&&a[1][1]});d&&s.remove(g[b],d)}a&&a.parentNode&&
1==a.parentNode.nodeType&&a.parentNode.removeChild(a)}function d(){e&&a("head")&&a("body")&&(e=clearInterval(e))}var e,f={},g={head:[],body:[]};!u||a("head")&&a("body")||(e=setInterval(d,5),ga(d));return{head:{ready:function(a,b){g.head?g.head.push([a,b]):a.call(b,f.head)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){g.body?g.body.push([a,b]):a.call(b,f.body)},add:function(a,c){b.call(["body",a,c])}},remove:c}}();q=function(){function b(a){d.globalDestroy=!0;d.add=x;for(d.remove=
x;a=c.pop();)if("function"==typeof a.destroy)try{a.destroy()}catch(e){}else for(var f in a)a[f]=null;c.length=0}var c=[];if("attachEvent"in a)a.attachEvent("onunload",b);else if("addEventListener"in a)a.addEventListener("unload",b,!1);else return{add:x,remove:x};var d={add:function(a){null!=a&&c.push(a)},remove:function(a){s.remove(c,a)}};return d}();var fa=function(){function a(b){f.setAttribute("href",b);C.head.add(f,!0)}function b(){f.setAttribute("href",location.href);C.remove(f)}function c(){a(this.baseURI);
this.element||(this.element=u.createElement("style"),d||this.element.appendChild(u.createTextNode("")));C.head.add(this.element);this.syncCssText();b()}var d;try{d=!u.createElement("style").appendChild(u.createTextNode(""))}catch(e){d=!0}var f=u&&u.createElement("base");return aa(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(a){this.url=a;this.baseURI=k.dirname(a)+"/"},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&
this.element&&(a(this.baseURI),this.syncCssText(),b()))},syncCssText:d?function(){this.element.styleSheet.cssText=this.cssText}:function(){this.element.firstChild.nodeValue=this.cssText},startUse:function(){this.inUse||C.head.ready(c,this);this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&C.remove(this.element))},destroy:function(){this.element&&C.remove(this.element);this.cssText=this.element=null}})}(),W=p("basis").extend({version:"1.3.1-dev",NODE_ENV:f,config:U,
createSandbox:function(b){return V(a,y,Q({noConflict:!0},b))},resolveNSFilename:e,patch:function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==k.extname(a)?k.resolve(a):e(a);ea[a]?ea[a].push(b):ea[a]=[b];var c=Z.get(a);c&&c.isResolved()&&b(c.get(),c.url)},namespace:p,require:m,resource:Z,asset:function(a){return a},setImmediate:P,clearImmediate:N,nextTick:function(){P.apply(null,arguments)},Class:aa,Token:d,DeferredToken:T,genUID:v,getter:A,ready:ga,cleaner:q,console:b,path:k,doc:C,object:{extend:E,complete:Q,
keys:G,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:F,splice:function(a,b){var c={};if(!b)return E(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e],delete a[e]);return c},merge:function(){return S(arguments).reduce(E,{})},iterate:z},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==
this},$self:D,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:x,getter:A,nullGetter:t,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},lazyInit:function(a,b){var c=0,d,e;return d=function(){c++||(d.inited=!0,d.data=e=a.apply(b||this,arguments));return e}},lazyInitAndRun:function(a,b,c){var d=0,e,f;return e=function(){d++||(e.inited=!0,e.data=f=a.call(c||this));b.apply(f,arguments);return f}},
runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}}},array:E(S,s),string:ma,number:$,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return ma.toObject(a,!0)}}});p("basis.dev").extend(b);U.autoload&&U.autoload.forEach(function(a){m(a)});return W})(this)}).call(this)