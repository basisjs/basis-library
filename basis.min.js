(function(){var Da={"0.js":"library","1.js":"basis.ui","2.js":"basis.event","3.js":"basis.template.html","4.js":"basis.l10n","5.js":"basis.template.htmlfgen","6.js":"basis.template.const","7.js":"basis.template","8.js":"basis.template.declaration","9.js":"basis.template.store","a.js":"basis.template.theme","b.js":"basis.template.buildDom","c.js":"basis.dom.event","d.js":"basis.dom.wrapper","e.js":"basis.data","f.js":"basis.dragdrop","g.js":"basis.dom.computedStyle","h.js":"basis.layout","i.js":"basis.data.dataset",
"j.js":"basis.data.value","k.js":"basis.data.index","l.js":"basis.data.object","m.js":"basis.entity","n.js":"basis.net.jsonp","o.js":"basis.net","p.js":"basis.net.service","q.js":"basis.net.ajax","r.js":"basis.ua","s.js":"basis.net.action","t.js":"basis.promise","u.js":"basis.router","v.js":"basis.app"},Ea,Fa={"f.js":function(d,U,b,g,l,A,P,S,da){function w(a){return"string"==typeof a?K.getElementById(a):a}function C(a){if(!c&&!this.ignoreTarget(a.sender,a)){var b=q(a.sender);a.mouseX<b.left||a.mouseX>
b.right||a.mouseY<b.top||a.mouseY>b.bottom||(c=this,y={initX:a.mouseX,initY:a.mouseY,deltaX:0,minDeltaX:-Infinity,maxDeltaX:Infinity,deltaY:0,minDeltaY:-Infinity,maxDeltaY:Infinity},k("mousedown",B),k("touchstart",B),k("mousemove",x),k("touchmove",x),k("mouseup",B),k("touchend",B),J&&k("selectstart",r.kill),a.preventDefault(),this.prepareDrag(y,a))}}function x(h){var p=h.mouseX-y.initX,u=h.mouseY-y.initY;if(!a){if(!c.startRule(p,u))return;a=!0;c.emit_start(y,h)}c.axisX&&(y.deltaX=c.axisXproxy(b.number.fit(p,
y.minDeltaX,y.maxDeltaX)));c.axisY&&(y.deltaY=c.axisYproxy(b.number.fit(u,y.minDeltaY,y.maxDeltaY)));c.emit_drag(y,h)}function B(b){z("mousedown",B);z("touchstart",B);z("mousemove",x);z("touchmove",x);z("mouseup",B);z("touchend",B);J&&z("selectstart",r.kill);var p=c,u=y;y=c=null;a&&(a=!1,p.emit_over(u,b));b.die()}d=this.path;var K=g.document,D=b.cleaner,r=b.require("./c.js"),k=r.addGlobalHandler,z=r.removeGlobalHandler;l=b.require("./2.js");var G=l.Emitter;l=l.create;var m=b.require("./g.js").get;
A=b.require("./h.js");var F=A.getBoundingRect,q=A.getViewportRect,J=r.getEventInfo("selectstart").supported,a,c,y,L=G.subclass({className:d+".DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:b.fn.$self,axisYproxy:b.fn.$self,prepareDrag:b.fn.$undef,startRule:b.fn.$true,ignoreTarget:function(a){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(a.tagName)},emit_start:l("start"),emit_drag:l("drag"),emit_over:l("over"),init:function(){G.prototype.init.call(this);var a=
this.element,b=this.trigger;this.trigger=this.element=null;this.setElement(a,b);this.setBase(this.baseElement);D.add(this)},setElement:function(a,b){this.element=w(a);b=w(b)||this.element;this.trigger!==b&&(this.trigger&&(r.removeHandler(this.trigger,"mousedown",C,this),r.removeHandler(this.trigger,"touchstart",C,this)),this.trigger=b)&&(r.addHandler(this.trigger,"mousedown",C,this),r.addHandler(this.trigger,"touchstart",C,this))},setBase:function(a){this.baseElement=w(a)},getBase:function(){return"fixed"==
m(this.element,"position")?g:this.baseElement?this.baseElement:"CSS1Compat"==K.compatMode?K.documentElement:K.body},isDragging:function(){return c===this},start:function(a){this.isDragging()||C.call(this,a)},stop:function(){this.isDragging()&&B()},destroy:function(){this.stop();D.remove(this);G.prototype.destroy.call(this);this.setElement();this.setBase()}});l=b.Class(null,{className:d+".DeltaWriter",property:null,invert:!1,format:b.fn.$self,init:function(a){"function"==typeof this.property&&(this.property=
this.property(a));"function"==typeof this.invert&&(this.invert=this.invert(this.property));this.value=this.read(a)},read:function(a){return a[this.property]},write:function(a,b){a[this.property]=b},applyDelta:function(a,b){this.invert&&(b=-b);this.write(a,this.format(this.value+b,b))}});A=l.subclass({className:d+".StyleDeltaWriter",format:function(a){return a+"px"},read:function(a){return parseFloat(m(a,this.property))||0},write:function(a,b){a.style[this.property]=b}});P=A.subclass({property:function(a){return"auto"==
m(a,"left")&&"auto"!=m(a,"right")?"right":"left"},invert:function(a){return"right"==a}});S=A.subclass({property:function(a){return"auto"==m(a,"top")&&"auto"!=m(a,"bottom")?"bottom":"top"},invert:function(a){return"bottom"==a}});d=L.subclass({className:d+".MoveableElement",fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:P,axisY:S,emit_start:function(a,b){var c=this.element;if(c){var m=q(this.getBase()),y=F(c,this.getBase());a.element=c;this.axisX&&(a.axisX=new this.axisX(c),this.fixLeft&&(a.minDeltaX=
m.left-y.left),this.fixRight&&(a.maxDeltaX=m.right-y.right));this.axisY&&(a.axisY=new this.axisY(c),this.fixTop&&(a.minDeltaY=m.top-y.top),this.fixBottom&&(a.maxDeltaY=m.bottom-y.bottom))}L.prototype.emit_start.call(this,a,b)},emit_drag:function(a,b){a.element&&(a.axisX&&a.axisX.applyDelta(a.element,a.deltaX),a.axisY&&a.axisY.applyDelta(a.element,a.deltaY),L.prototype.emit_drag.call(this,a,b))}});U.exports={DragDropElement:L,MoveableElement:d,DeltaWriter:l,StyleDeltaWriter:A}},"0.js":function(d,U,
b,g,l,A,P,S,da){b.require("./1.js");b.require("./f.js");b.require("./i.js");b.require("./j.js");b.require("./k.js");b.require("./l.js");b.require("./m.js");b.require("./n.js");b.require("./p.js");b.require("./s.js");b.require("./u.js");b.require("./v.js");g.basis=b},"2.js":function(d,U,b,g,l,A,P,S,da){function w(b){var d=x[b];d||(d=function(){for(var d=this,k,z;d=d.handler;){z=d.callbacks[b];if("function"==typeof z){if(!k){k=[this];for(var g=0;g<arguments.length;g++)k.push(arguments[g])}z.apply(d.context||
this,k)}z=d.callbacks["*"];if("function"==typeof z){if(!k)for(k=[this],g=0;g<arguments.length;g++)k.push(arguments[g]);z.call(d.context||this,{sender:this,type:b,args:k})}}},x[b]=d);return d}d=b.Class;var C={},x={},B=function(){};d=d(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:w("destroy"),listen:d.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(b,
d){this.handler={callbacks:b,context:d||this,handler:this.handler}},removeHandler:function(b,d){var r=this,k;for(d=d||this;k=r,r=r.handler;)if(r.callbacks===b&&r.context===d){r.callbacks=C;k.handler=r.handler;break}},destroy:function(){this.destroy=B;this.emit_destroy();this.handler=null}});U.exports={create:w,createHandler:function(b,d){var r={events:[]};if(b){b=String(b).trim().split(/\s+|\s*,\s*/).sort();for(var r={events:b},k=0,z;z=b[k];k++)"destroy"!=z&&(r[z]=d)}return r},events:x,Emitter:d}},
"3.js":function(d,U,b,g,l,A,P,S,da){function w(a){var b=a.dictionary,c=b.resource?b.resource.url:"dictionary"+b.basisObjectId;a=a.getName();var h=a+"@"+c,q=y[h],d;if(!q){var m=b.token(a),q=y[h]=m.as(function(a){if("markup"==m.getType()){var b=m.getParentType();"string"!=typeof a||"plural"!=b&&"plural-markup"!=b||(a=a.replace(/\{#\}/g,"{__templateContext}"));a!=this.value&&d&&(d.detach(m,m.apply),d=null);a&&"path:"==String(a).substr(0,5)&&(d=G(a.substr(5)),d.attach(m,m.apply));return d?d.bindingBridge.get(d):
a}return this.value});q.id="{l10n:"+h+"}";q.url=c+":"+a}return q}function C(a){"string"==typeof a&&(a=r(a));if(!a)return null;a=w(a);var b=a.id,h=c[b];h||(h=c[b]=new L(a));return h}d=this.path;var x=g.document,B=g.Node,K=b.string.camelize,D=b.require("./4.js").isMarkupToken,r=b.require("./4.js").token,k=b.require("./5.js").getFunctions;P=b.require("./7.js");var z=P.TemplateSwitchConfig;l=P.TemplateSwitcher;A=P.Template;var G=P.get,m=b.require("./b.js"),F=b.require("./6.js").CLONE_NORMALIZATION_TEXT_BUG,
q;a:{try{q=x.documentElement.style.color="x";break a}catch(J){}q=void 0}var a=!!q,c={},y={};q=function(){function c(){this.set(this.name,this.value)}function h(a,b,N){var u=b&&b.bindingBridge,f=this.attaches&&this.attaches[a],e=null;if(u||f)if(u){var n;D(b)&&(n=C(b));if(f&&f.value===b&&f.template===n)e=b&&D(b)?f.tmpl:null;else{f&&(f.tmpl&&f.template.clearInstance(f.tmpl),f.value.bindingBridge.detach(f.value,c,f));if(n){var t=this.context,E=this.bindings,q=this.bindingInterface,e=n.createInstance(t,
null,function fa(){e=v.tmpl=n.createInstance(t,null,fa,E,q);e.parent=e.element.parentNode||e.element;c.call(v)},E,q);e.parent=e.element.parentNode||e.element}this.attaches||(this.attaches=new N);var v=this.attaches[a]={name:a,value:b,template:n,tmpl:e,set:this.tmpl.set};u.attach(b,c,v)}if(e)return e.set("__templateContext",b.value),e.parent;b=u.get(b)}else f&&(f.tmpl&&f.template.clearInstance(f.tmpl),f.value.bindingBridge.detach(f.value,c,f),this.attaches[a]=null);return b}function q(a,b){var c=a[0],
N=a[1],f=b[c],e=b[N];switch(a.length){case 1:return function(e){this(c,f(e))};case 2:return function(a){this(c,f(a));this(N,e(a))};default:var n=a.map(function(e){return b[e]});return function(e){for(var f=0;f<a.length;f++)this(a[f],n[f](e))}}}function d(a){var b={};return function(c,N){var f=c.bindings;if(!f)return{};var e="bindingId"in f?f.bindingId:null,n=b[e];if(!n){for(var n=[],t={},E={},h=0,v;v=a[h];h++){var u=f[v],p=u&&u.getter;if(p&&(t[v]=p,n.push(v),u.events))for(var u=String(u.events).trim().split(/\s+|\s*,\s*/),
p=0,d;d=u[p];p++)E[d]?E[d].push(v):E[d]=[v]}var f=q(n,t),m;for(m in E)E[m]=q(E[m],t);n={names:n,sync:f,handler:m?E:null};e&&(b[e]=n)}N&&n.sync.call(N,c.context);if(c.bindingInterface)return n.handler&&c.bindingInterface.attach(c.context,n.handler,N),n.handler}}var y=/\s+/,z=g.DOMTokenList&&x&&x.documentElement.classList instanceof g.DOMTokenList,L;a:{try{L=x instanceof B;break a}catch(G){}L=void 0}var N=L?function(a,b,c,N){a=!N&&c&&c instanceof B?c:a;if(a!==b){11!==a.nodeType||a.startMarker||(a.startMarker=
x.createTextNode(""),a.endMarker=x.createTextNode(""),a.insertBefore(a.startMarker,a.firstChild),a.appendChild(a.endMarker));if(11===b.nodeType&&b.startMarker){c=b.startMarker;N=b.endMarker;for(var f=c.nextSibling;f&&f!==N;){var e=f,f=f.nextSibling;b.appendChild(e)}N.parentNode.removeChild(N);b.startMarker=null;b.endMarker=null;b=c}b.parentNode.replaceChild(a,b)}return a}:function(a,b,c,N){c=!N&&c&&"object"==typeof c?c:a;if(c!==b)try{b.parentNode.replaceChild(c,b)}catch(f){c=a,b!==c&&b.parentNode.replaceChild(c,
b)}return c},J=function(a,b,c,N){c!==N&&(N?a.setAttribute(b,N):a.removeAttribute(b));return N},l={bind_textNode:function(a,b,c,h){b=N(a,b,c,h);b===a&&(a.nodeValue=String(c));return b},bind_node:N,bind_element:function(a,b,c,h){b=N(a,b,c,h);b===a&&"string"==typeof c&&(a.innerHTML=c);return b},bind_comment:N,bind_attr:J,bind_attrClass:z?function(a,c,N,h){var f=N?N:"";f!=c&&(c&&a.classList.remove(c),f&&(a.classList.add(f),h&&(a.classList.add(f+"-anim"),b.nextTick(function(){a.classList.remove(f+"-anim")}))));
return f}:function(a,c,N,h){var f=N?N:"";if(f!=c){N=a.className;var e="string"!=typeof N;e&&(N=N.baseVal);N=N.split(y);c&&b.array.remove(N,c);f&&(N.push(f),h&&(b.array.add(N,f+"-anim"),b.nextTick(function(){var n=(e?a.className.baseVal:a.className).split(y);b.array.remove(n,f+"-anim");e?a.className.baseVal=n.join(" "):a.className=n.join(" ")})));e?a.className.baseVal=N.join(" "):a.className=N.join(" ")}return f},bind_attrStyle:a?function(a,b,c,N){c!==N&&(a.style[K(b)]=N);return N}:function(a,b,c,
N){if(c!==N)try{a.style[K(b)]=N}catch(f){}return N},resolve:h,l10nToken:r};return function(a,c){var N=k(a,!0,this.source.url,a.source_,!F),p=N.createL10nSync,f,e,n={},t=[],E=[],q=0,v={cloneNode:function(){if(1==q)return m(a);v=m(a);if(p){e=N.createL10nSync(v,n,J,F);for(var b=0,f;f=t[b];b++)e(f.path,n[f.path])}return v.cloneNode(!0)}};if(p)var ja=function(a){for(var e=0,b;b=t[e];e++)a(b.path,n[b.path])},y=function(a){var f=D(this.token);f?b.array.add(E,this):b.array.remove(E,this);n[this.path]=f?void 0:
null==a?"{"+this.path+"}":a;e&&e(this.path,n[this.path]);for(var v in c)c[v].tmpl.set(this.path,f?this.token:a)},t=N.l10nKeys.map(function(a){var e=r(a),b={path:a,token:e,handler:y};e.attach(y,b);D(e)?E.push(b):n[a]=null==e.value?"{"+a+"}":e.value;return b});f=N.createInstanceFactory(this.templateId,function(){return v.cloneNode(!0)},l,n,E,d(N.keys),F);return{createInstance:function(a,e,b,n,v){var t=q++;a={context:a,action:e,rebuild:b,handler:null,bindings:n,bindingInterface:v,attaches:null,compute:null,
tmpl:null};f(t,a,t?null:ja);c[t]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var e=c[a];if(e){e.handler&&e.bindingInterface.detach(e.context,e.handler,e.tmpl.set);if(e.compute){for(var b=0;b<e.compute.length;b++)e.compute[b].destroy();e.compute=null}for(var f in e.attaches)h.call(e,f,null);delete c[a]}},destroy:function(a){for(var b=0,f;f=t[b];b++)f.token.detach(f.handler,f);for(var E in c)if(b=c[E],a&&b.rebuild&&b.rebuild.call(b.context),!a||E in c)for(E in b.handler&&b.bindingInterface.detach(b.context,
b.handler,b.tmpl.set),b.attaches)h.call(E,null);c=e=t=n=v=N=null}}}}();var L=A.subclass({className:d+".Template",__extend__:function(a){return a instanceof L?a:a instanceof z?new h(a):new L(a)},builder:q}),h=l.subclass({className:d+".TemplateSwitcher",templateClass:L});U.exports={Template:L,TemplateSwitcher:h}},"4.js":function(d,U,b,g,l,A,P,S,da){function w(b){return b?b instanceof c||b instanceof a:!1}function C(a,b,c,h){var u=a.cultureValues[b];h=h?h+".":"";for(var p in c)if(-1==p.indexOf(".")&&
k.call(c,p)){var q=h+p,f=c[p];(u[q]=f)&&("object"==typeof f||Array.isArray(f))&&C(a,b,f,q)}}function x(a){var c;if("string"==typeof a){var h=b.path.extname(a);".l10n"!=h&&(a=a.replace(new RegExp(h+"([#?]|$)"),".l10n$1"));a=b.resource(a)}b.resource.isResource(a)&&(c=L[a.url]);return c||new p(a)}function B(a,b){a&&!M[a]&&(M[a]=new la(a,b));return M[a||H]}function K(a){if(a&&H!=a&&-1!=u.indexOf(a)){H=a;for(var c=0,h;h=y[c];c++)h.syncValues();b.Token.prototype.set.call(B,a)}}function D(a){"string"==typeof a&&
(a=a.trim().split(" "));if(a.length){var c={},h,p;W={};for(var q=0,d;h=a[q];q++)h=h.split("/"),2<h.length&&(h=h.slice(0,2)),d=h[0],p||(p=d),c[d]=B(d),W[d]=h;for(d in W)W[d]=b.array.flatten(W[d].map(function(a){return W[a]})).concat(p).filter(function(a,b,e){return!b||-1==e.lastIndexOf(a,b-1)});u=b.object.keys(c);0==H in c&&K(p)}}d=this.path;g=b.Class;var r=b.require("./2.js").Emitter,k=Object.prototype.hasOwnProperty;b.resource.extensions[".l10n"]=function(a,c){return x(c).update(b.resource.extensions[".json"](a,
c))};var z=[],G={},m=b.Token.prototype.set,F={"default":!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},q={"default":"default",plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},J={plural:!0,"plural-markup":!0},a=g(b.Token,{className:d+".ComputeToken",dictionary:null,token:null,parent:"",init:function(a){this.token.computeTokens[this.basisObjectId]=this;b.Token.prototype.init.call(this,a)},get:function(){var a=this.dictionary.getValue(this.getName());J[this.token.getType()]&&
(a=String(a).replace(/\{#\}/g,this.value));return a},getName:function(){var a=this.value;J[this.token.getType()]&&(a=M[H].plural(a));return this.parent+"."+a},getType:function(){var a=this.token.getType();return this.dictionary.types[this.getName()]||q[a]||"default"},getParentType:function(){return this.token.getType()},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];b.Token.prototype.destroy.call(this)}}),c=g(b.Token,{className:d+".Token",
index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(a,c,h){b.Token.prototype.init.call(this,h);this.index=z.push(this)-1;this.name=c;this.parent=c.replace(/(^|\.)[^.]+$/,"");this.dictionary=a;this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var a in this.computeTokens)this.computeTokens[a].apply();b.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.dictionary.types[this.name]||
q[this.dictionary.types[this.parent]]||"default"},getParentType:function(){return this.parent?this.dictionary.token(this.parent).getType():"default"},setType:function(){},compute:function(a,c){1==arguments.length&&(c=a,a="");c=b.getter(c);a=String(a).trim().split(/\s+|\s*,\s*/).sort();var h=a.concat(this.basisObjectId,c[b.getter.ID]).join("_");if(G[h])return G[h];for(var u=this,p={},q=function(a){m.call(this,c(a))},d={destroy:function(a){delete p[a.basisObjectId];this.destroy()}},f=0,e;e=a[f];f++)"destroy"!=
e&&(d[e]=q);return G[h]=function(a){if(0==a instanceof r)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";var e=a.basisObjectId,b=p[e];b||(b=p[e]=u.computeToken(c(a)),a.addHandler(d,b));return b}},computeToken:function(b){var c=this.computeTokenClass;c||(c=this.computeTokenClass=a.subclass({dictionary:this.dictionary,token:this,parent:this.name}));return new c(b)},token:function(a){if(J[this.getType()])return this.computeToken(a,this);if(this.dictionary)return this.dictionary.token(this.name+
"."+a)},destroy:function(){for(var a in this.computeTokens)this.computeTokens[a].destroy();this.dictionary=this.value=this.computeTokens=this.computeTokenClass=null;z[this.index]=null;b.Token.prototype.destroy.call(this)}}),y=[],L={},h=new b.Token,p=g(null,{className:d+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(a){this.tokens={};this.types={};this.cultureValues={};this.index=y.push(this)-1;b.resource.isResource(a)?(this.resource=a,L[a.url]||(L[a.url]=
this,h.set(a.url)),a.fetch()):this.update(a||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]={},C(this,b,a[b]));a=a._meta&&a._meta.type||{};b={};for(var c in this.tokens)b[c]=this.tokens[c].getType();this.types={};for(c in a)this.types[c]=1==F[a[c]]?a[c]:"default";for(c in this.tokens)this.tokens[c].getType()!=b[c]&&this.tokens[c].apply();this.syncValues();return this},syncValues:function(){for(var a in this.tokens)m.call(this.tokens[a],
this.getValue(a))},getValue:function(a){for(var b=W[H]||[],c=0,h;h=b[c];c++)if((h=this.cultureValues[h])&&a in h)return h[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new c(this,a,this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;b.array.remove(y,this);this.resource&&(delete L[this.resource.url],this.resource=null)}}),u=[],H=null,M={},W={},ca={},T=[[1,function(){return 0}],
[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==a?0:1}],[2,function(a){return 0==a||1==a?0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==
a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>
a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){ca[a]=this},T[b])});var la=b.Class(null,{className:d+".Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;M[a]||(M[a]=this);this.pluralForm=b||ca[a]||ca[a.split("-")[0]]||T[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});b.object.extend(B,new b.Token);B.set=K;D("en-US");K("en-US");U.exports={ComputeToken:a,Token:c,token:function(a){if("#"==a.charAt(0))return z[parseInt(a.substr(1),36)];if(a=a.match(/^(.+?)@(.+)$/))return x(b.path.resolve(a[2])).token(a[1])},
isToken:w,isPluralToken:function(a){return w(a)&&J[a.getType()]},isMarkupToken:function(a){return w(a)&&"markup"==a.getType()},Dictionary:p,dictionary:x,getDictionaries:function(){return y.slice(0)},addCreateDictionaryHandler:h.attach.bind(h),removeCreateDictionaryHandler:h.detach.bind(h),Culture:la,culture:B,getCulture:function(){return H},setCulture:K,getCultureList:function(){return u.slice(0)},setCultureList:D,pluralForms:T,onCultureChange:function(a,b,c){B.attach(a,b);c&&a.call(b,H)}}},"5.js":function(d,
U,b,g,l,A,P,S,da){function w(a,b){return new Function(a,b)}var C=Object.prototype.hasOwnProperty;d=b.require("./6.js");var x=d.MARKER,B=d.TYPE_ELEMENT,K=d.TYPE_ATTRIBUTE,D=d.TYPE_ATTRIBUTE_CLASS,r=d.TYPE_ATTRIBUTE_STYLE,k=d.TYPE_ATTRIBUTE_EVENT,z=d.TYPE_TEXT,G=d.TYPE_COMMENT,m=d.TOKEN_TYPE,F=d.TOKEN_BINDINGS,q=d.TOKEN_REFS,J=d.ATTR_NAME,a=d.ATTR_NAME_BY_TYPE,c=d.ELEMENT_NAME,y=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,L=d.CLASS_BINDING_ENUM,h=d.CLASS_BINDING_BOOL,p={},u;try{g.document.createTextNode("").x=
1,u=!0}catch(H){u=!1}var M=function(){function b(a,e){for(var c=0,t;t=a[c];c++)-1==t.indexOf(":")&&g.push(t+":"+e)}function h(a){var e=L.length,e=d[e]||"r"+e;L.push(e+"="+a);return e}function p(f,e,n){for(var t,E,d,v,ja=0,g=0,X=0,ha;ha=f[ja];ja++,g++,v=!1){ja?f[ja+1]?(ha[m]==f[ja-1][m]&&ha[m]==z&&X++,t=e+".childNodes["+(n?g:g+(X?" + "+X+" * TEXT_BUG":""))+"]"):t=e+".lastChild":t=e+".firstChild";if(E=ha[q])v=!0,t=h(t),b(E,t);ha[F]&&(ha[F]&&"number"==typeof ha[F]&&(ha[F]=ha[q][ha[F]-1]),v||(v=!0,t=
h(t)),d=[ha[m],t,ha[F],E?-1!=E.indexOf("element"):!1],H.push(d));e!=M||!u&&ha[m]!=B||l.push(t+"."+x);if(ha[m]==B){d=-1;v||(t=h(t),d=L.length);for(var N=[],C=[],K=y,W;W=ha[K];K++)W[m]==B||W[m]==z||W[m]==G?C.push(W):N.push(W);for(var K=0,A;A=N[K];K++){var qa=A[m];if(qa!=k){W=a[qa]||A[J];if(E=A[q])v=!0,b(E,h(t+'.getAttributeNode("'+W+'")'));if(E=A[F])switch(v=!0,qa){case D:for(qa=0;A=E[qa];qa++)A=[2,t,A[1],W,A[0]].concat(-1==A[2]?[]:A.slice(2)),H.push(A);break;case r:for(qa=0;A=E[qa];qa++){w++;for(var Y=
0,O;O=A[0][Y];Y++)H.push([2,t,O,W,A[0],A[1],A[2],A[3],w])}break;default:for(w++,qa=0;O=E[0][qa];qa++)H.push([2,t,O,W,E[0],E[1],ha[c],w])}}}C.length&&p(C,t,n);v||d!=L.length||L.pop()}}}var d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),L,g,H,l,M,w;return function(a,e,b){L=[];g=[];H=[];l=[];M=e||"_";w=0;p(a,M,b);return{path:L,ref:g,binding:H,markedElementList:l}}}(),W=function(){function a(b,h,p){var f=[],e=b[5];b=b[4];for(var n,t,E=0;E<e.length;E++)if("string"==typeof e[E])f.push('"'+
e[E].replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"');else if(n=b[e[E]],t=n.indexOf(":"),-1==t)f.push("l10n"==h?'"{'+n+'}"':"bool"==h?"(__"+n+'||"")':"__"+n);else{var u=null,v=n.substr(t+1).replace(c,function(a,e){u=e;return""});u?f.push(p[n.substr(t+1)]):f.push('l10n["'+v+'"]')}1==f.length&&f.push('""');return f.join("+")}var c=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,p={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],
readonly:["input"],selected:["option"],multiple:["select"]},u={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},d={show:'"none"',visible:'"hidden"'},q={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},m={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(y){function k(a){F[a]=!0;f.push(e+"="+a+"("+b.array(arguments,1)+");")}for(var g={},f,e,n=0,t=[],E=[],r=[],v,ja,H=[],X={},G=0,D={},F={resolve:!0},l=0,M;M=y[l];l++){var x=
M[0],w=M[1],Y=M[2],O=M[3],I=Y.split(":");if("l10n"==I[0]&&I[1]){var I=I[1],pa=null,ia=I.replace(c,function(a,e){pa=e;return""});if(pa){0==I in X&&(v="$l10n_"+G++,X[I]=v,H.push(v),t.push(v+'=tools.l10nToken("'+ia+'").computeToken()'),f=g[pa],f||(f=g[pa]=[],t.push("__"+pa)),f.push(v+".set(__"+pa+");"));Y=X[I];e="_"+n++;v="__"+Y;f=g[Y];f||(f=g[Y]=[],t.push(v));x==z?(t.push(e+"="+w),k(m[x],w,e,"value",O)):(v='"'+M[J]+'"',t.push(e),k("bind_attr",w,v,e,a(M,!1,X)));continue}}r.push(M)}for(l=0;M=r[l];l++)if(x=
M[0],w=M[1],Y=M[2],O=M[3],-1==["get","set","templateId_"].indexOf(Y)){I=Y.split(":");y="anim"==I[0];ia="l10n"==I[0];y&&(Y=I[1]);f=C.call(g,Y)?g[Y]:null;e="_"+n++;v="__"+Y;if(ia&&I[1])if(I=I[1],pa=null,ia=I,ja||(ja={}),g[ia]||(g[ia]=[],g[ia].l10n="$l10n_"+G++,t.push("__"+g[ia].l10n+'=l10n["'+ia+'"]'),ja[ia]=[]),f=g[ia],x==z){ja[ia].push(w+".nodeValue=value;");f.nodeBind?f.push(w+".nodeValue=value;"):(t.push(e+"="+w),k(m[x],w,e,"value",O),f.nodeBind=e);continue}else ja[ia].push("bind_attr("+[w,'"'+
M[J]+'"',"NaN",a(M,"l10n",X)]+");");f||(f=g[Y]=[],t.push(v));if(x!=K)if(f.nodeBind)switch(x){case B:k(m[x],w,w,"value!==null?String(value):null");break;case z:f.push(w+".nodeValue=value;")}else t.push(e+"="+w),k(m[x],w,e,"value",O),f.nodeBind=e;else switch(v=M[J],v){case "class":v="";O="value";x=M[7];switch(M[5]){case h:var O=[M[6]],va=M[4],ua=Array.isArray(va)?va:O.map(function(a){return va+a}),O='value?"'+ua[0]+'":""';x&&(v=ua[x-1]);break;case L:O=M[8];va=M[4];ua=Array.isArray(va)?va:O.map(function(a){return va+
a});O=O.map(function(a,e){return'value=="'+a+'"?"'+ua[e]+'"'}).join(":")+':""';x&&(v=ua[x-1]);break;default:va=M[4],O='typeof value=="string"||typeof value=="number"?"'+va+'"+value:(value?"'+va+Y+'":"")'}t.push(e+'="'+v+'"');k("bind_attrClass",w,e,O,y);break;case "style":x=a(M,!1,X);y=M[8];D[y]||(D[y]=e,t.push(e+"="+(d[M[7]]||'""')));M[7]&&(x=x.replace(/\+""$/,"")+(q[M[7]]||""));e=D[y];k("bind_attrStyle",w,'"'+M[6]+'"',e,x);break;default:O=p[v],I=M[6].toLowerCase(),x=O&&u[v]?a(M,"bool",X)+'?"'+v+
'":""':a(M,!1,X),y=M[7],D[y]||(t.push(e+"="+x),D[y]=e),e=D[y],"tabindex"==v?k("bind_attr",w,'"'+v+'"',e,x+"==-1?"+(-1==["input","button","textarea"].indexOf(I)?'""':"-1")+":"+x):k("bind_attr",w,'"'+v+'"',e,x),!O||"*"!=O&&-1==O.indexOf(I)||f.push("if("+w+"."+v+"!="+e+")"+w+"."+v+"="+(u[v]?"!!"+e:e)+";")}}E.push(';function set(bindName,value){if(typeof bindName!="string")');for(Y in g)g[Y].nodeBind&&E.push("if(bindName==="+g[Y].nodeBind+')bindName="'+Y+'";else ');E.push("return;");E.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");
for(Y in g)n=g[Y].l10n||Y,E.push('case"'+Y+'":if(__'+n+"!==value){__"+n+"=value;"+g[Y].join("")+"}break;");E.push("}}");var Y=[],xa;for(xa in F)Y.push(xa+"=tools."+xa);return{keys:b.object.keys(g).filter(function(a){return-1==a.indexOf("@")}),tools:Y,vars:t,set:E.join(""),l10n:ja,l10nCompute:H}}}();U.exports={getFunctions:function(a,c,h,u,d){if(c=p[h&&b.path.relative(h)])return c;d=M(a,"_",d);c=W(d.binding);h=d.markedElementList.join("=");u={keys:c.keys,l10nKeys:b.object.keys(c.l10n)};1==a.length&&
(d.path[0]="a=_");if(c.l10n){a=[];for(var q in c.l10n)a.push('case"'+q+'":'+c.l10n[q].join("")+"break;");u.createL10nSync=w(["_","l10n","bind_attr","TEXT_BUG"],"var "+d.path+";return function(path, value){switch(path){"+a.join("")+"}}")}u.createInstanceFactory=w("tid createDOM tools l10nMap l10nMarkup getBindings TEXT_BUG".split(" "),"var "+(c.tools.length?c.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+c.keys.map(function(a){return a+":null"})+"};return function createTmpl_(id,instance,initL10n){var _=createDOM(),"+
(c.l10n?"l10n=initL10n?{}:l10nMap,":"")+d.path.concat(c.vars)+(c.l10nCompute.length?";instance.compute=["+c.l10nCompute+"]":"")+";instance.tmpl={"+[d.ref,"templateId_:id","set:set"]+"}"+(h?";if(instance.context||instance.onAction)"+h+"=(id<<12)|tid":"")+c.set+(c.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+";if(instance.bindings)instance.handler=getBindings(instance,set);"+c.l10nCompute.map(function(a){return'set("'+
a+'",'+a+")"})+"}");return u}}},"6.js":function(d,U,b,g,l,A,P,S,da){d="basisTemplateId_"+b.genUID();(g=g.document)?(b=g.createElement("div"),b.appendChild(g.createTextNode("a")),b.appendChild(g.createTextNode("a")),g=1==b.cloneNode(!0).childNodes.length):g=!0;U.exports={MARKER:d,TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:{4:"class",
5:"style"},ATTR_TYPE_BY_NAME:{"class":4,style:5},ATTR_VALUE_INDEX:{2:4,4:3,5:3,6:2},ELEMENT_NAME:3,ELEMENT_ATTRIBUTES_AND_CHILDREN:4,TEXT_VALUE:3,COMMENT_VALUE:3,CLASS_BINDING_ENUM:1,CLASS_BINDING_BOOL:2,CLASS_BINDING_INVERT:3,CLASS_BINDING_EQUAL:4,CLASS_BINDING_NOTEQUAL:5,CLONE_NORMALIZATION_TEXT_BUG:g}},"7.js":function(d,U,b,g,l,A,P,S,da){function w(a){var c=m[a];if(!c){var c=B.getElementById(a),d="";c&&"SCRIPT"==c.tagName&&"text/basis-template"==c.type&&(d=c.textContent||c.text);c=m[a]=b.resource.virtual("tmpl",
d||"")}return c}function C(){this.destroyBuilder&&x.call(this);for(var a=this;a=a.attaches_;)a.handler.call(a.context)}function x(){var a=r(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),c=this.destroyBuilder,d={},q=this.builder(a.tokens,d);this.createInstance=q.createInstance;this.clearInstance=q.destroyInstance;this.destroyBuilder=q.destroy;k.add(this.templateId,this,d);var q=a.deps,h=this.deps_;this.deps_=q;if(h)for(var d=0,p;p=h[d];d++)p.bindingBridge.detach(p,x,this);if(q)for(d=
0;p=q[d];d++)p.bindingBridge.attach(p,x,this);a=a.resources;q=this.resources;if(this.resources=a)for(d=0;h=a[d];d++)h=b.resource(h).fetch(),"function"==typeof h.startUse&&h.startUse();if(q)for(d=0;h=q[d];d++)h=b.resource(h).fetch(),"function"==typeof h.stopUse&&h.stopUse();c&&c(!0)}d=this.path;var B=g.document;g=b.Class;var K=b.cleaner,D=b.path;l=b.require("./6.js");A=b.require("./8.js").VERSION;var r=b.require("./8.js").getDeclFromSource;P=b.require("./8.js").makeDeclaration;var k=b.require("./9.js");
S=b.require("./a.js");var z=S.get,G=[],m={},F=g(null,{className:d+".Template",__extend__:function(a){return a instanceof F?a:a instanceof q?new J(a):new F(a)},source:"",baseURI:"",url:"",attaches_:null,init:function(a){if(4096==G.length)throw"Too many templates (maximum 4096)";this.setSource(a||"");this.templateId=G.push(this)-1},bindingBridge:{attach:function(a,b,d){a.attaches_={handler:b,context:d,attaches_:a.attaches_}},detach:function(a,b,d){for(var q;q=a,a=a.attaches_;)if(a.handler===b&&a.context===
d){q.attaches_=a.attaches_;break}},get:function(a){return(a=a.source)&&a.bindingBridge?a.bindingBridge.get(a):a}},createInstance:function(a,b,d,q,h){x.call(this);return this.createInstance(a,b,d,q,h)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(a){var b=this.source;if(b!=a){if("string"==typeof a){var d=a.match(/^([a-z]+):/);if(d)switch(a=a.substr(d[0].length),d[1]){case "id":a=w(a);break;case "path":a=z(a)}}b&&b.bindingBridge&&(this.baseURI=
this.url="",b.bindingBridge.detach(b,C,this));a&&a.bindingBridge&&(a.url&&(this.url=a.url,this.baseURI=D.dirname(a.url)+"/"),a.bindingBridge.attach(a,C,this));this.source=a;C.call(this)}},destroy:function(){this.destroyBuilder&&(k.remove(this.templateId),this.destroyBuilder());this.source=this.resources=this.createInstance=this.attaches_=null}}),q=function(a){b.object.extend(this,a)},J=b.Class(null,{className:d+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:F,ruleEvents:null,rule:String,
init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,d;d=a[b];b++)this.ruleEvents[d]=!0}K.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}});K.add({destroy:function(){for(var a=0,b;b=G[a];a++)b.destroy();G=null}});U.exports=
{DECLARATION_VERSION:A,TYPE_ELEMENT:l.TYPE_ELEMENT,TYPE_ATTRIBUTE:l.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:l.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:l.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:l.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:l.TYPE_TEXT,TYPE_COMMENT:l.TYPE_COMMENT,TOKEN_TYPE:l.TOKEN_TYPE,TOKEN_BINDINGS:l.TOKEN_BINDINGS,TOKEN_REFS:l.TOKEN_REFS,ATTR_NAME:l.ATTR_NAME,ATTR_VALUE:l.ATTR_VALUE,ATTR_NAME_BY_TYPE:l.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:l.CLASS_BINDING_ENUM,CLASS_BINDING_BOOL:l.CLASS_BINDING_BOOL,
ELEMENT_NAME:l.ELEMENT_NAME,ELEMENT_ATTRS:l.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:l.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:l.TEXT_VALUE,COMMENT_VALUE:l.COMMENT_VALUE,TemplateSwitchConfig:q,TemplateSwitcher:J,Template:F,switcher:function(a,b){b||(b=a,a=null);"string"==typeof a&&(a=a.split(/\s+/));return new q({rule:b,events:a})},getDeclFromSource:r,makeDeclaration:P,resolveResource:function(a,c){return/^#\d+$/.test(a)?G[a.substr(1)]:/^id:/.test(a)?w(a.substr(3)):/^[a-z0-9\.]+$/i.test(a)&&
!/\.tmpl$/.test(a)?z(a):b.resource(b.resource.resolveURI(a,c,'<b:include src="{url}"/>'))},resolveTemplateById:k.resolveTemplateById,resolveObjectById:k.resolveObjectById,resolveTmplById:k.resolveTmplById,SourceWrapper:S.SourceWrapper,Theme:S.Theme,theme:S.theme,getThemeList:S.getThemeList,currentTheme:S.currentTheme,setTheme:S.setTheme,onThemeChange:S.onThemeChange,define:S.define,get:S.get,getPathList:S.getPathList}},"8.js":function(d,U,b,g,l,A,P,S,da){function w(){return b.genUID()+"__"}function C(a){for(var b=
[],f=0;f<a.length;f++)b.push(Array.isArray(a[f])?C(a[f]):a[f]);return b}function x(a,c,f,e){var n=a,t;a.bindingBridge&&(c="baseURI"in a?a.baseURI:"url"in a?b.path.dirname(a.url):c,t="url"in a?a.url:t,n=a.bindingBridge.get(a));Array.isArray(n)?(f&&(n=C(n)),n={tokens:n}):"object"==typeof n&&Array.isArray(n.tokens)||(n=String(n));"string"==typeof n&&(n=ea(n,c,e,t,a));return n}var B=Object.prototype.hasOwnProperty,K=b.array.search,D=b.array.add,r=b.array.remove,k=b.require("./w.js"),z=b.require("./x.js");
d=b.require("./6.js");var G=d.TYPE_ELEMENT,m=d.TYPE_ATTRIBUTE,F=d.TYPE_ATTRIBUTE_CLASS,q=d.TYPE_ATTRIBUTE_STYLE,J=d.TYPE_ATTRIBUTE_EVENT,a=d.TYPE_TEXT,c=d.TYPE_COMMENT,y=d.TOKEN_TYPE,L=d.TOKEN_BINDINGS,h=d.TOKEN_REFS,p=d.ATTR_NAME,u=d.ATTR_VALUE,H=d.ATTR_NAME_BY_TYPE,M=d.ATTR_TYPE_BY_NAME,W=d.ATTR_VALUE_INDEX,ca=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,T=d.TEXT_VALUE,la=d.CLASS_BINDING_ENUM,N=d.CLASS_BINDING_BOOL,ka=/^[a-z_][a-z0-9_\-]*$/i,$=/^event-(.+)$/,ma=function(){},ea=function(){function d(a){return(a.prefix?
a.prefix+":":"")+a.name}function g(a){return(a=a.refs)&&a.length?a:0}function f(a,b){a[h]||(a[h]=[]);D(a[h],b);"element"!=b&&(a[L]=1==a[h].length?b:0)}function e(a,b){var e=a[h].indexOf(b);if(-1!=e){var I=a[L]&&"number"==typeof a[L];a[h].splice(e,1);I&&e==a[L]-1&&(a[L]=b,I=!1);a[h].length?I&&(a[L]-=e<a[L]-1):a[h]=0}}function n(a){var b={};if(a.attrs)for(var e=0,I;I=a.attrs[e];e++)b[d(I)]=I.value;return b}function t(a){var b={};if(a.attrs)for(var e=0,I;I=a.attrs[e];e++)b[d(I)]=I;return b}function E(a,
b){for(var e=0;e<b.length;e++)D(a,b[e])}function sa(a,b,e,I){for(var f=0,ia;ia=b[f];f++)ia[1]!==P&&(ia[1]=e+ia[1]),ia[3]||(ia[3]=I);a.unshift.apply(a,b)}function v(a,e,O,I,f){var ia=e.children[0],c=O?b.resource.resolveURI(O,a.baseURI,'<b:style src="{url}"/>'):b.resource.virtual("css",ia?ia.value:"",a.sourceUrl).url;a.resources.push([c,I,e,null,O?!1:ia||!0,f]);return c}function ja(h,k,O){function I(a){var Q={};a=(a||"").trim().split(/\s*,\s*/);for(var b=0;b<a.length;b++){var e=a[b].split(/\s*:\s*/);
if(2!=e.length)return{};Q[e[0]]=e[1]}return Q}function pa(a,Q){for(var b="number"==typeof a[0]?ca:0,e,R;e=a[b];b++)if(R=e[y]==J?"event-"+e[1]:H[e[y]]||e[p],R==Q)return e}function ia(a,Q){var b=a[L];if(b)for(var e=0,R;R=b[e];e++)if(R[2]==Q)return R}function z(a,Q,b,e,R){var s=pa(a,"style");s||(s=[q,0,0],a.push(s));a=Q.binding;var I=!1,I=Q.name==e;e=s[3];if(a&&a[0].length==a[1].length){var O=s[L];a=a.concat(b,Q.name);O?(r(O,ia(s,b)),O.push(a)):s[L]=[a]}else I=!(I^""===Q.value);e&&(e=e.replace(new RegExp(b+
"\\s*:\\s*[^;]+(;|$)"),""));I&&(e=(e?e+" ":"")+R);s[3]=e}function ua(a,Q){"show"!=Q.name&&"hide"!=Q.name||z(a,Q,"display","show","display: none;");"visible"!=Q.name&&"hidden"!=Q.name||z(a,Q,"visibility","visible","visibility: hidden;")}function xa(a,Q){for(var b=[],e,R,s,I=0,V;V=a.attrs[I];I++)if("b"==V.prefix)switch(V.name){case "ref":V=(V.value||"").trim().split(/\s+/);for(s=0;s<V.length;s++)f(Q,V[s]);break;case "show":case "hide":e=V;break;case "visible":case "hidden":R=V}else(s=V.name.match($))?
s=s[1]==V.value?[J,s[1]]:[J,s[1],V.value]:(s=[V.type,V.binding,0],2==V.type&&s.push(d(V)),!V.value||O.optimizeSize&&V.binding&&2==V.type||s.push(V.value)),b.push(s);e&&ua(b,e);R&&ua(b,R);return b.length?b:0}function ra(a,Q,e,s){var R=n(Q),I=t(Q);e&&(R.name=e);if(R.name&&ka.test(R.name)){var f=T[R.ref||"element"];if(f&&f.token[y]==G){e=f.token;var V=R.name.match($),c="class"==R.name||"style"==R.name,v=V?J:M[R.name]||m;Q=W[v]||u;(a=e&&pa(e,R.name))&&"set"==s&&(r(e,a),a=null);a||"set"!=s&&"append"!=
s||(s="set",V?a=[v,V[1]]:(a=[v,0,0,v==m?R.name:""],v==m&&a.push("")),e||(e=[],f.token.push(e)),e.push(a));switch(s){case "set":if(a[y]==J){R.value==V[1]?a.length=2:a[Q]=R.value;break}I=I.value||{};a[L]=I.binding||0;O.optimizeSize&&a[L]&&!c?a.length=Q:a[Q]=I.value||"";if(c&&!a[L]&&!a[Q]){r(e,a);break}break;case "append":I=I.value||{};f=I.value||"";I=I.binding;if(!V)if(I)if(v=a[L])switch(R.name){case "style":s=0;for(var h;h=I[s];s++)r(v,ia(a,h[2])),v.push(h);break;case "class":v.push.apply(v,I);break;
default:for(I[0].forEach(function(a){D(this,a)},v[0]),s=0;s<I[1].length;s++)h=I[1][s],"number"==typeof h&&(h=v[0].indexOf(I[0][h])),v[1].push(h)}else a[L]=I,c||a[L][1].unshift(a[Q]);else!c&&a[L]&&a[L][1].push(R.value);if(f)if(V||"class"==R.name){R=(a[Q]||"").trim();V=f.trim();R=R?R.split(/\s+/):[];V=V?V.split(/\s+/):[];for(s=0;s<V.length;s++)I=V[s],b.array.remove(R,I),R.push(I);a[Q]=R.join(" ")}else a[Q]=(a[Q]||"")+(a[Q]&&c?" ":"")+f;!c||a[L]||a[Q]||r(e,a);break;case "remove-class":if(a){I=I.value||
{};c=(a[Q]||"").split(" ");R=(I.value||"").split(" ");V=a[L];if(I.binding&&V){for(s=0;f=I.binding[s];s++)for(v=V.length-1;h=V[v];v--){var na=h[3]||h[1];h[0]===f[0]&&na===f[1]&&V.splice(v,1)}V.length||(a[L]=0)}for(s=0;s<R.length;s++)r(c,R[s]);a[Q]=c.join(" ");V.length||c.length||r(e,a)}break;case "remove":a&&r(e,a)}}}}for(var Ba=[],fa=0,s,Q;s=h[fa];fa++){var R=g(s),V=R&&1==R.length?R[0]:0;switch(s.type){case G:if("b"==s.prefix){var na=n(s),ga=t(s);switch(s.name){case "style":var aa=!0;if(na.options){var za=
I(na.options),F;for(F in za)aa=aa&&za[F]==O.includeOptions[F]}aa&&(aa=na.namespace?"namespace":"ns",za=(aa=na[aa])?P:"",ga=v(k,s,na.src,za,aa),aa&&(0==ga in P&&(P[ga]=w()),k.styleNSPrefix[aa]={name:aa,prefix:P[ga]}));break;case "isolate":k.isolate||(k.isolate=na.prefix||O.isolate||w());break;case "l10n":na.src&&(O.dictURI=b.resource.resolveURI(na.src,k.baseURI,"<b:"+s.name+' src="{url}"/>'));break;case "define":if("name"in na&&"type"in na&&!B.call(O.defines,na.name)){s=na.from||na.name;var R=na.name,
l=!1;switch(na.type){case "bool":l=[s,N,R,"true"==na["default"]?1:0];break;case "enum":if(0=="values"in na)break;V=(na.values||"").trim();if(!V)break;V=V.split(/\s+/);l=V.indexOf(na["default"]);l=[s,la,R,l+1,V]}l&&(O.defines[R]=l)}break;case "text":s=s.children[0];h[fa--]=b.object.extend(s,{refs:(na.ref||"").trim().split(/\s+/),value:"notrim"in na?s.value:s.value.replace(/^\s*[\r\n]+|[\r\n]+\s*$/g,"")});break;case "include":if(R=na.src){var ha=ma(R,k.baseURI);if(!ha)continue;if(-1==ea.indexOf(ha)){R=
ga.isolate?ga.isolate.value||w():"";V=na.options?I(na.options):null;l=b.object.merge(O,{includeOptions:V});l=x(ha,"",!0,l);D(k.deps,ha);k.includes.push({token:s,resource:ha,nested:l.includes});l.deps&&E(k.deps,l.deps);l.warns&&k.warns.push.apply(k.warns,l.warns);l.resources&&0=="no-style"in na&&sa(k.resources,l.resources,R,s);var ha=b.array(s.children),A={prefix:w()},T=X(l.tokens,A),S;for(S in l.styleNSPrefix)k.styleNSPrefix[A.prefix+S]=b.object.merge(l.styleNSPrefix[S],{});R&&C(l.tokens,R);for(var U in ga)switch(U){case "class":ha.unshift({type:G,
prefix:"b",name:"append-class",attrs:[b.object.complete({name:"value"},ga["class"])]});break;case "id":ha.unshift({type:G,prefix:"b",name:"set-attr",attrs:[{type:m,name:"name",value:"id"},b.object.complete({name:"value"},ga.id)]});break;case "ref":T.element&&na.ref.trim().split(/\s+/).map(function(a){f(T.element.token,a)});break;case "show":case "hide":case "visible":case "hidden":(s=(aa=T.element)&&aa.token)&&s[y]==G&&ua(s,ga[U])}for(na=0;ga=ha[na];na++)if(ga.type==G&&"b"==ga.prefix)switch(ga.name){case "style":var Z=
n(ga),aa=t(ga),aa=!0;if(Z.options)for(F in za=I(Z.options),za)aa=aa&&za[F]==V[F];aa&&(aa=Z.namespace?"namespace":"ns",za=(aa=Z[aa])?P:R,ga=v(k,ga,Z.src,za,aa),aa&&(0==ga in P&&(P[ga]=w()),k.styleNSPrefix[A.prefix+aa]={name:aa,prefix:P[ga]}));break;case "replace":case "remove":case "before":case "after":za="replace"==ga.name||"remove"==ga.name;Z=n(ga);if(aa=(aa="ref"in Z||!za?Z.ref:"element")&&T[aa])Z=aa.owner,aa=Z.indexOf(aa.token),-1!=aa&&(aa=[aa+("after"==ga.name),za],"remove"!=ga.name&&(aa=aa.concat(ja(ga.children,
k,O)||[])),Z.splice.apply(Z,aa));break;case "prepend":case "append":Z=n(ga);(s=(aa=(aa="ref"in Z?Z.ref:"element")&&T[aa])&&aa.token)&&s[y]==G&&(Z=ja(ga.children,k,O)||[],"prepend"==ga.name?s.splice.apply(s,[ca,0].concat(Z)):s.push.apply(s,Z));break;case "show":case "hide":case "visible":case "hidden":Z=n(ga);if((s=(aa=(aa="ref"in Z?Z.ref:"element")&&T[aa])&&aa.token)&&s[y]==G){if(!t(ga).expr)break;ua(s,b.object.complete({name:ga.name},t(ga).expr))}break;case "attr":case "set-attr":ra(s,ga,!1,"set");
break;case "append-attr":ra(s,ga,!1,"append");break;case "remove-attr":ra(s,ga,!1,"remove");break;case "class":case "append-class":ra(s,ga,"class","append");break;case "set-class":ra(s,ga,"class","set");break;case "remove-class":aa=t(ga);if(Z=aa.value)Z.value=Z.value.split(/\s+/).map(function(a){return 0<a.indexOf(":")?A.prefix+a:a}).join(" "),Z.binding&&Z.binding.forEach(function(a){0<a[0].indexOf(":")&&(a[0]=A.prefix+a[0])}),Z.map_&&Z.map_.forEach(function(a){0<a.value.indexOf(":")&&(a.value=A.prefix+
a.value)});ra(s,ga,"class","remove-class");break;case "add-ref":Z=n(ga);(s=(aa=(aa="ref"in Z?Z.ref:"element")&&T[aa])&&aa.token)&&Z.name&&f(s,Z.name);break;case "remove-ref":Z=n(ga),(s=(aa=(aa="ref"in Z?Z.ref:"element")&&T[aa])&&aa.token)&&e(s,Z.name||Z.ref)}else l.tokens.push.apply(l.tokens,ja([ga],k,O)||[]);T.element&&e(T.element.token,"element");Ba.push.apply(Ba,l.tokens)}}}continue}Q=[1,V,R,d(s)];Q.push.apply(Q,xa(s,Q,O.optimizeSize)||[]);Q.push.apply(Q,ja(s.children,k,O)||[]);break;case a:R&&
2==R.length&&K(R,"element")&&(V=R[+!R.lastSearchIndex]);Q=[3,V,R];R&&s.value=="{"+R.join("|")+"}"||Q.push(s.value);break;case c:if(O.optimizeSize&&!V&&!R)continue;Q=[8,V,R];O.optimizeSize||R&&s.value=="{"+R.join("|")+"}"||Q.push(s.value)}for(;0===Q[Q.length-1];)Q.pop();Ba.push(Q)}return Ba.length?Ba:0}function fa(a,e,b){if("string"==typeof a){var I=a.split(":"),f=I[1];if("l10n"==I[0]){if(2==I.length&&-1==f.indexOf("@")){if(!e)return!1;f=f+"@"+e;a="l10n:"+f}D(b,f)}}return a}function X(a,b,O,I){function f(a){if(0>=
a.indexOf(":"))return a;var e=a.split(":")[0];b.map[b.prefix+e]=e;return b.prefix+a}O||(O={});I=I||0;for(var c;c=a[I];I++){var v=c[y],n=c[h];if(b&&v==F){var t=c[L],E=W[v];c[E]&&(c[E]=c[E].split(/\s+/).map(f).join(" "));if(t)for(var E=0,d;d=t[E];E++)d[0]=f(d[0])}if(v!=J&&n)for(t=n.length-1;E=n[t];t--)-1!=E.indexOf(":")?e(c,E):(O[E]&&e(O[E].token,E),c[L]==E&&(c[L]=t+1),O[E]={owner:a,token:c});v===G&&X(c,b,O,ca)}return O}function l(e,b,O,I){I=I||0;for(var f;f=e[I];I++){var c=f[y],v=f[L];switch(f[y]){case G:l(f,
b,O,ca);break;case a:v&&(c=fa(v,O.dictURI,b.l10n),f[L]=c||0,!1===c&&(f[T]="{"+v+"}"));break;case m:if(v)for(f=v[0],v=0;v<f.length;v++)c=fa(f[v],O.dictURI,b.l10n),f[v]=!1===c?"{"+f[v]+"}":c;break;case F:if(v){for(var n=0,t;t=v[n];n++)if(!(2<t.length)){var h=t[1].split(":"),E=h.pop(),h=h.pop()||"";B.call(O.defines,E)?(E=O.defines[E],t[1]=(h?h+":":"")+E[0],t.push.apply(t,E.slice(1))):t.push(0)}O.optimizeSize&&(v=W[c],f[v]||(f.length=v))}}}}function C(a,e,b,I,f){function c(a){if(-1==a.indexOf(":"))return e+
a;if(!b)return a;a=a.split(":");if(!a[0])return a[1];var Q=B.call(b.styleNSPrefix,a[0])?b.styleNSPrefix[a[0]]:!1;return Q?Q.prefix+a[1]:!1}f=f||0;for(var v;v=a[f];f++){var n=v[y];n==G&&C(v,e,b,I,ca);if(n==F){var t=v[L],n=W[n];v[n]&&(v[n]=v[n].split(/\s+/).map(function(a){return c(a,a,v.valueLocMap?v.valueLocMap[a]:null)}).filter(Boolean).join(" "));if(t){for(var n=0,h,E,d;h=t[n];n++)E=c(h[0],h[0]+"{"+h[1]+"}",h.loc),!1===E?(d=!0,t[n]=null):h[0]=E;d&&(t=t.filter(Boolean),v[L]=t.length?t:0)}}}}function A(a){return a[0]+
"|"+a[1]}var ea=[],P={},S={};return function(e,c,O,I,v){var n=[];O=b.object.slice(O);O.includeOptions=O.includeOptions||{};O.defines={};O.dictURI=I?b.path.resolve(I):c||"";c={sourceUrl:I,baseURI:c||"",tokens:null,includes:[],deps:[],isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:n};O.dictURI&&(I=b.path.extname(O.dictURI))&&".l10n"!=I&&(O.dictURI=O.dictURI.substr(0,O.dictURI.length-I.length)+".l10n");e.templateTokens||(e=k(String(e),{loc:!!O.loc,range:!!O.range}));ea.push(!0!==v&&v||{});c.tokens=
ja(e,c,O);ea.pop();c.tokens||(c.tokens=[[a,0,0,""]]);f(c.tokens[0],"element");X(c.tokens);l(c.tokens,c,O);if(0==ea.length){C(c.tokens,c.isolate||"",c,O);if(c.isolate)for(e=0;O=c.resources[e];e++)O[1]!==P&&(O[1]=c.isolate+O[1]);c.resources=c.resources.filter(function(a,e,I){return a[0]&&!b.array.search(I,A(a),A,e+1)}).map(function(a){var e=a[0],I=a[1];a=I===P;var O;if(a&&(I=P[e],e in S))return S[e].url;if(!I)return e;var f=b.resource.virtual("css","").ready(function(a){a.url=e+"?isolate-prefix="+I;
a.baseURI=b.path.dirname(e)+"/";a.map=O;c()}),c=b.resource(e).ready(function(a){a=z(a.cssText||"",I,!0);O=a.map;f.update(a.css)});a&&(S[e]=f);return f.url})}n.length||(c.warns=!1);return c}}();b.resource("./7.js").ready(function(a){ma=a.resolveResource});U.exports={VERSION:3,makeDeclaration:ea,getDeclFromSource:x}},"w.js":function(d,U,b,g,l,A,P,S,da){function w(a){for(var b,c=[],h=[],d={},u=0;u<a.length;u++)u%2?(b=a[u],d[b]||(d[b]=c.length,c.push(b)),h.push(d[b])):a[u]&&h.push(ca(a[u]));return[c,
h]}function C(a,b,c){function d(a){return a.attrs.reduce(function(a,e){a[(e.prefix?e.prefix+":":"")+e.name]=e.value;return a},{})}function q(){var a=1,b=0;f=Array(c.length);e=Array(c.length);for(var h=0;h<c.length+1;h++)f[h]=a,e[h]=b,"\n"===c[h]?(a++,b=0):b++}function m(a){return{line:f[a],column:e[a]}}function k(a){return{start:m(a.start_),end:m(a.end_)}}function g(a){b.loc&&(a.loc=k(a.range),a.valueRange&&(a.valueLoc=k(a.valueRange)));b.range?(a.range=[a.range.start_,a.range.end_],a.valueRange&&
(a.valueRange=[a.valueRange.start_,a.valueRange.end_])):(delete a.range,delete a.valueRange)}function z(a){for(var e,b,f=0;e=a[f++];b=e){if(e.type==x){for(var c=d(e),q=0,m;m=e.attrs[q++];){var k=m.name;if("b"==e.prefix&&"value"==m.name){var y=e.name.match(W);y&&(k="class"==y[1]?"class":c.name)}var y=m,L=g,l=y.value,G=0,F=void 0,J=void 0;if(l)switch(k){case "class":for(var F=y.valueRange.start_,A=/(\s*)(\S+)/g,C=[],O=[],J=void 0,G=[];J=A.exec(l);){var I=J[2],pa={value:I,binding:!1,range:{start_:F+=
J[1].length,end_:F+=I.length}};L(pa);(J=I.match(p))?(J=[J[1]||"",J[2]],J.info_=pa,pa.binding=!0,G.push(J)):C.push(I);O.push(pa)}l=C.join(" ");y.map_=O;break;case "style":L=[];G=[];if(F=l.match(u))for(A=0,J=void 0;J=F[A];A++)J=J.match(H),C=J[1],l=J[2].trim(),J=l.split(M),1<J.length?(l=w(J),l.push(C),G.push(l)):L.push(C+": "+ca(l));(l=L.join("; "))&&(l+=";");break;default:F=l.split(h),1<F.length?G=w(F):l=ca(l)}G&&!G.length&&(G=0);y.binding=G;y.value=l;y.type=r[k]||B;g(m)}z(e.children)}e.type==K&&(e.value=
ca(e.value),e.refs||!b||b.type!=K||b.refs||(b.value+=e.value,b.end_=e.end_,a.splice(--f,1)));e.type==D&&(e.value=ca(e.value));g(e)}}var f,e;b.loc&&q();z(a)}d=b.require("./6.js");var x=d.TYPE_ELEMENT,B=d.TYPE_ATTRIBUTE,K=d.TYPE_TEXT,D=d.TYPE_COMMENT,r=d.ATTR_TYPE_BY_NAME,k=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,z=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,G=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,
m=/(.|[\r\n])*?--\x3e/g,F=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,q=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,J=/"((?:(\\")|[^"])*?)"\s*/g,a=/\\"/g,c=/^/g,y=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,L={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},h=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,p=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,
u=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,H=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,M=/\{([a-z_][a-z0-9_]*)\}/i,W=/^(?:|append-|set-|remove-)(class|attr)$/,ca=function(){function a(b,d){c[d]||("#"==d.charAt(0)?c[d]=String.fromCharCode("x"==d.charAt(1)||"X"==d.charAt(1)?parseInt(d.substr(2),16):d.substr(1)):h&&(h.innerHTML=b,c[d]=h.firstChild?h.firstChild.nodeValue:b));return c[d]||b}var c={},h=b.NODE_ENV?null:g.document.createElement("div"),d=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;
return function(b){return String(b).replace(d,a)}}();U.exports=function(b,h){var d=[],u=[],p={children:d},g=!1,r,l=k,H=0,f=0,e,n,t,E;h&&!1===h.trim||(H=f=b.match(/^\s*/)[0].length,b=b.trimRight());for(;H<b.length||l!=k;)if(t=l.lastIndex=H,(E=l.exec(b))&&E.index===H){H=l.lastIndex;switch(l){case k:e=t+E[1].length;f!=e&&(t=f==t?E[1]:b.substring(f,e),(t=t.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&p.children.push({type:K,len:t.length,value:t,range:{start_:f,end_:e}}));f=e;E[3]?p.children.push({type:K,refs:["l10n:"+
E[3]],value:"{l10n:"+E[3]+"}",range:{start_:e,end_:H}}):"{"==E[2]?(n=H-1,p.children.push(r={type:K,range:{start_:e,end_:e}}),l=q):E[4]?"/"==E[4]?(r=null,l=F):(p.children.push(r={type:D,range:{start_:e,end_:e}}),E[5]?(n=H-E[5].length,l=q):(n=H,l=m)):E[2]&&(g=!0,u.push(p),p.children.push(r={type:x,attrs:[],children:[],range:{start_:e,end_:e}}),p=r,l=z);break;case F:E[1]!==(p.prefix?p.prefix+":":"")+p.name?p.children.push({type:K,value:"</"+E[0],range:{start_:t-2,end_:t+E[0].length}}):p=u.pop();l=k;
break;case z:case G:if(":"==E[2]){r.prefix?l=c:r.prefix=E[1];break}E[1]&&(r.name=E[1],r.range.end_=t+E[1].length,r.type==B&&p.attrs.push(r));if("{"==E[2]){l=r.type==x?q:c;break}if(E[3]){g=!1;p.range.end_=H;if("/>"==E[3]||!p.prefix&&y.test(p.name))p=u.pop();else if("b"==p.prefix&&p.name in L){l=L[p.name];break}l=k;break}if("="==E[2]){l=J;break}r={type:B,range:{start_:H,end_:H}};l=G;break;case m:r.value=b.substring(n,H-3);r.range.end_=H;l=k;break;case q:r.refs?r.refs.push(E[1]):r.refs=[E[1]];"|"!=E[2]&&
(r.type==K?(H-=E[2].length-1,r.value=b.substring(n,H),r.range.end_=H,l=k):r.type==D?l=m:r.type==B&&"="==b[H]?(H++,l=J):(r={type:B,range:{start_:H,end_:H}},l=G));break;case J:r.value=E[1].replace(a,'"');r.range.end_=H;r.valueRange={start_:t+1,end_:t+1+E[1].length};r={type:B,range:{start_:H,end_:H}};l=G;break;case L.text:case L.style:p.children.push({type:K,value:E[1],range:{start_:t,end_:t+E[1].length}});p=u.pop();l=k;break;default:throw"Invalid or unsupported syntax";}l==k&&(f=H)}else if(l==q&&r&&
r.type==D)l=m;else{g&&(p=u.pop());r&&p.children.pop();if(r=p.children.pop())r.type!=K||r.refs?p.children.push(r):f-="len"in r?r.len:r.value.length;g=!1;l=k}f!=H&&p.children.push({type:K,value:b.substring(f,H),range:{start_:f,end_:H}});C(d,h||{},b);d.templateTokens=!0;return d}},"x.js":function(d,U,b,g,l,A,P,S,da){var w=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,C=/^(media|supports|document)\b/i,x=/^(not|has|matches|nth-child|nth-last-child)\(/i;U.exports=function(d,
g,l){function r(a,b){var p=d.indexOf(a,b);h=-1!==p?p+a.length:c.length}function k(){var a=c[h];if('"'===a||"'"===a){for(h++;h<y&&c[h]!==a;h++)"\\"===c[h]&&h++;return!0}}function z(){var a=c[h];if("("===a)return r(")",h+1),!0;if("["===a){for(h++;h<y&&"]"!==c[h];h++)k();return!0}}function G(){if("/"===c[h]&&"*"===c[h+1])return r("*/",h+2),!0}function m(){if(":"===c[h]){var a=d.substr(h+1,15).match(x);if(a)for(h+=a[0].length+1;h<y&&")"!=c[h];h++)G()||z()||m()||F();return!0}}function F(){if("."===c[h])return d.substr(h+
1,8).match(w)&&(h++,J[h+a.length/2*g.length-1]=h,a.push(d.substring(L,h),g),L=h),!0}function q(a){for(p=!1;h<y;h++){var b;if(!(b=G()))if("@"!==c[h])b=void 0;else{if(b=d.substr(h+1,8).match(C))h+=b[0].length,p=!0;b=!0}if(!(b||m()||z()||F())){if(a&&"}"==c[h])break;if("{"===c[h])if(p)h++,q(!0);else for(h++;h<y&&"}"!==c[h];h++)k()||z()}}}var J={},a=[],c=d.split(""),y=c.length,L=0,h=0,p;g||(g=b.genUID()+"__");q(!1);a=a.join("")+d.substring(L);return l?{css:a,map:J,prefix:g}:a}},"9.js":function(d,U,b,g,
l,A,P,S,da){function w(b){var d=C[b&4095];return d&&d.instances[b>>12]}var C={};U.exports={add:function(b,d,g){C[b]={template:d,instances:g}},remove:function(b){delete C[b]},resolveActionById:function(b){return(b=w(b))&&{context:b.context,action:b.action}},resolveTemplateById:function(b){return(b=C[b&4095])&&b.template},resolveObjectById:function(b){return(b=w(b))&&b.context},resolveTmplById:function(b){return(b=w(b))&&b.tmpl}}},"a.js":function(d,U,b,g,l,A,P,S,da){function w(){var d=b.array(arguments).join("."),
m=r[d];m||(m=new F("",d),r[d]=m);return m}function C(b,d){for(var a=[],c={},m=[],k=0;k<d.length;k++)c[d[k]]||(c[d[k]]=!0,m.push(d[k]));a.source=m.join("/");c={base:!0};for(m=0;m<d.length;m++)k=d[m]||"base",k==b||c[k]||(c[k]=!0,a.push(k),d.splice.apply(d,[m+1,0].concat(D[k].fallback)));a.unshift(b);"base"!=b&&a.push("base");a.value=a.join("/");return a}function x(b,d){for(var a=D[b].sourcesList,c=0,m;m=a[c];c++)if(m.hasOwnProperty(d))return m[d];return""}function B(){for(var b in r)w(b).set()}function K(d){d||
(d="base");if(D[d])return D[d].theme;if(!/^([a-z0-9\_\-]+)$/.test(d))throw"Bad name for theme - "+d;var g={},a=[g],c=new m;D[d]={theme:c,sources:g,sourcesList:a,fallback:[]};var r=function(a,b){0==a in g&&(g[a]=b,-1!=D[z].fallback.indexOf(d)&&w(a).set());return w(a)};b.object.extend(c,{name:d,fallback:function(a){if(c!==G&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],p={},b=C(d,b);if(D[d].fallback.source!=b.source){D[d].fallback.source=b.source;for(var u in D){var m=D[u].fallback,
b=C(u,(m.source||"").split("/"));if(b.value!=m.value){p[u]=!0;D[u].fallback=b;m=D[u].sourcesList;m.length=b.length;for(var k=0;k<m.length;k++)m[k]=D[b[k]].sources}}}for(u in p)if(-1!=D[z].fallback.indexOf(u)){B();break}}b=D[d].fallback.slice(1);b.source=D[d].fallback.source;return b},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var d=a,u=b,m={},k;for(k in u)u.hasOwnProperty(k)&&(m[k]=r(d+"."+k,u[k]));return m}return 1==arguments.length?w(a):r(a,
b)}if("object"==typeof a){u=a;for(d in u)u.hasOwnProperty(d)&&r(d,u[d]);return c}},apply:function(){if(d!=z){z=d;B();for(var a=0,b;b=k[a];a++)b.fn.call(b.context,d)}return c},getSource:function(a,b){return b?x(d,a):g[a]},drop:function(a){g.hasOwnProperty(a)&&(delete g[a],-1!=D[z].fallback.indexOf(d)&&w(a).set())}});D[d].fallback=C(d,[]);a.push(D.base.sources);return c}d=this.path;var D={},r={},k=[],z="base",G,m=b.Class(null,{className:d+".Theme",get:w}),F=b.Class(b.Token,{className:d+".SourceWrapper",
path:"",url:"",baseURI:"",init:function(d,m){this.path=m;b.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var d=x(z,this.path);this.value!=d&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,F.prototype.apply,this),this.url=(this.value=d)&&d.url||"",this.baseURI=("object"==typeof d||"function"==typeof d)&&"baseURI"in d?d.baseURI:b.path.dirname(this.url)+
"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,F.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);b.Token.prototype.destroy.call(this)}});b.cleaner.add({destroy:function(){for(var b in r)r[b].destroy();r=D=null}});G=K();U.exports={SourceWrapper:F,Theme:m,theme:K,getThemeList:function(){return b.object.keys(D)},currentTheme:function(){return D[z].theme},
setTheme:function(b){return K(b).apply()},onThemeChange:function(b,d,a){k.push({fn:b,context:d});a&&b.call(d,z)},define:G.define,get:w,getPathList:function(){return b.object.keys(r)}}},"b.js":function(d,U,b,g,l,A,P,S,da){function w(a){return function(b){if("click"!=b.type||3!=b.which){for(var e=ba[b.type]||"mouseenter"!=b.type&&"mouseleave"!=b.type,f=b.sender,c;f;){c=f.getAttribute&&f.getAttribute(a);if(!e||"string"==typeof c)break;f=f.parentNode}if("string"==typeof c){var d=f,e=d,n,h;ba[b.type]&&
(n=b.relatedTarget)&&(d===n||oa(d,n))&&(d=null);for(;d;){n=d[k];if("number"==typeof n&&(h=r(n)))break;d=d.parentNode}c=c.trim().split(/\s+/);d=h&&h.action;n=0;for(var t;t=c[n++];)switch(t){case "prevent-default":b.preventDefault();break;case "stop-propagation":b.stopPropagation();break;case "log-event":break;default:d&&(b.actionTarget=e,d.call(h.context,t,b))}}if(b.type in ea)ea[b.type](b,f)}}}function C(a,b){x(b);ba[a]=!0;ea[b]=function(b){b=new D.Event(b);b.type=a;ma[a](b)};ea[a]=function(b,e){e&&
e.parentNode&&(b=new D.Event(b),b.type=a,b.sender=e.parentNode,ma[a](b))}}function x(a){if(!K.call(ma,a)&&(ma[a]=w("event-"+a),!$)){if(!ka){if("mouseenter"==a)return C(a,"mouseover");if("mouseleave"==a)return C(a,"mouseout")}for(var b=0,e=D.browserEvents(a),f;f=e[b];b++)D.addGlobalHandler(f,ma[a])}}function B(a,b,f){e&&"class"==b&&(b="className");if(n&&"style"==b)return a.style.cssText=f;a.setAttribute(b,f)}d=g.Node;var K=Object.prototype.hasOwnProperty,D=b.require("./c.js"),r=b.require("./9.js").resolveActionById;
g=b.require("./6.js");var k=g.MARKER,z=g.CLONE_NORMALIZATION_TEXT_BUG,G=g.TYPE_ELEMENT,m=g.TYPE_ATTRIBUTE,F=g.TYPE_ATTRIBUTE_CLASS,q=g.TYPE_ATTRIBUTE_STYLE,J=g.TYPE_ATTRIBUTE_EVENT,a=g.TYPE_TEXT,c=g.TYPE_COMMENT,y=g.TOKEN_TYPE,L=g.TOKEN_BINDINGS,h=g.TOKEN_REFS,p=g.ATTR_NAME,u=g.ATTR_VALUE,H=g.ATTR_VALUE_INDEX,M=g.ELEMENT_NAME,W=g.ELEMENT_ATTRIBUTES_AND_CHILDREN,ca=g.TEXT_VALUE,T=g.COMMENT_VALUE,la=g.CLASS_BINDING_ENUM,N=g.CLASS_BINDING_BOOL,ka="onmouseenter"in document.documentElement,$=!1,ma={},
ea={},ba={},oa;oa=d&&!d.prototype.contains?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a.contains(b)};document.addEventListener||($=b.publicCallback(function(a,b){D.fireEvent(document,a);b.returnValue=!0;var e=ma[a];e&&e(new D.Event(b))},!0));var f={svg:"http://www.w3.org/2000/svg"},e=function(){var a=document.createElement("div");a.setAttribute("class","a");return!a.className}(),n=function(){var a=document.createElement("div");a.setAttribute("style","position:absolute");
return"absolute"!=a.style.position}(),t=function(b,e){for(var v=e||document.createDocumentFragment(),d=e?W:0,n;n=b[d];d++){var k=n[y];switch(k){case G:var k=n[M],g=k.indexOf(":"),k=-1!=g?document.createElementNS(f[k.substr(0,g)],k):document.createElement(k);t(n,k);v.appendChild(k);break;case m:n[L]||B(v,n[p],n[u]||"");break;case F:k=(k=n[H[k]])?[k]:[];if(n[L])for(var g=0,r;r=n[L][g];g++){var l=r[4];if(l){var D=r[0];if(Array.isArray(D))k.push(D[l-1]);else switch(r[2]){case N:k.push(D+r[3]);break;case la:k.push(D+
r[5][l-1])}}}k.length&&B(v,"class",k.join(" "));break;case q:(k=n[H[k]])&&B(v,"style",k);break;case J:k=v;g=n[1];n=n[2]||n[1];x(g);$&&k.setAttribute("on"+g,$+'("'+g+'",event)');k.setAttribute("event-"+g,n);break;case c:v.appendChild(document.createComment(n[T]||(n[h]?"{"+n[h].join("|")+"}":"")));break;case a:z&&d&&b[d-1][y]==a&&v.appendChild(document.createComment("")),v.appendChild(document.createTextNode(n[ca]||(n[h]?"{"+n[h].join("|")+"}":"")||(n[L]?"{"+n[L]+"}":"")))}}e||1!=b.length||(v=v.firstChild);
return v};U.exports=t},"c.js":function(d,U,b,g,l,A,P,S,da){function w(a){return a instanceof ba?a.event_:a||g.event}function C(a){return"string"==typeof a?M.getElementById(a):a}function x(a){a=a.target||a.srcElement||M;return 3==a.nodeType?a.parentNode:a}function B(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function K(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function D(a,b){(b=C(b))?h(b,a,D):(K(a),B(a))}function r(a){return a.keyCode||a.which||0}function k(a){return a.charCode||
a.keyCode||0}function z(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function G(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==M.compatMode?M.documentElement.scrollLeft:M.body.scrollLeft):0}function m(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==M.compatMode?M.documentElement.scrollTop:M.body.scrollTop):0}function F(a){var b=0;"deltaY"in a?
b=-a.deltaY:"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b&&b/Math.abs(b)}function q(a){n&&a!==t&&(t=a,b.codeFrame.start())}function J(a){n&&a!==E&&(E=a,b.codeFrame.finish())}function a(a){var b=ca(oa[a.type]),e=f[a.type],c=new ba(a);q(a);if(e)e.handler.call(e.thisObject,c);else if(b)for(e=b.length;0<e--;){var d=b[e];d.handler.call(d.thisObject,c)}J(a)}function c(a){var b=f[a];b&&(L(a,b.handler,b.thisObject),delete f[a])}function y(b,f,c){var d=oa[b];if(d){b=0;for(var n;n=
d[b];b++)if(n.handler===f&&n.thisObject===c)return}else e?h(M,b,W):M.addEventListener(b,a,!0),d=oa[b]=[];d.push({handler:f,thisObject:c})}function L(b,f,c){var d=oa[b];if(d)for(var n=0,h;h=d[n];n++)if(h.handler===f&&h.thisObject===c){d.splice(n,1);d.length||(delete oa[b],e?p(M,b,W):M.removeEventListener(b,a,!0));break}}function h(b,f,c,d){b=C(b);if(!b)throw"basis.event.addHandler: can't attach event listener to undefined";if("function"!=typeof c)throw"basis.event.addHandler: handler is not a function";
var n=b===g?T:b[la];n||(n=b[la]={});var h=n[f],t={handler:c,thisObject:d};if(h){for(b=0;n=h[b];b++)if(n.handler===c&&n.thisObject===d)return;h.push(t)}else h=n[f]=[t],h.fireEvent=function(b){b=w(b);if(e&&b&&oa[f]&&"undefined"==typeof b.returnValue){a(b);if(!0===b.cancelBubble)return;"undefined"==typeof b.returnValue&&(b.returnValue=!0)}q(b);for(var c=0,d=new ba(b),n;n=h[c++];)n.handler.call(n.thisObject,d);J(b)},N?b.addEventListener(f,h.fireEvent,!1):b.attachEvent("on"+f,h.fireEvent)}function p(a,
b,e,f){a=C(a);var c=a===g?T:a[la];if(c&&(c=c[b]))for(var d=0,n;n=c[d];d++)if(n.handler===e&&n.thisObject===f){c.splice(d,1);c.length||u(a,b);break}}function u(a,b){a=C(a);var e=a===g?T:a[la];if(e)if("string"!=typeof b)for(b in e)u(a,b);else{var f=e[b];f&&(a.removeEventListener?a.removeEventListener(b,f.fireEvent,!1):a.detachEvent("on"+b,f.fireEvent),delete e[b])}}function H(a){return function(b,e){return a(w(b),e)}}d=this.path;var M=g.document,W=b.fn.$null,ca=b.array.from,T={},la="basisEvents_"+b.genUID(),
N=!!M.addEventListener;l={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var ka={VALUE:1,BIT:1},$={VALUE:2,BIT:4},ma={VALUE:3,BIT:2},ea={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},ba=b.Class(null,{className:d+".Event",KEY:l,init:function(a){a=w(a);for(var e in a)"function"!=
typeof a[e]&&0==e in this&&(this[e]=a[e]);e=x(a);b.object.extend(this,{event_:a,sender:e,target:e,key:r(a),charCode:k(a),mouseLeft:z(a,ka),mouseMiddle:z(a,$),mouseRight:z(a,ma),mouseX:G(a),mouseY:m(a),wheelDelta:F(a)})},stopBubble:function(){B(this.event_)},stopPropagation:function(){B(this.event_)},preventDefault:function(){K(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),oa={},f={},e=!N,n=!0,t,E,sa={};U.exports={W3CSUPPORT:N,browserEvents:function(a){return ea[a]||[a]},
getEventInfo:function(a,b){b||(b="div");var e=b+"-"+a;if(sa[e])return sa[e];var f=!1,c=!1;if(!N){var d="on"+a,n=M.createElement("div"),h=n.appendChild(M.createElement(b));n[d]=function(){c=!0};try{h.fireEvent(d),f=!0}catch(t){}}return sa[e]={supported:f,bubble:c}},KEY:l,MOUSE_LEFT:ka,MOUSE_RIGHT:ma,MOUSE_MIDDLE:$,Event:ba,sender:H(x),cancelBubble:H(B),cancelDefault:H(K),kill:H(D),key:H(r),charCode:H(k),mouseButton:H(z),mouseX:H(G),mouseY:H(m),wheelDelta:H(F),addGlobalHandler:y,removeGlobalHandler:L,
captureEvent:function(a,e,d){f[a]&&c(a);e||(e=b.fn.$undef);y(a,e,d);f[a]={handler:e,thisObject:d}},releaseEvent:c,addHandler:h,addHandlers:function(a,b,e){a=C(a);for(var f in b)h(a,f,b[f],e)},removeHandler:p,clearHandlers:u,fireEvent:function(a,b,e){a=C(a);if((a=a===g?T:a[la])&&a[b])try{n=!1,a[b].fireEvent(e)}finally{n=!0}},onUnload:function(a,e){b.teardown(a,e)},wrap:w}},"d.js":function(d,U,b,g,l,A,P,S,da){function w(){}function C(){}function x(){}function B(a){var b=a.constructor.prototype;a.setDelegate=
b.setDelegate;a.destroy=b.destroy}function K(a){return a.sortingValue}function D(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function r(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function k(a){return a.childNodes.sort(a.sortingDesc?r:D)}function z(a,b,e,f){if(!a.length)return 0;f=!!f;var c=0,d=a.length-1,n=typeof b,h,t,p;do{p=c+d>>1;h=e(a[p]);t=typeof h;if(f){if(n>t||b>h){d=p-1;continue}if(n<t||b<h){c=p+1;continue}}else{if(n<t||b<h){d=p-1;continue}if(n>
t||b>h){c=p+1;continue}}return b==h?p:0}while(c<=d);return p+((t<n||h<b)^f)}function G(a,b,e,f,c){if(b!==e){var d=a,n=[];f&&(a.contextSelection=e,a.selected&&!a.selectedRA_&&n.push(a));for(;d;){if((f=!d.selection||c&&d===a?d.firstChild:null)&&f.contextSelection!==b)throw"Try change wrong context selection";for(;!f;){if(d===a){if(n.length&&(b&&b.remove(n),e))for(e.add(n),a=0;a<n.length;a++)b=n[a],b.selected&&!e.has(b)&&(b.selected=!1,b.emit_unselect());return}f=d.nextSibling;f||(d=d.parentNode)}d=
f;d.selected&&!d.selectedRA_&&n.push(d);d.contextSelection=e}}}function m(a,b){a.contextDisabled!=b&&(a.contextDisabled=b,a.disabled||(b?a.emit_disable():a.emit_enable()))}function F(a){return a.isSubclassOf(X)?a:X}function q(a){if(!a)return null;if(a.isSatelliteConfig||a instanceof X)return a;a.constructor!==Object&&(a={instance:a});var e=!1,f="update",d={isSatelliteConfig:!0},n;for(n in a){var h=a[n];switch(n){case "instance":h instanceof X?d.instance=h:c.isClass(h)?d.instanceClass=F(h):("string"==
typeof h&&(h=b.getter(h)),d.getInstance=h);break;case "instanceOf":case "satelliteClass":if("instanceOf"==n&&"satelliteClass"in a)break;if("instance"in a)break;c.isClass(h)&&(d.instanceClass=F(h));break;case "existsIf":case "delegate":case "dataSource":h&&("string"==typeof h&&(h=u(h)),"function"!=typeof h?h=b.fn.$const(h):e=!0);d[n]=h;break;case "config":"string"==typeof h&&(h=u(h));d.config=h;break;case "events":f=a.events}}d.instance||d.getInstance||d.instanceClass||(d.instanceClass=F(X));if(e&&
(Array.isArray(f)&&(f=f.join(" ")),"string"==typeof f))for(a={},f=f.split(/\s+/),e=0;n=f[e];e++)a[n]=ja,d.handler=a;return d}function J(a,b){var e=b.length-1;a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[e]||null;for(var f=e;e=b[f];f--)e.nextSibling=b[f+1]||null,e.previousSibling=b[f-1]||null,a.insertBefore(e,e.nextSibling)}function a(a,b){var e;if("function"==typeof a.childFactory&&(e=a.childFactory(b),e instanceof a.childClass))return e;if(!e)throw oa;throw ba;}d=this.path;var c=b.Class,
y=b.object.complete,L=b.array,h=b.array.remove,p=b.fn.$undef,u=b.getter,H=b.fn.nullGetter;l=b.require("./2.js");g=l.create;var M=l.events;l=b.require("./e.js");var W=l.resolveValue,ca=l.resolveDataset;A=l.createResolveFunction;var T=l.SUBSCRIPTION,la=l.STATE,N=l.Object,ka=l.ReadOnlyDataset,$=l.Dataset,ma=d+": Node can't be inserted at specified point in hierarchy",ea=d+": Node was not found",ba=d+": Child node has wrong class",oa=d+": Child node is null",f=d+": Operation is not allowed because node is under dataSource control",
e=d+": Operation is not allowed because node is under dataSource adapter control",n=d+": Node can't has owner and parentNode",t=d+": Node can't has children and dataSource as childClass isn't specified",E={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},sa={};T.addProperty("owner");T.addProperty("dataSource");T.add("CHILD",{childNodesModified:function(a,b){var e;if(e=b.inserted)for(var f=0;e[f];f++)T.link("child",a,e[f]);if(e=b.deleted)for(f=0;e[f];f++)T.unlink("child",a,e[f])}},function(a,b){for(var e=
b.childNodes||[],f=0,c;c=e[f];f++)a("child",b,c)});T.add("SATELLITE",{satelliteChanged:function(a,b,e){e&&T.unlink("satellite",a,e);a.satellite[b]&&T.link("satellite",a,a.satellite[b])}},function(a,b){var e=b.satellite;if(e!==v)for(var f in e)"__auto__"!==f&&a("satellite",b,e[f])});var v=c.customExtendProperty({},function(a,b){for(var e in b)a[e]=q(b[e])}),ja=function(){var a=this.name,e=this.config,f=this.owner,d=0=="existsIf"in e||e.existsIf(f);if(W(this,ja,d,"existsRA_")){d=this.instance||e.instance;
if(!d||"value"==this.factoryType){if(!this.factoryType){var d=e.getInstance,n=e.instanceClass;"function"==typeof d&&(d=d.call(f,f),c.isClass(d)&&(n=F(d)));this.factoryType=n?"class":"value";this.factory=n||d}if("class"==this.factoryType){d={destroy:x};e.delegate&&(d.autoDelegate=!1,d.delegate=e.delegate(f));e.dataSource&&(d.dataSource=e.dataSource(f));e.config&&b.object.complete(d,"function"==typeof e.config?e.config(f):e.config);this.instance=new this.factory(d);f.setSatellite(a,this.instance,!0);
return}d=ha(this,ja,this.factory,"instanceRA_")}this.instance!==d&&(this.instance=d||null,f.setSatellite(a,this.instance,!0));d&&d.owner===f&&(e.delegate&&d.setDelegate(e.delegate(f)),e.dataSource&&d.setDataSource(e.dataSource(f)))}else if(d=this.instance)e.instance&&(e.delegate&&d.setDelegate(),e.dataSource&&d.setDataSource()),this.instance=null,f.setSatellite(a,null,!0)},fa={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},X=c(N,{className:d+".AbstractNode",subscribeTo:N.prototype.subscribeTo+
T.DATASOURCE+T.SATELLITE,isSyncRequired:function(){return this.state==la.UNDEFINED||this.state==la.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){N.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:E.NONE,name:null,childNodes:null,emit_childNodesModified:g("childNodesModified","delta")&&function(a){M.childNodesModified.call(this,
a);var b=this.listen.childNode,e;if(b){if(e=a.inserted)for(var f=0,c;c=e[f];f++)c.addHandler(b,this);if(e=a.deleted)for(f=0;c=e[f];f++)c.removeHandler(b,this)}},childNodesState:la.UNDEFINED,emit_childNodesStateChanged:g("childNodesStateChanged","oldState"),childClass:X,dataSource:null,emit_dataSourceChanged:g("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:g("parentChanged","oldParentNode"),nextSibling:null,
previousSibling:null,firstChild:null,lastChild:null,sorting:H,sortingDesc:!1,emit_sortingChanged:g("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:g("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:v,ownerSatelliteName:null,emit_satelliteChanged:g("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:g("ownerChanged","oldOwner"),init:function(){N.prototype.init.call(this);var a=this.childNodes,b=this.dataSource;
a&&(this.childNodes=null);b&&(this.dataSource=null);var e=this.grouping;e&&(this.grouping=null,this.setGrouping(e));this.childClass&&(this.childNodes=[],b?this.setDataSource(b):a&&this.setChildNodes(a));a=this.satellite;if(a!==v){this.satellite=v;for(var f in a)a[f]&&"object"==typeof a[f]&&this.setSatellite(f,a[f])}if(f=this.owner)this.owner=null,this.setOwner(f)},setChildNodesState:function(a,b){var e=String(a),f=this.childNodesState;if(!la.values[e])throw Error("Wrong state value");if(f!=e||f.data!=
b)this.childNodesState=Object(e),this.childNodesState.data=b,this.emit_childNodesStateChanged(f)},appendChild:function(a){},insertBefore:function(a,b){},removeChild:function(a){},replaceChild:function(a,b){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,b){},setSorting:function(a,b){},setDataSource:function(a){},setOwner:function(a){a&&0!=a instanceof X||(a=null);if(a&&this.parentNode)throw n;var b=this.owner;if(b!==a){var e=this.listen.owner;if(b){if(this.ownerSatelliteName&&
b.satellite.__auto__&&this.ownerSatelliteName in b.satellite.__auto__)return;e&&b.removeHandler(e,this);this.ownerSatelliteName&&(this.owner=null,b.setSatellite(this.ownerSatelliteName,null))}a&&e&&a.addHandler(e,this);this.owner=a;this.emit_ownerChanged(b);this.autoDelegate!=E.OWNER&&this.autoDelegate!==E.ANY||this.setDelegate(a)}},setSatellite:function(a,b,e){var f=this.satellite[a]||null,c=this.satellite.__auto__,d=c&&c[a],n=e&&d;if(n)(b=d.instance)&&d.config.instance&&delete d.config.instance.setOwner;
else{if((b=q(b))&&b.owner===this&&c&&b.ownerSatelliteName&&c[b.ownerSatelliteName])return;d&&(delete c[a],d.config.instance&&d.config.instance.removeHandler(fa,d),d.config.handler&&this.removeHandler(d.config.handler,d))}if(f!==b){e=this.listen.satellite;var h=this.listen["satellite:"+a],t;f&&(delete this.satellite[a],f.ownerSatelliteName=null,d&&f.destroy===x?t=f:(e&&f.removeHandler(e,this),h&&f.removeHandler(h,this),f.setOwner(null)),n&&!b&&d.config.instance&&(d.config.instance.setOwner=C));if(b){if(0==
b instanceof X){d={owner:this,name:a,config:b,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};b.handler&&this.addHandler(b.handler,d);b.instance&&(b.instance.addHandler(fa,d),b.instance.setOwner=C);c||(this.satellite===v&&(this.satellite={}),c=this.satellite.__auto__={});c[a]=d;ja.call(d,this);!d.instance&&f&&this.emit_satelliteChanged(a,f);t&&(delete t.destroy,t.destroy());return}if(b.owner!==this){d&&d.config.delegate?(c=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),
b.autoDelegate=c):b.setOwner(this);if(b.owner!==this){this.setSatellite(a,null);return}e&&b.addHandler(e,this);h&&b.addHandler(h,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==v&&(this.satellite={});this.satellite[a]=b;b.ownerSatelliteName=a}this.emit_satelliteChanged(a,f);t&&(delete t.destroy,t.destroy())}},getChildNodesDataset:function(){return sa[this.basisObjectId]||new qa({sourceNode:this})},destroy:function(){N.prototype.destroy.call(this);
this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==v){var b=a.__auto__;delete a.__auto__;for(var e in b)b[e].config.instance&&!b[e].instance&&b[e].config.instance.destroy(),b[e].existsRA_&&W(b[e],null,null,"existsRA_"),b[e].instanceRA_&&W(b[e],null,null,"instanceRA_");for(e in a)b=a[e],b.owner=null,
b.ownerSatelliteName=null,b.destroy===x&&delete b.destroy,b.destroy();this.satellite=null}this.childNodes=null}}),ha=A(X),wa=c(X,{className:d+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];X.prototype.init.call(this)},insert:function(a,b){var e=this.nodes,f=b?e.indexOf(b):-1;-1==f?(e.push(a),this.last=a):e.splice(f,0,a);this.first=e[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var b=this.nodes;h(b,a)&&(this.first=
b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,b=a.length;0<b--;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){X.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),Z={childClass:X,childFactory:null,listen:{dataSource:{itemsChanged:function(e,
f){var c={},d=[];if(f.deleted)if(c.deleted=d,this.childNodes.length==f.deleted.length){for(var d=L(this.childNodes),n=0,h;h=d[n];n++)B(h);this.dataSourceMap_=null;this.clear(!0);this.dataSourceMap_={}}else for(n=0;h=f.deleted[n];n++){h=h.basisObjectId;var t=this.dataSourceMap_[h];B(t);delete this.dataSourceMap_[h];this.removeChild(t);d.push(t)}if(f.inserted)for(c.inserted=[],n=0;h=f.inserted[n];n++){var p=t=a(this,{delegate:h});p.setDelegate=b.fn.$undef;p.destroy=w;this.dataSourceMap_[h.basisObjectId]=
t;c.inserted.push(t);this.firstChild&&this.insertBefore(t)}this.firstChild?this.emit_childNodesModified(c):this.setChildNodes(c.inserted);if(this.destroyDataSourceMember&&d.length)for(n=0;h=d[n];n++)h.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}}},getChild:function(a,e){return b.array.search(this.childNodes,a,e)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},
insertBefore:function(b,c){if(!this.childClass)throw t;if(b.firstChild)for(var d=this;d=d.parentNode;)if(d===b)throw ma;var p=b&&b instanceof this.childClass;if(this.dataSource){if(!p||!b.delegate||this.dataSourceMap_[b.delegate.basisObjectId]!==b)throw f;}else if(this.dataSourceRA_)throw e;p||(b=a(this,b instanceof N?{delegate:b}:b));if(b.owner)throw n;var p=b.parentNode===this,k=this.childNodes,u=this.grouping,v=b.groupNode,g=null,r=this.sorting,l,s=!1,Q,d=-1,R,V;p&&(R=b.nextSibling,V=b.previousSibling);
if(r!==H){c=null;l=this.sortingDesc;Q=r(b);if(null==Q)Q=-Infinity;else if("number"!=typeof Q||Q!==Q)Q=String(Q);if(p)if(Q===b.sortingValue)s=!0;else if(s=l?(!R||typeof R.sortingValue<=typeof Q&&R.sortingValue<=Q)&&(!V||typeof V.sortingValue>=typeof Q&&V.sortingValue>=Q):(!R||typeof R.sortingValue>=typeof Q&&R.sortingValue>=Q)&&(!V||typeof V.sortingValue<=typeof Q&&V.sortingValue<=Q))b.sortingValue=Q}if(u){g=u.getGroupNode(b,!0);u=g.nodes;if(v===g&&(s||r===H&&R===c))return b;r!==H?v===g&&s?d=R&&R.groupNode===
g?u.indexOf(R):u.length:(d=z(u,Q,K,l),b.sortingValue=Q):d=c&&c.groupNode===g?u.indexOf(c):u.length;if(d<u.length)c=u[d];else if(g.last)c=g.last.nextSibling;else for(d=g,c=null;(d=d.nextSibling)&&!(c=d.first););if(b===c||p&&R===c)return v!==g&&(v&&v.remove(b),g.insert(b,c)),b;d=-1}else if(r!==H){if(s)return b;d=z(k,Q,K,l,this.lll);c=k[d];b.sortingValue=Q;if(b===c||p&&R===c)return b}else{if(c&&c.parentNode!==this)throw ea;if(p){if(R===c)return b;if(b===c)throw ma;}}p?(R?(R.previousSibling=V,b.nextSibling=
null):this.lastChild=V,V?(V.nextSibling=R,b.previousSibling=null):this.firstChild=R,-1==d?h(k,b):(l=k.indexOf(b),k.splice(l,1),d-=l<d),v&&(v.remove(b),v=null)):b.parentNode&&b.parentNode.removeChild(b);v!=g&&g.insert(b,c);if(c){-1==d&&(d=k.indexOf(c));if(-1==d)throw ea;b.nextSibling=c;k.splice(d,0,b)}else d=k.length,k.push(b),c={previousSibling:this.lastChild},this.lastChild=b;b.parentNode=this;b.previousSibling=c.previousSibling;0==d?this.firstChild=b:c.previousSibling.nextSibling=b;c.previousSibling=
b;p||(G(b,b.contextSelection,this.selection||this.contextSelection,!0),m(b,this.disabled||this.contextDisabled),(b.underMatch_||this.matchFunction)&&b.match&&b.match(this.matchFunction),b.autoDelegate!=E.PARENT&&b.autoDelegate!==E.ANY||b.setDelegate(this),b.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[b]}),b.listen.parentNode&&this.addHandler(b.listen.parentNode,b));return b},removeChild:function(a){if(!a||a.parentNode!==this)throw ea;if(0==a instanceof this.childClass)throw ba;
if(this.dataSource){if(this.dataSource.has(a.delegate))throw f;}else if(this.dataSourceRA_)throw e;var b=this.childNodes.indexOf(a);if(-1==b)throw ea;this.childNodes.splice(b,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);G(a,a.contextSelection,
null,!0);a.groupNode&&a.groupNode.remove(a);a.emit_parentChanged(this);this.dataSource||this.emit_childNodesModified({deleted:[a]});a.autoDelegate!=E.PARENT&&a.autoDelegate!==E.ANY||a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw f;if(this.dataSourceRA_)throw e;if(null==b||b.parentNode!==this)throw ea;this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource&&this.dataSourceMap_&&this.dataSource.itemCount)throw f;if(this.firstChild){a&&G(this,
this.selection||this.contextSelection,null,!1,!0);var b=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:b});for(var e=b.length;0<e--;){var c=b[e];c.listen.parentNode&&c.parentNode.removeHandler(c.listen.parentNode,c);c.parentNode=null;c.groupNode=null;a?(c.nextSibling=null,c.previousSibling=null,c.emit_parentChanged(this),c.autoDelegate!=E.PARENT&&c.autoDelegate!==E.ANY||c.setDelegate()):c.destroy()}if(this.grouping)for(b=this.grouping.childNodes,
e=b.length-1;a=b[e];e--)a.clear()}},setChildNodes:function(a,b){this.dataSource||this.dataSourceRA_||this.clear(b);if(a&&(0=="length"in a&&(a=[a]),a.length)){var e=this.emit_childNodesModified;this.emit_childNodesModified=p;for(var f=0,c=a.length;f<c;f++)this.insertBefore(a[f]);this.emit_childNodesModified=e;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(a){if(!this.childClass)throw t;a=ca(this,this.setDataSource,a,"dataSourceRA_");if(this.dataSource!==a){var b=
this.dataSource,e=this.listen.dataSource;b&&(this.dataSource=this.dataSourceMap_=null,e&&b.removeHandler(e,this));if(this.firstChild){if(b)for(var f=0,c;c=this.childNodes[f];f++)B(c);this.clear(!this.destroyDataSourceMember)}(this.dataSource=a)?(this.dataSourceMap_={},this.setChildNodesState(a.state,a.state.data),e&&(a.addHandler(e,this),a.itemCount&&e.itemsChanged&&e.itemsChanged.call(this,a,{inserted:a.getItems()}))):this.setChildNodesState(la.UNDEFINED);this.emit_dataSourceChanged(b)}},setGrouping:function(a,
b){if("function"==typeof a||"string"==typeof a)a={rule:a};0==a instanceof ta&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var e=this.grouping,f;if(e){this.grouping=null;if(!a&&this.firstChild){f=this.sorting!==H?k(this):this.childNodes;e.nullGroup.clear();for(var c=e.childNodes.slice(0),d=0;d<c.length;d++)c[d].clear();J(this,f)}e.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){f=this.sorting!==H?k(this):this.childNodes;for(d=0;c=f[d];d++)c.groupNode=
this.grouping.getGroupNode(c,!0);d=f;for(f=0;c=d[f];f++)c.groupNode.nodes.push(c);d=[this.grouping.nullGroup].concat(this.grouping.childNodes);c=[];f=0;for(var n;n=d[f];f++){var h=n.nodes;n.first=h[0]||null;n.last=h[h.length-1]||null;c.push.apply(c,h);n.emit_childNodesModified({inserted:h})}J(this,c)}this.emit_groupingChanged(e);e&&!b&&e.destroy()}},setSorting:function(a,b){a=u(a);b=!!b;if(this.sorting!==a||this.sortingDesc!=!!b){var e=this.sorting,f=this.sortingDesc;this.sorting=a;this.sortingDesc=
!!b;if(a!==H&&this.firstChild){var c=[],d;for(d=this.firstChild;d;d=d.nextSibling){var n=a(d);if(null==n)n=-Infinity;else if("number"!=typeof n||n!==n)n=String(n);d.sortingValue=n}if(this.grouping)for(var n=[this.grouping.nullGroup].concat(this.grouping.childNodes),h=0,t;t=n[h];h++)d=t.nodes=k({childNodes:t.nodes,sortingDesc:this.sortingDesc}),t.first=d[0]||null,t.last=d[d.length-1]||null,c.push.apply(c,d);else c=k(this);J(this,c)}this.emit_sortingChanged(e,f)}},setMatchFunction:function(a){if(this.matchFunction!=
a){var b=this.matchFunction;this.matchFunction=a;for(var e=this.lastChild;e;e=e.previousSibling)e.match(a);this.emit_matchFunctionChanged(b)}}},ya=c(X,Z,{className:d+".Node",emit_enable:g("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)m(a,!1);M.enable.call(this)},emit_disable:g("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)m(a,!0);M.disable.call(this)},emit_satelliteChanged:function(a,b){X.prototype.emit_satelliteChanged.call(this,a,b);this.satellite[a]instanceof
ya&&m(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:g("select"),emit_unselect:g("unselect"),emit_match:g("match"),emit_unmatch:g("unmatch"),emit_matchFunctionChanged:g("matchFunctionChanged","oldMatchFunction"),selected:!1,selectedRA_:null,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,disabledRA_:null,contextDisabled:!1,listen:{owner:{enable:function(){m(this,!1)},disable:function(){m(this,!0)}},selection:{destroy:function(){this.setSelection()}}},
init:function(){var a=this.disabled;this.disabled=!1;var b=this.selection;b&&(this.selection=null,this.setSelection(b));X.prototype.init.call(this);if(a&&(a=!!W(this,this.setDisabled,a,"disabledRA_")))for(this.disabled=a,a=this.firstChild;a;a=a.nextSibling)m(a,!0);this.selected&&(this.selected=!!W(this,this.setSelected,this.selected,"selectedRA_"))},setSelection:function(a){!1===a instanceof Y&&(a=a?new Y(a):null);if(this.selection!==a)return G(this,this.selection||this.contextSelection,a||this.contextSelection,
!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},setSelected:function(a,b){var e=this.contextSelection;a=!!W(this,this.setSelected,a,"selectedRA_");this.selected&&e&&(this.selectedRA_?e.has(this)&&(this.selected=!1,e.remove(this),this.selected=!0):e.has(this)||e.add(this));if(a!==this.selected)return this.selectedRA_?(this.selected=a)?this.emit_select():this.emit_unselect():
a?e?b?e.add(this):e.set(this):(this.selected=!0,this.emit_select()):e?e.remove(this):(this.selected=!1,this.emit_unselect()),!0;!this.selectedRA_&&a&&e&&(b?e.remove(this):e.set(this));return!1},select:function(a){return this.selectedRA_?!1:this.setSelected(!0,a)},unselect:function(){return this.selectedRA_?!1:this.setSelected(!1)},setDisabled:function(a){a=!!W(this,this.setDisabled,a,"disabledRA_");return this.disabled!==a?(this.disabled=a,this.contextDisabled||(a?this.emit_disable():this.emit_enable()),
!0):!1},disable:function(){return this.disabledRA_?!1:this.setDisabled(!0)},enable:function(){return this.disabledRA_?!1:this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&W(this,null,null,"disabledRA_");this.selectedRA_&&
W(this,null,null,"selectedRA_");this.contextSelection=null;this.selection&&this.setSelection();X.prototype.destroy.call(this)}}),ta=c(X,Z,{className:d+".GroupingNode",emit_childNodesModified:function(a){M.childNodesModified.call(this,a);var b;if(b=a.inserted){a=0;for(var e;e=b[a++];)e.groupId_=e.delegate?e.delegate.basisObjectId:e.data.id,this.map_[e.groupId_]=e;if(this.dataSource&&this.nullGroup.first)for(b=this.owner,e=L(this.nullGroup.nodes),a=e.length;0<a--;)b.insertBefore(e[a],e[a].nextSibling)}},
emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);M.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:H,childClass:wa,childFactory:function(a){return new this.childClass(y({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new wa;
X.prototype.init.call(this)},getGroupNode:function(a,b){var e=this.rule(a),f=e instanceof N,c=this.map_[f?e.basisObjectId:e];this.dataSource&&(b=!1);!c&&b&&(c=this.appendChild(f?e:{data:{id:e,title:e}}));return c||this.nullGroup},setDataSource:function(a){var b=this.dataSource;Z.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==b)for(var b=L(a.childNodes),e=b.length-1;0<=e;e--)a.insertBefore(b[e],b[e+1])},insertBefore:function(a,b){a=Z.insertBefore.call(this,a,b);var e=a.first;if(e){for(var f=
e.parentNode,c=a.last,d,n,h,t=null,p=a;(p=p.nextSibling)&&!(t=p.first););h=t?t.previousSibling:f.lastChild;d=e.previousSibling;n=c.nextSibling;if(n!==t){var s=f.childNodes,p=a.nodes,Q=p.length;d&&(d.nextSibling=n);n&&(n.previousSibling=d);h&&(h.nextSibling=e);t&&(t.previousSibling=c);e.previousSibling=h;c.nextSibling=t;var c=s.indexOf(e),R=t?s.indexOf(t):s.length;R>c&&(R-=Q);s.splice(c,Q);s.splice.apply(s,[R,0].concat(p));h&&d||(f.firstChild=s[0]);t&&n||(f.lastChild=s[s.length-1]);if(e instanceof
wa)for(e=Q;0<e--;)f.insertBefore(p[e],t),t=p[e]}}return a},removeChild:function(a){if(a=Z.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var b=0,e;e=a.nodes[b];b++)e.parentNode.insertBefore(e)}return a},clear:function(a){var b=[],e=this.getGroupNode,f=this.nullGroup;this.getGroupNode=function(){return f};for(var c=this.firstChild;c;c=c.nextSibling)b.push.apply(b,c.nodes);for(var c=0,d;d=b[c];c++)d.parentNode.insertBefore(d);this.getGroupNode=e;Z.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=
!1;X.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});X.prototype.groupingClass=ta;var Aa={childNodesModified:function(a,b){var e=this.members_,f={},c,d=0,n=0,h=b.inserted,t=b.deleted;if(h&&h.length)for(f.inserted=h;c=h[d];)e[c.basisObjectId]=c,d++;if(t&&t.length)for(f.deleted=t;c=t[n];)delete e[c.basisObjectId],n++;(d||n)&&this.emit_itemsChanged(f)},destroy:function(){this.destroy()}},qa=c(ka,{className:d+".ChildNodesDataset",sourceNode:null,init:function(){ka.prototype.init.call(this);
var a=this.sourceNode;sa[a.basisObjectId]=this;a.firstChild&&Aa.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(Aa,this)},destroy:function(){this.sourceNode.removeHandler(Aa,this);delete sa[this.sourceNode.basisObjectId];ka.prototype.destroy.call(this)}}),Y=c($,{className:d+".Selection",multiple:!1,emit_itemsChanged:function(a){var b;$.prototype.emit_itemsChanged.call(this,a);if(b=a.deleted)for(var e=0,f;f=b[e];e++)f.selected&&f.contextSelection===this&&(f.selected=!1,f.emit_unselect());
if(b=a.inserted)for(e=0;f=b[e];e++)f.selected||f.contextSelection!==this||(f.selected=!0,f.emit_select())},add:function(a){if(a){if(!this.multiple&&this.itemCount)return this.set(a);Array.isArray(a)||(a=[a]);a=a.filter(this.filter,this);!this.multiple&&1<a.length&&(a=[a[0]]);if(a.length)return $.prototype.add.call(this,a)}},set:function(a){if(!a)return this.clear();Array.isArray(a)||(a=[a]);a=a.filter(this.filter,this);!this.multiple&&1<a.length&&(a=[a[0]]);return a.length?$.prototype.set.call(this,
a):this.clear()},filter:function(a){return a instanceof ya&&!a.selectedRA_&&a.contextSelection===this}});U.exports={DELEGATE:E,AbstractNode:X,Node:ya,GroupingNode:ta,PartitionNode:wa,ChildNodesDataset:qa,Selection:Y,nullSelection:new ka}},"e.js":function(d,U,b,g,l,A,P,S,da){function w(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}function C(a){var b=oa[a];if(!b)for(var e=[],f={},c=1,b=oa[a]={actions:e,handler:f};a;){if(a&1){var d=ma[c];e.push(d.action);for(var s in d.handler)f[s]=
f[s]?w(f[s],d.handler[s]):d.handler[s]}c<<=1;a>>=1}return b}function x(a){a.factory=la;a.deferred=B;a.compute=K;a.pipe=r;a.as=D;return a}function B(){var a=this;return x(function(b){return(b=a(b))?b.deferred():b})}function K(a,b){var e=this;return x(function(f){var c=e(f);return c?c.compute(a,b)(f):c})}function D(a){var b=this;return x(function(e){return(e=b(e))?e.as(a):e})}function r(a,b){var e=this;return x(function(f){return(f=e(f))?f.pipe(a,b):f})}function k(a,b){for(;b&&b!==a&&b!==b.delegate;)b=
b.delegate;return b===a}function z(a,b,e){var f=a.delegate;f&&(a.root=f.root,a.target=f.target,a.data=f.data,a.state=f.state);if(a.root!==b){if(f=a.listen.root)b&&b!==a&&b.removeHandler(f,a),a.root&&a.root!==a&&a.root.addHandler(f,a);a.emit_rootChanged(b)}if(a.target!==e){if(f=a.listen.target)e&&e!==a&&e.removeHandler(f,a),a.target&&a.target!==a&&a.target.addHandler(f,a);a.emit_targetChanged(e)}for(a=a.delegates_;a;)a.delegate&&z(a.delegate,b,e),a=a.next}function G(a,b){var e={},f;a&&a.length&&(f=
e.inserted=a);b&&b.length&&(f=e.deleted=b);if(f)return e}function m(a,b){if(a&&a.itemCount){if(b&&b.itemCount){var e=[],f=[],c;for(c in a.items_){var d=a.items_[c];0==d.basisObjectId in b.items_&&f.push(d)}for(c in b.items_)d=b.items_[c],0==d.basisObjectId in a.items_&&e.push(d);return G(e,f)}if(a.itemCount)return{deleted:a.getItems()}}else if(b&&b.itemCount)return{inserted:b.getItems()}}function F(){this.fn.call(this.context,this.source)}function q(a,b,e,f,c){var d=a[f]||null,s=null;b!==F&&"function"==
typeof e&&(e=e.call(c||a,c||a));e&&(c=s=d&&d.source===e?d:null,e instanceof I?(s=c||new va(a,b,e,Ca),e=e.dataset):e.bindingBridge&&(s=c||new ua(a,b,e,xa),e=q(s,F,e.value,"next")));0==e instanceof pa&&(e=null);if(f&&d!==s){for(b=d;b;)c=b,c.detach(),b=c.next,c.next=null;s&&s.attach(ra);a[f]=s}return e}function J(a){return function V(b,e,f,c,d){var s=b[c]||null,n=null;e!==F&&"function"==typeof f&&(f=f.call(d||b,d||b));f&&f.bindingBridge&&(n=s&&s.source===f?s:new ua(b,e,f,xa),f=V(n,F,f.bindingBridge.get(f),
"next"));0==f instanceof a&&(f=null);if(c&&s!==n){for(e=s;e;)d=e,d.detach(),e=d.next,d.next=null;n&&n.attach(ra);b[c]=n}return f}}function a(e,f,c,d,s){var n=e[d]||null,h=null;c&&f!==F&&b.fn.isFactory(c)&&(c=c.call(s||e,s||e));c&&c.bindingBridge&&(h=n&&n.source===c?n:new ua(e,f,c,xa),c=a(h,F,c.bindingBridge.get(c),"next"));if(d&&n!==h){for(f=n;f;)s=f,s.detach(),f=s.next,s.next=null;h&&h.attach(Ba);e[d]=h}return c}function c(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function y(a){a&&
a.constructor===Object||(a={value:a});return new Y({data:a})}d=this.path;g=b.Class;var L=Array.prototype.slice,h=Object.prototype.hasOwnProperty,p=b.object.values,u=b.fn.$self;A=b.require("./2.js");var H=A.Emitter;l=A.create;var M=A.createHandler,W=A.events,ca={},T=[],la=b.FACTORY,N=b.PROXY,ka={},$={priority:[],values:{},add:function(a,b){var e=a.toLowerCase();$[a]=e;ka[e]=a;this.values[e]=a;b=b?this.priority.indexOf(b):-1;-1==b?this.priority.push(e):this.priority.splice(b,0,e)},getList:function(){return p(ka)},
factory:function(a,b){return fa.stateFactory(a,b)},from:function(a){return fa.state(a)}};$.add("READY");$.add("DEPRECATED");$.add("UNDEFINED");$.add("ERROR");$.add("PROCESSING");var ma={},ea=1,ba={NONE:0,ALL:0,link:function(a,b,e){a+=b.basisObjectId;var f=e.subscribers_;f||(f=e.subscribers_={});f[a]||(f[a]=b,1==(e.subscriberCount+=1)&&e.emit_subscribersChanged(1))},unlink:function(a,b,e){a+=b.basisObjectId;(b=e.subscribers_)&&b[a]&&(delete b[a],0==--e.subscriberCount&&(e.emit_subscribersChanged(-1),
e.subscribers_=null))},add:function(a,b,e){ma[ea]={handler:b,action:e};ba[a]=ea;ba.ALL|=ea;ea<<=1},addProperty:function(a,b){var e={};e[b||a+"Changed"]=function(b,e){e instanceof f&&ba.unlink(a,b,e);b[a]instanceof f&&ba.link(a,b,b[a])};this.add(a.toUpperCase(),e,function(b,e){e[a]&&b(a,e,e[a])})}},oa={};ba.addProperty("delegate");ba.addProperty("target");ba.addProperty("dataset");ba.addProperty("value","change");var f=g(H,{className:d+".AbstractData",state:$.UNDEFINED,stateRA_:null,emit_stateChanged:l("stateChanged",
"oldState"),active:!1,activeRA_:null,emit_activeChanged:l("activeChanged"),subscribeTo:ba.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:l("subscribersChanged","delta"),syncEvents:g.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){H.prototype.init.call(this);this.active&&(this.active===N&&(this.active=fa.from(this,"subscribersChanged","subscriberCount")),(this.active=!!a(this,this.setActive,
this.active,"activeRA_"))&&this.addHandler(C(this.subscribeTo).handler));if(this.state!=$.UNDEFINED){var b=this.state;"string"!=typeof this.state&&(b=a(this,this.setState,b,"stateRA_"));b&&!h.call(ka,b)&&(b=!1);this.state=b||$.UNDEFINED}if(b=this.syncAction)this.syncAction=null,this.setSyncAction(b)},setState:function(b,e){b=a(this,this.setState,b,"stateRA_")||$.UNDEFINED;var f=String(b);if(!h.call(ka,f))return!1;this.stateRA_&&void 0===e&&(e=b.data);if(this.state!=f||this.state.data!=e){var c=this.state;
this.state=Object(f);this.state.data=e;this.emit_stateChanged(c);return!0}return!1},deprecate:function(){this.state!=$.PROCESSING&&this.setState($.DEPRECATED)},setActive:function(b){b===N&&(b=fa.from(this,"subscribersChanged","subscriberCount"));b=!!a(this,this.setActive,b,"activeRA_");if(this.active!=b){this.active=b;this.emit_activeChanged();if(b){b=C(this.subscribeTo);for(var e=0,f;f=b.actions[e];e++)f(ba.link,this);this.addHandler(b.handler)}else{b=C(this.subscribeTo);for(e=0;f=b.actions[e++];)f(ba.unlink,
this);this.removeHandler(b.handler)}return!0}return!1},setSubscription:function(a){var b=this.subscribeTo,e=a&ba.ALL;if(a=b^e){this.subscribeTo=e;if(this.active){var f=C(b),e=C(e);this.removeHandler(f.handler);this.addHandler(e.handler);for(f=1;a;)a&1&&(e=ma[f],b&f?e.action(ba.unlink,this):e.action(ba.link,this)),f<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==$.UNDEFINED||this.state==$.DEPRECATED)},setSyncAction:function(a){var b=this.syncAction;
"function"!=typeof a&&(a=null);(this.syncAction=a)?(b||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):b&&this.removeHandler(this.syncEvents)},destroy:function(){H.prototype.destroy.call(this);if(this.active)for(var b=C(this.subscribeTo),e=0,f;f=b.actions[e];e++)f(ba.unlink,this);this.activeRA_&&a(this,!1,!1,"activeRA_");this.stateRA_&&a(this,!1,!1,"stateRA_");this.state=$.UNDEFINED}}),e=b.getter.ID,n={destroy:function(a){this.value.unlink(a,this.fn)}},t={destroy:function(){this.set(null)}},
E={},sa={},v=function(a){fa.prototype.set.call(this,a)},ja=function(a,b){b instanceof H?b.removeHandler(this.pipeHandler,this):b=null;a instanceof H?a.addHandler(this.pipeHandler,this):a=null;a!==b&&fa.prototype.set.call(this,a)},fa=g(f,{className:d+".Value",subscribeTo:ba.VALUE,emit_change:l("change","oldValue")&&function(a){W.change.call(this,a);for(var b=this;b=b.links_;)b.fn.call(b.context,this.value,a)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,
pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,b,e,f){a.link(e,b,!0,f)},detach:function(a,b,e){a.unlink(e,b)},get:function(a){return a.value}},init:function(){f.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.setNullOnEmitterDestroy&&this.value instanceof H&&this.value.addHandler(t,this);this.initValue=this.value},set:function(a){var b=this.value;a=this.proxy?this.proxy(a):a;var e=a!==b;e&&(this.setNullOnEmitterDestroy&&(b instanceof H&&b.removeHandler(t,
this),a instanceof H&&a.addHandler(t,this)),this.value=a,this.locked||this.emit_change(b));return e},reset:function(){this.set(this.initValue)},isLocked:function(){return 0<this.locked},lock:function(){this.locked++;1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&(this.locked--,!this.locked)){var a=this.lockedValue_;this.lockedValue_=null;this.value!==a&&this.emit_change(a)}},compute:function(a,b){b||(b=a,a=null);b||(b=u);var f=this,c=M(a,function(a){fa.prototype.set.call(this,
b(a,f.value))}),d=c.events.concat(b[e]||String(b),this.basisObjectId).join("_"),s=E[d];if(!s){var n={};c.destroy=function(a){delete n[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in n){var e=n[a];fa.prototype.set.call(e.value,b(e.object,this.value))}},destroy:function(){for(var a in n){var b=n[a];b.object.removeHandler(c,b.value);b.value.destroy()}f=n=null}});s=E[d]=x(function(a){var e=a.basisObjectId,d=n[e],s=b(a,f.value);d?fa.prototype.set.call(d.value,s):(d=new X({value:s}),
a.addHandler(c,d),d=n[e]={value:d,object:a});return d.value})}return s},pipe:function(a,f){var c=M(a,Aa),d=f[e]||String(f),d=c.events.join("_")+"_"+d,s=this.pipes_,n;s?n=s[d]:s=this.pipes_={};n||(n=new ya({source:this,pipeId:d,pipeHandler:c}),n.proxy=b.getter(f),this.value instanceof H&&(n.value=n.proxy(this.value),this.value.addHandler(c,n)),s[d]=n,this.link(n,ja,!0,n.destroy));return n},as:function(a){if(!a||a===u)return this;if(this.links_)for(var b=this,f=a[e]||String(a);b=b.links_;){var c=b.context;
if(c instanceof X&&c.proxy&&(c.proxy[e]||String(c.proxy))==f)return c}a=new X({proxy:a,value:this.value});this.link(a,v,!0,a.destroy);return a},deferred:function(){this.deferred_||(this.deferred_=new Z({source:this,value:this.value}));return this.deferred_},link:function(a,b,e,f){if("function"!=typeof b){var c=String(b);(b=sa[c])||(b=sa[c]=function(a){this[c]=a})}this.links_={value:this,context:a,fn:b,destroy:f||null,links_:this.links_};a instanceof H&&a.addHandler(n,this.links_);e||b.call(a,this.value);
return a},unlink:function(a,e){for(var f=this,c;c=f,f=f.links_;)f.context!==a||e&&f.fn!==e||(f.fn=b.fn.$undef,c.links_=f.links_,f.context instanceof H&&f.context.removeHandler(n,f))},destroy:function(){f.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof H&&this.value.removeHandler(t,this);var a=this.links_;for(this.links_=null;a;)a.context instanceof H&&a.context.removeHandler(n,a),a.destroy&&a.destroy.call(a.context),a=a.links_;this.pipes_=this.deferred_=this.lockedValue_=
this.value=this.initValue=this.proxy=null}}),X=g(fa,{className:d+".ReadOnlyValue",set:b.fn.$false}),ha={change:function(a){this.isLocked()||(this.lock(),wa.add(this));fa.prototype.set.call(this,a.value)},destroy:function(){this.destroy()}},wa=b.asap.schedule(function(a){a.unlock()}),Z=g(X,{className:d+".DeferredValue",setNullOnEmitterDestroy:!1,source:null,init:function(){fa.prototype.init.call(this);this.source.addHandler(ha,this)},deferred:function(){return this},destroy:function(){wa.remove(this);
this.source=null;fa.prototype.destroy.call(this)}}),ya=g(X,{className:d+".PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var a=this.source,b=a.value;b instanceof H&&b.removeHandler(this.pipeHandler,this);this.pipeHandler=this.source=a.pipes_[this.pipeId]=null;fa.prototype.destroy.call(this)}}),ta={},Aa=function(a){fa.prototype.set.call(this,a)};fa.from=function(a,f,c){var d;if(!a)return null;if(a instanceof H){c||(c=f,f=null);c||(c=u);var s=M(f,Aa),n=s.events.concat(c[e]||
String(c),a.basisObjectId).join("_");d=ta[n];d||(d=ta[n]=new X({proxy:b.getter(c),value:a,handler:{destroy:function(){ta[n]=null;a.removeHandler(s,this)}}}),s.destroy=function(){ta[n]=null;this.destroy()},a.addHandler(s,d))}if(!d){var n=a.basisObjectId,h=a.bindingBridge;n&&h&&(d=ta[n],d||(d=ta[n]=new X({value:h.get(a),handler:{destroy:function(){ta[n]=null;h.detach(a,fa.prototype.set,d)}}}),h.attach(a,fa.prototype.set,d,d.destroy)))}if(!d)throw"Bad object type";return d};fa.factory=function(a,b){return x(function(e){return fa.from(e,
a,b)})};fa.state=function(a){return a instanceof f?fa.from(a,"stateChanged","state"):$.UNDEFINED};fa.stateFactory=function(a,b){return fa.factory(a,b).pipe("stateChanged","state").as(function(a){return a||$.UNDEFINED})};var qa={},Y=g(f,{className:d+".Object",subscribeTo:ba.DELEGATE+ba.TARGET,data:null,emit_update:l("update","delta")&&function(a){var b=this.delegates_;for(W.update.call(this,a);b;)b.delegate&&b.delegate.emit_update(a),b=b.next},emit_stateChanged:function(a){var b=this.delegates_;for(f.prototype.emit_stateChanged.call(this,
a);b;)b.delegate&&(b.delegate.state=this.state,b.delegate.emit_stateChanged(a)),b=b.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:l("delegateChanged","oldDelegate"),target:null,emit_targetChanged:l("targetChanged","oldTarget"),root:null,emit_rootChanged:l("rootChanged","oldRoot"),init:function(){this.root=this;f.prototype.init.call(this);var a=this.delegate,b=this.data;a?(this.target=this.delegate=null,this.data=qa,this.setDelegate(a),this.data===qa&&(this.data=b||{})):
(b||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(a){if((a=s(this,this.setDelegate,a,"delegateRA_"))&&a instanceof Y){if(a.delegate&&k(this,a))return!1}else a=null;if(this.delegate!==a){var b=this.state,e=this.data,f=this.delegate,c=this.target,d=this.root,n=this.listen.delegate,h=!1,t;if(f){n&&f.removeHandler(n,this);for(var p=f.delegates_,I=f;p;){if(p.delegate===this){p.delegate=null;I===f?f.delegates_=p.next:I.next=p.next;break}I=p;p=p.next}}if(a){if(this.delegate=
a,n&&a.addHandler(n,this),a.delegates_={delegate:this,next:a.delegates_},this.data!==qa){t={};for(var u in a.data)!1===u in e&&(h=!0,t[u]=void 0);for(u in e)e[u]!==a.data[u]&&(h=!0,t[u]=e[u])}}else for(u in this.target=this.delegate=null,this.root=this,this.data={},e)this.data[u]=e[u];z(this,d,c);h&&this.emit_update(t);!t||b===this.state||String(b)==this.state&&b.data===this.state.data||this.emit_stateChanged(b);this.emit_delegateChanged(f);return!0}return!1},setState:function(a,b){return this.delegate?
this.root.setState(a,b):f.prototype.setState.call(this,a,b)},update:function(a){if(this.delegate)return this.root.update(a);if(a){var b={},e=!1,f;for(f in a)this.data[f]!==a[f]&&(e=!0,b[f]=this.data[f],this.data[f]=a[f]);if(e)return this.emit_update(b),b}return!1},destroy:function(){f.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.delegateRA_&&s(this,!1,!1,"delegateRA_");this.data=ca;this.target=
this.root=null}});A=g(Y,{className:d+".Slot"});var O={destroy:function(){delete this.map[this.id]}};P=g(f,{className:d+".KeyObjectMap",itemClass:Y,keyGetter:b.getter(u),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={};f.prototype.init.call(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a){return new this.itemClass(a instanceof Y?{delegate:a}:{data:{id:a,title:a}})},get:function(a,b){var e=a instanceof Y?a.basisObjectId:a,f=this.map_[e];
!f&&b&&(f=this.map_[e]={map:this.map_,id:e,item:this.create(a,b)},f.item.addHandler(O,f));if(f)return f.item},destroy:function(){f.prototype.destroy.call(this);var a=this.map_;this.map_=null;for(var b in a){var e=a[b];this.autoDestroyMembers?e.item.destroy():e.item.removeHandler(O,e)}}});var I=g(Y,{className:d+".DatasetWrapper",active:b.PROXY,subscribeTo:Y.prototype.subscribeTo+ba.DATASET,listen:{dataset:{itemsChanged:function(a,b){this.itemCount=a.itemCount;this.emit_itemsChanged(b)},destroy:function(){this.setDataset()}}},
dataset:null,datasetRA_:null,emit_datasetChanged:l("datasetChanged","oldDataset"),emit_itemsChanged:l("itemsChanged","delta"),init:function(){Y.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=q(this,this.setDataset,a,"datasetRA_");if(this.dataset!==a){var b=this.listen.dataset,e=this.dataset,f;b&&(e&&e.removeHandler(b,this),a&&a.addHandler(b,this));this.itemCount=a?a.itemCount:0;this.dataset=a;(f=m(e,a))&&this.emit_itemsChanged(f);this.emit_datasetChanged(e)}},
has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},getValues:function(a){return this.dataset?this.dataset.getValues(a):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset();Y.prototype.destroy.call(this)}}),pa=g(f,
{className:d+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:l("itemsChanged","delta")&&function(a){var b,e=0,f=0,c;if(b=a.inserted)for(;c=b[e];)this.items_[c.basisObjectId]=c,e++;if(b=a.deleted)for(;c=b[f];)delete this.items_[c.basisObjectId],f++;this.itemCount+=e-f;this.cache_=e==this.itemCount?a.inserted:null;W.itemsChanged.call(this,a)},init:function(){f.prototype.init.call(this);this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},
getItems:function(){this.cache_||(this.cache_=p(this.items_));return this.cache_},getValues:function(a){return this.getItems().map(b.getter(a||u))},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var b=[];if(a)for(var e in this.items_)if(b.push(this.items_[e])>=a)break;return b},forEach:function(a){for(var b=this.getItems(),e=0;e<b.length;e++)a(b[e])},destroy:function(){f.prototype.destroy.call(this);this.cache_=T;this.itemCount=0;this.items_=this.members_=
null}}),ia=g(pa,{className:d+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){pa.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var b=this.members_,e=this.listen.item,f=[],c;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var s=a[d];if(s instanceof Y){var n=s.basisObjectId;b[n]||(b[n]=s,e&&s.addHandler(e,this),f.push(s))}}f.length&&this.emit_itemsChanged(c={inserted:f});return c},remove:function(a){var b=this.members_,
e=this.listen.item,f=[],c;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var s=a[d];if(s instanceof Y){var n=s.basisObjectId;b[n]&&(e&&s.removeHandler(e,this),delete b[n],f.push(s))}}f.length&&this.emit_itemsChanged(c={deleted:f});return c},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var b=this.members_,e=this.listen.item,f={},c=[],d=[],s,n,h,t=0;t<a.length;t++)s=a[t],s instanceof Y&&(n=s.basisObjectId,f[n]=s,b[n]||(b[n]=s,e&&s.addHandler(e,
this),d.push(s)));for(n in b)f[n]||(s=b[n],e&&s.removeHandler(e,this),delete b[n],c.push(s));(h=G(d,c))&&this.emit_itemsChanged(h);return h},sync:function(a){return this.setAndDestroyRemoved(a)},setAndDestroyRemoved:function(a){a=this.set(a)||{};var b=a.deleted;ia.setAccumulateState(!0);if(b)for(var e=0,f;f=b[e];e++)f.destroy();ia.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),b=this.listen.item,e;if(a.length){if(b)for(e=0;e<a.length;e++)a[e].removeHandler(b,this);
this.emit_itemsChanged(e={deleted:a});this.members_={}}return e},destroy:function(){this.clear();pa.prototype.destroy.call(this)}}),va=function(a,b,e,f){this.context=a;this.fn=b;this.source=e;this.handler=f};va.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var ua=function(){va.apply(this,arguments)};ua.prototype=new va;ua.prototype.attach=function(a){this.source.bindingBridge.attach(this.source,
this.handler,this,a)};ua.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var xa=function(){this.fn.call(this.context,this.source)},ra=function(){this.fn.call(this.context,null)},Ba=function(){this.fn.call(this.context,a(ca,null,this.source.bindingBridge.get(this.source)))},Ca={datasetChanged:xa,destroy:ra},s=J(Y);ia.setAccumulateState=function(){function a(){var b=d;d={};for(var e in b){var f=b[e];f&&h.call(f.dataset,f)}}function e(a){var b=this.basisObjectId,
f=a.inserted,c=a.deleted,s=d[b];if(f&&c||s&&s.mixed)s&&(d[b]=null,h.call(s.dataset,s)),h.call(this,a);else if(s){a=f?"inserted":"deleted";var n=s[a];if(n)n.push.apply(n,f||c);else{for(var n=f?"deleted":"inserted",t=s[n],Q={},f=f||c,c=[],R=0,p=0;p<t.length;p++)Q[t[p].basisObjectId]=p;for(p=0;p<f.length;p++){var I=f[p].basisObjectId;0==I in Q?c.push(f[p]):(R||(t=L.call(t)),R++,t[Q[I]]=null)}R&&(t=R<t.length?t.filter(Boolean):null,s[n]=t);c.length?(s[a]=c,t&&(s.mixed=!0)):t||(d[b]=null)}}else d[b]={inserted:f,
deleted:c,dataset:this,mixed:!1}}function f(){n=null;s&&(s=0,c.emit_itemsChanged=h,a())}var c=pa.prototype,d={},s=0,n,h;return function(d){d?(0==s&&(h=c.emit_itemsChanged,c.emit_itemsChanged=e,n||(n=b.setImmediate(f))),s++):(s-=0<s,0==s&&(c.emit_itemsChanged=h,a()))}}();U.exports={STATE:$,SUBSCRIPTION:ba,AbstractData:f,Value:fa,ReadOnlyValue:X,DeferredValue:Z,PipeValue:ya,Object:Y,Slot:A,KeyObjectMap:P,ReadOnlyDataset:pa,Dataset:ia,DatasetWrapper:I,isConnected:k,getDatasetDelta:m,ResolveAdapter:va,
createResolveFunction:J,resolveDataset:q,resolveObject:s,resolveValue:a,wrapData:c,wrapObject:y,wrap:function(a,b){var e=b?y:c;return Array.isArray(a)?a.map(e):e(a)}}},"1.js":function(d,U,b,g,l,A,P,S,da){function w(a){if(a=a.nodes)for(var b=a.length-1,c;c=a[b];b--)c.parentNode.insertBefore(c,c.nextSibling)}d=this.path;var C=g.document;g=b.Class;var x=b.require("./2.js").create,B=b.require("./3.js").Template,K=b.require("./6.js").MARKER,D=b.require("./7.js").TemplateSwitcher;P=b.require("./d.js");
l=P.Node;A=P.PartitionNode;var r=P.GroupingNode,k=1,z=function(){var a={},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,c){a[b]||(a[b]=c)},process:function(c,d){var k,m=d.match(b);m&&(k=a[m[1]],d=m[2]||c);return k?k(d):d}}}();z.add("data",function(a){return{events:"update",getter:"data."+a}});z.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var G=g.customExtendProperty({active:{events:"activeChanged",getter:function(a){return a.active}},
state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(a,c){a.bindingId=k++;for(var d in c){var m=null,g=c[d];
L&&g instanceof L||b.resource.isResource(g)?m={events:"satelliteChanged",getter:function(a,b){var c="function"==typeof b?b:null,d=function(h){d=!1;if(c){b=c();if(0==b instanceof L)return;c=null}h.setSatellite(a,b)};return function(b){d&&d(b);return c||(b.satellite[a]?b.satellite[a].element:null)}}(d,g)}:g&&("string"==typeof g?g=z.process(d,g):g.bindingBridge&&(g=b.fn.$const(g)),m="object"!=typeof g?{getter:"function"==typeof g?g:b.getter(g)}:Array.isArray(g)?{events:g[0],getter:b.getter(g[1])}:{events:g.events,
getter:b.getter(g.getter)});a[d]=m}}),m={attach:function(a,b,c){a.addHandler(b,c)},detach:function(a,b,c){a.removeHandler(b,c)}},F=g.extensibleProperty({select:function(a){this.isDisabled()||this.selectedRA_||(this.contextSelection&&this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),q={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&this.setTemplate(b.resolve(this))}},J=new B("<div/>"),a=[],c;P=function(d){return{template:J,emit_templateChanged:x("templateChanged"),
templateSwitcher_:null,binding:G,action:F,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=a.pop()||C.createDocumentFragment();d.init.call(this)},postInit:function(){d.postInit.call(this);var b=this.template;if(b){var c=this.childNodesElement;this.template=null;this.setTemplate(b);a.push(c);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.template.createInstance(this,
this.templateAction,this.templateSync,this.binding,m);b.childNodesHere&&(b.childNodesElement=b.childNodesHere.parentNode,b.childNodesElement.insertPoint=b.childNodesHere);this.tmpl=b;this.element=b.element;this.childNodesElement=b.childNodesElement||b.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=C.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();for(b=this;b.grouping;)b=b.grouping;for(var c=b.lastChild;c;c=c.previousSibling)c instanceof y?b.insertBefore(c,
c.nextSibling):w(c);w(b.nullGroup)}else for(b=this.lastChild;b;b=b.previousSibling)this.insertBefore(b,b.nextSibling);this instanceof y&&w(this);a&&a!==this.element&&11!=a.nodeType&&(b=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,this.element),this.element.parentNode!==b&&b.replaceChild(this.element,a));this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,c;a instanceof D&&(c=a,a=c.resolve(this));0==a instanceof B&&(a=null);a&&(c&&(this.templateSwitcher_=
c,b||this.addHandler(q,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(q,this)),b=this.tmpl,c=this.template,c!==a&&(this.template=a,this.templateSync(),c&&c.clearInstance(b)))},updateBind:function(a){var b=this.binding[a];(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var c=this.action[a];c&&c.call(this,b)},focus:function(a){var d=this.tmpl?this.tmpl.focus||this.element:null;d&&(c&&(c=b.clearImmediate(c)),c=b.setImmediate(function(){try{d.focus(),
a&&d.select()}catch(b){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,b=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(q,this));a.clearInstance(this.tmpl);d.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=b&&b.parentNode)&&1==a.nodeType&&a.removeChild(b)}}};S=function(a){return{insertBefore:function(b,c){b=a.insertBefore.call(this,b,c);var d=
(b.groupNode||this).childNodesElement||this.childNodesElement,k=b.nextSibling,g=b.element,k=(k&&k.element.parentNode==d?k.element:null)||d.insertPoint||null;g.parentNode===d&&g.nextSibling===k||d.insertBefore(g,k);return b},removeChild:function(b){a.removeChild.call(this,b);var c=b.element,d=c.parentNode;d&&d.removeChild(c);return b},clear:function(b){if(b)for(var c=this.firstChild;c;){var d=c.element,k=d.parentNode;k&&k.removeChild(d);c=c.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,
c){var d=C.createDocumentFragment(),k=this.grouping||this,g=k.childNodesElement;k.childNodesElement=d;a.setChildNodes.call(this,b,c);g.insertBefore(d,g.insertPoint||null);k.childNodesElement=g}}};var y=g(A,P,{className:d+".PartitionNode",binding:{title:"data:"}});A=g(r,S,{className:d+".GroupingNode",childClass:y,groupingClass:g.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();r.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=
C.createDocumentFragment();r.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,c=null;b&&(c=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement);do a.element=a.childNodesElement=c;while(a=a.grouping)},destroy:function(){r.prototype.destroy.call(this);this.childNodesElement=this.element=null}});var L=g(l,P,S,{className:d+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},
disabled:{events:"disable enable",getter:function(a){return a.isDisabled()}},enabled:{events:"disable enable",getter:function(a){return!a.isDisabled()}},tabindex:{events:"enable disable",getter:function(a){return a.isDisabled()?-1:a.tabindex||0}}},childClass:g.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:A});d=L.subclass({className:d+".ShadowNodeList",emit_ownerChanged:function(a){L.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},
getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:d+".ShadowNode",getElement:function(a){return a.element},templateSync:function(){L.prototype.templateSync.call(this);var a=this.getElement(this.delegate);a&&(a[K]=this.delegate.element[K],this.element=a)},listen:{delegate:{templateChanged:function(){var a=
this.element,b=a.parentNode,c=this.getElement(this.delegate);c&&(c[K]=this.delegate.element[K]);this.element=c||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});U.exports={BINDING_PRESET:z,Node:L,PartitionNode:y,GroupingNode:A,ShadowNodeList:d,ShadowNode:d.prototype.childClass}},"g.js":function(d,U,b,g,l,A,P,S,da){var w=g.document;if("getComputedStyle"in g){var C={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},x=b.fn.runOnce(function(){var d=w.createElement("div");d.setAttribute("style",
"position:absolute;top:auto!important");b.doc.body.add(d);"auto"==g.getComputedStyle(d).top&&(C={});b.doc.remove(d)});d=function(b,d){var k=g.getComputedStyle(b);if(k){d in C&&x();if(C[d]&&"static"!=k.position){var l=b.style.display;b.style.display="none";k=k.getPropertyValue(d);b.style.display=l}else k=k.getPropertyValue(d);return k}}}else{var B=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,K=/\dpx$/i;d=function(d,g){var k=d.currentStyle;if(k){var k=k["float"==g?"styleFloat":b.string.camelize(g)],l=(k||"").match(B);
if(l&&l[2]&&"px"!=l[2])if(K.test(k))k=parseInt(k,10)+"px";else{var l=d.style,G=d.runtimeStyle,m=l.left,F=G.left;G.left=d.currentStyle.left;l.left=k||0;k=l.pixelLeft;l.left=m;G.left=F;k+="px"}return k}}}U.exports={get:d}},"h.js":function(d,U,b,g,l,A,P,S,da){function w(b){var d=0,l=0;if(b&&b.getBoundingClientRect)b=b.getBoundingClientRect(),d=-b.top,l=-b.left;else if(D)d=g.pageYOffset||B.scrollTop,l=g.pageXOffset||B.scrollLeft;else{var G=x.body;b!==G&&(d=G.scrollTop-G.clientTop,l=G.scrollLeft-G.clientLeft)}return{left:l,
top:d}}function C(b,d){var g=0,l=0,m=w(d);b&&b.getBoundingClientRect&&(g=b.getBoundingClientRect(),l=g.top,g=g.left);return{top:l+m.top,left:g+m.left}}var x=g.document,B=x.documentElement,K=b.require("./g.js").get,D="CSS1Compat"==x.compatMode;U.exports={getOffset:w,getOffsetParent:function(b){for(b=b.offsetParent||B;b&&b!==B&&"static"==K(b,"position");)b=b.offsetParent;return b||B},getTopLeftPoint:C,getBoundingRect:function(b,d){var g=0,l=0,m=0,F=0,q=w(d);b&&b.getBoundingClientRect&&(F=b.getBoundingClientRect(),
g=F.top,l=F.left,m=F.right,F=F.bottom);return{top:g+q.top,left:l+q.left,right:m+q.left,bottom:F+q.top,width:m-l,height:F-g}},getViewportRect:function(b,d){var l=b!==(D?x.documentElement:x.body)||d?C(b,d):w(),G=l.top,l=l.left,m,F;b&&b!==g?(G+=b.clientTop,l+=b.clientLeft,m=b.clientWidth,F=b.clientHeight):(m=g.innerWidth||0,F=g.innerHeight||0);return{top:G,left:l,right:l+m,bottom:G+F,width:m,height:F}}}},"i.js":function(d,U,b,g,l,A,P,S,da){function w(a,b){var c={},d;a&&a.length&&(d=c.inserted=a);b&&
b.length&&(d=c.deleted=b);if(d)return c}function C(a,b){return function t(b){if(!b)return null;if(b.__extend__)return b;"string"==typeof b||Array.isArray(b)||(b=null);return z(p(b,a),{__extend__:t})}(b)}function x(a,b,c,d){return new ca(z({keyGetter:b,itemClass:c,create:function(a,b){var e=ca.prototype.create.call(this,a,b);e.ruleValue=a;e.setDataset(new d({ruleValue:a}));return e}},a))}function B(a,b){if(!a.length)return 0;var c=b.value,d=b.object.basisObjectId,h,g,k,m,p=0,l=a.length-1;do if(k=p+
l>>1,m=a[k],h=m.value,c<h)l=k-1;else if(c>h)p=k+1;else if(g=m.object.basisObjectId,d<g)l=k-1;else if(d>g)p=k+1;else return k;while(p<=l);return k+(h==c?g<d:h<c)}function K(a,b){return+(a.value>b.value)||-(a.value<b.value)||a.object.basisObjectId-b.object.basisObjectId}function D(a,b,c){if((b=a.sourceMap_[b.basisObjectId])&&b.visited!==c){for(var d=b;d=d.ref;)if(d.object===a.source)return!0;b.visited=c;for(d=b;d=d.ref;)if(D(a,d.object,c||{}))return!0}}function r(a,b,c){var d=a.sourceMap_,g=a.members_;
b=h(b);for(var k=[],m=0;m<b.length;m++){var p=b[m],l=p.basisObjectId;l||(c=p.ref,p=p.object,l=p.basisObjectId);var q=d[l];if(q)q.ref={object:c,ref:q.ref};else if(q=d[l]={source:p,ref:{object:c,ref:null},visited:null,value:null},p instanceof W){var u=a.rule(p)||null;if(u instanceof W||u instanceof T)q.value=u,b.push({object:u,ref:p});g[l]=q;k.push(p);a.ruleEvents&&p.addHandler(a.ruleEvents,a)}else for(p.addHandler(oa,a),l=0,q=p.getItems();l<q.length;l++)b.push({object:q[l],ref:p})}return k}function k(a,
b,c){var d=a.sourceMap_,g=a.members_;b=h(b);for(var k=[],p=0;p<b.length;p++){var m=b[p],l=m.basisObjectId;l||(c=m.ref,m=m.object,l=m.basisObjectId);for(var q=d[l],u=q.value,r=q,y=q;r=r.ref;){if(r.object===c){y.ref=r.ref;break}y=r}if(q.ref)u&&!D(a,m)&&(q.value=null,b.push({object:u,ref:m}));else{if(m instanceof W)delete g[l],k.push(m),a.ruleEvents&&m.removeHandler(a.ruleEvents,a),u&&b.push({object:u,ref:m});else for(m.removeHandler(oa,a),q=0,u=m.getItems();q<u.length;q++)b.push({object:u[q],ref:m});
delete d[l]}}return k}d=this.path;A=b.Class;var z=b.object.extend,G=b.object.values,m=b.object.slice,F=b.array.add,q=b.array.remove,J=b.getter,a=b.fn.$self,c=b.fn.$true,y=b.fn.$false,L=b.fn.$undef,h=b.array.from;l=b.require("./2.js");g=l.create;var p=l.createHandler,u=l.Emitter;l=b.require("./e.js");var H=l.SUBSCRIPTION,M=l.Value,W=l.Object,ca=l.KeyObjectMap,T=l.ReadOnlyDataset,la=l.Dataset;da=l.DatasetWrapper;var N=l.resolveDataset,ka=la.setAccumulateState;H.add("SOURCE",{sourceChanged:function(a,
b){b&&H.unlink("source",a,b);a.source&&H.link("source",a,a.source)},sourcesChanged:function(a,b){var c;if(c=b.inserted)for(var d=0;c[d];d++)H.link("source",a,c[d]);if(c=b.deleted)for(d=0;c[d];d++)H.unlink("source",a,c[d])}},function(a,b){for(var c=b.sources||(b.source?[b.source]:[]),d=0,h;h=c[d++];)a("source",b,h)});H.addProperty("minuend");H.addProperty("subtrahend");var $=A(T,{className:d+".Merge",active:b.PROXY,subscribeTo:H.SOURCE,emit_sourcesChanged:g("sourcesChanged","delta"),sources:null,sourceValues_:null,
sourcesMap_:null,sourceDelta_:null,rule:function(a){return 0<a},emit_ruleChanged:g("ruleChanged","oldRule"),listen:{source:{itemsChanged:function(a,b){var c=this.members_,d={},h,g;if(b.inserted)for(var k=0;h=b.inserted[k];k++)g=h.basisObjectId,c[g]?c[g].count++:c[g]={count:1,object:h},d[g]=c[g];if(b.deleted)for(k=0;h=b.deleted[k];k++)g=h.basisObjectId,d[g]=c[g],c[g].count--;this.applyRule(d)}},sourceValue:{destroy:function(a){this.removeSource(a)}}},init:function(){T.prototype.init.call(this);var a=
this.sources;this.sources=[];this.sourcesMap_={};this.sourceValues_=[];a&&this.setSources(a)},setRule:function(a){a=J(a||$.UNION);if(this.rule!==a){var b=this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(a){var b=this.members_,c=this.rule,d=this.sources.length,h=[],g=[],k,m;a||(a=b);for(var p in a)a=b[p],k=d&&a.count&&c(a.count,d),k!=p in this.items_&&(k?h.push(a.object):g.push(a.object)),0==a.count&&delete b[p];(m=w(h,g))&&this.emit_itemsChanged(m);return m},
addDataset_:function(a){this.sources.push(a);this.listen.source&&a.addHandler(this.listen.source,this);var b=this.members_,c;for(c in a.items_)b[c]?b[c].count++:b[c]={count:1,object:a.items_[c]};return!0},removeDataset_:function(a){q(this.sources,a);this.listen.source&&a.removeHandler(this.listen.source,this);var b=this.members_,c;for(c in a.items_)b[c].count--},updateDataset_:function(a){var b=this.owner,c=b.sourcesMap_;a=N(this,b.updateDataset_,a,"adapter",b);var d,h;if(this.dataset!==a){if(a){var g=
(c[a.basisObjectId]||0)+1;c[a.basisObjectId]=g;1==g&&(b.addDataset_(a),d=[a])}this.dataset&&(g=(c[this.dataset.basisObjectId]||0)-1,c[this.dataset.basisObjectId]=g,0==g&&(b.removeDataset_(this.dataset),h=[this.dataset]));this.dataset=a;b.applyRule();if(c=w(d,h))(d=b.sourceDelta_)?(c.inserted&&c.inserted.forEach(function(a){q(this.deleted,a)||F(this.inserted,a)},d),c.deleted&&c.deleted.forEach(function(a){q(this.inserted,a)||F(this.deleted,a)},d)):b.emit_sourcesChanged(c);return c}},getSourceValues:function(){return this.sourceValues_.map(function(a){return a.source})},
addSource:function(a){if(a&&("object"==typeof a||"function"==typeof a)&&!this.hasSource(a)){var b={owner:this,source:a,adapter:null,dataset:null};this.sourceValues_.push(b);this.updateDataset_.call(b,a);this.listen.sourceValue&&a instanceof u&&a.addHandler(this.listen.sourceValue,this)}},removeSource:function(a){for(var b=0,c;c=this.sourceValues_[b];b++)if(c.source===a){this.listen.sourceValue&&a instanceof u&&a.removeHandler(this.listen.sourceValue,this);this.updateDataset_.call(c,null);this.sourceValues_.splice(b,
1);break}},hasSource:function(a){for(var b=0,c;c=this.sourceValues_[b];b++)if(c.source===a)return!0;return!1},setSources:function(a){var b=this.sourceValues_.map(function(a){return a.source}),c=[],d=[],h;a||(a=[]);this.sourceDelta_={inserted:c,deleted:d};for(var g=0;g<a.length;g++){var k=a[g];q(b,k)||this.addSource(k)}b.forEach(this.removeSource,this);this.sourceDelta_=null;(h=w(c,d))&&this.emit_sourcesChanged(h);return h},destroy:function(){this.setSources();T.prototype.destroy.call(this);this.sources=
this.sourceDelta_=this.sourcesMap_=this.sourceValues_=null}});$.UNION=$.prototype.rule;$.INTERSECTION=function(a,b){return a==b};$.DIFFERENCE=function(a){return 1==a};$.MORE_THAN_ONE_INCLUDE=function(a,b){return 1==b||1<a};$.AT_LEAST_ONE_EXCLUDE=function(a,b){return 1==b||a<b};var ma=function(a){return!this.has(a)};l=A(T,{className:d+".Subtract",active:b.PROXY,subscribeTo:H.MINUEND+H.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:g("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,
emit_subtrahendChanged:g("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,b){if(this.subtrahend){var c=w(b.inserted&&b.inserted.filter(ma,this.subtrahend),b.deleted&&b.deleted.filter(this.has,this));c&&this.emit_itemsChanged(c)}},destroy:function(){this.minuendRA_||this.setMinuend(null)}},subtrahend:{itemsChanged:function(a,b){if(this.minuend){var c=w(b.deleted&&b.deleted.filter(this.minuend.has,this.minuend),b.inserted&&b.inserted.filter(this.has,this));c&&this.emit_itemsChanged(c)}},
destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}}},init:function(){T.prototype.init.call(this);var a=this.minuend,b=this.subtrahend;this.subtrahend=this.minuend=null;(a||b)&&this.setOperands(a,b)},setOperands:function(a,b){var c,d=!1;a=N(this,this.setMinuend,a,"minuendRA_");b=N(this,this.setSubtrahend,b,"subtrahendRA_");var h=this.minuend,g=this.subtrahend;if(h!==a){d=!0;this.minuend=a;var k=this.listen.minuend;k&&(h&&h.removeHandler(k,this),a&&a.addHandler(k,this));this.emit_minuendChanged(h)}if(g!==
b){d=!0;this.subtrahend=b;if(k=this.listen.subtrahend)g&&g.removeHandler(k,this),b&&b.addHandler(k,this);this.emit_subtrahendChanged(g)}if(!d)return!1;if(a&&b){var d=[],h=[],m;for(m in this.items_)a.items_[m]&&!b.items_[m]||d.push(this.items_[m]);for(m in a.items_)this.items_[m]||b.items_[m]||h.push(a.items_[m]);(c=w(h,d))&&this.emit_itemsChanged(c)}else this.itemCount&&this.emit_itemsChanged(c={deleted:this.getItems()});return c},setMinuend:function(a){return this.setOperands(a,this.subtrahendRA_?
this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,a)},destroy:function(){this.setOperands();T.prototype.destroy.call(this)}});var ea=A(T,{className:d+".SourceDataset",active:b.PROXY,subscribeTo:H.SOURCE,source:null,emit_sourceChanged:g("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var a=this.source;this.source=
null;this.sourceMap_={};T.prototype.init.call(this);a&&this.setSource(a)},setSource:function(a){a=N(this,this.setSource,a,"sourceRA_");if(this.source!==a){var b=this.source,c=this.listen.source,d;c&&(d=c.itemsChanged,b&&b.removeHandler(c,this),a&&a.addHandler(c,this));this.source=a;this.emit_sourceChanged(b);d&&(la.setAccumulateState(!0),b&&d.call(this,b,{deleted:b.getItems()}),a&&d.call(this,a,{inserted:a.getItems()}),la.setAccumulateState(!1))}},destroy:function(){this.setSource();T.prototype.destroy.call(this);
this.sourceMap_=null}}),ba=A(ea,{className:d+".MapFilter",map:a,filter:y,rule:J(c),emit_ruleChanged:g("ruleChanged","oldRule"),ruleEvents:C(function(a){var b=this.map?this.map(a):a;if(0==b instanceof W||this.filter(b))b=null;var c=this.sourceMap_[a.basisObjectId],d=c.member;if(d!==b){var h=this.members_,g,k,m;c.member=b;d&&(c=d.basisObjectId,this.removeMemberRef&&this.removeMemberRef(d,a),0==--h[c]&&(delete h[c],m=[d]));b&&(d=b.basisObjectId,this.addMemberRef&&this.addMemberRef(b,a),h[d]?h[d]++:(h[d]=
1,k=[b]));(g=w(k,m))&&this.emit_itemsChanged(g)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.members_,h=[],g=[],k,m,p,l=this.ruleEvents;ka(!0);if(b.inserted)for(var q=0;k=b.inserted[q];q++){p=this.map?this.map(k):k;if(0==p instanceof W||this.filter(p))p=null;l&&k.addHandler(l,this);c[k.basisObjectId]={sourceObject:k,member:p};p&&(m=p.basisObjectId,d[m]?d[m]++:(d[m]=1,h.push(p)),this.addMemberRef&&this.addMemberRef(p,k))}if(b.deleted)for(q=
0;k=b.deleted[q];q++)m=k.basisObjectId,p=c[m].member,l&&k.removeHandler(l,this),delete c[m],p&&(m=p.basisObjectId,0==--d[m]&&(delete d[m],g.push(p)),this.removeMemberRef&&this.removeMemberRef(p,k));ka(!1);(b=w(h,g))&&this.emit_itemsChanged(b)}}},setMap:function(b){"function"!=typeof b&&(b=a);if(this.map!==b)return this.map=b,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=y);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){a=J(a||c);if(this.rule!==a){var b=
this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(){var a=this.sourceMap_,b=this.members_,c,d,h,g,k,m=[],p=[],l,q;for(q in a){k=a[q];g=k.sourceObject;c=k.member;d=this.map?this.map(g):g;if(0==d instanceof W||this.filter(d))d=null;c!=d&&(k.member=d,c&&(h=c.basisObjectId,this.removeMemberRef&&this.removeMemberRef(c,g),b[h]--),d&&(c=d.basisObjectId,this.addMemberRef&&this.addMemberRef(d,g),c in b?b[c]++:(b[c]=1,m.push(d))))}for(h in this.items_)0==b[h]&&(delete b[h],
p.push(this.items_[h]));(l=w(m,p))&&this.emit_itemsChanged(l);return l}});b=A(ba,{className:d+".Filter",filter:function(a){return!this.rule(a)}});P=A(ba,{className:d+".Split",subsetClass:T,subsetWrapperClass:da,keyMap:null,map:function(a){return this.keyMap.resolve(a)},rule:J(L),setRule:function(a){a=J(a||L);if(this.rule!==a){var b=this.rule;this.rule=a;this.keyMap.keyGetter=a;this.emit_ruleChanged(b);return this.applyRule()}},addMemberRef:function(a,b){a.dataset.emit_itemsChanged({inserted:[b]})},
removeMemberRef:function(a,b){a.dataset.emit_itemsChanged({deleted:[b]})},init:function(){this.keyMap&&0!=this.keyMap instanceof ca||(this.keyMap=x(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));ba.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){ba.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});S=A(ea,{className:d+".Slice",rule:J(c),emit_ruleChanged:g("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:C(function(a){var b=
this.sourceMap_[a.basisObjectId];a=this.rule(a);var c=this.index_;if(a!==b.value){var d=B(c,b),h=c[d-1],g=c[d+1];b.value=a;if(h&&(h.value>a||h.value==a&&h.object.basisObjectId>b.object.basisObjectId)||g&&(g.value<a||g.value==a&&g.object.basisObjectId<b.object.basisObjectId))c.splice(d,1),c.splice(B(c,b),0,b),this.applyRule()}},"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.index_,h=this.ruleEvents,
g=!1,k=!1,m,p=b.inserted,l=b.deleted;if(l){l.length>d.length-l.length&&(g=!0,k=l.length!=d.length,d.length=0);for(var q=0,u;u=l[q];q++)g||(m=c[u.basisObjectId],d.splice(B(d,m),1)),delete c[u.basisObjectId],h&&u.removeHandler(h,this);if(k)for(var r in c)m=c[r],d.splice(B(d,m),0,m)}if(p){k=!d.length;for(q=0;u=p[q];q++)m={object:u,value:this.rule(u)},c[u.basisObjectId]=m,k?d.push(m):d.splice(B(d,m),0,m),h&&u.addHandler(h,this);k&&d.sort(K)}this.applyRule()}}},emit_rangeChanged:g("rangeChanged","oldOffset",
"oldLimit"),init:function(){this.index_=[];ea.prototype.init.call(this)},setRange:function(a,b){var c=this.offset,d=this.limit,h=!1;if(c!=a||d!=b)this.offset=a,this.limit=b,h=this.applyRule(),this.emit_rangeChanged(c,d);return h},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},setRule:function(a,b){a=J(a||c);b=!!b;if(this.rule!=a||this.orderDesc!=b){var d=this.rule,h=this.orderDesc;if(this.rule!=a){for(var g=this.index_,k=0;k<g.length;k++)g[k].value=
a(g[k].object);g.sort(K);this.rule=a}this.orderDesc=b;this.rule=a;this.emit_ruleChanged(d,h);return this.applyRule()}},applyRule:function(){var a=this.offset,b=a+this.limit;this.orderDesc&&(a=this.index_.length-b,b=a+this.limit);for(var c=m(this.members_),d=this.index_.slice(Math.max(0,a),Math.max(0,b)),h=[],g,k=0,p;p=d[k];k++){var l=p.object.basisObjectId;c[l]?delete c[l]:(h.push(p.object),this.members_[l]=p.object)}for(l in c)delete this.members_[l];if(this.left_)for(var q in this.left_)p=this.index_[this.orderDesc?
b+Number(q)-1:a-Number(q)],this.left_[q].set(p?p.object:null);if(this.right_)for(q in this.right_)p=this.index_[this.orderDesc?a-Number(q):b+Number(q)-1],this.right_[q].set(p?p.object:null);(g=w(h,G(c)))&&this.emit_itemsChanged(g);return g},left:function(a){a=parseInt(a,10)||0;this.left_||(this.left_={});var b=this.left_[a];if(!b){var b=this.offset,c=b+this.limit;this.orderDesc&&(b=this.index_.length-c,c=b+this.limit);b=this.index_[this.orderDesc?c+a-1:b-a];b=this.left_[a]=new M({value:b?b.object:
null})}return b},right:function(a){a=parseInt(a,10)||0;this.right_||(this.right_={});var b=this.right_[a];if(!b){var b=this.offset,c=b+this.limit;this.orderDesc&&(b=this.index_.length-c,c=b+this.limit);b=this.index_[this.orderDesc?b-a:c+a-1];b=this.right_[a]=new M({value:b?b.object:null})}return b},destroy:function(){ea.prototype.destroy.call(this);if(this.left_){for(var a in this.left_)this.left_[a].destroy();this.left_=null}if(this.right_){for(a in this.right_)this.right_[a].destroy();this.right_=
null}this.index_=null}});A=A(ea,{className:d+".Cloud",subsetClass:T,subsetWrapperClass:da,rule:J(L),ruleEvents:C(function(a){var b=this.sourceMap_,c=this.members_,d=a.basisObjectId,h=b[d].list,b=b[d].list={},d=this.rule(a),g,k=[],m=[],p;if(Array.isArray(d))for(var l=0;l<d.length;l++)(p=this.keyMap.get(d[l],!0))&&!p.has(a)&&(q=p.basisObjectId,b[q]=p,h[q]||(p.dataset.emit_itemsChanged({inserted:[a]}),c[q]?c[q]++:(k.push(p),c[q]=1)));for(var q in h)b[q]||(p=h[q],p.dataset.emit_itemsChanged({deleted:[a]}),
--c[q]||(delete c[q],m.push(p)));(g=w(k,m))&&this.emit_itemsChanged(g)},"update"),keyMap:null,map:a,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.members_,h=this.ruleEvents,g,k,m,p=[],l=[];ka(!0);if(g=b.inserted)for(var q=0,u;u=g[q];q++){var r=this.rule(u),y={object:u,list:{}};c[u.basisObjectId]=y;if(Array.isArray(r))for(var z=0,F={};z<r.length;z++)(k=this.keyMap.get(r[z],!0))&&!F[k.basisObjectId]&&(m=k.basisObjectId,F[m]=!0,y.list[m]=k,k.dataset.emit_itemsChanged({inserted:[u]}),
d[m]?d[m]++:(p.push(k),d[m]=1));h&&u.addHandler(h,this)}if(g=b.deleted)for(q=0;u=g[q];q++){k=u.basisObjectId;r=c[k].list;delete c[k];for(m in r)k=r[m],k.dataset.emit_itemsChanged({deleted:[u]}),--d[m]||(delete d[m],l.push(k));h&&u.removeHandler(h,this)}ka(!1);(b=w(p,l))&&this.emit_itemsChanged(b)}}},init:function(){this.keyMap&&0!=this.keyMap instanceof ca||(this.keyMap=x(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));ea.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,
b)},destroy:function(){ea.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});da=function(a,b){var c=b.inserted,d=b.deleted;c&&(c=r(this,c,a));d&&(d=k(this,d,a));(b=w(c,d))&&this.emit_itemsChanged(b)};var oa={itemsChanged:da,destroy:function(a){for(var b=this.sourceMap_,c=b[a.basisObjectId];c=c.ref;)b[c.object.basisObjectId].value=null;delete b[a.basisObjectId]}};d=ea.subclass({className:d+".Extract",rule:J(L),emit_ruleChanged:g("ruleChanged","oldRule"),ruleEvents:C(function(a){var b=
this.sourceMap_[a.basisObjectId],c=this.rule(a)||null,d=b.value,h,g,m;if(c!==d){if(c instanceof W||c instanceof T)h=r(this,c,a);d&&(g=k(this,d,a));b.value=c;(m=w(h,g))&&this.emit_itemsChanged(m)}},"update"),listen:{source:{itemsChanged:da}},setRule:function(a){a=J(a||L);if(this.rule!==a){var b=this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(){var a={},b={},c,d;for(d in this.sourceMap_){var h=this.sourceMap_[d],g=h.source;if(g instanceof W){var m=this.rule(g)||
null,p=h.value;if(m!==p){if(m instanceof W||m instanceof T)for(var l=r(this,m,g),q=0;q<l.length;q++){var u=l[q],y=u.basisObjectId;b[y]?delete b[y]:a[y]=u}if(p)for(g=k(this,p,g),q=0;q<g.length;q++)u=g[q],y=u.basisObjectId,a[y]?delete a[y]:b[y]=u;h.value=m}}}(c=w(G(a),G(b)))&&this.emit_itemsChanged(c);return c}});U.exports={getDelta:w,createRuleEvents:C,Merge:$,Subtract:l,SourceDataset:ea,MapFilter:ba,Filter:b,Split:P,Extract:d,Slice:S,Cloud:A}},"j.js":function(d,U,b,g,l,A,P,S,da){d=this.path;var w=
b.cleaner;g=b.require("./e.js");var C=g.AbstractData,x=g.Value,B=g.ReadOnlyValue,K=g.STATE;g=x.subclass({className:d+".Property",extendConstructor_:!1,init:function(b,d,g){this.value=b;this.handler=d;this.proxy=g;x.prototype.init.call(this)}});l=K.priority;var D={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(b){this.remove(b)}},r=b.asap.schedule(function(b){b.update()});l=x.subclass({className:d+".ObjectSet",objects:null,
value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:l,stateChanged_:!0,init:function(){x.prototype.init.call(this);var b=this.objects;this.objects=[];b&&Array.isArray(b)&&(this.lock(),this.add.apply(this,b),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var d=0,g=arguments.length;d<g;d++){var k=arguments[d];k instanceof C&&b.array.add(this.objects,k)&&k.addHandler(D,this)}this.fire(!0,
!0)},remove:function(d){b.array.remove(this.objects,d)&&d.removeHandler(D,this);this.fire(!0,!0)},clear:function(){for(var b=0,d;d=this.objects[b];b++)d.removeHandler(D,this);this.objects.length=0;this.fire(!0,!0)},fire:function(b,d){this.locked||(this.valueChanged_=this.valueChanged_||!!b,this.stateChanged_=this.stateChanged_||!!d,(this.valueChanged_||this.stateChanged_)&&r.add(this))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var b=this.valueChanged_,d=
this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;r.remove(this);if(!w.globalDestroy&&(b&&this.set(this.calculateValue()),d))if(b=this.objects.length){for(var d=-2,g,k=0;k<b;k++){var a=this.objects[k],c=this.statePriority.indexOf(String(a.state));c>d&&(g=a,d=c)}g&&this.setState(g.state,g.state.data)}else this.setState(K.UNDEFINED)},destroy:function(){this.lock();this.clear();r.remove(this);x.prototype.destroy.call(this)}});var k=function(){r.add(this)},z=function(){this.destroy()},G=function(b){return b.bindingBridge.get(b)};
d=B.subclass({className:d+".Expression",calc_:null,values_:null,extendConstructor_:!1,init:function(){B.prototype.init.call(this);var b=arguments.length-1,d=arguments[b];if("function"!=typeof d)throw Error(this.constructor.className+": Last argument of constructor must be a function");for(var g=Array(b),l=0;l<b;l++){var a=g[l]=arguments[l];if(!a.bindingBridge)throw Error(this.constructor.className+": bb-value required");a.bindingBridge.attach(a,k,this,z)}this.calc_=d;this.values_=g;this.update()},
update:function(){r.remove(this);x.prototype.set.call(this,this.calc_.apply(null,this.values_.map(G)))},destroy:function(){r.remove(this);for(var b=0,d;d=this.values_[b];b++)d.bindingBridge.detach(d,k,this);B.prototype.destroy.call(this)}});U.exports={Property:g,ObjectSet:l,Expression:d}},"k.js":function(d,U,b,g,l,A,P,S,da){function w(a,b){if(!a.length)return 0;var c,d,f=0,h=a.length-1;do if(c=f+h>>1,d=a[c]||0,b<d)h=c-1;else if(b>d)f=c+1;else return b==d?c:0;while(f<=h);return c+(d<b)}function C(a){this.indexId=
a}function x(a,b,c){var d=a.indexCache_;a.lock();if(b)for(var f=0,h;h=b[f++];){var g=a.normalize(a.valueGetter(h));d[h.basisObjectId]=g;a.add_(g)}if(c)for(f=0;h=c[f++];)b=h.basisObjectId,a.remove_(d[b]),delete d[b];a.unlock()}function B(a,b){if(0==b instanceof C)throw"indexConstructor must be an instance of IndexConstructor";var c=a.basisObjectId,d=ea[c];d||(d=ea[c]={},a.addHandler(ma),ma.itemsChanged.call(a,a,{inserted:a.getItems()}));var c=b.indexId,f=d[c];if(!f){b=u[c];if(!b)throw"Wrong index constructor";
f=new b.indexClass;f.addHandler(H,a);d[c]=f;x(f,a.getItems())}return f}function K(a,b){var c=ea[a.basisObjectId];if(c&&c[b.indexId]){delete c[b.indexId];b.removeHandler(H,a);for(var d in c)return;a.removeHandler(ma);ma.itemsChanged.call(a,a,{deleted:a.getItems()});delete ea[a.basisObjectId]}}function D(){return"calc-index-preset-"+b.number.lead(oa++,8)}d=this.path;var r=b.Class,k=b.object.iterate;l=b.require("./e.js");var z=l.Value;g=l.Object;var G=l.ReadOnlyDataset,m=l.DatasetWrapper,F=l.resolveDataset;
l=b.require("./i.js");var q=l.MapFilter,J=l.createRuleEvents,a=r(z,{className:d+".Index",explicit:!1,wrapperCount:0,indexCache_:null,valueGetter:b.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};z.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,b){},normalize:function(a){return Number(a)||0},destroy:function(){z.prototype.destroy.call(this);this.indexCache_=null}});l=r(a,{className:d+".Sum",add_:function(a){this.value+=
a},remove_:function(a){this.value-=a},update_:function(a,b){this.set(this.value-b+a)}});A=r(a,{className:d+".Count",valueGetter:b.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,b){this.set(this.value-!!b+!!a)}});P=r(a,{className:d+".Avg",sum_:0,count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=a;--this.count_;this.value=this.count_?this.sum_/this.count_:
0},update_:function(a,b){this.sum_+=a-b;this.set(this.sum_/this.count_)}});S=r(a,{className:d+".VectorIndex",vectorGetter:b.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];a.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(w(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},remove_:function(a){null!==a&&(this.vector_.splice(w(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},update_:function(a,b){null!==b&&this.vector_.splice(w(this.vector_,
b),1);null!==a&&this.vector_.splice(w(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){a.prototype.destroy.call(this);this.vector_=null}});da=r(S,{className:d+".Min",vectorGetter:function(a){return a[0]}});var c=r(S,{className:d+".Max",vectorGetter:function(a){return a[a.length-1]}}),y=r(a,{className:d+".Distinct",map_:null,init:function(){this.map_={};a.prototype.init.call(this)},add_:function(a){this.map_.hasOwnProperty(a)||
(this.map_[a]=0);1==++this.map_[a]&&(this.value+=1)},remove_:function(a){0==--this.map_[a]&&--this.value},update_:function(a,b){var c=0;this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(c+=1);0==--this.map_[b]&&--c;c&&this.set(this.value+c)},normalize:String,destroy:function(){a.prototype.destroy.call(this);this.map_=null}}),L={destroy:function(){z.prototype.set.call(this,this.initValue);this.index=null}},h=z.subclass({className:d+".IndexWrapper",extendConstructor_:!1,source:null,
dataset:null,datasetRA_:null,indexConstructor:null,index:null,init:function(a,c){this.source=a;this.indexConstructor=c;this.value=u[c.indexId].indexClass.prototype.value;z.prototype.init.call(this);a.bindingBridge.attach(a,b.fn.$undef,this,this.destroy);this.setDataset(a);this.source[c.indexId]=this},setDataset:function(a){var b=this.dataset;a=F(this,this.setDataset,a,"sourceRA_");if(a!==b){if(b=this.index)b.removeHandler(L,this),--b.wrapperCount,b.wrapperCount||b.explicit||b.destroy();a?(b=B(a,this.indexConstructor),
b.wrapperCount+=1,b.link(this,z.prototype.set),b.addHandler(L,this)):(b=null,z.prototype.set.call(this,this.initValue));this.dataset=a;this.index=b}},set:function(){},destroy:function(){this.source.bindingBridge.detach(this.source,b.fn.$undef,this);this.setDataset();z.prototype.destroy.call(this);delete this.source[this.indexConstructor.indexId];this.indexConstructor=this.source=null}}),p="basisjsIndexConstructor"+b.genUID(),u={},H={destroy:function(a){K(this,a)}},M=function(c,d){return function(f,
g,k){if("function"==typeof f||"string"==typeof f)k=g,g=f,f=null;k||(k=g,g="");k=k||d;if(!r.isClass(c)||!c.isSubclassOf(a))throw"Wrong class for index constructor";k=b.getter(k);g=g||"update";if("string"!=typeof g)throw"Events must be a event names space separated string";g=g.trim().split(" ").sort();var l=p+[c.basisClassId_,k[b.getter.ID],g].join("_"),q=u[l];if(q)k=q.owner;else{for(var y={},q=0;q<g.length;q++)y[g[q]]=!0;q=new C(l);u[l]={owner:q,indexClass:c.subclass({indexId:l,updateEvents:y,valueGetter:k})};
k=q}return f?f instanceof G||f instanceof m?(f=B(f,k),f.explicit=!0,f):f.bindingBridge?f[k.indexId]||new h(f,k):null:k}},W=M(A,b.fn.$true),ca=M(l),T=M(P),la=M(da),N=M(c),ka=M(y),$={"*":function(a){var b,c,d=a.type,f=a.sender,h=f.basisObjectId,g=ea[this.basisObjectId],k;for(k in g)c=g[k],c.updateEvents[d]&&(a=c.indexCache_[h],b=c.normalize(c.valueGetter(f)),b!==a&&(c.update_(b,a),c.indexCache_[h]=b))}},ma={itemsChanged:function(a,b){var c;if(c=b.inserted)for(var d=c.length;0<d--;)c[d].addHandler($,
this);if(c=b.deleted)for(d=c.length;0<d--;)c[d].removeHandler($,this);c=ea[this.basisObjectId];for(var f in c)x(c[f],b.inserted,b.deleted)},destroy:function(){var a=ea[this.basisObjectId],b;for(b in a){var c=a[b];K(this,c);c.destroy()}}},ea={},ba=b.asap.schedule(function(a){a.recalc()}),oa=1,f=r(null,{className:d+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:b.fn.$null});d=r(q,{className:d+".IndexMap",calcs:null,copyDataFromSource:!0,indexes:null,indexValues:null,indexUpdated:!1,itemClass:g,
map:function(a){var b=this.getMember(a);if(!b){var b={},c;for(c in this.calcs)b[c]=this.calcs[c](a.data,this.indexValues,a);if(this.copyDataFromSource)for(var d in a.data)this.calcs.hasOwnProperty(d)||(b[d]=a.data[d]);b=new this.itemClass({source:a,data:b})}return b},addMemberRef:function(a){this.listen.member&&a.addHandler(this.listen.member,this)},removeMemberRef:function(a){this.listen.member&&a.removeHandler(this.listen.member,this);a.source=null;a.destroy()},ruleEvents:J(function(a){q.prototype.ruleEvents.update.call(this,
a);this.sourceMap_[a.basisObjectId].updated=!0;this.scheduleRecalc()},"update"),init:function(){var a=this.indexes;this.indexes={};this.indexValues={};var b=this.calcs;this.calcs={};q.prototype.init.call(this);k(a,this.addIndex,this);for(var c in b)a=b[c],a instanceof f&&(k(a.indexes,this.addIndex,this),a=a.calc),this.calcs[c]=a;this.itemCount&&this.recalc()},addIndex:function(a,b){if(0!=b instanceof C&&!this.indexes[a]){var c=new h(z.from(this,"sourceChanged","source"),b);this.indexes[a]=c;this.indexValues[a]=
c.value;c.link(this,function(b){this.indexValues[a]=b;this.indexUpdated=!0;this.scheduleRecalc()})}},removeIndex:function(a){var b=this.indexes[a];b&&(delete this.indexes[a],delete this.indexValues[a],b.destroy())},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},scheduleRecalc:function(){ba.add(this)},recalc:function(){for(var a in this.sourceMap_)this.calcMember(this.sourceMap_[a]);this.indexUpdated=!1;ba.remove(this)},
calcMember:function(a){var b=a.member;if(a.updated||this.indexUpdated){var c=a.sourceObject,d={},f,h,g,k;for(k in this.calcs)f=this.calcs[k](c.data,this.indexValues,c),h=b.data[k],h===f||f!==f&&h!==h||(d[k]=f,g=!0);if(this.copyDataFromSource){for(var p in c.data)this.calcs.hasOwnProperty(p)||(f=c.data[p],h=b.data[p],h===f||f!==f&&h!==h||(d[p]=f,g=!0));for(p in b.data)this.calcs.hasOwnProperty(p)||c.data.hasOwnProperty(p)||(d[p]=void 0,g=!0)}g&&b.update(d);a.updated=!1}},getMember:function(a){return(a=
a&&this.sourceMap_[a.basisObjectId])?a.member:null},destroy:function(){k(this.indexes,this.removeIndex,this);q.prototype.destroy.call(this);ba.remove(this);this.indexValues=this.indexes=this.calcs=null}});U.exports={IndexConstructor:C,createIndexConstructor:M,getDatasetIndex:B,removeDatasetIndex:K,Index:a,Count:A,Sum:l,Avg:P,VectorIndex:S,Min:da,Max:c,Distinct:y,count:W,sum:ca,avg:T,max:N,min:la,distinct:ka,CalcIndexPreset:f,percentOfRange:function(a,c){var d="min_"+D(),h="max_"+D(),g={};g[d]=la(a,
c);g[h]=N(a,c);c=b.getter(c||a);var k=function(a,b,e){return(c(e)-b[d])/(b[h]-b[d])};return k.preset=new f({indexes:g,calc:k})},percentOfMax:function(a,c){var d="max_"+D(),h={};h[d]=N(a,c);c=b.getter(c||a);var g=function(a,b,e){return c(e)/b[d]};return g.preset=new f({indexes:h,calc:g})},percentOfSum:function(a,c){var d="sum_"+D(),h={};h[d]=ca(c,a);a=b.getter(a||c);var g=function(b,c,f){return a(f)/c[d]};return g.preset=new f({indexes:h,calc:g})},IndexMap:d}},"l.js":function(d,U,b,g,l,A,P,S,da){function w(d){return new Function("data",
"return {"+b.object.iterate(d,function(b,d){b=b.replace(/"/g,'\\"');d=d.replace(/"/g,'\\"');return'"'+b+'": data["'+d+'"]'})+"}")}function C(b){this.host.setSource(this.name,b)}d=this.path;g=b.require("./2.js").create;var x=b.require("./e.js").SUBSCRIPTION,B=b.require("./e.js").Object,K=b.require("./e.js").resolveObject;x.add("OBJECTSOURCE",{sourceChanged:function(b,d,g){g&&x.unlink("sources",b,g);b.sources[d]&&x.link("sources",b,b.sources[d])}},function(b,d){var g=d.sources,m;for(m in g)b("sources",
d,g[m])});var D={update:function(b,d){var g=this.host.fields,m={};if(this.name==g.defaultSource)for(var l in d)0==l in g.fieldSource&&(m[l]=b.data[l]);else for(l in d){var q=g.fromNames[this.name][l];q&&this.host.fields.fieldSource[q]==this.name&&(m[q]=b.data[l])}for(l in m)return this.host.update(m)},destroy:function(){this.host.setSource(this.name,null)}},r=function(b){var d={},g={},l={},D={defaultSource:!1,fieldSource:{},toNames:g,fromNames:l,sources:d,__extend__:r};b["*"]&&(D.defaultSource=b["*"]);
for(var q in b){var J=b[q].split(":"),a=J.shift(),J=J.length?J.join(":"):q;a==D.defaultSource||"-"==a&&J!=q||(g[a]||(g[a]={},l[a]={}),g[a][q]=J,l[a][J]=q,D.fieldSource[q]=a)}for(a in g)d[a]=w(g[a]);D.defaultSource&&(d[D.defaultSource]=function(a){var b={},d;for(d in a)0==d in D.fieldSource&&(b[d]=a[d]);return b});return D};d=B.subclass({className:d+".Merge",subscribeTo:B.prototype.subscribeTo+x.OBJECTSOURCE,emit_sourceChanged:g("sourceChanged","name","oldSource"),fields:r({"*":"-"}),sources:null,
sourcesContext_:null,delta_:null,init:function(){var b=this.data,d=this.sources;this.delegate=null;if(b&&"-"in this.fields.sources)if("-"!==this.fields.defaultSource)this.data=this.fields.sources["-"](b);else{this.data={};for(var g in b)"-"==(this.fields.fieldSource[g]||this.fields.defaultSource)&&(this.data[g]=b[g])}else this.data={};B.prototype.init.call(this);this.sources={};this.sourcesContext_={};d&&this.setSources(d)},update:function(b){if(this.delta_)for(var d in b){var g=this.fields.fieldSource[d]||
this.fields.defaultSource;if(g){var l=g!=this.fields.defaultSource?this.fields.toNames[g][d]:d;b=this.sources[g].data[l];b!==this.data[d]&&(0==d in this.delta_?this.delta_[d]=this.data[d]:this.delta_[d]===b&&delete this.delta_[d],this.data[d]=b)}}else{var r,q={};this.delta_=q;for(d in b)if(g=this.fields.fieldSource[d]||this.fields.defaultSource)"-"==g?(q[d]=this.data[d],this.data[d]=b[d]):this.sources[g]&&(l=g!=this.fields.defaultSource?this.fields.toNames[g][d]:d,this.sources[g].data[l]!==b[d]?(r||
(r={}),0==g in r&&(r[g]={}),r[g][l]=b[d]):this.data[d]!==b[d]&&(q[d]=this.data[d],this.data[d]=b[d]));if(r)for(g in r)this.sources[g].update(r[g]);this.delta_=null;for(d in q)return this.emit_update(q),q;return!1}},setDelegate:function(){},setSource:function(b,d){var g=this.sources[b];if(0!=b in this.fields.sources&&"-"!=b&&(0==b in this.sourcesContext_&&(this.sourcesContext_[b]={host:this,name:b,adapter:null}),d=K(this.sourcesContext_[b],C,d,"adapter",this),g!==d)){var l=this.listen["source:"+b];
g&&(l&&g.removeHandler(l,this),g.removeHandler(D,this.sourcesContext_[b]));if(this.sources[b]=d){d.addHandler(D,this.sourcesContext_[b]);l&&d.addHandler(l,this);l=this.fields.sources[b](d.data);if(this.fields.defaultSource==b)for(var r in this.data)this.fields.fieldSource.hasOwnProperty(r)||l.hasOwnProperty(r)||(l[r]=void 0);this.update(l)}this.emit_sourceChanged(b,g)}},setSources:function(b){b||(b={});for(var d in this.fields.sources)this.setSource(d,b[d])},destroy:function(){this.setSources();this.sourcesContext_=
this.sources=null;B.prototype.destroy.call(this)}});U.exports={Merge:d}},"m.js":function(d,U,b,g,l,A,P,S,da){function w(a){oa[a]=oa[a]||0;return a+oa[a]++}function C(a,b){var c=n[a];if(c){for(var d=0,e;e=c[d];d++)e[0][e[1]]=b;delete n[a]}f[a]=b}function x(a,b,c){if(f[a])return f[a];var d=n[a];d||(d=n[a]=[]);d.push([b,c]);return function(b,c){var d=f[a];if(d)return d(b,c)}}function B(){var a=u(arguments),b=a.pop(),c=a[0],d=a[1],e=a[2],f;if("function"!=typeof b)throw"Last argument for calculate field constructor must be a function";
switch(a.length){case 0:f=function(){return b()};break;case 1:f=function(a,d,e){return c in a?b(d[c]):e};break;case 2:f=function(a,e,f){return c in a||d in a?b(e[c],e[d]):f};break;case 3:f=function(a,f,h){return c in a||d in a||e in a?b(f[c],f[d],f[e]):h};break;default:f=function(c,d,e){for(var s=!1,f=[],h=0,g;g=a[h];h++)s=s||g in c,f.push(d[g]);return s?b.apply(null,f):e}}f.args=a;return f.calc=f}function K(a){return 1==arguments.length?function(b,c,d){return a in b?null!=c[a]?String(c[a]):null:
d}:B.apply(null,u(arguments).concat(function(){for(var a=arguments.length-1;0<=a;a--)if(null==arguments[a])return null;return Array.prototype.join.call(arguments,"-")}))}function D(a,b,d){var e=["has"],f=[c],h=[],g;for(g in a)if(c.call(a,g)){var k='"'+g.replace(/"/g,'"')+'"';if(c.call(d,g))h.push(k+":undefined");else{var p="v"+h.length,s="f"+h.length,Q=a[g];e.push(p,s);f.push(Q,b[g]);h.push(k+":"+s+"(has.call(data,"+k+")?data["+k+"]:"+p+("function"==typeof Q?"(data)":"")+")")}}a=h.sort().join(",");
(b=wa[a])||(b=wa[a]=new Function(e,"return function(data){return {"+a+"};};"));return b.apply(null,f)}function r(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;return b}function k(a,b){return"string"==typeof a&&a?Aa(a):"number"==typeof a&&0==isNaN(a)?new Date(a):null==a?null:a&&a.constructor===Date?a:b||null}function z(a,c,d){d="string"==typeof d||Array.isArray(d)||"function"==typeof d&&d.calc!==d?{type:d}:
d?b.object.slice(d):{};if("type"in d){"string"==typeof d.type&&(d.type=x(d.type,a.fields,c));if(Array.isArray(d.type)){var e=d.type.slice();if(1==e.length)d.type=b.fn.$const(e[0]),d.defValue=e[0];else{var f;d.type=function(a,b){return a===f||-1!=e.indexOf(a)?a:void 0===b?f:b};f=-1!=e.indexOf(d.defValue)?d.defValue:e[0];d.defValue=f}}d.type===Array&&(d.type=r);d.type===Date&&(d.type=k);"function"!=typeof d.type&&(d.type=null)}var h=d.type||p;if(d.id||d.index||-1!=[$,ma,ea,ba].indexOf(h))a.idFields[c]=
d;d.calc?(m(a,c,d.calc),a.fields[c]=Z):(a.fields[c]=h,a.aliases[c]=c);a.defaults[c]="defValue"in d?d.defValue:h();ha[c]||(ha[c]={destroy:function(){this.set(c,null)}})}function G(a,b,c){0!=c in a.fields&&(c in a.calcMap||b in a.aliases||(a.aliases[b]=c))}function m(a,c,d){var e=a.calcs,f=a.deps,h=d.args||[];d={args:h,wrapper:d};var g=a.calcs.length,k=0;if(h)for(var p=0,s;s=e[p];p++)-1!=h.indexOf(s.key)&&(k=p+1);if(c){d.key=c;a.calcMap[c]=d;for(p=0;s=e[p];p++)if(-1!=s.args.indexOf(c)){g=p;break}if(k>
g)return;f[c]=h.reduce(function(a,c){for(var d=f[c]||[c],e=0;e<d.length;e++)b.array.add(a,d[e]);return a},[]);for(var Q in f)a=f[Q].indexOf(c),-1!=a&&Array.prototype.splice.apply(f[Q],[a,1].concat(f[c]))}else g=k;e.splice(Math.min(g,k),0,d)}function F(a){return function(b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]}}function q(a){return function(b,c){return this.set(a,b,c)}}var J=this.path,a=b.Class,c=Object.prototype.hasOwnProperty,y=b.object.keys,L=b.object.extend,
h=b.object.complete,p=b.fn.$self,u=b.array.from;d=b.require("./2.js");var H=d.Emitter;d=d.create;g=b.require("./e.js");var M=g.Object,W=g.Slot,ca=g.Dataset;l=b.require("./i.js");g=l.Filter;var T=l.Split,la={},N=[],ka={string:!0,number:!0},$=function(a){return null==a||isNaN(a)?null:Number(a)},ma=function(a){return null==a||isNaN(a)?null:Number(a)},ea=function(a){return null==a||isNaN(a)?null:parseInt(a,10)},ba=function(a){return null==a?null:String(a)},oa={},f={},e={},n={},t=a(null,{className:J+".Index",
items:null,init:function(){this.items={}},get:function(a,b){var d=c.call(this.items,a)&&this.items[a];if(d&&(!b||d.entityType===b))return d},add:function(a,b){if(b){var c=this.get(a);if(!c)return this.items[a]=b,!0;if(c!==b)throw"basis.entity: Value `"+a+"` for index is already occupied";}},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=null}}),E="wrapped"+b.genUID();A=function(a,b){return function(c){c&&!Array.isArray(c)&&(c=[c]);var d=c&&
!c[E];if(d){if(this.localId){var e=u(this.getItems());c=c.map(function(a){for(var b=0;b<e.length;b++)if(this.localId(a,e[b]))return this.wrapper(a,e[b]);a=this.wrapper(a);e.push(a);return a},this)}else c=c.map(this.wrapper);c[E]=!0}var f=a.prototype[b].call(this,c);if(d&&(c[E]=!1,this.localId&&f&&f.deleted)){ca.setAccumulateState(!0);for(c=0;c<f.deleted.length;c++)f.deleted[c].root&&f.deleted[c].destroy();ca.setAccumulateState(!1)}return f}};l=function(a,b){return function(){this.name||(this.name=
w(b));a.prototype.init.call(this)}};var sa=a(ca,{className:J+".EntitySet",name:null,wrapper:p,init:l(ca,"EntitySet"),setAndDestroyRemoved:function(){return function(a){if(this.localId)return this.set(a);var c=this.wrapper.all===this,d=b.object.slice(this.items_),e=this.listen.item,f=[],h=[],g;if(a){ca.setAccumulateState(!0);for(var k=0;k<a.length;k++){var p=this.wrapper(a[k]);p&&(0==p.basisObjectId in d&&f.push(p),d[p.basisObjectId]=!1)}ca.setAccumulateState(!1)}for(var s in d)d[s]&&h.push(d[s]);
if(a=!c){g={};var Q;f&&f.length&&(Q=g.inserted=f);h&&h.length&&(Q=g.deleted=h);a=g=Q?g:void 0}if(a){if(e){if(g.deleted)for(k=0;k<g.deleted.length;k++)g.deleted[k].removeHandler(e,this);if(g.inserted)for(k=0;k<g.inserted.length;k++)g.inserted[k].addHandler(e,this)}this.emit_itemsChanged(g)}h.length&&this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:h});ca.setAccumulateState(!0);for(k=0;k<h.length;k++)h[k].destroy();ca.setAccumulateState(!1);return f.length?f:null}}(ca),set:A(ca,"set"),
add:A(ca,"add"),remove:A(ca,"remove"),clear:function(){var a=ca.prototype.clear.call(this);if(this.localId&&a&&a.deleted){ca.setAccumulateState(!0);for(var b=0;b<a.deleted.length;b++)a.deleted[b].destroy();ca.setAccumulateState(!1)}return a},destroy:function(){ca.prototype.destroy.call(this);this.wrapper=null}}),v=a(sa,{className:J+".ReadOnlyEntitySet",set:b.fn.$false,add:b.fn.$false,remove:b.fn.$false,clear:b.fn.$false});g=a(g,{className:J+".EntityCollection",name:null,init:l(g,"EntityCollection")});
l=a(T,{className:J+".EntityGrouping",name:null,subsetClass:v,init:l(T,"EntityGrouping"),getSubset:function(a,b){var c=T.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=this.wrapper);return c}});var ja=function(a,b,c){function d(a){if("string"==typeof a)return function(b,c){return b[a]==c.data[a]};if("function"==typeof a)return a}if(this instanceof ja){a||(a=p);if(!b||f[b])b=w("UntitledEntitySetType");var e=new fa({entitySetClass:{wrapper:a,localId:d(c&&c.localId)}}),h=e.entitySetClass,
g=function(a,b){return null!=a?(0==b instanceof sa&&(b=e.createEntitySet()),b.set(a instanceof ca?a.getItems():u(a)),b):null};"string"==typeof a&&(h.prototype.wrapper=x(a,h.prototype,"wrapper"));C(b,g);L(g,{type:e,typeName:b,toString:function(){return b+"()"},reader:function(a){if(Array.isArray(a)){var b=h.prototype.wrapper;return a.map(b.reader||b)}return a},extendClass:function(a){h.extend.call(h,a);return g},extendReader:function(a){var b=g.reader;g.reader=function(c){Array.isArray(c)&&a(c);return b(c)};
return g},entitySetType:e,extend:function(){return h.extend.apply(h,arguments)}});return g}},fa=a(null,{className:J+".EntitySetConstructor",entitySetClass:sa,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),X=function(a){if(this instanceof X){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){b&&b.entityType===c||(b=null);if(a===b||a.entityType===c)return a;var e,f=c.idField;if(ka[typeof a]){if(!f)return;
if(b=c.index.get(a,c))return b;e=a;a={};a[f]=e}else c.compositeKey&&(e=c.compositeKey(a,a)),null!=e&&(b=c.index.get(e,c));b&&b.entityType===c?b.update(a):b=new d(a);return b}};var c=new qa(a||{},b),d=c.entityClass,e=c.name;C(e,b);L(b,{all:c.all,type:c,typeName:e,toString:function(){return e+"()"},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},reader:function(a){return c.reader(a)},readList:function(a,c){if(!a)return[];Array.isArray(a)||(a=[a]);"function"!=typeof c&&
(c=p);for(var d=0;d<a.length;d++)a[d]=b(b.reader(c(a[d],d)));return a},extendClass:function(a){d.extend.call(d,a);return b},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&"object"==typeof b&&a(b);return c(b)};return b},entityType:c,extend:function(){return d.extend.apply(d,arguments)}});return b}},ha={},wa={},Z=function(a,b){return b},ya=/\D/,ta=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,Aa=function(){function a(c,d,e,f,h,g,k){c=new Date(c,d-1,e,f||0,0,g||0,k?k.substr(0,3):0);c.setMinutes((h||
0)-b-c.getTimezoneOffset());return c}var b;return function(c){b=0;return a.apply(null,String(c||"").replace(ta,function(a,c,d,e){b=60*Number(d||0)+Number(e||0);return c}).split(ya))}}(),qa=a(null,{className:J+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(a,b){this.name=a.name;if(!this.name||f[this.name])this.name=
w("UntitledEntityType");this.fields={};this.calcs=[];this.calcMap={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var c=a.index;c&&c instanceof t&&(this.index=c);this.wrapper=b;if(0=="all"in a||a.all||a.singleton)this.all=new v(h({wrapper:b},a.all));if(this.singleton=!!a.singleton){var d;this.get=function(){return d};this.all.addHandler({itemsChanged:function(a,b){d=b.inserted?b.inserted[0]:null}},this)}for(var g in a.fields)z(this,g,a.fields[g]);for(g in a.aliases)G(this,
g,a.aliases[g]);a.constrains&&a.constrains.forEach(function(a){m(this,null,a)},this);this.calcs.length||(this.calcs=null);var k={};if(y(this.idFields).length){for(var p in this.idFields){var c=this.idFields[p].index,l;c&&0!=c instanceof t||("string"==typeof c?(0==c in e&&(e[c]=new t),c=e[c]):(this.index||(this.index=new t),c=this.index));(l=k[c.basisObjectId])||(l=k[c.basisObjectId]={index:c,fields:[]});l.fields.push(p);this.idFields[p]=l}this.index&&0==this.index.basisObjectId in k&&(this.index=
null);for(var n in k)l=k[n],l.property="__id__"+n,l.compositeKey=K.apply(null,l.fields),1==l.fields.length&&(l.idField=l.fields[0]);c=y(k);c=k[this.index?this.index.basisObjectId:c[0]];this.index=c.index;this.idField=c.idField;this.compositeKey=c.compositeKey;this.idProperty=c.property;this.indexes=k}else this.index&&(this.index=null);k={};for(g in this.defaults)k[g]=void 0;this.entityClass=O(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:b,typeName:this.name,
generateData:D(this.defaults,this.fields,this.calcMap),initDelta:k});for(var s in this.fields)this.entityClass.prototype["get_"+s]=F(s),this.fields[s]!==Z&&(this.entityClass.prototype["set_"+s]=q(s));N.push(this)},reader:function(a){var b={};if(ka[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=this.aliases[c];if(d){var e=this.fields[d].reader;b[d]=e?e(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(this.index&&null!=a)return this.index.get(a,this)},
getId:function(a){if(this.compositeKey&&null!=a){if(ka[typeof a])return a;if(a&&a.entityType===this)return a[this.idProperty];a instanceof M&&(a=a.data);if(this.compositeKey)return this.compositeKey(a,a)}},getSlot:function(a){var b=this.getId(a);if(null!=b){var d=c.call(this.slots,b)&&this.slots[b];d||(ka[typeof a]&&(d={},this.idField&&(d[this.idField]=a),a=d),d=this.slots[b]=new W({delegate:this.get(b)||null,data:a}));return d}}}),Y=a(M,{className:J+".BaseEntity",target:!0,setDelegate:function(){},
extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:d("rollbackUpdate")}),O=function(d,e,f,h){function g(a,b,c){var e=d.calcs,f=a.data,h=!1;try{if(e)for(var p=0,l;l=e[p];p++){var m=l.key,n=f[m],q=l.wrapper(b,f,n);m&&q!==n&&(b[m]=n,f[m]=q,h=!0)}for(var u in d.indexes){var r=d.indexes[u],y=a[r.property],e=y;r.compositeKey&&(e=r.compositeKey(b,f,y));e!==y&&(k(r.index,a,y,e),a[r.property]=e)}return h}catch(t){for(m in b)a.data[m]=b[m];c&&!a.modified&&(a.modified=c)}}function k(a,
b,d,e){null!=e&&(a.add(e,b),c.call(h,e)&&h[e].setDelegate(b));null!=d&&(a.remove(d,b),c.call(h,d)&&h[d].setDelegate())}return a(Y,{className:d.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return M.prototype.isSyncRequired.call(this)&&(!d.idProperty||null!=this[d.idProperty])},init:function(a){this.delegate=null;this.data=this.generateData(a);Y.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof H&&(a.addHandler(ha[b],
this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);g(this,this.initDelta);e&&e.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[d.idProperty]},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(a,b,c,e){var h=f[a];if(!h)return!1;var k,p=this.modified;h===r&&p&&a in p&&(b=r(b,p[a]));b=h(b,this.data[a]);h=
this.data[a];if(b===h||b&&h&&b.constructor===Date&&h.constructor===Date&&+b===+h)!c&&p&&a in p&&(k={rollback:{key:a,value:p[a]}},delete p[a],y(p).length||(this.modified=null));else a:{k={};if(!d.idFields[a])if(c)p||(this.modified=p={}),!1===a in p?(k.rollback={key:a,value:void 0},p[a]=h):p[a]===b&&(k.rollback={key:a,value:b},delete p[a],y(p).length||(this.modified=null));else if(p&&a in p)if(p[a]!==b){k.rollback={key:a,value:p[a]};p[a]=b;break a}else return!1;this.data[a]=b;this.fieldHandlers_&&this.fieldHandlers_[a]&&
(h.removeHandler(ha[a],this),this.fieldHandlers_[a]=!1);b&&b!==this&&b instanceof H&&(b.addHandler(ha[a],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[a]=!0);k.key=a;k.value=h;k.delta={};k.delta[a]=h}if(!e&&k){a=k.key;c=k.delta||{};var l;k.rollback&&(l={},l[k.rollback.key]=k.rollback.value);g(this,c,l)&&(a=!0);a&&(this.emit_update(c),k.delta=c);l&&this.emit_rollbackUpdate(l)}return k||!1},update:function(a,b){var c=!1,d={};if(a){var e,f,h;for(h in a)if(f=this.set(h,a[h],
b,!0))f.key&&(c=!0,d[f.key]=f.value),f.rollback&&(e||(e={}),e[f.rollback.key]=f.rollback.value);g(this,d,e)&&(c=!0);c&&this.emit_update(d);e&&this.emit_rollbackUpdate(e)}return c?d:!1},read:function(a){return this.update(this.type.reader(a))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},
rollback:function(a){var c=this.modified;c&&a&&(Array.isArray(a)||(a=[a]),c=b.object.slice(c,a.reduce(function(a,b){return a.concat(d.deps[b]||b)},[])));this.update(c,!0)},destroy:function(){if(this.fieldHandlers_){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(ha[a],this);this.fieldHandlers_=null}for(a in d.indexes){var b=d.indexes[a],c=this[b.property];null!=c&&k(b.index,this,c,null)}e&&e.has(this)&&e.emit_itemsChanged({deleted:[this]});M.prototype.destroy.call(this);
this.data=la;this.modified=null}})};U.exports={isEntity:function(a){return a&&a instanceof Y},createType:function(a,c){var d=a||{};"string"==typeof a?d={name:d,fields:c||{}}:c&&(d=b.object.merge(d,{fields:c}));return new X(d)},createSetType:function(a,c,d){switch(arguments.length){case 0:case 1:a&&a.constructor===Object?(d=b.object.slice(a),c=b.object.splice(d).type,a=b.object.splice(d).name):(c=a,a=void 0);break;case 2:c&&c.constructor===Object&&(d=c,c=a,a=void 0)}return new ja(c,a,d)},validate:function(){for(var a in n)b.dev.warn(J+
": type `"+a+"` is not defined, but used by "+n[a].length+" type(s)")},getTypeByName:function(a){return f[a]},getIndexByName:function(a){return e[a]},is:function(a,b){var c;"string"==typeof b&&(b=f[b]);c=b&&b.type&&b.type.entityClass;return a&&c?a instanceof c:!1},get:function(a,b){var c=f[a];if(c)return c.get(b)},resolve:function(a,b){var c=f[a];if(c)return c(b)},getByIndex:function(a,b){if(a in e)return e[a].get(b)},NumericId:$,NumberId:ma,IntId:ea,StringId:ba,Index:t,CalculateField:B,ConcatStringField:K,
calc:B,EntityType:X,Entity:O,BaseEntity:Y,EntitySetType:ja,EntitySet:sa,ReadOnlyEntitySet:v,Collection:g,Grouping:l}},"n.js":function(d,U,b,g,l,A,P,S,da){function w(){var a=b.fn.publicCallback(function(b){q[a]=b});return a}function C(a){var b=q[a];delete q[a];return b}function x(a){delete q[a];delete g[a]}function B(a,b){var d,k;d=!1;if("number"!=typeof a){if(!a||this.script!==a.target)return;a=(d=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?4:3}if(a!=
this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);if(4==a){this.clearTimeout();this.script.onload=this.script.onerror=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;b?(this.emit_abort(),d=this.stateOnAbort):(this.processResponse(),this.isSuccessful()&&!d?(d=F.READY,this.emit_success(this.getResponseData())):(d=F.ERROR,k=this.getResponseError(),this.emit_failure(k)));this.emit_complete(this);var h=
this.callback;b?setTimeout(g[h]=function(){x(h)},3E5):x(h)}else d=F.PROCESSING;this.setState(d,k)}}d=this.path;var K=g.document,D=g.encodeURIComponent,r=b.object.extend,k=b.object.slice,z=b.object.merge;A=b.require("./o.js");l=A.createTransportEvent;P=A.createRequestEvent;var G=A.AbstractRequest,m=A.AbstractTransport,F=b.require("./e.js").STATE,q={};A=G.subclass({className:d+".Request",timeout:3E4,timer_:null,emit_readyStateChanged:P("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==
this.data.status},processResponse:function(){this.callback in q&&this.update({contentType:"application/javascript",data:C(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:b.fn.$true,prepareRequestData:function(a){var b=[],d=a.url;a=k(a);this.callback=w();for(var g in a.params){var h=a.params[g];null!=h&&null!=h.toString()&&b.push(D(g)+"="+D(h.toString()))}b.push(D(a.callbackParam)+"="+D(this.callback));
b=b.join("&");a.routerParams&&(d=d.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,c){return c in a.routerParams?a.routerParams[c]:b}));b&&(d+=(-1==d.indexOf("?")?"?":"&")+b);a.requestUrl=d;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!K)throw"JSONP is not supported for current environment";var b=K.head||K.getElementByName("head")[0]||K.documentElement,d=K.createElement("script");this.update({data:void 0,status:"",error:""});this.script=
d;d.async=!0;d.src=a.requestUrl;d.charset=a.encoding;d.onload=d.onerror=d.onreadystatechange=B.bind(this);this.prevReadyState_=-1;this.emit_start();B.call(this,0);this.setTimeout(this.timeout);b.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),B.call(this,4,!0))},setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},
timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();G.prototype.destroy.call(this)}});var J=m.subclass({className:d+".Transport",requestClass:A,emit_readyStateChanged:l("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",init:function(){m.prototype.init.call(this);this.params=k(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();
for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw Error("URL is not defined");r(a,{url:b,encoding:a.encoding||this.encoding,params:z(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||this.callbackParam});return a}});U.exports={Request:A,Transport:J,request:function(a,c,d){"string"==typeof a&&(a={url:a});
var g=new J(a);g.addHandler({success:c&&function(a,b,d){c(d)},failure:d&&function(a,b,c){d(c)},complete:function(){b.nextTick(function(){g.destroy()})}});g.request()}}},"o.js":function(d,U,b,g,l,A,P,S,da){function w(b){var d=K(b);return function(){d.apply(G,arguments);this.service&&d.apply(this.service,arguments);d.apply(this,arguments)}}function C(b){var d=K(b);return function(){var a=[this].concat(x(arguments));this.transport?this.transport["emit_"+b].apply(this.transport,a):d.apply(G,a);d.apply(this,
arguments)}}d=this.path;var x=b.array.from,B=b.object.slice;g=b.require("./2.js");var K=g.create,D=g.Emitter,r=b.require("./e.js").Object,k=b.require("./e.js").STATE,z=[],G=new D({abort:function(){for(var b=x(z),d=0;d<b.length;d++)b[d].abort();return b},handler:{start:function(d){b.array.add(z,d.transport)},complete:function(d){b.array.remove(z,d.transport)}}});g=r.subclass({className:d+".AbstractRequest",requestData:null,transport:null,stateOnAbort:k.UNDEFINED,emit_start:C("start"),emit_timeout:C("timeout"),
emit_abort:C("abort"),emit_success:C("success"),emit_failure:C("failure"),emit_complete:C("complete"),abort:b.fn.$undef,doRequest:b.fn.$undef,destroy:function(){r.prototype.destroy.call(this);this.requestData=null}});var m={start:function(d,g){b.array.add(this.inprogressRequests,g)},complete:function(d,g){b.array.remove(this.inprogressRequests,g)}},F={complete:function(){var d=this.requestQueue.shift();d&&b.nextTick(function(){d.doRequest()})}};d=D.subclass({className:d+".AbstractTransport",requestClass:g,
stopped:!1,poolLimit:null,poolHashGetter:null,requests:null,requestQueue:null,inprogressRequests:null,stoppedRequests:null,emit_start:w("start"),emit_timeout:w("timeout"),emit_abort:w("abort"),emit_success:w("success"),emit_failure:w("failure"),emit_complete:w("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];D.prototype.init.call(this);this.addHandler(m,this);this.poolLimit&&this.addHandler(F,this)},getRequestByHash:function(b){b=this.poolHashGetter?this.poolHashGetter(b):
b.origin?b.origin.basisObjectId:"default";var d=this.requests[b];if(!d){var a;a:{for(a in this.requests)if(d=this.requests[a],d.isIdle()&&-1==this.requestQueue.indexOf(d)){delete this.requests[a];a=d;break a}a=void 0}d=a||new this.requestClass({transport:this});this.requests[b]=d}return d},prepare:b.fn.$true,prepareRequestData:b.fn.$self,request:function(b){if(this.prepare()){b=this.prepareRequestData(B(b));var d=this.getRequestByHash(b);d.requestData&&d.abort();d.requestData=b;!this.poolLimit||this.inprogressRequests.length<
this.poolLimit?d.doRequest():(this.requestQueue.push(d),d.setState(k.PROCESSING));return d}},abort:function(){for(var b;b=this.requestQueue.pop();)b.setState(k.ERROR);for(;b=this.inprogressRequests.pop();)b.abort()},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stopped){for(var b;b=this.stoppedRequests.pop();)this.request(b.requestData);this.stopped=!1}},destroy:function(){for(var b in this.requests)this.requests[b].destroy();
this.stoppedRequests=this.requestQueue=this.inprogressRequests=this.requests=null;D.prototype.destroy.call(this)}});U.exports={createTransportEvent:w,createRequestEvent:C,transportDispatcher:G,AbstractRequest:g,AbstractTransport:d}},"p.js":function(d,U,b,g,l,A,P,S,da){function w(d,g){d.inprogressRequests=d.inprogressRequests.filter(function(b){return b.transport!==g});b.array.remove(d.inprogressTransports,g);-1!=d.inprogressTransports.indexOf(g)||d.stoppedTransports&&-1!=d.stoppedTransports.indexOf(g)||
g.removeHandler(B,d)}d=this.path;l=b.require("./2.js");g=l.create;var C=l.Emitter;l=b.require("./q.js").Transport;var x=b.require("./s.js").create,B={destroy:function(d){this.stoppedTransports&&b.array.remove(this.stoppedTransports,d);w(this,d)}},K={start:function(d,g){this.inprogressRequests.push(g);b.array.add(this.inprogressTransports,g.transport)&&g.transport.addHandler(B,this)},complete:function(d,g){b.array.remove(this.inprogressRequests,g);this.inprogressRequests.some(function(b){return b.transport===
this.transport},g)||w(this,g.transport)}};d=C.subclass({className:d+".Service",inprogressRequests:null,inprogressTransports:null,stoppedTransports:null,transportClass:l,emit_sessionOpen:g("sessionOpen"),emit_sessionClose:g("sessionClose"),emit_sessionFreeze:g("sessionFreeze"),emit_sessionUnfreeze:g("sessionUnfreeze"),secure:!1,prepare:b.fn.$true,signature:b.fn.$undef,isSessionExpiredError:b.fn.$false,init:function(){C.prototype.init.call(this);"isSecure"in this&&(this.secure=this.isSecure);this.inprogressRequests=
[];this.inprogressTransports=[];var d=this.transportClass;this.transportClass=d.subclass({service:this,secure:this.secure,emit_failure:function(g,k){d.prototype.emit_failure.call(this,g,k);this.secure&&this.service.isSessionExpiredError(g)&&(this.service.freeze(),this.service.stoppedTransports&&b.array.add(this.service.stoppedTransports,this)&&this.addHandler(B,this.service),this.stop())},init:function(){d.prototype.init.call(this);"needSignature"in this&&(this.secure=this.needSignature)},request:function(b){if(this.service.prepare(this,
b)&&(!this.secure||this.service.sign(this)))return d.prototype.request.call(this,b)}});this.addHandler(K)},sign:function(b){if(this.sessionKey)return this.signature(b,this.sessionData),!0},openSession:function(b,d){this.sessionKey=b;this.sessionData=d||b;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(b){return b.secure});
for(var b=0,d;d=this.inprogressTransports[b];b++)d.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports){for(var b=0,d;d=this.stoppedTransports[b];b++)d.resume();this.stoppedTransports=null}this.emit_sessionUnfreeze()},createTransport:function(b){return new this.transportClass(b)},createAction:function(d){return x(b.object.complete({service:this},d))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=this.inprogressRequests=
null;C.prototype.destroy.call(this)}});U.exports={Service:d}},"q.js":function(d,U,b,g,l,A,P,S,da){function w(a,d){var c={};J.test(d.method)?B&&0!=d.body instanceof B||(c["Content-Type"]=d.contentType+(d.encoding?";charset="+d.encoding:"")):G.test("ie")&&(c["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");c=b.object.merge(c,d.headers);z(d.headers,function(a,b){"content-type"==a.trim().toLowerCase()?c["Content-Type"]=b:c[a]=b});z(c,function(b,d){null!=d&&"function"!=typeof d?a.setRequestHeader(b,
d):delete c[b]});return c}function C(a){var d=this.xhr,c;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);d&&("number"!=typeof a&&(a=d.readyState),a!=this.prevReadyState_&&(this.prevReadyState_=a,this.emit_readyStateChanged(a),4==a?(this.clearTimeout(),d.onreadystatechange=b.fn.$undef,(a=0==d.status)||d.responseType||(a="unknown"==typeof d.responseText||!d.responseText&&!d.getAllResponseHeaders()),a?(this.emit_abort(),d=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(d=q.READY,
this.emit_success(this.getResponseData())):(d=q.ERROR,c=this.getResponseError(),!c&&this.data.error&&(c=this.data.error),this.emit_failure(c))),this.emit_complete(this)):d=q.PROCESSING,this.setState(d,c)))}d=this.path;var x=g.encodeURIComponent,B=g.FormData,K=g.XMLHttpRequest,D=b.object.extend,r=b.object.slice,k=b.object.merge,z=b.object.iterate,G=b.require("./r.js");A=b.require("./o.js");l=A.createTransportEvent;P=A.createRequestEvent;var m=A.AbstractRequest,F=A.AbstractTransport,q=b.require("./e.js").STATE,
J=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,a=/^(HEAD|GET|POST|PUT|PATCH|DELETE|TRACE|LINK|UNLINK|CONNECT)\s+/i,c=/^application\/json/i,y="native",L=function(){if("XMLHttpRequest"in g)return function(){return new K};var a=g.ActiveXObject;if(a)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;y=b[d];d++)try{if(new a(y))return function(){return new a(y)}}catch(c){}throw Error(y="XMLHttpRequest is not supported!");}();A=m.subclass({className:d+".Request",requestStartTime:0,
timeout:3E4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:P("readyStateChanged"),init:function(){m.prototype.init.call(this);this.xhr=L()},isIdle:function(){return 4==this.xhr.readyState||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var a=this.xhr;
if(!a.responseType&&("json"==this.responseType||c.test(this.data.contentType))){var d;a:{try{d=b.json.parse(a.responseText);break a}catch(h){}d=void 0}return d}return"response"in a?a.response:a.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){var a=this.xhr;return{code:"SERVER_ERROR",msg:this.responseType?a.response||a.statusText||"Error":a.responseText,response:this.getResponseData()}},prepare:b.fn.$true,prepareRequestData:function(a){var b=
[],d=a.url;a=r(a);for(var c in a.params){var h=a.params[c];null!=h&&null!=h.toString()&&b.push(x(c)+"="+x(h.toString()))}b=b.join("&");!a.body&&J.test(a.method)&&(a.body=b||"",b="");a.routerParams&&(d=d.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,d){return d in a.routerParams?a.routerParams[d]:b}));b&&(d+=(-1==d.indexOf("?")?"?":"&")+b);a.requestUrl=d;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",status:""});
G.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=L());this.emit_start();var b=this.xhr;this.prevReadyState_=-1;b.onreadystatechange=C.bind(this);a.asynchronous||C.call(this,0);b.open(a.method,a.requestUrl,a.asynchronous);this.lastRequestUrl_=a.requestUrl;if(a.responseType&&a.asynchronous&&"responseType"in b)try{b.responseType=a.responseType}catch(d){}this.responseType=a.responseType||"";var h=w(b,a);this.setTimeout(this.timeout);var g=null;if(J.test(a.method)&&(g=a.body,"function"==typeof g&&(g=g.call(a.bodyContext)),
c.test(h["Content-Type"])&&"string"!=typeof g&&(g=JSON.stringify(g)),G.test("ie9-")))if("object"==typeof g&&"undefined"!=typeof g.documentElement&&"string"==typeof g.xml)g=g.xml;else if("string"==typeof g)g=g.replace(/\r/g,"");else if(null==g||""==g)g="[No data]";this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null;this.xhr===b&&1==b.readyState&&b.send(g)}.bind(this),this.sendDelay)):b.send(g);
return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&0!=this.xhr.readyState&&C.call(this,4))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",
message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();this.xhr=null;m.prototype.destroy.call(this)}});var h=F.subclass({className:d+".Transport",requestClass:A,emit_readyStateChanged:l("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:b.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",body:null,bodyContext:null,init:function(){F.prototype.init.call(this);
"postBody"in this&&(null==this.body&&(this.body=this.postBody),this.postBody=null);this.params=r(this.params);this.routerParams=r(this.routerParams)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(d){if(!d.url&&!this.url)throw Error("URL is not defined");D(d,{headers:k(this.requestHeaders,
d.headers),params:k(this.params,d.params),routerParams:k(this.routerParams,d.routerParams)});"postBody"in d&&(null==this.body&&(d.body=d.postBody),d.postBody=null);b.object.complete(d,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,body:this.body,bodyContext:this.bodyContext,responseType:this.responseType});var c=d.url.match(a);c&&(d.method=c[1],d.url=d.url.substr(c[0].length));return d}});U.exports={Request:A,Transport:h,request:function(a,
d,c){"string"==typeof a&&(a={url:a,asynchronous:!(!d&&!c)});var g=new h(a);g.addHandler({success:d&&function(a,b,c){d(c)},failure:c&&function(a,b,d){c(d)},complete:function(){b.nextTick(function(){g.destroy()})}});a=g.request();if(!a.requestData.asynchronous)return a.getResponseData()}}},"r.js":function(d,U,b,g,l,A,P,S,da){function w(b){var d=1E6;b=String(b).split(".");for(var g=0,l=0;4>g&&g<b.length;g++,d/=100)l+=b[g]*d;return l}function C(b){b=b.toLowerCase();if(b in B)return B[b];var d=b.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);
if(d){B[b]=!1;var g=d[1].toLowerCase(),l=w(d[3]),d=d[4]||"=";if(g=x[g])return B[b]=!l||"="==d&&g==l||"+"==d&&g>=l||"-"==d&&g<l}return!1}d=g.navigator&&g.navigator.userAgent||"";g=g.opera;var x={},B={};A="unknown";l={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox",
"firefox","ff"],Opera:["Opera","opera"]};for(var K in l)if(P=K,"MSIE"!=K||!g)if("Safari"!=K||!/chrome/i.test(d))if("AppleWebKit"!=K||!/iphone/i.test(d))if("MSIE"==K&&/Trident\/\d+/i.test(d)&&/rv:\d+/i.test(d)&&(P="rv"),d.match(new RegExp(P+".(\\d+(\\.\\d+)*)","i")))for(P=l[K],A=g&&"function"==typeof g.version?g.version():RegExp.$1,S=w(A),A=P[0]+" "+A,da=0;da<P.length;da++)x[P[da].toLowerCase()]=S;U.exports={prettyName:A,is:C,test:function(){return b.array(arguments).some(C)}}},"s.js":function(d,U,
b,g,l,A,P,S,da){d=b.require("./e.js").STATE;var w=d.UNDEFINED,C=d.READY,x=d.PROCESSING,B=d.ERROR,K=b.require("./q.js").Transport,D=b.require("./t.js"),r=function(){},k={start:function(b,d){var g=d.requestData.origin;this.start.call(d.requestData.origin);g.state!=x&&g.setState(x)},success:function(b,d,g){b=d.requestData.origin;this.success.call(b,g);b.state==x&&b.setState(C)},failure:function(b,d,g){b=d.requestData.origin;this.failure.call(b,g);b.state==x&&b.setState(B,g)},abort:function(b,d){var g=
d.requestData.origin;this.abort.call(g);g.state==x&&g.setState(w)},complete:function(b,d){this.complete.call(d.requestData.origin)}},z={start:r,success:r,failure:r,abort:r,complete:r},G={success:function(b,d){this.fulfill(d)},abort:function(){this.reject("Request aborted")},failure:function(b,d){this.reject(d)},complete:function(){this.request.removeHandler(G,this)}};U.exports={create:function(d){d=b.object.extend({prepare:r,request:r},d);if("function"==typeof d.body){var g=d.body;d.body=function(){return g.apply(this.context,
this.args)}}var l=b.object.splice(d,["prepare","request"]),w=b.object.merge(z,b.object.splice(d,["start","success","failure","abort","complete"])),a=b.fn.lazyInit(function(){var a;a=d;a=a.transport?a.transport:a.service?a.service.createTransport(a):a.createTransport?a.createTransport(a):new K(a);a.addHandler(k,w);return a});return function(){if(this.state!=x){if(l.prepare.apply(this,arguments))return D.reject("Prepare handler returns trulthy result. Operation aborted. Context: ",this);var d,g=b.object.complete({origin:this,
bodyContext:{context:this,args:b.array(arguments)}},l.request.apply(this,arguments));if("function"==typeof g.body){var k=g.body;g.body=function(){return k.apply(this.context,this.args)}}return(d=a().request(g))?new D(function(a,b){d.addHandler(G,{request:d,fulfill:a,reject:b})}):D.reject("Request is not performed")}return D.reject("Context in processing state, request is not performed")}}}},"t.js":function(d,U,b,g,l,A,P,S,da){function w(){for(var a=0;a<F.length;a++)F[a][0](F[a][1]);F=[];q=!1}function C(a,
d){F.push([a,d]);q||(q=!0,b.nextTick(w,0))}function x(a,b){function d(a){D(b,a)}function g(a){k(b,a)}try{a(d,g)}catch(h){g(h)}}function B(a){var b=a.owner,d=b.state_,b=b.data_,g=a[d];a=a.then;if("function"===typeof g){d="fulfilled";try{b=g(b)}catch(h){k(a,h)}}K(a,b)||("fulfilled"===d&&D(a,b),"rejected"===d&&k(a,b))}function K(a,b){var d;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(b&&("function"===typeof b||"object"===typeof b)){var g=b.then;if("function"===
typeof g)return g.call(b,function(g){d||(d=!0,b!==g?D(a,g):r(a,g))},function(b){d||(d=!0,k(a,b))}),!0}}catch(h){return d||k(a,h),!0}return!1}function D(a,b){a!==b&&K(a,b)||r(a,b)}function r(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,C(z,a))}function k(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,C(G,a))}function z(a){a.state_="fulfilled";a.then_=a.then_.forEach(B)}function G(a){a.state_="rejected";a.then_=a.then_.forEach(B)}var m=function(){},F=[],q,J=function(a){if("function"!==
typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof J)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];x(a,this)};J.prototype={constructor:J,state_:"pending",then_:null,data_:void 0,then:function(a,b){var d={owner:this,then:new this.constructor(m),fulfilled:a,rejected:b};"fulfilled"===this.state_||"rejected"===this.state_?C(B,d):this.then_.push(d);
return d.then},"catch":function(a){return this.then(null,a)}};J.all=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(b,d){function g(a){k++;return function(d){h[a]=d;--k||b(h)}}for(var h=[],k=0,l=0,m;l<a.length;l++)(m=a[l])&&"function"===typeof m.then?m.then(g(l),d):h[l]=m;k||b(h)})};J.race=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.race().");return new this(function(b,d){for(var g=
0,h;g<a.length;g++)(h=a[g])&&"function"===typeof h.then?h.then(b,d):b(h)})};J.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(b){b(a)})};J.reject=function(a){return new this(function(b,d){d(a)})};U.exports=J},"u.js":function(d,U,b,g,l,A,P,S,da){function w(a){function d(a,l){for(var m="",q,r=a;r<g.length;r++)switch(q=g.charAt(r),q){case l:return{result:m,offset:r};case "\\":m+="\\"+g.charAt(++r);break;case "|":m+=")"!=l?"\\|":"|";break;case "(":(q=d(r+1,
")"))?(r=q.offset,m+="(?:"+q.result+")?"):m+="\\(";break;case ":":(q=g.substr(r+1).match(/^\w+/))?(r+=q[0].length,m+="([^/]+)",k.push(q[0])):m+=":";break;case "*":(q=g.substr(r+1).match(/^\w+/))?(r+=q[0].length,m+="(.*?)",k.push(q[0])):m+="\\*";break;default:m+=b.string.forRegExp(q)}return l?null:m}var g=String(a||""),k=[];a=new RegExp("^"+d(0)+"$","i");a.params=k;return a}function C(){m||(r?D.addHandler(g,"hashchange",x):q=setInterval(x,50),m=!0,x())}function x(){var a=K.hash.substr(1)||"";if(a!=
F){var b=[],d=[];F=a;for(var g in z){var h=z[g],l=a.match(h.regexp);l?(G[g]||b.push(h),l=k(l,1),G[g]=l):G[g]&&(d.push(h),delete G[g],h.token.set(null))}for(a=0;h=d[a];a++)for(var l=k(h.callbacks),h=0,m;m=l[h];h++)m.callback.leave&&m.callback.leave.call(m.context);for(a=0;h=b[a];a++)for(l=k(h.callbacks),h=0;m=l[h];h++)m.callback.enter&&m.callback.enter.call(m.context);for(g in G){h=z[g];b=G[g];l=k(h.callbacks);for(a=0;m=l[a];a++)m.callback.match&&m.callback.match.apply(m.context,b);h.token.set(b)}}}
function B(a,b){var d=a instanceof J?a:z[a];if(!d&&b&&(d="[object RegExp]"==Object.prototype.toString.call(a)?a:w(a),d=z[a]={id:a,callbacks:[],token:new J(d.params),regexp:d},"string"==typeof F)){var g=F.match(d.regexp);g&&(g=k(g,1),G[a]=g,d.token.set(g))}return d}d=this.path;var K=g.location;l=g.document;var D=b.require("./c.js");l=l.documentMode;var r="onhashchange"in g&&(void 0===l||7<l),k=b.array.from,z={},G={},m=!1,F,q,J=b.Token.subclass({className:d+".Route",matched:null,params_:null,names_:null,
init:function(a){b.Token.prototype.init.call(this,null);this.matched=this.as(Boolean);this.names_=Array.isArray(a)?a:[];this.params_={}},param:function(a){var b="number"==typeof a?a:this.names_.indexOf(a);0==b in this.params_&&(this.params_[b]=this.as(function(a){return a&&a[b]}));return this.params_[b]},set:function(a){if(a){a=b.object.slice(a);for(var d in a)d in this.names_&&(a[this.names_[d]]=a[d])}b.Token.prototype.set.call(this,a)}});C();U.exports={debug:!1,start:C,stop:function(){m&&(r?D.removeHandler(g,
"hashchange",x):clearInterval(q),m=!1)},checkUrl:x,navigate:function(a,b){b?K.replace(K.pathname+"#"+a):K.hash=a;m&&x()},add:function(a,b,d){var g=B(a,!0);b={cb_:b,context:d,callback:"function"!=typeof b?b||{}:{match:b}};g.callbacks.push(b);g.id in G&&(b.callback.enter&&b.callback.enter.call(d),b.callback.match&&b.callback.match.apply(d,G[a]));return g.token},remove:function(a,b,d){if(a=B(a))for(var g=0,h;h=a.callbacks[g];g++)if(h.cb_===b&&h.context===d){b=a.token;a.callbacks.splice(g,1);a.callbacks.length||
b.handler&&b.handler.handler||b.matched.handler||(delete z[a.id],delete G[a.id]);break}},route:function(a){return B(a,!0).token}}},"v.js":function(d,U,b,g,l,A,P,S,da){function w(b){K.title=b}function C(b){return"string"==typeof b?K.getElementById(b):b}function x(b,d){try{return b.parentNode.replaceChild(d,b),d}catch(g){return b}}var B=b.require("./e.js").resolveValue,K=g.document||{title:"unknown"},D=K.title,r=b.fn.$undef,k,z;d=b.fn.lazyInit(function(d){var g=[],l=!1,q={inited:!1,setTitle:function(a){a!=
D&&(D instanceof b.Token&&D.detach(w),a instanceof b.Token?(a.attach(w),w(a.get())):w(a),D=a)},setElement:function(a){(a=B(q,q.setElement,a,"elementRA_"))&&a.element&&(a=a.element);a=C(a);if(z!==a)if(z)z=x(z,a);else{k||(k={type:"append",node:K.body});var b=C(k.node);z=a;if(b)if("append"==k.type)try{z=b.appendChild(z)}catch(d){z=b.appendChild(K.createComment(""))}else z=x(b,z)}},ready:function(a,b){l?a.call(b,q):g.push({fn:a,context:b})}};d.constructor!==Object&&(d={element:d});for(var A in d){var a=
d[A];switch(A){case "title":q.setTitle(a);break;case "container":k={type:"append",node:a};break;case "replace":k={type:"replace",node:a};break;case "element":z=a;break;case "init":r="function"==typeof a?a:r}}b.doc.body.ready(function(){var a=z,b=r.call(q);b&&(a=b);z=null;q.setElement(a);l=!0;for(q.inited=!0;a=g.shift();)a.fn.call(a.context,q)});return q});U.exports={create:d}}};(function U(b,g,l){function A(a){function b(a){return Math.round(a).toString(36)}var c=b(10+25*Math.random());for(a||(a=
16);c.length<a;)c+=b(new Date*Math.random());return c.substr(0,a)}function P(a,b){for(var c in b)a[c]=b[c];return a}function S(a,b){for(var c in b)0==c in a&&(a[c]=b[c]);return a}function da(a){var b=[],c;for(c in a)b.push(c);return b}function w(a,b){var c={};if(!b)return P(c,a);for(var e=0,f;f=b[e++];)f in a&&(c[f]=a[f]);return c}function C(a,b,c){var e=[],f;for(f in a)e.push(b.call(c,f,a[f]));return e}function x(a){return a}function B(){}function K(a){var b=e[a.url];if(b)for(var c=0;c<b.length;c++)b[c](a.get(),
a.url)}function D(a,b,c){try{return new Function(b,'"use strict";\n'+c)}catch(e){u.error("Compilation error at "+a+("line"in e?":"+(e.line-1):"")+": "+e)}}function r(a){if(0==a in X){var b=a.split("."),c=b.shift(),b=t(c+":"+b.join("/")+".js").replace(/\/\.js$/,".js");X[a]=b;ha[b]=a}return X[a]}function k(a){if(y.call(fa,a))return fa[a];a=a.split(".");var b;b=a[0];var c=fa[b];c||(c=fa[b]=new Z(b),c.namespaces_={},c.namespaces_[b]=c,N.noConflict||(m[b]=c));"library"!=b||Ea||(Ea=fa[b]);for(var c=b=c,
e=1;e<a.length;e++){var f=a[e],g=a.slice(0,e+1).join(".");if(!y.call(b.namespaces_,g)){var h=new Z(g);N.implicitExt&&(c[f]=h);b.namespaces_[g]=h}c=b.namespaces_[g]}return fa[a.join(".")]=c}function z(a,b){if(null!=a){var e=a.length;if("undefined"==typeof e||"[object Function]"==c.call(a))return[a];b||(b=0);if(0<e-b){for(var f=[],g=0,h=b;h<e;)f[g++]=a[h++];return f}}return[]}function G(a,b,c){for(var e=[],f="function"==typeof b,g=0;g<a;g++)e[g]=f?b.call(c,g,e):b;return e}var m=Function("return this")(),
F=m!==b?m:!1,q=m.document,J=m.location,a=m.process,c=Object.prototype.toString,y=Object.prototype.hasOwnProperty,m=b,L={};b=function(){return function(){}}();var h=function(){function a(f){var l=this,m,n,q;if("function"==typeof f||"string"==typeof f){m=b(f,l[g]);q=e+m[g];if(y.call(l,q))return l[q];"function"==typeof m[h]&&(m=m[h]);n=function(a){return m(l(a))}}else{if(!f)return p;n=function(a){return f[l(a)]}}n[g]=k++;n[h]=f;n.__extend__=c;n.as=a;q&&(l[q]=n);return n}function b(e,f){var m=e,n;if(e&&
"string"==typeof e){if(y.call(l,e))return l[e];m=l[e]=new Function("object","return object != null ? object."+e+" : object")}if("function"!=typeof m)return p;if(m.__extend__===c)return m;if(y.call(m,f))return m[f];n=m[f]=m!==e?m:function(a){return m(a)};n[g]=k++;n[h]=e;n.__extend__=c;n.as=a;return n}function c(a,e){var g=a&&a!==p?b(a,f):p;return e||""===e?("string"==typeof e&&(e=I.formatter(e)),g.as(e)):g}var e="basisGetterId"+A()+"_",f=e+"root",g=e,h=e+"base",k=1,l={};c.ID=g;c.SOURCE=h;c.PARENT=
e+"parent";return c}(),p=function(){var a=function(){};a[h.ID]=h.ID+"nullGetter";a.__extend__=h;a.as=function(){return a};return a}(),u=function(){var a=m.console,b={log:B,info:B,warn:B,error:B};a&&C(b,function(c){b[c]="bind"in Function.prototype&&"function"==typeof a[c]?Function.prototype.bind.call(a[c],a):function(){Function.prototype.apply.call(a[c],a,arguments)}});return b}(),H=m.setImmediate||m.msSetImmediate,M=m.clearImmediate||m.msSetImmediate;H&&(H=H.bind(m));M&&(M=M.bind(m));H||function(){var b=
function(){var a={},b=0;H=function(e){if("function"==typeof e)return a[++b]={fn:e,args:z(arguments,1)},c(b),b};M=function(b){delete a[b]};return function(b){var c=a[b];c&&(delete a[b],c.fn.apply(void 0,c.args));W.process()}}(),c=function(a){setTimeout(function(){b(a)},0)};if(F&&F.process&&"function"==typeof a.nextTick)c=function(c){a.nextTick(function(){b(c)})};else{var e=m.postMessage&&!m.importScripts;if(e){var f=m.onmessage;m.onmessage=function(){e=!1};m.postMessage("","*");m.onmessage=f}if(e){var g=
{},f=function(a){if(a&&a.source==m&&(a=a.data,y.call(g,a))){var c=g[a];delete g[a];b(c)}};m.addEventListener?m.addEventListener("message",f,!0):m.attachEvent("onmessage",f);c=function(a){var b=A(32);g[b]=a;m.postMessage(b,"*")}}else if(m.MessageChannel){var h=new m.MessageChannel;h.port1.onmessage=function(a){b(a.data)};c=function(a){h.port2.postMessage(a)}}else if(q&&"onreadystatechange"in q.createElement("script"))var k=c,c=function Ga(a){"undefined"!=typeof ra&&(c=k,ra.head.ready(function(){c=
function(a){var c=q.createElement("script");c.onreadystatechange=function(){c.onreadystatechange=null;ra.remove(c);c=null;b(a)};ra.head.add(c)}}));c===Ga?k(a):c(a)}}}();var W=function(){function a(){e&&(e=M(e));if(b.length)try{c=!0;for(var f;f=b.shift();)f.fn.call(f.context)}finally{c=!1,b.length&&(e=H(a))}}var b=[],c=!1,e,f=function(c,f){b.push({fn:c,context:f});e||(e=H(a));return!0};f.process=function(){c||a()};f.schedule=function(a){function b(){var f=H(b);e=!1;for(var g in c){var h=c[g];delete c[g];
a(h)}M(f);e||(c={})}var c={},e=!1;return{add:function(a){c[a.basisObjectId]=a;e||(e=Ca.asap(b))},remove:function(a){delete c[a.basisObjectId]}}};return f}(),ca=function(){var a=0,b={id:a,start:function(){b.id=a++},finish:function(){W.process();b.id="unknown"}};return b}(),T=function(){var b=/^([^\/]+:|\/)/,c=/^[a-zA-Z0-9\-]+:\/?/,e=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,f=/[\?#].*$/,g,h,k;F?(h=(a.basisjsBaseURI||require("path").resolve(".")).replace(/\\/g,"/"),g=h.replace(/^[^\/]*/,""),h=h.replace(/\/.*/,
"")):(g=J.pathname.replace(/[^\/]+$/,""),h=J.protocol+"//"+J.host);return k={baseURI:g,origin:h,normalize:function(a){a=(a||"").replace(c,"/").replace(e,"/").replace(f,"");for(var b=[],g=a.split("/"),h=0;h<g.length;h++)".."==g[h]?(1<b.length||b[0])&&b.pop():!g[h]&&h||"."==g[h]||b.push(g[h]);return b.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=k.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==a[0]?"/":".")},extname:function(a){return(a=k.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?
a[1]:""},basename:function(a,b){var c=k.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==k.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(){for(var a=z(arguments).reverse(),c=[],e=!1,f=0;!e&&f<a.length;f++)"string"==typeof a[f]&&(c.unshift(a[f]),e=b.test(a[f]));e||c.unshift("/"==g?"":g);return k.normalize(c.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=g);a=k.normalize(a);b=k.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;if("/"==b[0]&&"/"!=a[0])return b;
for(var c=a.replace(/^\/$/,"").split(/\//),e=b.replace(/^\/$/,"").split(/\//),f=[],h=0;e[h]==c[h]&&"string"==typeof c[h];)h++;for(c=c.length-h;0<c;c--)f.push("..");return f.concat(e.slice(h).filter(Boolean)).join("/")}}}(),la=g||"",N=l||{noConflict:!0,implicitExt:!0,modules:{},autoload:["./0.js"]},ka=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;return c===a}function e(c){var l=h++;"function"!=typeof c&&(c=m);var n=function(){};
n.prototype=c.prototype;for(var n=new n,l={basisClassId_:l,superClass_:c,extendConstructor_:!!c.extendConstructor_,isSubclassOf:b,subclass:function(){return e.apply(null,[r].concat(z(arguments)))},extend:f,__extend__:function(b){return b&&b!==k&&("object"==typeof b||"function"==typeof b&&!a(b))?m.create.call(null,r,b):b},prototype:n},p=1,q;q=arguments[p];p++)l.extend(q);var r=l.extendConstructor_?function(a){this.basisObjectId=g.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):
a[c];this.init();this.postInit()}:function(){this.basisObjectId=g.id++;this.init.apply(this,arguments);this.postInit()};n.constructor=r;for(var t in n)n[t]===k&&(n[t]=r);P(r,l);return r}function f(b){var e=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype,w(e)));b.prototype&&(b=b.prototype);for(var g in b){var h=b[g],k=e[g];"className"==g||"extendConstructor_"==g?this[g]=h:e[g]=k&&k.__extend__?k.__extend__(h):h}l&&b[g="toString"]!==c&&(e[g]=b[g]);return this}var g={id:1},
h=1,k={},l=function(){for(var a in{toString:1})return!1;return!0}(),m=P(e,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)y.call(this,a)&&(this[a]=null);this.destroy=B}}}),n=function(a,b){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=new c;b(c,a);return c}}.__extend__(a||{})},p=function(a){return n(a,P,"extensibleProperty")};
return P(m,{SELF:k,create:e,isClass:a,customExtendProperty:n,extensibleProperty:p,nestedExtendProperty:function(a){return n(a,function(a,b){for(var c in b)if(y.call(b,c)){var e=a[c],f=b[c];a[c]=f?e&&e.__extend__?e.__extend__(f):p(f):null}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var e={__extend__:c};if(b){if(b.__extend__)return b;for(var f in b)y.call(b,f)&&b[f]&&(e[f]=a)}return e};return c(b||{})}})}(),$=ka(null,{className:"basis.Token",value:null,handler:null,
deferredToken:null,bindingBridge:{attach:function(a,b,c,e){a.attach(b,c,e)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b,c){this.handler={fn:a,context:b,destroy:c||null,handler:this.handler}},detach:function(a,b){for(var c=this,e;e=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=B;c.destroy=c.destroy&&B;e.handler=c.handler;break}},
apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new ea(this.get()),this.attach(a.set,a));return a},as:function(a){var b=new $,c=function(b){this.set(a.call(this,b))};"function"!=typeof a&&(a=h(a));c.call(b,this.get());this.attach(c,b,b.destroy);b.attach(B,this,function(){this.detach(c,b)});return b},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.detach=
this.attach=B;for(var a=this;a=a.handler;)a.destroy&&a.destroy.call(a.context);this.value=this.handler=null}}),ma=W.schedule(function(a){a.apply()}),ea=$.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,ma.add(this))},deferred:function(){return this}}),ba={},oa={},f={},e={},n=1;(function(){var a="undefined"!=typeof Fa?Fa:null;if(a)for(var b in a)f[T.resolve(b)]=a[b]})();var t=function(a,b){var c=a.match(/^([a-zA-Z0-9\_\-]+):/);if(c){var e=c[1];0==e in wa&&(wa[e]=
T.baseURI+e+"/");a=wa[e]+T.normalize("./"+a.substr(c[0].length))}else a=T.resolve(b,a);return a},E=function(b,c){if(c||!y.call(f,b)){var e="";if(F)try{e=a.basisjsReadFile?a.basisjsReadFile(b):require("fs").readFileSync(b,"utf-8")}catch(g){}else{var h=new m.XMLHttpRequest;h.open("GET",b,!1);h.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());h.setRequestHeader("X-Basis-Resource",1);h.send("");200<=h.status&&400>h.status&&(e=h.responseText)}f[b]=e}return f[b]},sa=function(a,b){var c=
T.extname(a),e=v.extensions[c],g=1<arguments.length,h=!1,k=!1;g&&(a+="#virtual");var l=function(){if(h)return b;var c=g?b:E(a);e?k||(k=!0,b=e(c,a)):b=c;h=!0;K(l);l.apply();return b};P(l,P(new $,{url:a,type:c,virtual:g,fetch:function(){return l()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return h},update:function(c){if(!h||g||c!=f[a])g||(f[a]=c),e?(!k&&g&&(b=c),k&&!e.permanent&&(b=e(c,a,b),K(l),l.apply())):(b=c,h=!0,K(l),l.apply())},reload:function(){if(!g){var b=f[a],
c=E(a,!0);c!=b&&(h=!1,l.update(c))}},get:function(c){return g&&c?e?void 0:b:c?E(a):l()},ready:function(a,b){if(h&&(a.call(b,l()),e&&e.permanent))return;l.attach(a,b);return l}}));ba[a]=l;return oa[a]=l},v=function(a,b){var c=b?b+"\x00"+a:a,e=oa[c];e||(e=t(a,b,"basis.resource('{url}')"),e=ba[e]||sa(e),oa[c]=e);return e};P(v,{resolveURI:t,isResource:function(a){return a?ba[a.url]===a:!1},isResolved:function(a){return(a=v.get(a))?a.isResolved():!1},exists:function(a){return y.call(ba,t(a,null,"basis.resource.exists('{url}')"))},
get:function(a){a=t(a,null,"basis.resource.get('{url}')");return v.exists(a)?v(a):null},getFiles:function(a){return a?da(f):da(ba).filter(function(a){return!ba[a].virtual})},virtual:function(a,b,c){return sa((c?c+":":T.normalize("/"==T.baseURI?"":T.baseURI)+"/")+"virtual-resource"+n++ +"."+a,b)},extensions:{".js":P(function(a,b){var c=ha[b];if(!c){var e=!0,c=(T.dirname(b)+"/"+T.basename(b,T.extname(b))).replace(/^\/\//,"/"),f;for(f in wa){var g=wa[f]+f+"/";if(c.substr(0,g.length)==g){e=!1;c=c.substr(wa[f].length);
break}}c=c.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,".");e&&(c="implicit."+c)}f=k(c);f.inited||(f.inited=!0,f.exports=ja({path:f.path,exports:f.exports},b,a).exports,f.exports&&f.exports.constructor===Object&&N.implicitExt&&S(f,f.exports));return f.exports},{permanent:!0}),".css":function(a,b,c){c||(c=new Ba(b));c.updateCssText(a);return c},".json":function(a){if("object"==typeof a)return a;var b;try{a=String(a),b=Ca.json.parse(a)}catch(c){}return b||null}}});var ja=function(a,b,c){var e=
T.dirname(b),f=c;a.exports||(a.exports={});"function"!=typeof f&&(f=D(b,"exports module basis global __filename __dirname resource require asset".split(" "),c));"function"==typeof f&&f.call(a.exports,a.exports,a,Ca,m,b,e,function(a){return v(a,e)},function(a){return ya(a,e)},function(a){return t(a,e,"asset('{url}')")});return a},fa={},X={},ha={},wa={};C(N.modules,function(a,b){wa[a]=b.path+"/";X[a]=b.filename;ha[b.filename]=a});(function(a){if(a="undefined"!=typeof Da?Da:null)for(var b in a){var c=
T.resolve(b),e=a[b];ha[c]=e;X[e]=c}})();var Z=ka(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(a){P(this.exports,a);return S(this,a)}}),ya=function(a,b){/[^a-z0-9_\.]/i.test(a)||".js"==T.extname(a)?/[\?#]/.test(a)||(a=t(a,b,"basis.require('{url}')")):a=r(a);return v(a).fetch()};S(Function.prototype,{bind:function(a){var b=this,c=z(arguments,1);return c.length?function(){return b.apply(a,
c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});S(Array,{isArray:function(a){return"[object Array]"===c.call(a)}});S(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,e=this.length;c<e;c++)c in this&&a.call(b,this[c],c,this)},
every:function(a,b){for(var c=0,e=this.length;c<e;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=0,e=this.length;c<e;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],e=0,f=this.length;e<f;e++)e in this&&a.call(b,this[e],e,this)&&c.push(this[e]);return c},map:function(a,b){for(var c=[],e=0,f=this.length;e<f;e++)e in this&&(c[e]=a.call(b,this[e],e,this));return c},reduce:function(a,b){var c=this.length,e=arguments.length;
if(0==c&&1==e)throw new TypeError;var f,g=0;1<e&&(f=b,g=1);for(e=0;e<c;e++)e in this&&(f=g++?a.call(null,f,this[e],e,this):this[e]);return f}});var ta={from:z,create:G,flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return ta.flatten(G(parseInt(b,10)||0,a))},search:function(a,b,c,e){a.lastSearchIndex=-1;c=h(c||x);e=parseInt(e,10)||0;for(var f=a.length;e<f;e++)if(c(a[e])===b)return a[a.lastSearchIndex=e]},lastSearch:function(a,b,c,e){a.lastSearchIndex=-1;c=h(c||x);var f=a.length;
e=isNaN(e)||null==e?f:parseInt(e,10);for(f=e>f?f:e;0<f--;)if(c(a[f])===b)return a[a.lastSearchIndex=f]},add:function(a,b){return-1==a.indexOf(b)&&!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(){return ta.sort.apply(this,arguments)},sort:function(a,b,c,e){b=h(b);e=e?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return e*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(a){return this[a.i]},
a)}};if(![1,2].splice(1).length){var Aa=Array.prototype.splice;Array.prototype.splice=function(){var a=z(arguments);2>a.length&&(a[1]=this.length);return Aa.apply(this,a)}}var qa=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,Y=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,O={};S(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});
S(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var I={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw c;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(qa,"\\$1")},format:function(a,b){var c=z(arguments,1);"object"==typeof b&&
P(c,b);return a.replace(Y,function(a,b,e,f,g){a=b in c?c[b]:g?"":a;return e&&!isNaN(a)?(a=Number(a),"."==e?a.toFixed(f):va.lead(a,f)):a})},formatter:function(a){a=String(a);if(y.call(O,a))return O[a];var b=function(b){return I.format(a,b)};return O[a]=b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},
isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}};if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var pa=String.prototype.split;String.prototype.split=function(a,b){if(!a||0==a instanceof RegExp||""==a.source)return pa.call(this,a,b);var c=[],e=0,f;for(a.global||(a=new RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));f=a.exec(this);)f[0]=this.substring(e,f.index),c.push.apply(c,f),e=a.lastIndex;c.push(this.substr(e));return c}}if("2"!=
"12".substr(-1)){var ia=String.prototype.substr;String.prototype.substr=function(a,b){return ia.call(this,0>a?Math.max(0,this.length+a):a,b)}}var va={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,function(e,f){return!f+(a.length-f)%(b||3)?e:(c||" ")+e})})},format:function(a,
b,c,e,f,g){a=a.toFixed(b);if(c||g)a=a.replace(/(\d+)(\.?)/,function(a,b,e){return(c?Ca.number.group(Number(b),3,c):b)+(e?g||e:"")});e&&(a=a.replace(/^-?/,"$&"+(e||"")));return a+(f||"")}};S(Date,{now:function(){return Number(new Date)}});var ua=function(){function a(){var b;g&&(g=M(g));for(1<f.length&&(g=H(a));b=f.shift();)b[0].call(b[1]);g=M(g);W.process()}function b(){e++||a()}function c(){try{q.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,1)}}var e=!q||"complete"==q.readyState,f=
[],g;if(!e)if(q.addEventListener)q.addEventListener("DOMContentLoaded",b,!1),m.addEventListener("load",b,!1);else{q.attachEvent("onreadystatechange",b);m.attachEvent("onload",b);try{!m.frameElement&&q.documentElement.doScroll&&c()}catch(h){}}return function(b,c){f.length||!e||g||(g=H(a));f.push([b,c])}}(),xa=function(){return"addEventListener"in m?function(a,b){m.addEventListener("unload",function(c){a.call(b||null,c||m.event)},!1)}:"attachEvent"in m?function(a,b){m.attachEvent("onunload",function(c){a.call(b||
null,c||m.event)})}:B}(),ra=function(){function a(b){if(q&&!g[b]&&(g[b]=q[b]||q.getElementsByTagName(b)[0],g[b])){var c=h[b];delete h[b];for(var e=0,f;f=c[e];e++)f[0].call(f[1],g[b])}return g[b]}function b(){var e=this[0],f=this[1],g=this[2];c(f);var k=a(e);k?(!0===g&&(g=k.firstChild),g&&g.parentNode===k||(g=null),k.insertBefore(f,g)):h[e].push([b,[e,f,g]])}function c(a){for(var b in h){var e=ta.search(h[b],a,function(a){return a[1]&&a[1][1]});e&&ta.remove(h[b],e)}a&&a.parentNode&&1==a.parentNode.nodeType&&
a.parentNode.removeChild(a)}function e(){f&&a("head")&&a("body")&&(f=clearInterval(f))}var f,g={},h={head:[],body:[]};!q||a("head")&&a("body")||(f=setInterval(e,5),ua(e));return{head:{ready:function(a,b){h.head?h.head.push([a,b]):a.call(b,g.head)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){h.body?h.body.push([a,b]):a.call(b,g.body)},add:function(a,c){b.call(["body",a,c])}},remove:c}}();g=function(){var a=[];if(xa===B)return{add:B,remove:B};xa(function(){b.globalDestroy=!0;
b.add=B;b.remove=B;for(var c;c=a.pop();)if("function"==typeof c.destroy)try{c.destroy()}catch(e){}else for(var f in c)c[f]=null;a=[]});var b={add:function(b){null!=b&&a.push(b)},remove:function(b){ta.remove(a,b)}};return b}();var Ba=function(){function a(b){g.setAttribute("href",b);ra.head.add(g,!0)}function b(){g.setAttribute("href",J.href);ra.remove(g)}function c(){a(this.baseURI);this.element||(this.element=q.createElement("style"),e||this.element.appendChild(q.createTextNode("")));ra.head.add(this.element);
this.syncCssText();b()}var e;try{e=!q.createElement("style").appendChild(q.createTextNode(""))}catch(f){e=!0}var g=q&&q.createElement("base");return ka(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(a){this.url=a;this.baseURI=T.dirname(a)+"/"},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&this.element&&(a(this.baseURI),this.syncCssText(),b()))},syncCssText:e?function(){this.element.styleSheet.cssText=this.cssText}:function(){this.element.firstChild.nodeValue=
this.cssText},startUse:function(){this.inUse||ra.head.ready(c,this);this.inUse+=1},stopUse:function(){this.inUse&&(--this.inUse,!this.inUse&&this.element&&ra.remove(this.element))},destroy:function(){this.element&&ra.remove(this.element);this.cssText=this.element=null}})}(),Ca=k("basis").extend({version:"1.4.0",NODE_ENV:F,config:N,createSandbox:function(a){return U(m,la,S({noConflict:!0},a))},dev:(new Z("basis.dev")).extend(u).extend({warnPropertyAccess:b}),resolveNSFilename:r,patch:function(a,b){a=
/[^a-z0-9_\.]/i.test(a)||".js"==T.extname(a)?t(a,null,"basis.patch('{url}')"):r(a);e[a]?e[a].push(b):e[a]=[b];var c=v.get(a);c&&c.isResolved()&&b(c.get(),c.url)},namespace:k,require:ya,resource:v,asset:function(a){return t(a,null,"basis.asset('{url}')")},setImmediate:H,clearImmediate:M,nextTick:function(){H.apply(null,arguments)},asap:W,FACTORY:L,PROXY:{},Class:ka,Token:$,DeferredToken:ea,codeFrame:ca,ready:ua,teardown:xa,cleaner:g,genUID:A,getter:h,console:u,path:T,doc:ra,object:{extend:P,complete:S,
keys:da,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:w,splice:function(a,b){var c={};if(!b)return P(c,a);for(var e=0,f;f=b[e++];)f in a&&(c[f]=a[f],delete a[f]);return c},merge:function(){for(var a={},b=0;b<arguments.length;b++)P(a,arguments[b]);return a},iterate:C},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===
this},$isNotSame:function(a){return a!==this},$self:x,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:B,getter:h,nullGetter:p,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},factory:function(a){"function"!=typeof a&&(a=h(a));var b=function(b){return a(b)};b.factory=L;return b},isFactory:function(a){return"function"===typeof a&&a.factory===L},lazyInit:function(a,b){var c=0,e,f;return e=function(){c++||
(e.inited=!0,e.data=f=a.apply(b||this,arguments));return f}},lazyInitAndRun:function(a,b,c){var e=0,f,g;return f=function(){e++||(f.inited=!0,f.data=g=a.call(c||this));b.apply(g,arguments);return g}},runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}},publicCallback:function(a,b){var c="basisjsCallback"+A();m[c]=b?a:function(){try{delete m[c]}catch(b){m[c]=void 0}a.apply(this,arguments)};return c}},array:P(z,ta),string:I,number:va,bool:{invert:function(a){return!a}},
json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return I.toObject(a,!0)}}});N.autoload&&!F&&N.autoload.forEach(function(a){ya(a)});F&&exports&&(exports.basis=Ca);return Ca})(this)}).call(this)