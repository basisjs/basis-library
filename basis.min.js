(function(){var La={"0.js":"library","1.js":"basis.ui","2.js":"basis.event","3.js":"basis.template.html","4.js":"basis.l10n","5.js":"basis.template.htmlfgen","6.js":"basis.template.const","7.js":"basis.template.namespace","8.js":"basis.template","9.js":"basis.template.declaration","a.js":"basis.template.store","b.js":"basis.template.theme","c.js":"basis.template.buildDom","d.js":"basis.dom.event","e.js":"basis.dom.wrapper","f.js":"basis.data","g.js":"basis.data.state","h.js":"basis.data.subscription",
"i.js":"basis.data.resolve","j.js":"basis.dragdrop","k.js":"basis.dom.computedStyle","l.js":"basis.layout","m.js":"basis.data.dataset","n.js":"basis.data.value","o.js":"basis.data.index","p.js":"basis.data.object","q.js":"basis.entity","r.js":"basis.net.jsonp","s.js":"basis.net","t.js":"basis.net.service","u.js":"basis.net.ajax","v.js":"basis.ua","w.js":"basis.net.action","x.js":"basis.promise","y.js":"basis.router","z.js":"basis.app"},Ma,Oa={"18.js":function(e,B,b,k,u,H,A,J,M){var q=b.fn.$self,t=
b.fn.$true,x=b.fn.$false;e=b.require("./2.js").create;k=b.require("./14.js");var y=b.require("./13.js"),v=b.require("./f.js").Object,n=b.require("./f.js").Dataset.setAccumulateState;u=b.require("./15.js");B.exports=u.subclass({className:"basis.data.dataset.MapFilter",propertyDescriptors:{rule:"ruleChanged",addMemberRef:!1,removeMemberRef:!1,ruleEvents:!1},map:q,filter:x,rule:b.getter(t),emit_ruleChanged:e("ruleChanged","oldRule"),ruleEvents:k(function(b){var f=this.map?this.map(b):b;if(0==f instanceof
v||this.filter(f))f=null;var c=this.sourceMap_[b.basisObjectId],h=c.member;if(h!==f){var m=this.members_,l,d,n;c.member=f;h&&(c=h.basisObjectId,this.removeMemberRef&&this.removeMemberRef(h,b),0==--m[c]&&(delete m[c],n=[h]));f&&(h=f.basisObjectId,this.addMemberRef&&this.addMemberRef(f,b),m[h]?m[h]++:(m[h]=1,d=[f]));(l=y(d,n))&&this.emit_itemsChanged(l)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(b,f){var c=this.sourceMap_,h=this.members_,m=[],l=[],d,D,a,
p=this.ruleEvents;n(!0);if(f.inserted)for(var e=0;d=f.inserted[e];e++){a=this.map?this.map(d):d;if(0==a instanceof v||this.filter(a))a=null;p&&d.addHandler(p,this);c[d.basisObjectId]={sourceObject:d,member:a};a&&(D=a.basisObjectId,h[D]?h[D]++:(h[D]=1,m.push(a)),this.addMemberRef&&this.addMemberRef(a,d))}if(f.deleted)for(e=0;d=f.deleted[e];e++)D=d.basisObjectId,a=c[D].member,p&&d.removeHandler(p,this),delete c[D],a&&(D=a.basisObjectId,0==--h[D]&&(delete h[D],l.push(a)),this.removeMemberRef&&this.removeMemberRef(a,
d));n(!1);(f=y(m,l))&&this.emit_itemsChanged(f)}}},setMap:function(b){"function"!=typeof b&&(b=q);if(this.map!==b)return this.map=b,this.applyRule()},setFilter:function(b){"function"!=typeof b&&(b=x);if(this.filter!==b)return this.filter=b,this.applyRule()},setRule:function(r){r=b.getter(r||t);if(this.rule!==r){var f=this.rule;this.rule=r;this.emit_ruleChanged(f);return this.applyRule()}},applyRule:function(){var b=this.sourceMap_,f=this.members_,c,h,m,l,d,n=[],a=[],p,e;for(e in b){d=b[e];l=d.sourceObject;
c=d.member;h=this.map?this.map(l):l;if(0==h instanceof v||this.filter(h))h=null;c!=h&&(d.member=h,c&&(m=c.basisObjectId,this.removeMemberRef&&this.removeMemberRef(c,l),f[m]--),h&&(c=h.basisObjectId,this.addMemberRef&&this.addMemberRef(h,l),c in f?f[c]++:(f[c]=1,n.push(h))))}for(m in this.items_)0==f[m]&&(delete f[m],a.push(this.items_[m]));(p=y(n,a))&&this.emit_itemsChanged(p);return p}})},"0.js":function(e,B,b,k,u,H,A,J,M){b.require("./1.js");b.require("./j.js");b.require("./m.js");b.require("./n.js");
b.require("./o.js");b.require("./p.js");b.require("./q.js");b.require("./r.js");b.require("./t.js");b.require("./w.js");b.require("./y.js");b.require("./z.js");k.basis=b},"2.js":function(e,B,b,k,u,H,A,J,M){function q(b){var n=x[b];n||(n=function(){for(var r=this,f,c;r=r.handler;){c=r.callbacks[b];if("function"==typeof c){if(!f){f=[this];for(var h=0;h<arguments.length;h++)f.push(arguments[h])}c.apply(r.context||this,f)}c=r.callbacks["*"];if("function"==typeof c){if(!f)for(f=[this],h=0;h<arguments.length;h++)f.push(arguments[h]);
c.call(r.context||this,{sender:this,type:b,args:f})}}},x[b]=n);return n}e=b.Class;var t={},x={},y=function(){};e=e(null,{className:"basis.event.Emitter",extendConstructor_:!0,propertyDescriptors:e.customExtendProperty({basisObjectId:!0,propertyDescriptors:!1,handler:!1,listen:!1},function(b,n){for(var r in n){var f=n[r];!0===f||"<static>"==f?f={isStatic:!0}:!1===f?f={isPrivate:!0}:"string"==typeof f&&(f={events:f});b[r]=f}}),handler:null,emit_destroy:q("destroy"),listen:e.nestedExtendProperty(),init:function(){this.handler&&
!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(b,n){this.handler={callbacks:b,context:n||this,handler:this.handler}},removeHandler:function(b,n){var r=this,f;for(n=n||this;f=r,r=r.handler;)if(r.callbacks===b&&r.context===n){r.callbacks=t;f.handler=r.handler;break}},destroy:function(){this.destroy=y;this.emit_destroy();this.handler=null}});B.exports={create:q,createHandler:function(b,n){var r={events:[]};if(b){b=String(b).trim().split(/\s+|\s*,\s*/).sort();
for(var r={events:b},f=0,c;c=b[f];f++)"destroy"!=c&&(r[c]=n)}return r},events:x,Emitter:e}},"3.js":function(e,B,b,k,u,H,A,J,M){function q(b){var a=b.dictionary,c=a.resource?a.resource.url:"dictionary"+a.basisObjectId;b=b.getName();var d=b+"@"+c,m=p[d],f;if(!m){var l=a.token(b),m=p[d]=l.as(function(b){if("markup"==l.getType()){var a=l.getParentType();"string"!=typeof b||"plural"!=a&&"plural-markup"!=a||(b=b.replace(/\{#\}/g,"{__templateContext}"));b!=this.value&&f&&(f.detach(l,l.apply),f=null);b&&
"path:"==String(b).substr(0,5)&&(f=h(b.substr(5)),f.attach(l,l.apply));return f?f.bindingBridge.get(f):b}return this.value});m.id="{l10n:"+d+"}";m.url=c+":"+b}return m}function t(b){"string"==typeof b&&(b=r(b));if(!b)return null;b=q(b);var c=b.id,d=a[c];d||(d=a[c]=new E(b));return d}var x=k.document,y=k.Node,v=b.string.camelize,n=b.require("./4.js").isMarkupToken,r=b.require("./4.js").token,f=b.require("./5.js").getFunctions;H=b.require("./8.js");var c=H.TemplateSwitchConfig;e=H.TemplateSwitcher;
u=H.Template;var h=H.get,m=b.require("./c.js"),l=b.require("./6.js").CLONE_NORMALIZATION_TEXT_BUG,d;a:{try{d=x.documentElement.style.color="x";break a}catch(g){}d=void 0}var D=!!d,a={},p={};d=function(){function a(d,h,f,m){if(!d.classList)return c(d,h,f,m);var g=f||"";g!=h&&(h&&d.classList.remove(h),g&&(d.classList.add(g),m&&(d.classList.add(g+"-anim"),b.nextTick(function(){d.classList.remove(g+"-anim")}))));return g}function c(a,d,h,f){var m=h||"";if(m!=d){h=a.className;var g="string"!=typeof h;
g&&(h=h.baseVal);h=h.split(E);d&&b.array.remove(h,d);m&&(h.push(m),f&&(b.array.add(h,m+"-anim"),b.nextTick(function(){var c=(g?a.className.baseVal:a.className).split(E);b.array.remove(c,m+"-anim");g?a.className.baseVal=c.join(" "):a.className=c.join(" ")})));g?a.className.baseVal=h.join(" "):a.className=h.join(" ")}return m}function d(){this.set(this.name,this.value)}function h(b,a,c){var m=a&&a.bindingBridge,g=this.attaches&&this.attaches[b],f=null;if(m||g)if(m){var p;n(a)&&(p=t(a));if(g&&g.value===
a&&g.template===p)f=a&&n(a)?g.tmpl:null;else{g&&(g.tmpl&&g.template.clearInstance(g.tmpl),g.value.bindingBridge.detach(g.value,d,g));if(p){var l=this.context,r=this.bindings,w=this.action,D=this.bindingInterface,f=p.createInstance(l,w,function L(){f=e.tmpl=p.createInstance(l,w,L,r,D);f.parent=f.element.parentNode||f.element;d.call(e)},r,D);f.parent=f.element.parentNode||f.element}this.attaches||(this.attaches=new c);var e=this.attaches[b]={name:b,value:a,template:p,tmpl:f,set:this.tmpl.set};m.attach(a,
d,e)}if(f)return f.set("__templateContext",a.value),f.parent;a=m.get(a)}else g&&(g.tmpl&&g.template.clearInstance(g.tmpl),g.value.bindingBridge.detach(g.value,d,g),this.attaches[b]=null);return a}function p(b,a){var c=b[0],d=b[1],h=a[c],g=a[d];switch(b.length){case 1:return function(b){this(c,h(b))};case 2:return function(b){this(c,h(b));this(d,g(b))};default:var f=b.map(function(b){return a[b]});return function(a){for(var c=0;c<b.length;c++)this(b[c],f[c](a))}}}function e(b){var a={};return function(c,
d){var h=c.bindings;if(!h)return{};var g="bindingId"in h?h.bindingId:null,f=a[g];if(!f){for(var f=[],m={},l={},r=0,n;n=b[r];r++){var w=h[n],D=w&&w.getter;if(D&&(m[n]=D,f.push(n),w.events))for(var w=String(w.events).trim().split(/\s+|\s*,\s*/),D=0,e;e=w[D];D++)l[e]?l[e].push(n):l[e]=[n]}var h=p(f,m),z;for(z in l)l[z]=p(l[z],m);f={names:f,sync:h,handler:z?l:null};g&&(a[g]=f)}d&&f.sync.call(d,c.context);if(c.bindingInterface)return f.handler&&c.bindingInterface.attach(c.context,f.handler,d),f.handler}}
var E=/\s+/,C=k.DOMTokenList&&x&&x.documentElement.classList instanceof k.DOMTokenList,q;a:{try{q=x instanceof y;break a}catch(ia){}q=void 0}var B=q?function(b,a,c,d){b=!d&&c&&c instanceof y?c:b;if(b!==a){11!==b.nodeType||b.startMarker||(b.startMarker=x.createTextNode(""),b.endMarker=x.createTextNode(""),b.insertBefore(b.startMarker,b.firstChild),b.appendChild(b.endMarker));if(11===a.nodeType&&a.startMarker){c=a.startMarker;d=a.endMarker;for(var h=c.nextSibling;h&&h!==d;){var f=h,h=h.nextSibling;
a.appendChild(f)}d.parentNode.removeChild(d);a.startMarker=null;a.endMarker=null;a=c}a.parentNode.replaceChild(b,a)}return b}:function(b,a,c,d){c=!d&&c&&"object"==typeof c?c:b;if(c!==a)try{a.parentNode.replaceChild(c,a)}catch(h){c=b,a!==c&&a.parentNode.replaceChild(c,a)}return c},ua=function(b,a,c,d){c!==d&&(d?b.setAttribute(a,d):b.removeAttribute(a));return d},la={bind_textNode:function(b,a,c,d){a=B(b,a,c,d);a===b&&(b.nodeValue=String(c));return a},bind_node:B,bind_element:function(b,a,c,d){a=B(b,
a,c,d);a===b&&"string"==typeof c&&(b.innerHTML=c);return a},bind_comment:B,bind_attr:ua,bind_attrNS:function(b,a,c,d,h){d!==h&&(h?b.setAttributeNS(a,c,h):b.removeAttributeNS(a,c));return h},bind_attrClass:C?a:c,bind_attrStyle:D?function(b,a,c,d){c!==d&&(b.style[v(a)]=d);return d}:function(b,a,c,d){if(c!==d)try{b.style[v(a)]=d}catch(h){}return d},resolve:h,l10nToken:r};return function(a,c){var d=f(a,!0,this.source.url,a.source_,!l),g=d.createL10nSync,p,w,D={},E=[],C=[],I=0,v={cloneNode:function(){if(1==
I)return m(a);v=m(a);if(g){w=d.createL10nSync(v,D,ua,l);for(var b=0,z;z=E[b];b++)w(z.path,D[z.path])}return v.cloneNode(!0)}};if(g)var k=function(b){for(var a=0,c;c=E[a];a++)b(c.path,D[c.path])},Q=function(a){var z=n(this.token);z?b.array.add(C,this):b.array.remove(C,this);D[this.path]=z?void 0:null==a?"{"+this.path+"}":a;w&&w(this.path,D[this.path]);for(var d in c)c[d].tmpl.set(this.path,z?this.token:a)},E=d.l10nKeys.map(function(b){var a=r(b),c={path:b,token:a,handler:Q};a.attach(Q,c);n(a)?C.push(c):
D[b]=null==a.value?"{"+b+"}":a.value;return c});p=d.createInstanceFactory(this.templateId,function(){return v.cloneNode(!0)},la,D,C,e(d.keys),l);return{createInstance:function(b,a,d,h,g){var f=I++;b={context:b,action:a,rebuild:d,handler:null,bindings:h,bindingInterface:g,attaches:null,compute:null,tmpl:null};p(f,b,f?null:k);c[f]=b;return b.tmpl},destroyInstance:function(b){b=b.templateId_;var a=c[b];if(a){a.handler&&a.bindingInterface.detach(a.context,a.handler,a.tmpl.set);if(a.compute){for(var d=
0;d<a.compute.length;d++)a.compute[d].destroy();a.compute=null}for(var f in a.attaches)h.call(a,f,null);delete c[b]}},destroy:function(b){for(var a=0,f;f=E[a];a++)f.token.detach(f.handler,f);for(var g in c)if(a=c[g],b&&a.rebuild&&a.rebuild.call(a.context),!b||g in c)for(g in a.handler&&a.bindingInterface.detach(a.context,a.handler,a.tmpl.set),a.attaches)h.call(g,null);c=w=E=D=v=d=null}}}}();var E=u.subclass({className:"basis.template.html.Template",__extend__:function(b){return b instanceof E?b:b instanceof
c?new C(b):new E(b)},builder:d}),C=e.subclass({className:"basis.template.html.TemplateSwitcher",templateClass:E});B.exports={Template:E,TemplateSwitcher:C}},"4.js":function(e,B,b,k,u,H,A,J,M){function q(b){return b?b instanceof E||b instanceof p:!1}function t(b,a,c,d){var h=b.cultureValues[a];d=d?d+".":"";for(var g in c)if(-1==g.indexOf(".")&&f.call(c,g)){var m=d+g,p=c[g];(h[m]=p)&&("object"==typeof p||Array.isArray(p))&&t(b,a,p,m)}}function x(a){var c;if("string"==typeof a){var d=b.path.extname(a);
".l10n"!=d&&(a=a.replace(new RegExp(d+"([#?]|$)"),".l10n$1"));a=b.resource(a)}b.resource.isResource(a)&&(c=g[a.url]);return c||new I(a)}function y(b,a){b&&!G[b]&&(G[b]=new ca(b,a));return G[b||O]}function v(a){if(a&&O!=a&&-1!=F.indexOf(a)){O=a;for(var c=0,d;d=C[c];c++)d.syncValues();b.Token.prototype.set.call(y,a)}}function n(a){"string"==typeof a&&(a=a.trim().split(" "));if(a.length){var c={},d,h;T={};for(var f=0,g;d=a[f];f++)d=d.split("/"),2<d.length&&(d=d.slice(0,2)),g=d[0],h||(h=g),c[g]=y(g),
T[g]=d;for(g in T)T[g]=b.array.flatten(T[g].map(function(b){return T[b]})).concat(h).filter(function(b,a,c){return!a||-1==c.lastIndexOf(b,a-1)});F=b.object.keys(c);0==O in c&&v(h)}}e=b.Class;var r=b.require("./2.js").Emitter,f=Object.prototype.hasOwnProperty,c=!0;b.resource.extensions[".l10n"]=function(a,d){var h;c=!1;h=x(d);c=!0;return h.update(b.resource.extensions[".json"](a,d))};var h=[],m={},l=b.Token.prototype.set,d={"default":!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},D={"default":"default",
plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},a={plural:!0,"plural-markup":!0},p=e(b.Token,{className:"basis.l10n.ComputeToken",dictionary:null,token:null,parent:"",init:function(a){this.token.computeTokens[this.basisObjectId]=this;b.Token.prototype.init.call(this,a)},get:function(){var b=this.dictionary.getValue(this.getName());a[this.token.getType()]&&(b=String(b).replace(/\{#\}/g,this.value));return b},getName:function(){var b=this.value;a[this.token.getType()]&&
(b=G[O].plural(b));return this.parent+"."+b},getType:function(){var b=this.token.getType();return this.dictionary.types[this.getName()]||D[b]||"default"},getParentType:function(){return this.token.getType()},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];b.Token.prototype.destroy.call(this)}}),E=e(b.Token,{className:"basis.l10n.Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(a,
c,d){b.Token.prototype.init.call(this,d);this.index=h.push(this)-1;this.name=c;this.parent=c.replace(/(^|\.)[^.]+$/,"");this.dictionary=a;this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var a in this.computeTokens)this.computeTokens[a].apply();b.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.dictionary.types[this.name]||D[this.dictionary.types[this.parent]]||"default"},getParentType:function(){return this.parent?
this.dictionary.token(this.parent).getType():"default"},setType:function(){},compute:function(a,c){1==arguments.length&&(c=a,a="");c=b.getter(c);a=String(a).trim().split(/\s+|\s*,\s*/).sort();var d=a.concat(this.basisObjectId,c[b.getter.ID]).join("_");if(m[d])return m[d];for(var h=this,g={},f=function(b){l.call(this,c(b))},p={destroy:function(b){delete g[b.basisObjectId];this.destroy()}},n=0,w;w=a[n];n++)"destroy"!=w&&(p[w]=f);return m[d]=function(b){if(0==b instanceof r)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";
var a=b.basisObjectId,d=g[a];d||(d=g[a]=h.computeToken(c(b)),b.addHandler(p,d));return d}},computeToken:function(b){var a=this.computeTokenClass;a||(a=this.computeTokenClass=p.subclass({dictionary:this.dictionary,token:this,parent:this.name}));return new a(b)},token:function(b){if(a[this.getType()])return this.computeToken(b,this);if(this.dictionary)return this.dictionary.token(this.name+"."+b)},destroy:function(){for(var a in this.computeTokens)this.computeTokens[a].destroy();this.dictionary=this.value=
this.computeTokens=this.computeTokenClass=null;h[this.index]=null;b.Token.prototype.destroy.call(this)}}),C=[],g={},w=new b.Token,I=e(null,{className:"basis.l10n.Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(a){this.tokens={};this.types={};this.cultureValues={};this.index=C.push(this)-1;b.resource.isResource(a)?(this.resource=a,g[a.url]||(g[a.url]=this,w.set(a.url)),c&&a.fetch()):this.update(a||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||
(this.cultureValues[b]={},t(this,b,a[b]));a=a._meta&&a._meta.type||{};b={};for(var c in this.tokens)b[c]=this.tokens[c].getType();this.types={};for(c in a)this.types[c]=1==d[a[c]]?a[c]:"default";for(c in this.tokens)this.tokens[c].getType()!=b[c]&&this.tokens[c].apply();this.syncValues();return this},syncValues:function(){for(var a in this.tokens)l.call(this.tokens[a],this.getValue(a))},getValue:function(a){for(var b=T[O]||[],c=0,d;d=b[c];c++)if((d=this.cultureValues[d])&&a in d)return d[a]},getCultureValue:function(a,
b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new E(this,a,this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;b.array.remove(C,this);this.resource&&(delete g[this.resource.url],this.resource=null)}}),F=[],O=null,G={},T={},S={},Z=[[1,function(){return 0}],[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==a?0:1}],[2,function(a){return 0==a||1==a?
0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>
a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?
3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){S[a]=this},Z[b])});var ca=b.Class(null,{className:"basis.l10n.Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;G[a]||(G[a]=this);this.pluralForm=b||S[a]||S[a.split("-")[0]]||Z[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});b.object.extend(y,new b.Token);y.set=v;n("en-US");v("en-US");B.exports={ComputeToken:p,Token:E,token:function(a){if("#"==a.charAt(0))return h[parseInt(a.substr(1),36)];if(a=a.match(/^(.+?)@(.+)$/))return x(b.path.resolve(a[2])).token(a[1])},
isToken:q,isPluralToken:function(b){return q(b)&&a[b.getType()]},isMarkupToken:function(a){return q(a)&&"markup"==a.getType()},Dictionary:I,dictionary:x,getDictionaries:function(){return C.slice(0)},addCreateDictionaryHandler:w.attach.bind(w),removeCreateDictionaryHandler:w.detach.bind(w),Culture:ca,culture:y,getCulture:function(){return O},setCulture:v,getCultureList:function(){return F.slice(0)},setCultureList:n,pluralForms:Z,onCultureChange:function(a,b,c){y.attach(a,b);c&&a.call(b,O)}}},"5.js":function(e,
B,b,k,u,H,A,J,M){function q(a,b){return new Function(a,b)}var t=Object.prototype.hasOwnProperty;e=b.require("./6.js");var x=b.require("./7.js"),y=e.MARKER,v=e.TYPE_ELEMENT,n=e.TYPE_ATTRIBUTE,r=e.TYPE_ATTRIBUTE_CLASS,f=e.TYPE_ATTRIBUTE_STYLE,c=e.TYPE_ATTRIBUTE_EVENT,h=e.TYPE_TEXT,m=e.TYPE_COMMENT,l=e.TOKEN_TYPE,d=e.TOKEN_BINDINGS,D=e.TOKEN_REFS,a=e.ATTR_NAME,p=e.ATTR_NAME_BY_TYPE,E=e.ELEMENT_NAME,C=e.ELEMENT_ATTRIBUTES_AND_CHILDREN,g=e.CLASS_BINDING_ENUM,w=e.CLASS_BINDING_BOOL,I=e.CLASS_BINDING_INVERT,
F={},O;try{k.document.createTextNode("").x=1,O=!0}catch(S){O=!1}var G=function(){function b(a,c){for(var d=0,h;h=a[d];d++)-1==h.indexOf(":")&&I.push(h+":"+c)}function g(a){var b=e.length,b=w[b]||"r"+b;e.push(b+"="+a);return b}function n(w,I,t){for(var G,B,A,u,Q=0,L=0,z=0,K;K=w[Q];Q++,L++,u=!1){Q?w[Q+1]?(K[l]==w[Q-1][l]&&K[l]==h&&z++,G=I+".childNodes["+(t?L:L+(z?" + "+z+" * TEXT_BUG":""))+"]"):G=I+".lastChild":G=I+".firstChild";if(B=K[D])u=!0,G=g(G),b(B,G);K[d]&&(K[d]&&"number"==typeof K[d]&&(K[d]=
K[D][K[d]-1]),u||(u=!0,G=g(G)),A=[K[l],G,K[d],B?-1!=B.indexOf("element"):!1],F.push(A));I!=x||!O&&K[l]!=v||k.push(G+"."+y);if(K[l]==v){A=-1;u||(G=g(G),A=e.length);for(var V=[],U=[],ha=C,da;da=K[ha];ha++)da[l]==v||da[l]==h||da[l]==m?U.push(da):V.push(da);for(var ha=0,ba;ba=V[ha];ha++){var ja=ba[l];if(ja!=c){da=p[ja]||ba[a];if(B=ba[D])u=!0,b(B,g(G+'.getAttributeNode("'+da+'")'));if(B=ba[d])switch(u=!0,ja){case r:for(ja=0;ba=B[ja];ja++)ba=[2,G,ba[1],da,ba[0]].concat(-1==ba[2]?[]:ba.slice(2)),F.push(ba);
break;case f:for(ja=0;ba=B[ja];ja++){q++;for(var ea=0,Y;Y=ba[0][ea];ea++)F.push([2,G,Y,da,ba[0],ba[1],ba[2],ba[3],q])}break;default:for(q++,ja=0;Y=B[0][ja];ja++)F.push([2,G,Y,da,B[0],B[1],K[E],q])}}}U.length&&n(U,G,t);u||A!=e.length||e.pop()}}}var w="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e,I,F,k,x,q;return function(a,b,c){e=[];I=[];F=[];k=[];x=b||"_";q=0;n(a,x,c);return{path:e,ref:I,binding:F,markedElementList:k}}}(),T=function(){function c(a){return'"'+a.replace(/"/g,'\\"').replace(/\n/g,
"\\n").replace(/\r/g,"\\r")+'"'}function d(a,b,h){var g=[],m=[],p=a[5];a=a[4];for(var l,n,r=0;r<p.length;r++)if("string"==typeof p[r])g.push(c(p[r]));else if(l=a[p[r]],n=l.indexOf(":"),-1==n)g.push("l10n"==b?'"{'+l+'}"':"bool"==b?"(__"+l+'||"")':"__"+l),b||m.push("__"+l+"!==UNSET&&__"+l+"!==undefined");else{var w=null,D=l.substr(n+1).replace(f,function(a,b){w=b;return""});if(w){if(!1===h)return!1;g.push(h[l.substr(n+1)]);b||m.push(h[l.substr(n+1)]+"!==undefined")}else g.push('l10n["'+D+'"]')}1==g.length&&
g.push('""');g=g.join("+");!b&&m.length&&(g=m.join("&&")+"?("+g+'):""');return g}var f=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,m={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},p={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},l={show:'"none"',visible:'"hidden"'},r={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},
D={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(e){function E(a){da[a]=!0;F.push(k+"="+a+"("+b.array(arguments,1)+");")}for(var C={},F,k,q=0,y=[],O=[],G=[],Q,L,z=[],K={},V=0,U,ha={},da={},B=0,u;u=e[B];B++){var ea=u[2],Y=ea.split(":");if("l10n"==Y[0]&&Y[1]){var Y=Y[1],sa=null,ta=Y.replace(f,function(a,b){sa=b;return""});if(sa){G.push(u);0==Y in K&&(Q="$l10n_"+V++,K[Y]=Q,z.push(Q),y.push(Q+'=tools.l10nToken("'+ta+'").computeToken()'),F=C[sa],F||(F=C[sa]=[],y.push("__"+sa+"=UNSET")),
F.push(Q+".set(__"+sa+");"));continue}}O.push(u)}for(B=0;u=G[B];B++){U=u[0];e=u[1];var ea=u[2],ya=u[3],Y=ea.split(":")[1],ea=K[Y];k="_"+q++;Q="__"+ea;F=C[ea];F||(F=C[ea]=[],y.push(Q));U==h?(y.push(k+"="+e),E(D[U],e,k,"value",ya)):(Y=d(u,!1,K),U=u[7],ha[U]||(y.push(k),ha[U]=k),k=ha[U],Q='"'+u[a]+'"',E("bind_attr",e,Q,k,Y))}for(B=0;u=O[B];B++)if(U=u[0],e=u[1],ea=u[2],ya=u[3],-1==["get","set","templateId_"].indexOf(ea)){Y=ea.split(":");G="anim"==Y[0];ta="l10n"==Y[0];G&&(ea=Y[1]);F=t.call(C,ea)?C[ea]:
null;k="_"+q++;Q="__"+ea;if(ta&&Y[1])if(Y=Y[1],sa=null,ta=Y,L||(L={}),C[ta]||(C[ta]=[],C[ta].l10n="$l10n_"+V++,y.push("__"+C[ta].l10n+'=l10n["'+ta+'"]'),L[ta]=[]),F=C[ta],U==h){L[ta].push(e+".nodeValue=value;");F.nodeBind?F.push(e+".nodeValue=value;"):(y.push(k+"="+e),E(D[U],e,k,"value",ya),F.nodeBind=k);continue}else Y=d(u,"l10n",!1),!1!==Y&&L[ta].push("bind_attr("+[e,'"'+u[a]+'"',"NaN",Y]+");");F||(F=C[ea]=[],y.push(Q+"=UNSET"));if(U!=n)if(F.nodeBind)switch(U){case v:E(D[U],e,e,"value!==null?String(value):null");
break;case h:F.push(e+".nodeValue=value;")}else y.push(k+"="+e),E(D[U],e,k,"value",ya),F.nodeBind=k;else switch(Q=u[a],Q){case "role-marker":y.push(k+'=""');E("bind_attr",e,'"'+Q+'"',k,"value?value"+(u[5][1]?"+"+c(u[5][1]):"")+':""');break;case "class":Y="";U="value";U=u[5];Q=u[7];switch(U){case w:case I:var ya=[u[6]],oa=u[4],Ea=Array.isArray(oa)?oa:ya.map(function(a){return oa+a});U=(U==I?"!":"")+'value?"'+Ea[0]+'":""';Q&&(Y=Ea[Q-1]);break;case g:ya=u[8];oa=u[4];Ea=Array.isArray(oa)?oa:ya.map(function(a){return oa+
a});U=ya.map(function(a,b){return'value=="'+a+'"?"'+Ea[b]+'"'}).join(":")+':""';Q&&(Y=Ea[Q-1]);break;default:oa=u[4],U='typeof value=="string"||typeof value=="number"?"'+oa+'"+value:(value?"'+oa+ea+'":"")'}y.push(k+'="'+Y+'"');E("bind_attrClass",e,k,U,G);break;case "style":Y=d(u,"style",K);U=u[8];ha[U]||(ha[U]=k,y.push(k+"="+(l[u[7]]||'""')));u[7]&&(Y=Y.replace(/\+""$/,"")+(r[u[7]]||""));k=ha[U];E("bind_attrStyle",e,'"'+u[6]+'"',k,Y);break;default:G=m[Q],ya=u[6].toLowerCase(),Y=G&&p[Q]?d(u,"bool",
K)+'?"'+Q+'":""':d(u,!1,K),U=u[7],ha[U]||(y.push(k+"=UNSET"),ha[U]=k),k=ha[U],"tabindex"==Q?E("bind_attr",e,'"'+Q+'"',k,Y+"==-1?"+(-1==["input","button","textarea"].indexOf(ya)?'""':"-1")+":"+Y):(u=x.getNamespace(Q))?E("bind_attrNS",e,'"'+u+'"','"'+Q+'"',k,Y):E("bind_attr",e,'"'+Q+'"',k,Y),!G||"*"!=G&&-1==G.indexOf(ya)||F.push("if("+e+"."+Q+"!="+k+")"+e+"."+Q+"="+(p[Q]?"!!"+k:k)+";")}}q=b.object.keys(C);O="";if(q.length){da.resolve=!0;O=[";function set(bindName,value){",'if(typeof bindName!="string")'];
for(ea in C)C[ea].nodeBind&&O.push("if(bindName==="+C[ea].nodeBind+')bindName="'+ea+'";else ');O.push("return;","value=resolve.call(instance,bindName,value,Attaches);","switch(bindName){");for(ea in C)K=C[ea].l10n||ea,O.push('case"'+ea+'":',"if(__"+K+"!==value)","{","__"+K+"=value;",C[ea].join(""),"}","break;");O=O.join("")+"}}"}var C=[],Fa;for(Fa in da)C.push(Fa+"=tools."+Fa);return{allKeys:q,keys:q.filter(function(a){return-1==a.indexOf("@")}),tools:C,vars:y,set:O,l10n:L,l10nCompute:z}}}();B.exports=
{getFunctions:function(a,c,d,h,g){if(c=F[d&&b.path.relative(d)])return c;g=G(a,"_",g);c=T(g.binding);d=g.markedElementList.join("=");h={keys:c.keys,l10nKeys:b.object.keys(c.l10n)};1==a.length&&(g.path[0]="a=_");if(c.l10n){a=[];for(var f in c.l10n)a.push('case"'+f+'":'+c.l10n[f].join("")+"break;");h.createL10nSync=q(["_","l10n","bind_attr","TEXT_BUG"],"var "+g.path+";return function(path, value){switch(path){"+a.join("")+"}}")}h.createInstanceFactory=q("tid createDOM tools l10nMap l10nMarkup getBindings TEXT_BUG".split(" "),
"var UNSET={valueOf:function(){}},"+(c.tools.length?c.tools+",":"")+(c.set?"Attaches=function(){};Attaches.prototype={"+c.keys.map(function(a){return a+":null"})+"};":"set=function(){};")+"return function createTmpl_(id,instance,initL10n){var _=createDOM(),"+(c.l10n?"l10n=initL10n?{}:l10nMap,":"")+g.path.concat(c.vars)+(c.l10nCompute.length?";instance.compute=["+c.l10nCompute+"]":"")+";instance.tmpl={"+[g.ref,"templateId_:id","set:set"]+"}"+(d?";if(instance.context||instance.onAction)"+d+"=(id<<12)|tid":
"")+c.set+(c.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+(c.set?";if(instance.bindings)instance.handler=getBindings(instance,set)":"")+";"+c.l10nCompute.map(function(a){return'set("'+a+'",'+a+")"})+"}");return h}}},"6.js":function(e,B,b,k,u,H,A,J,M){e="basisTemplateId_"+b.genUID();(k=k.document)?(b=k.createElement("div"),b.appendChild(k.createTextNode("a")),b.appendChild(k.createTextNode("a")),
k=1==b.cloneNode(!0).childNodes.length):k=!0;B.exports={MARKER:e,TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:{4:"class",5:"style"},ATTR_TYPE_BY_NAME:{"class":4,style:5},ATTR_VALUE_INDEX:{2:4,4:3,5:3,6:2},ELEMENT_NAME:3,ELEMENT_ATTRIBUTES_AND_CHILDREN:4,TEXT_VALUE:3,COMMENT_VALUE:3,CLASS_BINDING_ENUM:1,CLASS_BINDING_BOOL:2,CLASS_BINDING_INVERT:3,
CLASS_BINDING_EQUAL:4,CLASS_BINDING_NOTEQUAL:5,CLONE_NORMALIZATION_TEXT_BUG:k}},"7.js":function(e,B,b,k,u,H,A,J,M){var q={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};B.exports={namespaceURI:q,getNamespace:function(b,e){if(b){var k=b.indexOf(":");if(-1!=k)return k=b.substr(0,k),q[k]||e&&e.lookupNamespaceURI(k)}}}},"8.js":function(e,B,b,k,u,H,A,J,M){function q(a){var c=m[a];if(!c){var c=y.getElementById(a),d="";c&&"SCRIPT"==c.tagName&&"text/basis-template"==c.type&&(d=c.textContent||
c.text);c=m[a]=b.resource.virtual("tmpl",d||"")}return c}function t(){this.destroyBuilder&&x.call(this);for(var a=this;a=a.attaches_;)a.handler.call(a.context)}function x(){var a=r(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),c=this.destroyBuilder,d={},h=this.builder(a.tokens,d);this.createInstance=h.createInstance;this.clearInstance=h.destroyInstance;this.destroyBuilder=h.destroy;f.add(this.templateId,this,d);var h=a.deps,g=this.deps_;this.deps_=h;if(g)for(var d=0,m;m=g[d];d++)m.bindingBridge.detach(m,
t,this);if(h)for(d=0;m=h[d];d++)m.bindingBridge.attach(m,t,this);a=a.resources;h=this.resources;if(this.resources=a)for(d=0;g=a[d];d++)g=b.resource(g).fetch(),"function"==typeof g.startUse&&g.startUse();if(h)for(d=0;g=h[d];d++)g=b.resource(g).fetch(),"function"==typeof g.stopUse&&g.stopUse();c&&c(!0)}var y=k.document;e=b.Class;var v=b.cleaner,n=b.path;k=b.require("./6.js");u=b.require("./9.js").VERSION;var r=b.require("./9.js").getDeclFromSource;H=b.require("./9.js").makeDeclaration;A=b.require("./9.js").setIsolatePrefixGenerator;
var f=b.require("./a.js");J=b.require("./b.js");var c=J.get,h=[],m={},l=e(null,{className:"basis.template.Template",__extend__:function(a){return a instanceof l?a:a instanceof d?new D(a):new l(a)},source:"",baseURI:"",url:"",attaches_:null,init:function(a){if(4096==h.length)throw"Too many templates (maximum 4096)";this.setSource(a||"");this.templateId=h.push(this)-1},bindingBridge:{attach:function(a,b,c){a.attaches_={handler:b,context:c,attaches_:a.attaches_}},detach:function(a,b,c){for(var d;d=a,
a=a.attaches_;)if(a.handler===b&&a.context===c){d.attaches_=a.attaches_;break}},get:function(a){return(a=a.source)&&a.bindingBridge?a.bindingBridge.get(a):a}},createInstance:function(a,b,c,d,h){x.call(this);return this.createInstance(a,b,c,d,h)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(a){var b=this.source;if(b!=a){if("string"==typeof a){var d=a.match(/^([a-z]+):/);if(d)switch(a=a.substr(d[0].length),d[1]){case "id":a=q(a);break;case "path":a=
c(a)}}b&&b.bindingBridge&&(this.baseURI=this.url="",b.bindingBridge.detach(b,t,this));a&&a.bindingBridge&&(a.url&&(this.url=a.url,this.baseURI=n.dirname(a.url)+"/"),a.bindingBridge.attach(a,t,this));this.source=a;t.call(this)}},destroy:function(){this.destroyBuilder&&(f.remove(this.templateId),this.destroyBuilder());this.source=this.resources=this.createInstance=this.attaches_=null}}),d=function(a){b.object.extend(this,a)},D=b.Class(null,{className:"basis.template.TemplateSwitcher",ruleRet_:null,
templates_:null,templateClass:l,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,c;c=a[b];b++)this.ruleEvents[c]=!0}v.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}});v.add({destroy:function(){for(var a=
0,b;b=h[a];a++)b.destroy();h=null}});B.exports={DECLARATION_VERSION:u,TYPE_ELEMENT:k.TYPE_ELEMENT,TYPE_ATTRIBUTE:k.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:k.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:k.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:k.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:k.TYPE_TEXT,TYPE_COMMENT:k.TYPE_COMMENT,TOKEN_TYPE:k.TOKEN_TYPE,TOKEN_BINDINGS:k.TOKEN_BINDINGS,TOKEN_REFS:k.TOKEN_REFS,ATTR_NAME:k.ATTR_NAME,ATTR_VALUE:k.ATTR_VALUE,ATTR_NAME_BY_TYPE:k.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:k.CLASS_BINDING_ENUM,
CLASS_BINDING_BOOL:k.CLASS_BINDING_BOOL,ELEMENT_NAME:k.ELEMENT_NAME,ELEMENT_ATTRS:k.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:k.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:k.TEXT_VALUE,COMMENT_VALUE:k.COMMENT_VALUE,TemplateSwitchConfig:d,TemplateSwitcher:D,Template:l,switcher:function(a,b){b||(b=a,a=null);"string"==typeof a&&(a=a.split(/\s+/));return new d({rule:b,events:a})},getDeclFromSource:r,makeDeclaration:H,resolveResource:function(a,d){return/^#\d+$/.test(a)?h[a.substr(1)]:
/^id:/.test(a)?q(a.substr(3)):/^[a-z0-9\.]+$/i.test(a)&&!/\.tmpl$/.test(a)?c(a):b.resource(b.resource.resolveURI(a,d,'<b:include src="{url}"/>'))},setIsolatePrefixGenerator:A,resolveTemplateById:f.resolveTemplateById,resolveObjectById:f.resolveObjectById,resolveTmplById:f.resolveTmplById,SourceWrapper:J.SourceWrapper,Theme:J.Theme,theme:J.theme,getThemeList:J.getThemeList,currentTheme:J.currentTheme,setTheme:J.setTheme,onThemeChange:J.onThemeChange,define:J.define,get:J.get,getPathList:J.getPathList}},
"9.js":function(e,B,b,k,u,H,A,J,M){function q(){return b.genUID()+"__"}function t(a){for(var b=[],c=0;c<a.length;c++)b.push(Array.isArray(a[c])?t(a[c]):a[c]);return b}function x(a,c,d,h){var g=a,f;a.bindingBridge&&(c="baseURI"in a?a.baseURI:"url"in a?b.path.dirname(a.url):c,f="url"in a?a.url:f,g=a.bindingBridge.get(a));Array.isArray(g)?(d&&(g=t(g)),g={tokens:g}):"object"==typeof g&&Array.isArray(g.tokens)||(g=String(g));"string"==typeof g&&(g=fa(g,c,h,f,a));return g}var y=Object.prototype.hasOwnProperty,
v=b.array.search,n=b.array.add,r=b.array.remove,f=b.require("./10.js"),c=b.require("./11.js");e=b.require("./6.js");var h=e.TYPE_ELEMENT,m=e.TYPE_ATTRIBUTE,l=e.TYPE_ATTRIBUTE_CLASS,d=e.TYPE_ATTRIBUTE_STYLE,D=e.TYPE_ATTRIBUTE_EVENT,a=e.TYPE_TEXT,p=e.TYPE_COMMENT,E=e.TOKEN_TYPE,C=e.TOKEN_BINDINGS,g=e.TOKEN_REFS,w=e.ATTR_NAME,I=e.ATTR_VALUE,F=e.ATTR_NAME_BY_TYPE,O=e.ATTR_TYPE_BY_NAME,G=e.ATTR_VALUE_INDEX,T=e.ELEMENT_ATTRIBUTES_AND_CHILDREN,S=e.TEXT_VALUE,Z=e.CLASS_BINDING_ENUM,ca=e.CLASS_BINDING_BOOL,
ua=e.CLASS_BINDING_INVERT,la=/^[a-z_][a-z0-9_\-]*$/i,ia=/^event-(.+)$/,pa=function(){},fa=function(){function e(a){return(a.prefix?a.prefix+":":"")+a.name}function k(a){return(a=a.refs)&&a.length?a:0}function t(a,b){a[g]||(a[g]=[]);n(a[g],b);"element"!=b&&(a[C]=1==a[g].length?b:0)}function u(a,b){var c=a[g].indexOf(b);if(-1!=c){var d=a[C]&&"number"==typeof a[C];a[g].splice(c,1);d&&c==a[C]-1&&(a[C]=b,d=!1);a[g].length?d&&(a[C]-=c<a[C]-1):a[g]=0}}function B(a){var b={};if(a.attrs)for(var c=0,d;d=a.attrs[c];c++)b[e(d)]=
d.value;return b}function A(a){var b={};if(a.attrs)for(var c=0,d;d=a.attrs[c];c++)b[e(d)]=d;return b}function H(a,b){for(var c=0;c<b.length;c++)n(a,b[c])}function J(a,b,c,d){for(var z=0,h;h=b[z];z++)h[1]!==ba&&(h[1]=c+h[1]),h[3]||(h[3]=d);a.unshift.apply(a,b)}function M(a,c,d,z,h){var g=c.children[0],f=d?b.resource.resolveURI(d,a.baseURI,'<b:style src="{url}"/>'):b.resource.virtual("css",g?g.value:"",a.sourceUrl).url;a.resources.push([f,z,c,null,d?!1:g||!0,h]);return f}function Q(c,g,f){function l(a){var b=
{};a=(a||"").trim().split(/\s*,\s*/);for(var c=0;c<a.length;c++){var d=a[c].split(/\s*:\s*/);if(2!=d.length)return{};b[d[0]]=d[1]}return b}function V(a,b){for(var c="number"==typeof a[0]?T:0,d,z;d=a[c];c++)if(z=d[E]==D?"event-"+d[1]:F[d[E]]||d[w],z==b)return d}function oa(a,b){var c=a[C];if(c)for(var d=0,z;z=c[d];d++)if(z[2]==b)return z}function Ea(a,b,c,z,N){var h=V(a,"style");h||(h=[d,0,0],a.push(h));a=b.binding;var g=!1,g=b.name==z;z=h[3];if(a&&a[0].length==a[1].length){var f=h[C];a=a.concat(c,
b.name);f?(r(f,oa(h,c)),f.push(a)):h[C]=[a]}else g=!(g^""===b.value);z&&(z=z.replace(new RegExp(c+"\\s*:\\s*[^;]+(;|$)"),""));g&&(z=(z?z+" ":"")+N);h[3]=z}function Fa(a,b){"show"!=b.name&&"hide"!=b.name||Ea(a,b,"display","show","display: none;");"visible"!=b.name&&"hidden"!=b.name||Ea(a,b,"visibility","visible","visibility: hidden;")}function Ha(a,b){/[\/\(\)]/.test(b)||a.push([m,[["$role"],[0,b?"/"+b:""]],0,"role-marker"])}function Ca(a,b){for(var c=[],d,z,N,h=0,g;g=a.attrs[h];h++)if("b"==g.prefix)switch(g.name){case "ref":g=
(g.value||"").trim().split(/\s+/);for(N=0;N<g.length;N++)t(b,g[N]);break;case "show":case "hide":d=g;break;case "visible":case "hidden":z=g;break;case "role":Ha(c,g.value||"",g)}else(N=g.name.match(ia))?N=N[1]==g.value?[D,N[1]]:[D,N[1],g.value]:(N=[g.type,g.binding,0],g.type==m&&N.push(e(g)),!g.value||f.optimizeSize&&g.binding&&g.type==m||N.push(g.value)),c.push(N);d&&Fa(c,d);z&&Fa(c,z);return c.length?c:0}function Ga(a,c,d,z){var N=B(c),g=A(c);d&&(N.name=d);if(N.name&&la.test(N.name)){var P=Da[N.ref||
"element"];if(P&&P.token[E]==h){d=P.token;var l=N.name.match(ia),K="class"==N.name||"style"==N.name,p=l?D:O[N.name]||m;c=G[p]||I;(a=d&&V(d,N.name))&&"set"==z&&(r(d,a),a=null);a||"set"!=z&&"append"!=z||(z="set",l?a=[p,l[1]]:(a=[p,0,0,p==m?N.name:""],p==m&&a.push("")),d||(d=[],P.token.push(d)),d.push(a));switch(z){case "set":if(a[E]==D){N.value==l[1]?a.length=2:a[c]=N.value;break}g=g.value||{};a[C]=g.binding||0;f.optimizeSize&&a[C]&&!K?a.length=c:a[c]=g.value||"";if(K&&!a[C]&&!a[c]){r(d,a);break}break;
case "append":g=g.value||{};P=g.value||"";g=g.binding;if(!l)if(g)if(p=a[C])switch(N.name){case "style":z=0;for(var w;w=g[z];z++)r(p,oa(a,w[2])),p.push(w);break;case "class":p.push.apply(p,g);break;default:for(g[0].forEach(function(a){n(this,a)},p[0]),z=0;z<g[1].length;z++)w=g[1][z],"number"==typeof w&&(w=p[0].indexOf(g[0][w])),p[1].push(w)}else a[C]=g,K||a[C][1].unshift(a[c]);else!K&&a[C]&&a[C][1].push(N.value);if(P)if(l||"class"==N.name){N=(a[c]||"").trim();l=P.trim();N=N?N.split(/\s+/):[];l=l?l.split(/\s+/):
[];for(z=0;z<l.length;z++)g=l[z],b.array.remove(N,g),N.push(g);a[c]=N.join(" ")}else a[c]=(a[c]||"")+(a[c]&&K?" ":"")+P;!K||a[C]||a[c]||r(d,a);break;case "remove-class":if(a){g=g.value||{};K=(a[c]||"").split(" ");N=(g.value||"").split(" ");l=a[C];if(g.binding&&l){for(z=0;P=g.binding[z];z++)for(p=l.length-1;w=l[p];p--){var e=w[3]||w[1];w[0]===P[0]&&e===P[1]&&l.splice(p,1)}l.length||(a[C]=0)}for(z=0;z<N.length;z++)r(K,N[z]);a[c]=K.join(" ");l.length||K.length||r(d,a)}break;case "remove":a&&r(d,a)}}}}
for(var ha=[],N=0,P,za;P=c[N];N++){var ma=k(P),Aa=ma&&1==ma.length?ma[0]:0;switch(P.type){case h:if("b"==P.prefix){var ka=B(P),L=A(P);switch(P.name){case "style":var R=!0;if(ka.options){var Ba=l(ka.options),Ia;for(Ia in Ba)R=R&&Ba[Ia]==f.includeOptions[Ia]}R&&(R=ka.namespace?"namespace":"ns",Ba=(R=ka[R])?ba:"",L=M(g,P,ka.src,Ba,R),R&&(0==L in ba&&(ba[L]=q()),g.styleNSPrefix[R]={name:R,prefix:ba[L]}));break;case "isolate":g.isolate||(g.isolate=ka.prefix||f.isolate||q());break;case "l10n":ka.src&&(f.dictURI=
b.resource.resolveURI(ka.src,g.baseURI,"<b:"+P.name+' src="{url}"/>'));break;case "define":if("name"in ka&&"type"in ka&&!y.call(f.defines,ka.name)){P=ka.from||ka.name;var ma=ka.name,S=!1;switch(ka.type){case "bool":S=[P,ca,ma,"true"==ka["default"]?1:0];break;case "invert":S=[P,ua,ma,ka["default"]&&"true"!=ka["default"]?0:1];break;case "enum":if(0=="values"in ka)break;Aa=(ka.values||"").trim();if(!Aa)break;Aa=Aa.split(/\s+/);S=Aa.indexOf(ka["default"]);S=[P,Z,ma,S+1,Aa]}S&&(f.defines[ma]=S)}break;
case "text":P=P.children[0];c[N--]=b.object.extend(P,{refs:(ka.ref||"").trim().split(/\s+/),value:"notrim"in ka?P.value:P.value.replace(/^\s*[\r\n]+|[\r\n]+\s*$/g,"")});break;case "include":if(ma=ka.src){var ja=pa(ma,g.baseURI);if(!ja)continue;if(-1==da.indexOf(ja)){ma=L.isolate?L.isolate.value||q():"";Aa=ka.options?l(ka.options):null;S=b.object.merge(f,{includeOptions:Aa});S=x(ja,"",!0,S);n(g.deps,ja);g.includes.push({token:P,resource:ja,nested:S.includes});S.deps&&H(g.deps,S.deps);S.warns&&g.warns.push.apply(g.warns,
S.warns);S.resources&&0=="no-style"in ka&&J(g.resources,S.resources,ma,P);var ja=b.array(P.children),fa={prefix:q()},Da=K(S.tokens,fa),Ka;for(Ka in S.styleNSPrefix)g.styleNSPrefix[fa.prefix+Ka]=b.object.merge(S.styleNSPrefix[Ka],{});ma&&U(S.tokens,ma);for(var Na in L)switch(Na){case "class":ja.unshift({type:h,prefix:"b",name:"append-class",attrs:[b.object.complete({name:"value"},L["class"])]});break;case "id":ja.unshift({type:h,prefix:"b",name:"set-attr",attrs:[{type:m,name:"name",value:"id"},b.object.complete({name:"value"},
L.id)]});break;case "ref":Da.element&&ka.ref.trim().split(/\s+/).map(function(a){t(Da.element.token,a)});break;case "show":case "hide":case "visible":case "hidden":(P=(R=Da.element)&&R.token)&&P[E]==h&&Fa(P,L[Na]);break;case "role":var W=L.role.value;W&&(/[\/\(\)]/.test(W)||z(S.tokens,W,L.role,void 0))}for(ka=0;L=ja[ka];ka++)if(L.type==h&&"b"==L.prefix)switch(L.name){case "style":W=B(L);R=A(L);R=!0;if(W.options)for(Ia in Ba=l(W.options),Ba)R=R&&Ba[Ia]==Aa[Ia];R&&(R=W.namespace?"namespace":"ns",Ba=
(R=W[R])?ba:ma,L=M(g,L,W.src,Ba,R),R&&(0==L in ba&&(ba[L]=q()),g.styleNSPrefix[fa.prefix+R]={name:R,prefix:ba[L]}));break;case "replace":case "remove":case "before":case "after":Ba="replace"==L.name||"remove"==L.name;W=B(L);if(R=(R="ref"in W||!Ba?W.ref:"element")&&Da[R])W=R.owner,R=W.indexOf(R.token),-1!=R&&(R=[R+("after"==L.name),Ba],"remove"!=L.name&&(R=R.concat(Q(L.children,g,f)||[])),W.splice.apply(W,R));break;case "prepend":case "append":W=B(L);(P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)&&
P[E]==h&&(W=Q(L.children,g,f)||[],"prepend"==L.name?P.splice.apply(P,[T,0].concat(W)):P.push.apply(P,W));break;case "show":case "hide":case "visible":case "hidden":W=B(L);if((P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)&&P[E]==h){if(!A(L).expr)break;Fa(P,b.object.complete({name:L.name},A(L).expr))}break;case "attr":case "set-attr":Ga(P,L,!1,"set");break;case "append-attr":Ga(P,L,!1,"append");break;case "remove-attr":Ga(P,L,!1,"remove");break;case "class":case "append-class":Ga(P,L,"class",
"append");break;case "set-class":Ga(P,L,"class","set");break;case "remove-class":R=A(L);if(W=R.value)W.value=W.value.split(/\s+/).map(function(a){return 0<a.indexOf(":")?fa.prefix+a:a}).join(" "),W.binding&&W.binding.forEach(function(a){0<a[0].indexOf(":")&&(a[0]=fa.prefix+a[0])}),W.map_&&W.map_.forEach(function(a){0<a.value.indexOf(":")&&(a.value=fa.prefix+a.value)});Ga(P,L,"class","remove-class");break;case "add-ref":W=B(L);(P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)&&W.name&&t(P,W.name);
break;case "remove-ref":W=B(L);(P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)&&u(P,W.name||W.ref);break;case "role":case "set-role":W=B(L);if(P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)r(P,V(P,"role-marker")),Ha(P,W.value||"",L);break;case "remove-role":W=B(L),(P=(R=(R="ref"in W?W.ref:"element")&&Da[R])&&R.token)&&r(P,V(P,"role-marker"))}else S.tokens.push.apply(S.tokens,Q([L],g,f)||[]);Da.element&&u(Da.element.token,"element");ha.push.apply(ha,S.tokens)}}}continue}za=[1,Aa,ma,e(P)];
za.push.apply(za,Ca(P,za,f.optimizeSize)||[]);za.push.apply(za,Q(P.children,g,f)||[]);break;case a:ma&&2==ma.length&&v(ma,"element")&&(Aa=ma[+!ma.lastSearchIndex]);za=[3,Aa,ma];ma&&P.value=="{"+ma.join("|")+"}"||za.push(P.value);break;case p:if(f.optimizeSize&&!Aa&&!ma)continue;za=[8,Aa,ma];f.optimizeSize||ma&&P.value=="{"+ma.join("|")+"}"||za.push(P.value)}for(;0===za[za.length-1];)za.pop();ha.push(za)}return ha.length?ha:0}function L(a,b,c){if("string"==typeof a){var d=a.split(":"),z=d[1];if(z&&
"l10n"==d[0]){if(2==d.length&&-1==z.indexOf("@")){if(!b)return!1;z=z+"@"+b;a="l10n:"+z}n(c,z)}}return a}function z(a,b,c,d,g){g=g||0;for(var f;f=a[g];g++)switch(f[E]){case h:z(f,b,c,d,T);break;case m:if("role-marker"==f[w]){f=f[C][1];var l=f[1];f[1]="/"+b+(l?"/"+l:"")}}}function K(a,b,c,d){function z(a){if(0>=a.indexOf(":"))return a;var c=a.split(":")[0];b.map[b.prefix+c]=c;return b.prefix+a}c||(c={});d=d||0;for(var f;f=a[d];d++){var m=f[E],p=f[g];if(b&&m==l){var n=f[C],w=G[m];f[w]&&(f[w]=f[w].split(/\s+/).map(z).join(" "));
if(n)for(var w=0,r;r=n[w];w++)r[0]=z(r[0])}if(m!=D&&p)for(n=p.length-1;w=p[n];n--)-1!=w.indexOf(":")?u(f,w):(c[w]&&u(c[w].token,w),f[C]==w&&(f[C]=n+1),c[w]={owner:a,token:f});m===h&&K(f,b,c,T)}return c}function V(b,c,d,z){z=z||0;for(var g;g=b[z];z++){var f=g[E],p=g[C];switch(f){case h:V(g,c,d,T);break;case a:if(p){var K=L(p,d.dictURI,c.l10n);g[C]=K||0;!1===K&&(g[S]="{"+p+"}")}break;case m:if(p)for(var f=p[0],w=f.length-1;0<=w;w--)if(K=L(f[w],d.dictURI,c.l10n),!1===K){for(var n=p[1],K=0;K<n.length;K++)"number"==
typeof n[K]&&(n[K]==w?n[K]="{"+f[w]+"}":n[K]>w&&--n[K]);f.splice(w,1);f.length||(g[C]=0)}else f[w]=K;break;case l:if(p){for(K=0;w=p[K];K++)if(!(2<w.length)){var r=w[1].split(":"),n=r.pop(),r=r.pop()||"";y.call(d.defines,n)?(n=d.defines[n],w[1]=(r?r+":":"")+n[0],w.push.apply(w,n.slice(1))):w.push(0)}d.optimizeSize&&(p=G[f],g[p]||(g.length=p))}}}}function U(a,b,c,d,z){function g(a){if(-1==a.indexOf(":"))return b+a;if(!c)return a;a=a.split(":");if(!a[0])return a[1];var d=y.call(c.styleNSPrefix,a[0])?
c.styleNSPrefix[a[0]]:!1;return d?d.prefix+a[1]:!1}z=z||0;for(var f;f=a[z];z++){var m=f[E];m==h&&U(f,b,c,d,T);if(m==l){var p=f[C],m=G[m];f[m]&&(f[m]=f[m].split(/\s+/).map(function(a){return g(a,a,f.valueLocMap?f.valueLocMap[a]:null)}).filter(Boolean).join(" "));if(p){for(var m=0,K,w,n;K=p[m];m++)w=g(K[0],K[0]+"{"+K[1]+"}",K.loc),!1===w?(n=!0,p[m]=null):K[0]=w;n&&(p=p.filter(Boolean),f[C]=p.length?p:0)}}}}function ha(a){return a[0]+"|"+a[1]}var da=[],ba={},ja={};return function(d,z,g,h,m){var l=[];
g=b.object.slice(g);g.includeOptions=g.includeOptions||{};g.defines={};g.dictURI=h?b.path.resolve(h):z||"";z={sourceUrl:h,baseURI:z||"",tokens:null,includes:[],deps:[],isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:l};g.dictURI&&(h=b.path.extname(g.dictURI))&&".l10n"!=h&&(g.dictURI=g.dictURI.substr(0,g.dictURI.length-h.length)+".l10n");d.templateTokens||(d=f(String(d),{loc:!!g.loc,range:!!g.range}));da.push(!0!==m&&m||{});z.tokens=Q(d,z,g);da.pop();z.tokens||(z.tokens=[[a,0,0,""]]);t(z.tokens[0],
"element");K(z.tokens);V(z.tokens,z,g);if(0==da.length){U(z.tokens,z.isolate||"",z,g);if(z.isolate)for(d=0;g=z.resources[d];d++)g[1]!==ba&&(g[1]=z.isolate+g[1]);z.resources=z.resources.filter(function(a,c,d){return a[0]&&!b.array.search(d,ha(a),ha,c+1)}).map(function(a){var d=a[0],z=a[1];a=z===ba;var g;if(a&&(z=ba[d],d in ja))return ja[d].url;if(!z)return d;var h=b.resource.virtual("css","").ready(function(a){a.url=d+"?isolate-prefix="+z;a.baseURI=b.path.dirname(d)+"/";a.map=g;f()}),f=b.resource(d).ready(function(a){a=
c(a.cssText||"",z,!0);g=a.map;h.update(a.css)});a&&(ja[d]=h);return h.url})}l.length||(z.warns=!1);return z}}();b.resource("./8.js").ready(function(a){pa=a.resolveResource});B.exports={VERSION:3,makeDeclaration:fa,getDeclFromSource:x,setIsolatePrefixGenerator:function(a){q=a}}},"10.js":function(e,B,b,k,u,H,A,J,M){function q(a){for(var b,c=[],d=[],g={},h=0;h<a.length;h++)h%2?(b=a[h],g[b]||(g[b]=c.length,c.push(b)),d.push(g[b])):a[h]&&d.push(T(a[h]));return[c,d]}function t(a,b,c){function d(a){return a.attrs.reduce(function(a,
b){a[(b.prefix?b.prefix+":":"")+b.name]=b.value;return a},{})}function h(){var a=1,b=0;e=Array(c.length);D=Array(c.length);for(var d=0;d<c.length+1;d++)e[d]=a,D[d]=b,"\n"===c[d]?(a++,b=0):b++}function f(a){return{line:e[a],column:D[a]}}function m(a){return{start:f(a.start_),end:f(a.end_)}}function l(a){b.loc&&(a.loc=m(a.range),a.valueRange&&(a.valueLoc=m(a.valueRange)));b.range?(a.range=[a.range.start_,a.range.end_],a.valueRange&&(a.valueRange=[a.valueRange.start_,a.valueRange.end_])):(delete a.range,
delete a.valueRange)}function p(a){for(var b,c,h=0;b=a[h++];c=b){if(b.type==x){for(var f=d(b),m=0,e;e=b.attrs[m++];){var D=e.name;if("b"==b.prefix&&"value"==e.name){var z=b.name.match(G);z&&(D="class"==z[1]?"class":f.name)}var z=e,K=l,V=z.value,C=0,k=void 0,E=void 0;if(V)switch(D){case "class":for(var k=z.valueRange.start_,t=/(\s*)(\S+)/g,u=[],B=[],E=void 0,C=[];E=t.exec(V);){var A=E[2],sa={value:A,binding:!1,range:{start_:k+=E[1].length,end_:k+=A.length}};K(sa);(E=A.match(w))?(E=[E[1]||"",E[2]],
E.info_=sa,sa.binding=!0,C.push(E)):u.push(A);B.push(sa)}V=u.join(" ");z.map_=B;break;case "style":K=[];C=[];if(k=V.match(I))for(t=0,E=void 0;E=k[t];t++)E=E.match(F),u=E[1],V=E[2].trim(),E=V.split(O),1<E.length?(V=q(E),V.push(u),C.push(V)):K.push(u+": "+T(V));(V=K.join("; "))&&(V+=";");break;default:k=V.split(g),1<k.length?C=q(k):V=T(V)}C&&!C.length&&(C=0);z.binding=C;z.value=V;z.type=r[D]||y;l(e)}p(b.children)}b.type==v&&(b.value=T(b.value),b.refs||!c||c.type!=v||c.refs||(c.value+=b.value,c.end_=
b.end_,a.splice(--h,1)));b.type==n&&(b.value=T(b.value));l(b)}}var e,D;b.loc&&h();p(a)}e=b.require("./6.js");var x=e.TYPE_ELEMENT,y=e.TYPE_ATTRIBUTE,v=e.TYPE_TEXT,n=e.TYPE_COMMENT,r=e.ATTR_TYPE_BY_NAME,f=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,c=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,h=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,m=/(.|[\r\n])*?--\x3e/g,l=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,
d=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,D=/"((?:(\\")|[^"])*?)"\s*/g,a=/\\"/g,p=/^/g,E=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,C={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},g=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,w=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,I=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,F=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,
O=/\{([a-z_][a-z0-9_]*)\}/i,G=/^(?:|append-|set-|remove-)(class|attr)$/,T=function(){function a(b,g){c[g]||("#"==g.charAt(0)?c[g]=String.fromCharCode("x"==g.charAt(1)||"X"==g.charAt(1)?parseInt(g.substr(2),16):g.substr(1)):d&&(d.innerHTML=b,c[g]=d.firstChild?d.firstChild.nodeValue:b));return c[g]||b}var c={},d=b.NODE_ENV?null:k.document.createElement("div"),g=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;return function(b){return String(b).replace(g,a)}}();B.exports=function(b,g){var w=[],r=[],e={children:w},
k=!1,I,F=f,q=0,O=0,u,B,G,A;g&&!1===g.trim||(q=O=b.match(/^\s*/)[0].length,b=b.trimRight());for(;q<b.length||F!=f;)if(G=F.lastIndex=q,(A=F.exec(b))&&A.index===q){q=F.lastIndex;switch(F){case f:u=G+A[1].length;O!=u&&(G=O==G?A[1]:b.substring(O,u),(G=G.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&e.children.push({type:v,value:G,range:{start_:O,end_:u}}));O=u;A[3]?e.children.push({type:v,refs:["l10n:"+A[3]],value:"{l10n:"+A[3]+"}",range:{start_:u,end_:q}}):"{"==A[2]?(B=q-1,e.children.push(I={type:v,range:{start_:u,
end_:u}}),F=d):A[4]?"/"==A[4]?(I=null,F=l):(e.children.push(I={type:n,range:{start_:u,end_:u}}),A[5]?(B=q-A[5].length,F=d):(B=q,F=m)):A[2]&&(k=!0,r.push(e),e.children.push(I={type:x,attrs:[],children:[],range:{start_:u,end_:u}}),e=I,F=c);break;case l:A[1]!==(e.prefix?e.prefix+":":"")+e.name?e.children.push({type:v,value:"</"+A[0],range:{start_:G-2,end_:G+A[0].length}}):e=r.pop();F=f;break;case c:case h:if(":"==A[2]){I.prefix?F=p:I.prefix=A[1];break}A[1]&&(I.name=A[1],I.range.end_=G+A[1].length,I.type==
y&&e.attrs.push(I));if("{"==A[2]){F=I.type==x?d:p;break}if(A[3]){k=!1;e.range.end_=q;if("/>"==A[3]||!e.prefix&&E.test(e.name))e=r.pop();else if("b"==e.prefix&&e.name in C){F=C[e.name];break}F=f;break}if("="==A[2]){F=D;break}I={type:y,range:{start_:q,end_:q}};F=h;break;case m:I.value=b.substring(B,q-3);I.range.end_=q;F=f;break;case d:I.refs?I.refs.push(A[1]):I.refs=[A[1]];"|"!=A[2]&&(I.type==v?(q-=A[2].length-1,I.value=b.substring(B,q),I.range.end_=q,F=f):I.type==n?F=m:I.type==y&&"="==b[q]?(q++,F=
D):(I={type:y,range:{start_:q,end_:q}},F=h));break;case D:I.value=A[1].replace(a,'"');I.range.end_=q;I.valueRange={start_:G+1,end_:G+1+A[1].length};I={type:y,range:{start_:q,end_:q}};F=h;break;case C.text:case C.style:e.children.push({type:v,value:A[1],range:{start_:G,end_:G+A[1].length}});e=r.pop();F=f;break;default:throw"Invalid or unsupported syntax";}F==f&&(O=q)}else if(F==d&&I&&I.type==n)F=m;else{k&&(e=r.pop());I&&e.children.pop();if(I=e.children.pop())I.type!=v||I.refs?e.children.push(I):O-=
I.value.length;k=!1;F=f}O!=q&&e.children.push({type:v,value:b.substring(O,q),range:{start_:O,end_:q}});t(w,g||{},b);w.templateTokens=!0;return w}},"11.js":function(e,B,b,k,u,H,A,J,M){var q=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,t=/^(media|supports|document)\b/i,x=/^(not|has|matches|nth-child|nth-last-child)\(/i;B.exports=function(e,k,n){function r(a,b){var c=e.indexOf(a,b);g=-1!==c?c+a.length:p.length}function f(){var a=p[g];if('"'===a||"'"===a){for(g++;g<
E&&p[g]!==a;g++)"\\"===p[g]&&g++;return!0}}function c(){var a=p[g];if("("===a)return r(")",g+1),!0;if("["===a){for(g++;g<E&&"]"!==p[g];g++)f();return!0}}function h(){if("/"===p[g]&&"*"===p[g+1])return r("*/",g+2),!0}function m(){if(":"===p[g]){var a=e.substr(g+1,15).match(x);if(a)for(g+=a[0].length+1;g<E&&")"!=p[g];g++)h()||c()||m()||l();return!0}}function l(){if("."===p[g])return e.substr(g+1,8).match(q)&&(g++,D[g+a.length/2*k.length-1]=g,a.push(e.substring(C,g),k),C=g),!0}function d(a){for(w=!1;g<
E;g++){var b;if(!(b=h()))if("@"!==p[g])b=void 0;else{if(b=e.substr(g+1,8).match(t))g+=b[0].length,w=!0;b=!0}if(!(b||m()||c()||f()||l())){if(a&&"}"==p[g])break;if("{"===p[g])if(w)g++,d(!0);else for(g++;g<E&&"}"!==p[g];g++)f()||c()}}}var D={},a=[],p=e.split(""),E=p.length,C=0,g=0,w;k||(k=b.genUID()+"__");d(!1);a=a.join("")+e.substring(C);return n?{css:a,map:D,prefix:k}:a}},"a.js":function(e,B,b,k,u,H,A,J,M){function q(b){var e=t[b&4095];return e&&e.instances[b>>12]}var t={};B.exports={add:function(b,
e,k){t[b]={template:e,instances:k}},remove:function(b){delete t[b]},resolveActionById:function(b){return(b=q(b))&&{context:b.context,action:b.action}},resolveTemplateById:function(b){return(b=t[b&4095])&&b.template},resolveObjectById:function(b){return(b=q(b))&&b.context},resolveTmplById:function(b){return(b=q(b))&&b.tmpl}}},"b.js":function(e,B,b,k,u,H,A,J,M){function q(){var c=b.array(arguments).join("."),h=r[c];h||(h=new l("",c),r[c]=h);return h}function t(b,c){for(var a=[],h={},f=[],m=0;m<c.length;m++)h[c[m]]||
(h[c[m]]=!0,f.push(c[m]));a.source=f.join("/");h={base:!0};for(f=0;f<c.length;f++)m=c[f]||"base",m==b||h[m]||(h[m]=!0,a.push(m),v(m),c.splice.apply(c,[f+1,0].concat(n[m].fallback)));a.unshift(b);"base"!=b&&a.push("base");a.value=a.join("/");return a}function x(b,c){for(var a=n[b].sourcesList,h=0,f;f=a[h];h++)if(f.hasOwnProperty(c))return f[c];return""}function y(){for(var b in r)q(b).set()}function v(d){d||(d="base");if(n[d])return n[d].theme;if(!/^([a-z0-9\_\-]+)$/.test(d))throw"Bad name for theme - "+
d;var l={},a=[l],p=new m;n[d]={theme:p,sources:l,sourcesList:a,fallback:[]};var e=function(a,b){0==a in l&&(l[a]=b,-1!=n[c].fallback.indexOf(d)&&q(a).set());return q(a)};b.object.extend(p,{name:d,fallback:function(a){if(p!==h&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],f={},b=t(d,b);if(n[d].fallback.source!=b.source){n[d].fallback.source=b.source;for(var m in n){var l=n[m].fallback,b=t(m,(l.source||"").split("/"));if(b.value!=l.value){f[m]=!0;n[m].fallback=b;l=n[m].sourcesList;l.length=
b.length;for(var e=0;e<l.length;e++)l[e]=n[b[e]].sources}}}for(m in f)if(-1!=n[c].fallback.indexOf(m)){y();break}}b=n[d].fallback.slice(1);b.source=n[d].fallback.source;return b},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var c=a,d=b,h={},f;for(f in d)d.hasOwnProperty(f)&&(h[f]=e(c+"."+f,d[f]));return h}return 1==arguments.length?q(a):e(a,b)}if("object"==typeof a){d=a;for(c in d)d.hasOwnProperty(c)&&e(c,d[c]);return p}},apply:function(){if(d!=
c){c=d;y();for(var a=0,b;b=f[a];a++)b.fn.call(b.context,d)}return p},getSource:function(a,b){return b?x(d,a):l[a]},drop:function(a){l.hasOwnProperty(a)&&(delete l[a],-1!=n[c].fallback.indexOf(d)&&q(a).set())}});n[d].fallback=t(d,[]);a.push(n.base.sources);return p}var n={},r={},f=[],c="base",h,m=b.Class(null,{className:"basis.template.theme.Theme",get:q}),l=b.Class(b.Token,{className:"basis.template.theme.SourceWrapper",path:"",url:"",baseURI:"",init:function(c,h){this.path=h;b.Token.prototype.init.call(this,
"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var d=x(c,this.path);this.value!=d&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,l.prototype.apply,this),this.url=(this.value=d)&&d.url||"",this.baseURI=("object"==typeof d||"function"==typeof d)&&"baseURI"in d?d.baseURI:b.path.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,l.prototype.apply,
this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);b.Token.prototype.destroy.call(this)}});b.cleaner.add({destroy:function(){for(var b in r)r[b].destroy();r=n=null}});h=v();B.exports={SourceWrapper:l,Theme:m,theme:v,getThemeList:function(){return b.object.keys(n)},currentTheme:function(){return n[c].theme},setTheme:function(b){return v(b).apply()},onThemeChange:function(b,h,a){f.push({fn:b,
context:h});a&&b.call(h,c)},define:h.define,get:q,getPathList:function(){return b.object.keys(r)}}},"c.js":function(e,B,b,k,u,H,A,J,M){function q(a){return function(b){if("click"!=b.type||3!=b.which){for(var d=qa[b.type]||"mouseenter"!=b.type&&"mouseleave"!=b.type,g=b.path.slice(0,b.path.length-1),h=g.shift(),z;h;){z=h.getAttribute&&h.getAttribute(a);if(!d||"string"==typeof z)break;h=g.shift()}if("string"==typeof z){var f=h,d=f,m;if(qa[b.type]){var l=b.relatedTarget;l&&(f===l||X(f,l))&&(f=null)}for(;f;){f=
f[c];if("number"==typeof f&&(m=r(f)))break;f=g.shift()}g=z.trim().split(/\s+/);z=m&&m.action;for(f=0;l=g[f++];)switch(l){case "prevent-default":b.preventDefault();break;case "stop-propagation":b.stopPropagation();break;case "log-event":break;default:z&&(b.actionTarget=d,z.call(m.context,l,b))}}if(b.type in va)va[b.type](b,h)}}}function t(a,b){x(b);qa[a]=!0;va[b]=function(b){b=new n.Event(b);b.type=a;fa[a](b)};va[a]=function(b,c){c&&c.parentNode&&(b=new n.Event(b),b.type=a,b.sender=c.parentNode,fa[a](b))}}
function x(a){if(!v.call(fa,a)&&(fa[a]=q("event-"+a),!pa)){if(!ia){if("mouseenter"==a)return t(a,"mouseover");if("mouseleave"==a)return t(a,"mouseout")}for(var b=0,c=n.browserEvents(a),d;d=c[b];b++)n.addGlobalHandler(d,fa[a])}}function y(a,b,c){na&&"class"==b&&(b="className");if(aa&&"style"==b)return a.style.cssText=c;var d=f.getNamespace(b,a);d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)}e=k.Node;var v=Object.prototype.hasOwnProperty,n=b.require("./d.js"),r=b.require("./a.js").resolveActionById;
k=b.require("./6.js");var f=b.require("./7.js"),c=k.MARKER,h=k.CLONE_NORMALIZATION_TEXT_BUG,m=k.TYPE_ELEMENT,l=k.TYPE_ATTRIBUTE,d=k.TYPE_ATTRIBUTE_CLASS,D=k.TYPE_ATTRIBUTE_STYLE,a=k.TYPE_ATTRIBUTE_EVENT,p=k.TYPE_TEXT,E=k.TYPE_COMMENT,C=k.TOKEN_TYPE,g=k.TOKEN_BINDINGS,w=k.TOKEN_REFS,I=k.ATTR_NAME,F=k.ATTR_VALUE,O=k.ATTR_VALUE_INDEX,G=k.ELEMENT_NAME,T=k.ELEMENT_ATTRIBUTES_AND_CHILDREN,S=k.TEXT_VALUE,Z=k.COMMENT_VALUE,ca=k.CLASS_BINDING_ENUM,ua=k.CLASS_BINDING_BOOL,la=k.CLASS_BINDING_INVERT,ia="onmouseenter"in
document.documentElement,pa=!1,fa={},va={},qa={},X;X=e&&!e.prototype.contains?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a.contains(b)};document.addEventListener||(pa=b.publicCallback(function(a,b){n.fireEvent(document,a);b.returnValue=!0;var c=fa[a];c&&c(new n.Event(b))},!0));var na=function(){var a=document.createElement("div");a.setAttribute("class","a");return!a.className}(),aa=function(){var a=document.createElement("div");a.setAttribute("style","position:absolute");
return"absolute"!=a.style.position}(),ga=function(b,c){for(var e=c||document.createDocumentFragment(),n=c?T:0,r;r=b[n];n++){var z=r[C];switch(z){case m:var z=r[G],K=f.getNamespace(z),z=K?document.createElementNS(K,z):document.createElement(z);ga(r,z);e.appendChild(z);break;case l:r[g]||y(e,r[I],r[F]||"");break;case d:z=(z=r[O[z]])?[z]:[];if(r[g])for(var K=0,V;V=r[g][K];K++){var k=V[4];if(k){var q=V[0];if(Array.isArray(q))z.push(q[k-1]);else switch(V[2]){case ua:case la:z.push(q+V[3]);break;case ca:z.push(q+
V[5][k-1])}}}z.length&&y(e,"class",z.join(" "));break;case D:(z=r[O[z]])&&y(e,"style",z);break;case a:z=e;K=r[1];r=r[2]||r[1];x(K);pa&&z.setAttribute("on"+K,pa+'("'+K+'",event)');z.setAttribute("event-"+K,r);break;case E:e.appendChild(document.createComment(r[Z]||(r[w]?"{"+r[w].join("|")+"}":"")));break;case p:h&&n&&b[n-1][C]==p&&e.appendChild(document.createComment("")),e.appendChild(document.createTextNode(r[S]||(r[w]?"{"+r[w].join("|")+"}":"")||(r[g]?"{"+r[g]+"}":"")))}}c||1!=b.length||(e=e.removeChild(e.firstChild));
return e};B.exports=ga},"d.js":function(e,B,b,k,u,H,A,J,M){function q(a){var b=[];do b.push(a);while(a=a.parentNode);b.push(k);return b}function t(a){return a instanceof qa?a.event_:a||k.event}function x(a){return"string"==typeof a?G.getElementById(a):a}function y(a){a=a.target||a.srcElement||G;return 3==a.nodeType?a.parentNode:a}function v(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function n(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function r(a,b){(b=x(b))?w(b,a,r):
(n(a),v(a))}function f(a){return a.keyCode||a.which||0}function c(a){return a.charCode||a.keyCode||0}function h(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function m(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==G.compatMode?G.documentElement.scrollLeft:G.body.scrollLeft):0}function l(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==G.compatMode?
G.documentElement.scrollTop:G.body.scrollTop):0}function d(a){var b=0;"deltaY"in a?b=-a.deltaY:"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b&&b/Math.abs(b)}function D(a){ga&&a!==ra&&(ra=a,b.codeFrame.start())}function a(a){ga&&a!==xa&&(xa=a,b.codeFrame.finish())}function p(b){var c=S(X[b.type]),d=na[b.type],g=new qa(b);D(b);if(d)d.handler.call(d.thisObject,g);else if(c)for(d=c.length;0<d--;){var h=c[d];h.handler.call(h.thisObject,g)}a(b)}function E(a){var b=na[a];
b&&(g(a,b.handler,b.thisObject),delete na[a])}function C(a,b,c){var d=X[a];if(d){a=0;for(var g;g=d[a];a++)if(g.handler===b&&g.thisObject===c)return}else aa?w(G,a,T):G.addEventListener(a,p,!0),d=X[a]=[];d.push({handler:b,thisObject:c})}function g(a,b,c){var d=X[a];if(d)for(var g=0,h;h=d[g];g++)if(h.handler===b&&h.thisObject===c){d.splice(g,1);d.length||(delete X[a],aa?I(G,a,T):G.removeEventListener(a,p,!0));break}}function w(b,c,d,g){b=x(b);if(!b)throw"basis.event.addHandler: can't attach event listener to undefined";
if("function"!=typeof d)throw"basis.event.addHandler: handler is not a function";var h=b===k?Z:b[ca];h||(h=b[ca]={});var f=h[c],m={handler:d,thisObject:g};if(f){for(b=0;h=f[b];b++)if(h.handler===d&&h.thisObject===g)return;f.push(m)}else f=h[c]=[m],f.fireEvent=function(b){b=t(b);if(aa&&b&&X[c]&&"undefined"==typeof b.returnValue){p(b);if(!0===b.cancelBubble)return;"undefined"==typeof b.returnValue&&(b.returnValue=!0)}D(b);for(var d=0,z=new qa(b),g;g=f[d++];)g.handler.call(g.thisObject,z);a(b)},ua?b.addEventListener(c,
f.fireEvent,!1):b.attachEvent("on"+c,f.fireEvent)}function I(a,b,c,d){a=x(a);var g=a===k?Z:a[ca];if(g&&(g=g[b]))for(var h=0,f;f=g[h];h++)if(f.handler===c&&f.thisObject===d){g.splice(h,1);g.length||F(a,b);break}}function F(a,b){a=x(a);var c=a===k?Z:a[ca];if(c)if("string"!=typeof b)for(b in c)F(a,b);else{var d=c[b];d&&(a.removeEventListener?a.removeEventListener(b,d.fireEvent,!1):a.detachEvent("on"+b,d.fireEvent),delete c[b])}}function O(a){return function(b,c){return a(t(b),c)}}var G=k.document,T=
b.fn.$null,S=b.array.from,Z={},ca="basisEvents_"+b.genUID(),ua=!!G.addEventListener;e={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var la={VALUE:1,BIT:1},ia={VALUE:2,BIT:4},pa={VALUE:3,BIT:2},fa={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},va=/^(returnValue|keyLocation|layerX|layerY|webkitMovementX|webkitMovementY)$/,
qa=b.Class(null,{className:"basis.dom.event.Event",KEY:e,init:function(a){a=t(a);for(var g in a)va.test(g)||"progress"==a.type&&("totalSize"==g||"position"==g)||"function"!=typeof a[g]&&0==g in this&&(this[g]=a[g]);g=y(a);b.object.extend(this,{event_:a,sender:g,target:g,path:a.path?b.array(a.path):q(g),key:f(a),charCode:c(a),mouseLeft:h(a,la),mouseMiddle:h(a,ia),mouseRight:h(a,pa),mouseX:m(a),mouseY:l(a),wheelDelta:d(a)})},stopBubble:function(){v(this.event_)},stopPropagation:function(){v(this.event_)},
preventDefault:function(){n(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),X={},na={},aa=!ua,ga=!0,ra,xa,wa={};B.exports={W3CSUPPORT:ua,browserEvents:function(a){return fa[a]||[a]},getEventInfo:function(a,b){b||(b="div");var c=b+"-"+a;if(wa[c])return wa[c];var d=!1,g=!1;if(!ua){var h="on"+a,f=G.createElement("div"),m=f.appendChild(G.createElement(b));f[h]=function(){g=!0};try{m.fireEvent(h),d=!0}catch(l){}}return wa[c]={supported:d,bubble:g}},KEY:e,MOUSE_LEFT:la,MOUSE_RIGHT:pa,
MOUSE_MIDDLE:ia,Event:qa,sender:O(y),cancelBubble:O(v),cancelDefault:O(n),kill:O(r),key:O(f),charCode:O(c),mouseButton:O(h),mouseX:O(m),mouseY:O(l),wheelDelta:O(d),addGlobalHandler:C,removeGlobalHandler:g,captureEvent:function(a,c,d){na[a]&&E(a);c||(c=b.fn.$undef);C(a,c,d);na[a]={handler:c,thisObject:d}},releaseEvent:E,addHandler:w,addHandlers:function(a,b,c){a=x(a);for(var d in b)w(a,d,b[d],c)},removeHandler:I,clearHandlers:F,fireEvent:function(a,b,c){a=x(a);if((a=a===k?Z:a[ca])&&a[b])try{ga=!1,
a[b].fireEvent(c)}finally{ga=!0}},onUnload:function(a,c){b.teardown(a,c)},wrap:t}},"e.js":function(e,B,b,k,u,H,A,J,M){function q(){}function t(){}function x(){}function y(a){var b=a.constructor.prototype;a.setDelegate=b.setDelegate;a.destroy=b.destroy}function v(a){return a.sortingValue}function n(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function r(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function f(a){return a.childNodes.sort(a.sortingDesc?r:n)}function c(a,
b,c,d){if(!a.length)return 0;d=!!d;var g=0,h=a.length-1,f=typeof b,m,l,e;do{e=g+h>>1;m=c(a[e]);l=typeof m;if(d){if(f>l||b>m){h=e-1;continue}if(f<l||b<m){g=e+1;continue}}else{if(f<l||b<m){h=e-1;continue}if(f>l||b>m){g=e+1;continue}}return b==m?e:0}while(g<=h);return e+((l<f||m<b)^d)}function h(a,b,c,d,g){if(b!==c){var h=a,f=[];d&&(a.contextSelection=c,a.selected&&!a.selectedRA_&&f.push(a));for(;h;){if((d=!h.selection||g&&h===a?h.firstChild:null)&&d.contextSelection!==b)throw"Try change wrong context selection";
for(;!d;){if(h===a){if(f.length&&(b&&b.remove(f),c))for(c.add(f),a=0;a<f.length;a++)b=f[a],b.selected&&!c.has(b)&&(b.selected=!1,b.emit_unselect());return}d=h.nextSibling;d||(h=h.parentNode)}h=d;h.selected&&!h.selectedRA_&&f.push(h);h.contextSelection=c}}}function m(a,b){a.contextDisabled!=b&&(a.contextDisabled=b,a.disabled||(b?a.emit_disable():a.emit_enable()))}function l(a){return a.isSubclassOf(X)?a:X}function d(a){if(!a)return null;if(a.isSatelliteConfig||a instanceof X)return a;a.constructor!==
Object&&(a={instance:a});var c=!1,d="update",g={isSatelliteConfig:!0},h;for(h in a){var f=a[h];switch(h){case "instance":f instanceof X?g.instance=f:p.isClass(f)?g.instanceClass=l(f):("string"==typeof f&&(f=b.getter(f)),g.getInstance=f);break;case "instanceOf":case "satelliteClass":if("instanceOf"==h&&"satelliteClass"in a)break;if("instance"in a)break;p.isClass(f)&&(g.instanceClass=l(f));break;case "existsIf":case "delegate":case "dataSource":f&&("string"==typeof f&&(f=I(f)),"function"!=typeof f?
f=b.fn.$const(f):c=!0);g[h]=f;break;case "config":"string"==typeof f&&(f=I(f));g.config=f;break;case "events":d=a.events}}g.instance||g.getInstance||g.instanceClass||(g.instanceClass=l(X));if(c&&(Array.isArray(d)&&(d=d.join(" ")),"string"==typeof d))for(a={},d=d.split(/\s+/),c=0;h=d[c];c++)a[h]=va,g.handler=a;return g}function D(a,b){var c=b.length-1;a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[c]||null;for(var d=c;c=b[d];d--)c.nextSibling=b[d+1]||null,c.previousSibling=b[d-1]||null,a.insertBefore(c,
c.nextSibling)}function a(a,b){var c;if("function"==typeof a.childFactory&&(c=a.childFactory(b),c instanceof a.childClass))return c;if(!c)throw"basis.dom.wrapper: Child node is null";throw"basis.dom.wrapper: Child node has wrong class";}var p=b.Class,E=b.object.complete,C=b.array,g=b.array.remove,w=b.fn.$undef,I=b.getter,F=b.fn.nullGetter;k=b.require("./2.js");e=k.create;var O=k.events;k=b.require("./f.js");var G=k.resolveValue,T=k.resolveDataset;u=k.createResolveFunction;var S=k.SUBSCRIPTION,Z=k.STATE,
ca=k.Object,ua=k.ReadOnlyDataset,la=k.Dataset,ia={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},pa={};S.addProperty("owner");S.addProperty("dataSource");S.add("CHILD",{childNodesModified:function(a,b){var c;if(c=b.inserted)for(var d=0;c[d];d++)S.link("child",a,c[d]);if(c=b.deleted)for(d=0;c[d];d++)S.unlink("child",a,c[d])}},function(a,b){for(var c=b.childNodes||[],d=0,g;g=c[d];d++)a("child",b,g)});S.add("SATELLITE",{satelliteChanged:function(a,b,c){c&&S.unlink("satellite",a,c);a.satellite[b]&&S.link("satellite",
a,a.satellite[b])}},function(a,b){var c=b.satellite;if(c!==fa)for(var d in c)"__auto__"!==d&&a("satellite",b,c[d])});var fa=p.customExtendProperty({},function(a,b){for(var c in b)a[c]=d(b[c])}),va=function(){var a=this.name,c=this.config,d=this.owner,g=0=="existsIf"in c||c.existsIf(d);if(G(this,va,g,"existsRA_")){g=this.instance||c.instance;if(!g||"value"==this.factoryType){if(!this.factoryType){var g=c.getInstance,h=c.instanceClass;"function"==typeof g&&(g=g.call(d,d),p.isClass(g)&&(h=l(g)));this.factoryType=
h?"class":"value";this.factory=h||g}if("class"==this.factoryType){g={destroy:x};c.delegate&&(g.autoDelegate=!1,g.delegate=c.delegate(d));c.dataSource&&(g.dataSource=c.dataSource(d));c.config&&b.object.complete(g,"function"==typeof c.config?c.config(d):c.config);this.instance=new this.factory(g);d.setSatellite(a,this.instance,!0);return}g=na(this,va,this.factory,"instanceRA_")}this.instance!==g&&(this.instance=g||null,d.setSatellite(a,this.instance,!0));g&&g.owner===d&&(c.delegate&&g.setDelegate(c.delegate(d)),
c.dataSource&&g.setDataSource(c.dataSource(d)))}else if(g=this.instance)c.instance&&(c.delegate&&g.setDelegate(),c.dataSource&&g.setDataSource()),this.instance=null,d.setSatellite(a,null,!0)},qa={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},X=p(ca,{className:"basis.dom.wrapper.AbstractNode",propertyDescriptors:{owner:"ownerChanged",parentNode:"parentChanged",childNodes:"childNodesModified",childNodesState:"childNodesStateChanged",dataSource:"dataSourceChanged","getChildNodesDataset()":!0,
satellite:{nested:!0,events:"satelliteChanged"},sorting:"sortingChanged",sortingDesc:"sortingChanged",grouping:"groupingChanged",ownerSatelliteName:"ownerSatelliteNameChanged",firstChild:!1,lastChild:!1,previousSibling:!1,nextSibling:!1,groupNode:!1,groupId:!0,autoDelegate:!1,destroyDataSourceMember:!1,name:!0},subscribeTo:ca.prototype.subscribeTo+S.DATASOURCE+S.SATELLITE,isSyncRequired:function(){return this.state==Z.UNDEFINED||this.state==Z.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){ca.prototype.emit_update.call(this,
a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:ia.NONE,name:null,childNodes:null,emit_childNodesModified:e("childNodesModified","delta")&&function(a){O.childNodesModified.call(this,a);var b=this.listen.childNode,c;if(b){if(c=a.inserted)for(var d=0,g;g=c[d];d++)g.addHandler(b,this);if(c=a.deleted)for(d=0;g=c[d];d++)g.removeHandler(b,this)}},childNodesState:Z.UNDEFINED,
emit_childNodesStateChanged:e("childNodesStateChanged","oldState"),childClass:p.SELF,dataSource:null,emit_dataSourceChanged:e("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:e("parentChanged","oldParentNode"),nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:F,sortingDesc:!1,emit_sortingChanged:e("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:e("groupingChanged",
"oldGrouping"),groupNode:null,groupId:NaN,satellite:fa,emit_satelliteChanged:e("satelliteChanged","name","oldSatellite"),ownerSatelliteName:null,emit_ownerSatelliteNameChanged:e("ownerSatelliteNameChanged","name","oldName"),owner:null,emit_ownerChanged:e("ownerChanged","oldOwner"),init:function(){ca.prototype.init.call(this);var a=this.childNodes,b=this.dataSource;a&&(this.childNodes=null);b&&(this.dataSource=null);var c=this.grouping;c&&(this.grouping=null,this.setGrouping(c));this.childClass&&(this.childNodes=
[],b?this.setDataSource(b):a&&this.setChildNodes(a));a=this.satellite;if(a!==fa){this.satellite=fa;for(var d in a)a[d]&&"object"==typeof a[d]&&this.setSatellite(d,a[d])}if(d=this.owner)this.owner=null,this.setOwner(d)},setChildNodesState:function(a,b){var c=String(a),d=this.childNodesState;if(!Z.values[c])throw Error("Wrong state value");if(d!=c||d.data!=b)this.childNodesState=Object(c),this.childNodesState.data=b,this.emit_childNodesStateChanged(d)},appendChild:function(a){},insertBefore:function(a,
b){},removeChild:function(a){},replaceChild:function(a,b){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,b){},setSorting:function(a,b){},setDataSource:function(a){},setOwner:function(a){a&&0!=a instanceof X||(a=null);if(a&&this.parentNode)throw"basis.dom.wrapper: Node can't has owner and parentNode";var b=this.owner;if(b!==a){var c=this.listen.owner;if(b){if(this.ownerSatelliteName&&b.satellite.__auto__&&this.ownerSatelliteName in b.satellite.__auto__)return;c&&b.removeHandler(c,
this);this.ownerSatelliteName&&(this.owner=null,b.setSatellite(this.ownerSatelliteName,null))}a&&c&&a.addHandler(c,this);this.owner=a;this.emit_ownerChanged(b);this.autoDelegate!=ia.OWNER&&this.autoDelegate!==ia.ANY||this.setDelegate(a)}},setSatellite:function(a,b,c){var g=this.satellite[a]||null,h=this.satellite.__auto__,f=h&&h[a],m=c&&f;if(m)(b=f.instance)&&f.config.instance&&delete f.config.instance.setOwner;else{if((b=d(b))&&b.owner===this&&h&&b.ownerSatelliteName&&h[b.ownerSatelliteName])return;
f&&(delete h[a],f.config.instance&&f.config.instance.removeHandler(qa,f),f.config.handler&&this.removeHandler(f.config.handler,f))}if(g!==b){c=this.listen.satellite;var l=this.listen["satellite:"+a],e;if(g){delete this.satellite[a];var p=g.ownerSatelliteName;null!=p&&(g.ownerSatelliteName=null,g.emit_ownerSatelliteNameChanged(p));f&&g.destroy===x?e=g:(c&&g.removeHandler(c,this),l&&g.removeHandler(l,this),g.setOwner(null));m&&!b&&f.config.instance&&(f.config.instance.setOwner=t)}if(b){if(0==b instanceof
X){f={owner:this,name:a,config:b,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};b.handler&&this.addHandler(b.handler,f);b.instance&&(b.instance.addHandler(qa,f),b.instance.setOwner=t);h||(this.satellite===fa&&(this.satellite={}),h=this.satellite.__auto__={});h[a]=f;va.call(f,this);!f.instance&&g&&this.emit_satelliteChanged(a,g);e&&(delete e.destroy,e.destroy());return}if(b.owner!==this){f&&f.config.delegate?(h=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),b.autoDelegate=
h):b.setOwner(this);if(b.owner!==this){this.setSatellite(a,null);return}c&&b.addHandler(c,this);l&&b.addHandler(l,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==fa&&(this.satellite={});this.satellite[a]=b;p=b.ownerSatelliteName;p!=a&&(b.ownerSatelliteName=a,b.emit_ownerSatelliteNameChanged(p))}this.emit_satelliteChanged(a,g);e&&(delete e.destroy,e.destroy())}},getChildNodesDataset:function(){return pa[this.basisObjectId]||
new Q({sourceNode:this})},destroy:function(){ca.prototype.destroy.call(this);this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==fa){var b=a.__auto__;delete a.__auto__;for(var c in b)b[c].config.instance&&!b[c].instance&&b[c].config.instance.destroy(),b[c].existsRA_&&G(b[c],null,null,"existsRA_"),
b[c].instanceRA_&&G(b[c],null,null,"instanceRA_");for(c in a)b=a[c],b.owner=null,b.ownerSatelliteName=null,b.destroy===x&&delete b.destroy,b.destroy();this.satellite=null}this.childNodes=null}}),na=u(X),aa=p(X,{className:"basis.dom.wrapper.PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];X.prototype.init.call(this)},insert:function(a,b){var c=this.nodes,d=b?c.indexOf(b):-1;-1==d?(c.push(a),this.last=a):c.splice(d,0,a);this.first=c[0];a.groupNode=this;
this.emit_childNodesModified({inserted:[a]})},remove:function(a){var b=this.nodes;g(b,a)&&(this.first=b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,b=a.length;0<b--;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){X.prototype.destroy.call(this);
this.last=this.first=this.nodes=null}}),ga={childClass:X,childFactory:null,listen:{dataSource:{itemsChanged:function(c,d){var g={},h=[];if(d.deleted)if(g.deleted=h,this.childNodes.length==d.deleted.length){for(var h=C(this.childNodes),f=0,m;m=h[f];f++)y(m);this.dataSourceMap_=null;this.clear(!0);this.dataSourceMap_={}}else for(f=0;m=d.deleted[f];f++){m=m.basisObjectId;var l=this.dataSourceMap_[m];y(l);delete this.dataSourceMap_[m];this.removeChild(l);h.push(l)}if(d.inserted)for(g.inserted=[],f=0;m=
d.inserted[f];f++){var e=l=a(this,{delegate:m});e.setDelegate=b.fn.$undef;e.destroy=q;this.dataSourceMap_[m.basisObjectId]=l;g.inserted.push(l);this.firstChild&&this.insertBefore(l)}this.firstChild?this.emit_childNodesModified(g):this.setChildNodes(g.inserted);if(this.destroyDataSourceMember&&h.length)for(f=0;m=h[f];f++)m.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}}},getChild:function(a,c){return b.array.search(this.childNodes,
a,c)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(b,d){if(!this.childClass)throw"basis.dom.wrapper: Node can't has children and dataSource as childClass isn't specified";if(b.firstChild)for(var f=this;f=f.parentNode;)if(f===b)throw"basis.dom.wrapper: Node can't be inserted at specified point in hierarchy";var l=b&&b instanceof this.childClass;if(this.dataSource){if(!l||!b.delegate||this.dataSourceMap_[b.delegate.basisObjectId]!==
b)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";}else if(this.dataSourceRA_)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource adapter control";l||(b=a(this,b instanceof ca?{delegate:b}:b));if(b.owner)throw"basis.dom.wrapper: Node can't has owner and parentNode";var l=b.parentNode===this,e=this.childNodes,p=this.grouping,r=b.groupNode,n=null,w=this.sorting,D,k=!1,I,f=-1,q,oa;l&&(q=b.nextSibling,oa=b.previousSibling);if(w!==
F){d=null;D=this.sortingDesc;I=w(b);if(null==I)I=-Infinity;else if("number"!=typeof I||I!==I)I=String(I);if(l)if(I===b.sortingValue)k=!0;else if(k=D?(!q||typeof q.sortingValue<=typeof I&&q.sortingValue<=I)&&(!oa||typeof oa.sortingValue>=typeof I&&oa.sortingValue>=I):(!q||typeof q.sortingValue>=typeof I&&q.sortingValue>=I)&&(!oa||typeof oa.sortingValue<=typeof I&&oa.sortingValue<=I))b.sortingValue=I}if(p){n=p.getGroupNode(b,!0);p=n.nodes;if(r===n&&(k||w===F&&q===d))return b;w!==F?r===n&&k?f=q&&q.groupNode===
n?p.indexOf(q):p.length:(f=c(p,I,v,D),b.sortingValue=I):f=d&&d.groupNode===n?p.indexOf(d):p.length;if(f<p.length)d=p[f];else if(n.last)d=n.last.nextSibling;else for(f=n,d=null;(f=f.nextSibling)&&!(d=f.first););if(b===d||l&&q===d)return r!==n&&(r&&r.remove(b),n.insert(b,d)),b;f=-1}else if(w!==F){if(k)return b;f=c(e,I,v,D,this.lll);d=e[f];b.sortingValue=I;if(b===d||l&&q===d)return b}else{if(d&&d.parentNode!==this)throw"basis.dom.wrapper: Node was not found";if(l){if(q===d)return b;if(b===d)throw"basis.dom.wrapper: Node can't be inserted at specified point in hierarchy";
}}l?(q?(q.previousSibling=oa,b.nextSibling=null):this.lastChild=oa,oa?(oa.nextSibling=q,b.previousSibling=null):this.firstChild=q,-1==f?g(e,b):(D=e.indexOf(b),e.splice(D,1),f-=D<f),r&&(r.remove(b),r=null)):b.parentNode&&b.parentNode.removeChild(b);r!=n&&n.insert(b,d);if(d){-1==f&&(f=e.indexOf(d));if(-1==f)throw"basis.dom.wrapper: Node was not found";b.nextSibling=d;e.splice(f,0,b)}else f=e.length,e.push(b),d={previousSibling:this.lastChild},this.lastChild=b;b.parentNode=this;b.previousSibling=d.previousSibling;
0==f?this.firstChild=b:d.previousSibling.nextSibling=b;d.previousSibling=b;l||(h(b,b.contextSelection,this.selection||this.contextSelection,!0),m(b,this.disabled||this.contextDisabled),(b.underMatch_||this.matchFunction)&&b.match&&b.match(this.matchFunction),b.autoDelegate!=ia.PARENT&&b.autoDelegate!==ia.ANY||b.setDelegate(this),b.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[b]}),b.listen.parentNode&&this.addHandler(b.listen.parentNode,b));return b},removeChild:function(a){if(!a||
a.parentNode!==this)throw"basis.dom.wrapper: Node was not found";if(0==a instanceof this.childClass)throw"basis.dom.wrapper: Child node has wrong class";if(this.dataSource){if(!a.delegate||this.dataSourceMap_[a.delegate.basisObjectId])throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";}else if(this.dataSourceRA_)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource adapter control";var b=this.childNodes.indexOf(a);if(-1==b)throw"basis.dom.wrapper: Node was not found";
this.childNodes.splice(b,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);h(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);a.emit_parentChanged(this);this.dataSource||this.emit_childNodesModified({deleted:[a]});a.autoDelegate!=
ia.PARENT&&a.autoDelegate!==ia.ANY||a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";if(this.dataSourceRA_)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource adapter control";if(null==b||b.parentNode!==this)throw"basis.dom.wrapper: Node was not found";this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource&&this.dataSourceMap_&&
this.dataSource.itemCount)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";if(this.firstChild){a&&h(this,this.selection||this.contextSelection,null,!1,!0);var b=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:b});for(var c=b.length;0<c--;){var d=b[c];d.listen.parentNode&&d.parentNode.removeHandler(d.listen.parentNode,d);d.parentNode=null;d.groupNode=null;a?(d.nextSibling=null,d.previousSibling=
null,d.emit_parentChanged(this),d.autoDelegate!=ia.PARENT&&d.autoDelegate!==ia.ANY||d.setDelegate()):d.destroy()}if(this.grouping)for(b=this.grouping.childNodes,c=b.length-1;a=b[c];c--)a.clear()}},setChildNodes:function(a,b){this.dataSource||this.dataSourceRA_||this.clear(b);if(a&&(0=="length"in a&&(a=[a]),a.length)){var c=this.emit_childNodesModified;this.emit_childNodesModified=w;for(var d=0,g=a.length;d<g;d++)this.insertBefore(a[d]);this.emit_childNodesModified=c;this.emit_childNodesModified({inserted:this.childNodes})}},
setDataSource:function(a){if(!this.childClass)throw"basis.dom.wrapper: Node can't has children and dataSource as childClass isn't specified";a=T(this,this.setDataSource,a,"dataSourceRA_");if(this.dataSource!==a){var b=this.dataSource,c=this.dataSourceMap_||{},d=this.listen.dataSource,g,f;b?(d&&b.removeHandler(d,this),a?(g=a.getItems().filter(function(a){return!b.has(a)}),f=b.getItems().filter(function(b){return!a.has(b)})):f=b.getItems()):a&&(g=a.getItems());if(b&&a)b&&f.length&&d&&d.itemsChanged.call(this,
b,{deleted:f});else if(this.firstChild){if(b){f=0;for(var h;h=this.childNodes[f];f++)y(h)}this.dataSource=null;this.clear(b&&!this.destroyDataSourceMember)}(this.dataSource=a)?(this.dataSourceMap_=c,this.setChildNodesState(a.state,a.state.data),d&&(a.addHandler(d,this),g.length&&d.itemsChanged.call(this,a,{inserted:g}))):(this.dataSourceMap_=null,this.setChildNodesState(Z.UNDEFINED));this.emit_dataSourceChanged(b)}},setGrouping:function(a,b){if("function"==typeof a||"string"==typeof a)a={rule:a};
0==a instanceof xa&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var c=this.grouping,d;if(c){this.grouping=null;if(!a&&this.firstChild){d=this.sorting!==F?f(this):this.childNodes;c.nullGroup.clear();for(var g=c.childNodes.slice(0),h=0;h<g.length;h++)g[h].clear();D(this,d)}c.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){d=this.sorting!==F?f(this):this.childNodes;for(h=0;g=d[h];h++)g.groupNode=this.grouping.getGroupNode(g,!0);h=d;for(d=0;g=h[d];d++)g.groupNode.nodes.push(g);
h=[this.grouping.nullGroup].concat(this.grouping.childNodes);g=[];d=0;for(var m;m=h[d];d++){var l=m.nodes;m.first=l[0]||null;m.last=l[l.length-1]||null;g.push.apply(g,l);m.emit_childNodesModified({inserted:l})}D(this,g)}this.emit_groupingChanged(c);c&&!b&&c.destroy()}},setSorting:function(a,b){a=I(a);b=!!b;if(this.sorting!==a||this.sortingDesc!=!!b){var c=this.sorting,d=this.sortingDesc;this.sorting=a;this.sortingDesc=!!b;if(a!==F&&this.firstChild){var g=[],h;for(h=this.firstChild;h;h=h.nextSibling){var m=
a(h);if(null==m)m=-Infinity;else if("number"!=typeof m||m!==m)m=String(m);h.sortingValue=m}if(this.grouping)for(var m=[this.grouping.nullGroup].concat(this.grouping.childNodes),l=0,e;e=m[l];l++)h=e.nodes=f({childNodes:e.nodes,sortingDesc:this.sortingDesc}),e.first=h[0]||null,e.last=h[h.length-1]||null,g.push.apply(g,h);else g=f(this);D(this,g)}this.emit_sortingChanged(c,d)}},setMatchFunction:function(a){if(this.matchFunction!=a){var b=this.matchFunction;this.matchFunction=a;for(var c=this.lastChild;c;c=
c.previousSibling)c.match(a);this.emit_matchFunctionChanged(b)}}},ra=p(X,ga,{className:"basis.dom.wrapper.Node",propertyDescriptors:{disabled:"disable enable",contextDisabled:!1,selected:"select unselect",contextSelection:!1,selection:"selectionChanged",matched:"match unmatch",matchFunction:"matchFunctionChanged"},emit_satelliteChanged:function(a,b){X.prototype.emit_satelliteChanged.call(this,a,b);this.satellite[a]instanceof ra&&m(this.satellite[a],this.disabled||this.contextDisabled)},contextDisabled:!1,
disabled:!1,disabledRA_:null,emit_enable:e("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)m(a,!1);O.enable.call(this)},emit_disable:e("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)m(a,!0);O.disable.call(this)},selection:null,emit_selectionChanged:e("selectionChanged","oldSelection"),contextSelection:null,selected:!1,selectedRA_:null,emit_select:e("select"),emit_unselect:e("unselect"),matched:!0,emit_match:e("match"),emit_unmatch:e("unmatch"),matchFunction:null,
emit_matchFunctionChanged:e("matchFunctionChanged","oldMatchFunction"),listen:{owner:{enable:function(){m(this,!1)},disable:function(){m(this,!0)}},selection:{destroy:function(){this.setSelection()}}},init:function(){var a=this.disabled;this.disabled=!1;var b=this.selection;b&&(this.selection=null,this.setSelection(b,!0));X.prototype.init.call(this);if(a&&(a=!!G(this,this.setDisabled,a,"disabledRA_")))for(this.disabled=a,a=this.firstChild;a;a=a.nextSibling)m(a,!0);this.selected&&(this.selected=!!G(this,
this.setSelected,this.selected,"selectedRA_"))},setSelection:function(a,b){var c=this.selection;!1===a instanceof L&&(a=a?new L(a):null);if(c!==a)return h(this,c||this.contextSelection,a||this.contextSelection,!1,!0),this.listen.selection&&(c&&c.removeHandler(this.listen.selection,this),a&&a.addHandler(this.listen.selection,this)),this.selection=a,b||this.emit_selectionChanged(c),!0},setSelected:function(a,b){var c=this.contextSelection;a=!!G(this,this.setSelected,a,"selectedRA_");this.selected&&
c&&(this.selectedRA_?c.has(this)&&(this.selected=!1,c.remove(this),this.selected=!0):c.has(this)||c.add(this));if(a!==this.selected)return this.selectedRA_?(this.selected=a)?this.emit_select():this.emit_unselect():a?c?b?c.add(this):c.set(this):(this.selected=!0,this.emit_select()):c?c.remove(this):(this.selected=!1,this.emit_unselect()),!0;!this.selectedRA_&&a&&c&&(b?c.remove(this):c.set(this));return!1},select:function(a){return this.selectedRA_?!1:this.setSelected(!0,a)},unselect:function(){return this.selectedRA_?
!1:this.setSelected(!1)},setDisabled:function(a){a=!!G(this,this.setDisabled,a,"disabledRA_");return this.disabled!==a?(this.disabled=a,this.contextDisabled||(a?this.emit_disable():this.emit_enable()),!0):!1},disable:function(){return this.disabledRA_?!1:this.setDisabled(!0)},enable:function(){return this.disabledRA_?!1:this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,
!0);this.underMatch_=a;a=!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&G(this,null,null,"disabledRA_");this.selectedRA_&&G(this,null,null,"selectedRA_");this.contextSelection=null;this.selection&&this.setSelection();X.prototype.destroy.call(this)}}),xa=p(X,ga,{className:"basis.dom.wrapper.GroupingNode",emit_childNodesModified:function(a){O.childNodesModified.call(this,a);var b;if(b=a.inserted){a=0;for(var c;c=b[a++];)c.groupId_=
c.delegate?c.delegate.basisObjectId:c.data.id,this.map_[c.groupId_]=c;if(this.dataSource&&this.nullGroup.first)for(b=this.owner,c=C(this.nullGroup.nodes),a=c.length;0<a--;)b.insertBefore(c[a],c[a].nextSibling)}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);O.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,
rule:F,childClass:aa,childFactory:function(a){return new this.childClass(E({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new aa;X.prototype.init.call(this)},getGroupNode:function(a,b){var c=this.rule(a),d=c instanceof ca,g=this.map_[d?c.basisObjectId:c];this.dataSource&&(b=!1);!g&&b&&(g=this.appendChild(d?c:{data:{id:c,title:c}}));return g||this.nullGroup},setDataSource:function(a){var b=this.dataSource;ga.setDataSource.call(this,
a);if((a=this.owner)&&this.dataSource!==b)for(var b=C(a.childNodes),c=b.length-1;0<=c;c--)a.insertBefore(b[c],b[c+1])},insertBefore:function(a,b){a=ga.insertBefore.call(this,a,b);var c=a.first;if(c){for(var d=c.parentNode,g=a.last,f,h,m,l=null,e=a;(e=e.nextSibling)&&!(l=e.first););m=l?l.previousSibling:d.lastChild;f=c.previousSibling;h=g.nextSibling;if(h!==l){var p=d.childNodes,e=a.nodes,r=e.length;f&&(f.nextSibling=h);h&&(h.previousSibling=f);m&&(m.nextSibling=c);l&&(l.previousSibling=g);c.previousSibling=
m;g.nextSibling=l;var g=p.indexOf(c),n=l?p.indexOf(l):p.length;n>g&&(n-=r);p.splice(g,r);p.splice.apply(p,[n,0].concat(e));m&&f||(d.firstChild=p[0]);l&&h||(d.lastChild=p[p.length-1]);if(c instanceof aa)for(c=r;0<c--;)d.insertBefore(e[c],l),l=e[c]}}return a},removeChild:function(a){if(a=ga.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var b=0,c;c=a.nodes[b];b++)c.parentNode.insertBefore(c)}return a},clear:function(a){var b=[],c=this.getGroupNode,d=this.nullGroup;this.getGroupNode=function(){return d};
for(var g=this.firstChild;g;g=g.nextSibling)b.push.apply(b,g.nodes);for(var g=0,f;f=b[g];g++)f.parentNode.insertBefore(f);this.getGroupNode=c;ga.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;X.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});X.prototype.groupingClass=xa;var wa={childNodesModified:function(a,b){var c=this.members_,d={},g,f=0,h=0,m=b.inserted,l=b.deleted;if(m&&m.length)for(d.inserted=m;g=m[f];)c[g.basisObjectId]=
g,f++;if(l&&l.length)for(d.deleted=l;g=l[h];)delete c[g.basisObjectId],h++;(f||h)&&this.emit_itemsChanged(d)},destroy:function(){this.destroy()}},Q=p(ua,{className:"basis.dom.wrapper.ChildNodesDataset",sourceNode:null,init:function(){ua.prototype.init.call(this);var a=this.sourceNode;pa[a.basisObjectId]=this;a.firstChild&&wa.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(wa,this)},destroy:function(){this.sourceNode.removeHandler(wa,this);delete pa[this.sourceNode.basisObjectId];
ua.prototype.destroy.call(this)}}),L=p(la,{className:"basis.dom.wrapper.Selection",multiple:!1,emit_itemsChanged:function(a){var b;la.prototype.emit_itemsChanged.call(this,a);if(b=a.deleted)for(var c=0,d;d=b[c];c++)d.selected&&d.contextSelection===this&&(d.selected=!1,d.emit_unselect());if(b=a.inserted)for(c=0;d=b[c];c++)d.selected||d.contextSelection!==this||(d.selected=!0,d.emit_select())},add:function(a){if(a){if(!this.multiple&&this.itemCount)return this.set(a);Array.isArray(a)||(a=[a]);a=a.filter(this.filter,
this);!this.multiple&&1<a.length&&(a=[a[0]]);if(a.length)return la.prototype.add.call(this,a)}},set:function(a){if(!a)return this.clear();Array.isArray(a)||(a=[a]);a=a.filter(this.filter,this);!this.multiple&&1<a.length&&(a=[a[0]]);return a.length?la.prototype.set.call(this,a):this.clear()},filter:function(a){return a instanceof ra&&!a.selectedRA_&&a.contextSelection===this}});B.exports={DELEGATE:ia,AbstractNode:X,Node:ra,GroupingNode:xa,PartitionNode:aa,ChildNodesDataset:Q,Selection:L,nullSelection:new ua}},
"f.js":function(e,B,b,k,u,H,A,J,M){function q(a,c,d){var g=c[d],f=!1;/^<static>/.test(g)&&(f=!0,g=g.substr(8));var h=a.propertyDescriptors[g];a=h?h.events:null;h&&h.isPrivate&&(f=!0,a=null);h&&h.isStatic&&(f=!0);if(a)if(f)a=null;else{if(h&&h.nested&&d<c.length-1){var m=g,N=c[++d],f=m+"."+N;(g=U[f])||(g=U[f]=b.getter(function(a){return(a=a&&a[m])?a[N]:void 0}))}}else if(!f)return;return{getter:g,rest:c.slice(d+1).join("."),events:a||null}}function t(a){var c=V[a];c||(c=V[a]=b.getter(function(b){if(b instanceof
G)return aa.query(b,a)}));return c}function x(a){a.factory=la;a.deferred=y;a.compute=v;a.pipe=r;a.as=n;return a}function y(){var a=this;return x(function(b){return(b=a(b))?b.deferred():b})}function v(a,b){var c=this;return x(function(d){var g=c(d);return g?g.compute(a,b)(d):g})}function n(a){var b=this;return x(function(c){return(c=b(c))?c.as(a):c})}function r(a,b){var c=this;return x(function(d){return(d=c(d))?d.pipe(a,b):d})}function f(a,b){for(;b&&b!==a&&b!==b.delegate;)b=b.delegate;return b===
a}function c(a,b,d){var g=a.delegate;g&&(a.root=g.root,a.target=g.target,a.data=g.data,a.state=g.state);if(a.root!==b){if(g=a.listen.root)b&&b!==a&&b.removeHandler(g,a),a.root&&a.root!==a&&a.root.addHandler(g,a);a.emit_rootChanged(b)}if(a.target!==d){if(g=a.listen.target)d&&d!==a&&d.removeHandler(g,a),a.target&&a.target!==a&&a.target.addHandler(g,a);a.emit_targetChanged(d)}for(a=a.delegates_;a;)a.delegate&&c(a.delegate,b,d),a=a.next}function h(a,b){var c={},d;a&&a.length&&(d=c.inserted=a);b&&b.length&&
(d=c.deleted=b);if(d)return c}function m(a,b){if(a&&a.itemCount){if(b&&b.itemCount){var c=[],d=[],g;for(g in a.items_){var f=a.items_[g];0==f.basisObjectId in b.items_&&d.push(f)}for(g in b.items_)f=b.items_[g],0==f.basisObjectId in a.items_&&c.push(f);return h(c,d)}if(a.itemCount)return{deleted:a.getItems()}}else if(b&&b.itemCount)return{inserted:b.getItems()}}function l(){this.fn.call(this.context,this.source)}function d(a,b,c,g,f){var h=a[g]||null,m=null;b!==l&&"function"==typeof c&&(c=c.call(f||
a,f||a));c&&(f=m=h&&h.source===c?h:null,c instanceof Y?(m=f||new w(a,b,c,ya),c=c.dataset):c.bindingBridge&&(m=f||new I(a,b,c,F),c=d(m,l,c.value,"next")));0==c instanceof sa&&(c=null);if(g&&h!==m){for(b=h;b;)f=b,f.detach(),b=f.next,f.next=null;m&&m.attach(O);a[g]=m}return c}function D(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function a(a){a&&a.constructor===Object||(a={value:a});return new da({data:a})}e=b.Class;var p=Array.prototype.slice,E=b.object.values,C=b.fn.$self,
g=b.require("./g.js");k=b.require("./h.js");A=b.require("./i.js");u=A.createResolveFunction;H=A.resolveValue;var w=A.ResolveAdapter,I=A.BBResolveAdapter,F=A.DEFAULT_CHANGE_ADAPTER_HANDLER,O=A.DEFAULT_DESTROY_ADAPTER_HANDLER;J=b.require("./2.js");var G=J.Emitter;A=J.create;var T=J.createHandler,S=J.events,Z=b.require("./12.js"),ca={},ua=[],la=b.FACTORY;J=b.PROXY;k.addProperty("delegate");k.addProperty("target");k.addProperty("dataset");k.addProperty("value","change");var ia=b.getter.ID,pa={destroy:function(a){this.value.unlink(a,
this.fn)}},fa={destroy:function(){this.set(null)}},va={},qa={},X=function(a){aa.prototype.set.call(this,a)},na=function(a,b){b instanceof G?b.removeHandler(this.pipeHandler,this):b=null;a instanceof G?a.addHandler(this.pipeHandler,this):a=null;a!==b&&aa.prototype.set.call(this,a)},aa=e(Z,{className:"basis.data.Value",propertyDescriptors:{value:"change",bindingBridge:!1,initValue:!1,locked:!1,proxy:!1,setNullOnEmitterDestroy:!1},subscribeTo:k.VALUE,emit_change:A("change","oldValue")&&function(a){S.change.call(this,
a);for(var b=this;b=b.links_;)b.fn.call(b.context,this.value,a)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,b,c,d){a.link(c,b,!0,d)},detach:function(a,b,c){a.unlink(c,b)},get:function(a){return a.value}},init:function(){Z.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.setNullOnEmitterDestroy&&this.value instanceof G&&this.value.addHandler(fa,this);
this.initValue=this.value},set:function(a){var b=this.value;a=this.proxy?this.proxy(a):a;var c=a!==b;c&&(this.setNullOnEmitterDestroy&&(b instanceof G&&b.removeHandler(fa,this),a instanceof G&&a.addHandler(fa,this)),this.value=a,this.locked||this.emit_change(b));return c},reset:function(){this.set(this.initValue)},isLocked:function(){return 0<this.locked},lock:function(){this.locked++;1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&(this.locked--,!this.locked)){var a=
this.lockedValue_;this.lockedValue_=null;this.value!==a&&this.emit_change(a)}},compute:function(a,b){b||(b=a,a=null);b||(b=C);var c=this,d=T(a,function(a){aa.prototype.set.call(this,b(a,c.value))}),g=d.events.concat(b[ia]||String(b),this.basisObjectId).join("_"),f=va[g];if(!f){var h={};d.destroy=function(a){delete h[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in h){var c=h[a];aa.prototype.set.call(c.value,b(c.object,this.value))}},destroy:function(){for(var a in h){var b=
h[a];b.object.removeHandler(d,b.value);b.value.destroy()}c=h=null}});f=va[g]=x(function(a){var g=a.basisObjectId,f=h[g],m=b(a,c.value);f?aa.prototype.set.call(f.value,m):(f=new ga({value:m}),a.addHandler(d,f),f=h[g]={value:f,object:a});return f.value})}return f},pipe:function(a,c){var d=T(a,z),g=c[ia]||String(c),g=d.events.join("_")+"_"+g,f=this.pipes_,h;f?h=f[g]:f=this.pipes_={};h||(h=new Q({source:this,pipeId:g,pipeHandler:d}),h.proxy=b.getter(c),this.value instanceof G&&(h.value=h.proxy(this.value),
this.value.addHandler(d,h)),f[g]=h,this.link(h,na,!0,h.destroy));return h},as:function(a){if(!a||a===C)return this;if(this.links_)for(var b=this,c=a[ia]||String(a);b=b.links_;){var d=b.context;if(d instanceof ga&&d.proxy&&(d.proxy[ia]||String(d.proxy))==c)return d}a=new ga({proxy:a,value:this.value});this.link(a,X,!0,a.destroy);return a},deferred:function(){this.deferred_||(this.deferred_=new wa({source:this,value:this.value}));return this.deferred_},link:function(a,b,c,d){if("function"!=typeof b){var g=
String(b);(b=qa[g])||(b=qa[g]=function(a){this[g]=a})}this.links_={value:this,context:a,fn:b,destroy:d||null,links_:this.links_};a instanceof G&&a.addHandler(pa,this.links_);c||b.call(a,this.value);return a},unlink:function(a,c){for(var d=this,g;g=d,d=d.links_;)d.context!==a||c&&d.fn!==c||(d.fn=b.fn.$undef,g.links_=d.links_,d.context instanceof G&&d.context.removeHandler(pa,d))},destroy:function(){Z.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof G&&this.value.removeHandler(fa,
this);var a=this.links_;for(this.links_=null;a;)a.context instanceof G&&a.context.removeHandler(pa,a),a.destroy&&a.destroy.call(a.context),a=a.links_;this.pipes_=this.deferred_=this.lockedValue_=this.value=this.initValue=this.proxy=null}}),ga=e(aa,{className:"basis.data.ReadOnlyValue",set:b.fn.$false}),ra=b.asap.schedule(function(a){a.unlock()}),xa={change:function(a){this.isLocked()||(this.lock(),ra.add(this));aa.prototype.set.call(this,a.value)},destroy:function(){this.destroy()}},wa=e(ga,{className:"basis.data.DeferredValue",
setNullOnEmitterDestroy:!1,source:null,init:function(){ga.prototype.init.call(this);this.source.addHandler(xa,this)},deferred:function(){return this},destroy:function(){ra.remove(this);this.source=null;ga.prototype.destroy.call(this)}}),Q=e(ga,{className:"basis.data.PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var a=this.source,b=a.value;b instanceof G&&b.removeHandler(this.pipeHandler,this);this.pipeHandler=this.source=a.pipes_[this.pipeId]=null;ga.prototype.destroy.call(this)}}),
L={},z=function(a){aa.prototype.set.call(this,a)};aa.from=function(a,c,d){var g;if(!a)return null;if(a instanceof G){d||(d=c,c=null);d||(d=C);var f=T(c,z),h=f.events.concat(d[ia]||String(d),a.basisObjectId).join("_");g=L[h];g||(g=L[h]=new ga({proxy:b.getter(d),value:a,handler:{destroy:function(){L[h]=null;a.removeHandler(f,this)}}}),f.destroy=function(){L[h]=null;this.destroy()},a.addHandler(f,g))}if(!g){var h=a.basisObjectId,m=a.bindingBridge;h&&m&&(g=L[h],g||(g=L[h]=new ga({value:m.get(a),handler:{destroy:function(){L[h]=
null;m.detach(a,aa.prototype.set,g)}}}),m.attach(a,aa.prototype.set,g,g.destroy)))}if(!g)throw Error("Bad object type");return g};var K=new ga({value:void 0}),V={},U={};aa.query=function(a,b){if(1==arguments.length)return b=a,x(function(a){return aa.query(a,b)});if(0==a instanceof G)throw Error("Bad target type");if("string"!=typeof b)throw Error("Path should be a string");var c=q(a,b.split("."),0),d;if(!c)return K;d=aa.from(a,c.events,c.getter);c.rest&&(d=d.as(t(c.rest)).pipe("change","value"));
return d};aa.factory=function(a,b){return x(function(c){return aa.from(c,a,b)})};aa.state=function(a){return a instanceof Z?aa.from(a,"stateChanged","state"):g.UNDEFINED};aa.stateFactory=function(a,b){return aa.factory(a,b).pipe("stateChanged","state").as(function(a){return a||g.UNDEFINED})};var ha={},da=e(Z,{className:"basis.data.Object",propertyDescriptors:{delegate:"delegateChanged",target:"targetChanged",root:"rootChanged",data:{nested:!0,events:"update"}},subscribeTo:k.DELEGATE+k.TARGET,data:null,
emit_update:A("update","delta")&&function(a){var b=this.delegates_;for(S.update.call(this,a);b;)b.delegate&&b.delegate.emit_update(a),b=b.next},emit_stateChanged:function(a){var b=this.delegates_;for(Z.prototype.emit_stateChanged.call(this,a);b;)b.delegate&&(b.delegate.state=this.state,b.delegate.emit_stateChanged(a)),b=b.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:A("delegateChanged","oldDelegate"),target:null,emit_targetChanged:A("targetChanged","oldTarget"),root:null,
emit_rootChanged:A("rootChanged","oldRoot"),init:function(){this.root=this;Z.prototype.init.call(this);var a=this.delegate,b=this.data;a?(this.target=this.delegate=null,this.data=ha,this.setDelegate(a),this.data===ha&&(this.data=b||{})):(b||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(a){if((a=ba(this,this.setDelegate,a,"delegateRA_"))&&a instanceof da){if(a.delegate&&f(this,a))return!1}else a=null;if(this.delegate!==a){var b=this.state,d=this.data,g=this.delegate,
h=this.target,m=this.root,l=this.listen.delegate,N=!1,e;if(g){l&&g.removeHandler(l,this);for(var p=g.delegates_,r=g;p;){if(p.delegate===this){p.delegate=null;r===g?g.delegates_=p.next:r.next=p.next;break}r=p;p=p.next}}if(a){if(this.delegate=a,l&&a.addHandler(l,this),a.delegates_={delegate:this,next:a.delegates_},this.data!==ha){e={};for(var n in a.data)!1===n in d&&(N=!0,e[n]=void 0);for(n in d)d[n]!==a.data[n]&&(N=!0,e[n]=d[n])}}else for(n in this.target=this.delegate=null,this.root=this,this.data=
{},d)this.data[n]=d[n];c(this,m,h);N&&this.emit_update(e);!e||b===this.state||String(b)==this.state&&b.data===this.state.data||this.emit_stateChanged(b);this.emit_delegateChanged(g);return!0}return!1},setState:function(a,b){return this.delegate?this.root.setState(a,b):Z.prototype.setState.call(this,a,b)},update:function(a){if(this.delegate)return this.root.update(a);if(a){var b={},c=!1,d;for(d in a)this.data[d]!==a[d]&&(c=!0,b[d]=this.data[d],this.data[d]=a[d]);if(c)return this.emit_update(b),b}return!1},
destroy:function(){Z.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.delegateRA_&&ba(this,!1,!1,"delegateRA_");this.data=ca;this.target=this.root=null}}),ba=u(da);M=e(da,{className:"basis.data.Slot"});var ja={destroy:function(){delete this.map[this.id]}},ea=e(Z,{className:"basis.data.KeyObjectMap",itemClass:da,keyGetter:b.getter(C),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_=
{};Z.prototype.init.call(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a){return new this.itemClass(a instanceof da?{delegate:a}:{data:{id:a,title:a}})},get:function(a,b){var c=a instanceof da?a.basisObjectId:a,d=this.map_[c];!d&&b&&(d=this.map_[c]={map:this.map_,id:c,item:this.create(a,b)},d.item.addHandler(ja,d));if(d)return d.item},destroy:function(){Z.prototype.destroy.call(this);var a=this.map_;this.map_=null;for(var b in a){var c=a[b];this.autoDestroyMembers?
c.item.destroy():c.item.removeHandler(ja,c)}}}),Y=e(da,{className:"basis.data.DatasetWrapper",propertyDescriptors:{dataset:"datasetChanged",itemCount:"itemsChanged","pick()":"itemsChanged","getItems()":"itemsChanged"},active:J,subscribeTo:da.prototype.subscribeTo+k.DATASET,listen:{dataset:{itemsChanged:function(a,b){this.itemCount=a.itemCount;this.emit_itemsChanged(b)},destroy:function(){this.setDataset()}}},dataset:null,datasetRA_:null,emit_datasetChanged:A("datasetChanged","oldDataset"),emit_itemsChanged:A("itemsChanged",
"delta"),init:function(){da.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=d(this,this.setDataset,a,"datasetRA_");if(this.dataset!==a){var b=this.listen.dataset,c=this.dataset,g;b&&(c&&c.removeHandler(b,this),a&&a.addHandler(b,this));this.itemCount=a?a.itemCount:0;this.dataset=a;(g=m(c,a))&&this.emit_itemsChanged(g);this.emit_datasetChanged(c)}},has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?
this.dataset.getItems():[]},getValues:function(a){return this.dataset?this.dataset.getValues(a):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset();da.prototype.destroy.call(this)}}),sa=e(Z,{className:"basis.data.ReadOnlyDataset",propertyDescriptors:{itemCount:"itemsChanged","pick()":"itemsChanged",
"getItems()":"itemsChanged"},itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:A("itemsChanged","delta")&&function(a){var b,c=0,d=0,g;if(b=a.inserted)for(;g=b[c];)this.items_[g.basisObjectId]=g,c++;if(b=a.deleted)for(;g=b[d];)delete this.items_[g.basisObjectId],d++;this.itemCount+=c-d;this.cache_=c==this.itemCount?a.inserted:null;S.itemsChanged.call(this,a)},init:function(){Z.prototype.init.call(this);this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},
getItems:function(){this.cache_||(this.cache_=E(this.items_));return this.cache_},getValues:function(a){return this.getItems().map(b.getter(a||C))},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var b=[];if(a)for(var c in this.items_)if(b.push(this.items_[c])>=a)break;return b},forEach:function(a){for(var b=this.getItems(),c=0;c<b.length;c++)a(b[c])},destroy:function(){Z.prototype.destroy.call(this);this.cache_=ua;this.itemCount=0;this.items_=this.members_=
null}}),ta=e(sa,{className:"basis.data.Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){sa.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var b=this.members_,c=this.listen.item,d=[],g;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var h=a[f];if(h instanceof da){var m=h.basisObjectId;b[m]||(b[m]=h,c&&h.addHandler(c,this),d.push(h))}}d.length&&this.emit_itemsChanged(g={inserted:d});return g},remove:function(a){var b=
this.members_,c=this.listen.item,d=[],g;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var h=a[f];if(h instanceof da){var m=h.basisObjectId;b[m]&&(c&&h.removeHandler(c,this),delete b[m],d.push(h))}}d.length&&this.emit_itemsChanged(g={deleted:d});return g},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var b=this.members_,c=this.listen.item,d={},g=[],f=[],m,N,l,e=0;e<a.length;e++)m=a[e],m instanceof da&&(N=m.basisObjectId,d[N]=m,b[N]||(b[N]=
m,c&&m.addHandler(c,this),f.push(m)));for(N in b)d[N]||(m=b[N],c&&m.removeHandler(c,this),delete b[N],g.push(m));(l=h(f,g))&&this.emit_itemsChanged(l);return l},sync:function(a){return this.setAndDestroyRemoved(a)},setAndDestroyRemoved:function(a){a=this.set(a)||{};var b=a.deleted;ta.setAccumulateState(!0);if(b)for(var c=0,d;d=b[c];c++)d.destroy();ta.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),b=this.listen.item,c;if(a.length){if(b)for(c=0;c<a.length;c++)a[c].removeHandler(b,
this);this.emit_itemsChanged(c={deleted:a});this.members_={}}return c},destroy:function(){this.clear();sa.prototype.destroy.call(this)}}),ya={datasetChanged:F,destroy:O};ta.setAccumulateState=function(){function a(){function b(a){var d=c[a];d&&(c[a]=null,N.call(d.dataset,d))}var c=f,d=g.emit_itemsChanged;g.emit_itemsChanged=function(a){b(this.basisObjectId);d.call(this,a)};f={};for(var h in c)b(h);g.emit_itemsChanged=d}function c(a){var b=this.basisObjectId,d=a.inserted,g=a.deleted,h=f[b];if(d&&g||
h&&h.mixed)h&&(f[b]=null,N.call(h.dataset,h)),N.call(this,a);else if(h){a=d?"inserted":"deleted";var m=h[a];if(m)m.push.apply(m,d||g);else{for(var m=d?"deleted":"inserted",l=h[m],e={},d=d||g,g=[],n=0,r=0;r<l.length;r++)e[l[r].basisObjectId]=r;for(r=0;r<d.length;r++){var w=d[r].basisObjectId;0==w in e?g.push(d[r]):(n||(l=p.call(l)),n++,l[e[w]]=null)}n&&(l=n<l.length?l.filter(Boolean):null,h[m]=l);g.length?(h[a]=g,l&&(h.mixed=!0)):l||(f[b]=null)}}else f[b]={inserted:d,deleted:g,dataset:this,mixed:!1}}
function d(){m=null;h&&(h=0,g.emit_itemsChanged=N,a())}var g=sa.prototype,f={},h=0,m,N;return function(f){f?(0==h&&(N=g.emit_itemsChanged,g.emit_itemsChanged=c,m||(m=b.setImmediate(d))),h++):(h-=0<h,0==h&&(g.emit_itemsChanged=N,a()))}}();B.exports={STATE:g,SUBSCRIPTION:k,AbstractData:Z,Value:aa,ReadOnlyValue:ga,DeferredValue:wa,PipeValue:Q,chainValueFactory:x,Object:da,Slot:M,KeyObjectMap:ea,ReadOnlyDataset:sa,Dataset:ta,DatasetWrapper:Y,isConnected:f,getDatasetDelta:m,ResolveAdapter:w,createResolveFunction:u,
resolveValue:H,resolveObject:ba,resolveDataset:d,wrapData:D,wrapObject:a,wrap:function(b,c){var d=c?a:D;return Array.isArray(b)?b.map(d):d(b)}}},"g.js":function(e,B,b,k,u,H,A,J,M){var q=Object.prototype.hasOwnProperty,t=b.object.values,x={},y={priority:[],values:{},add:function(b,e){var r=b.toLowerCase();y[b]=r;x[r]=b;this.values[r]=b;e=e?this.priority.indexOf(e):-1;-1==e?this.priority.push(r):this.priority.splice(e,0,r)},getList:function(){return t(x)},isValid:function(b){return q.call(x,b)}};y.add("READY");
y.add("DEPRECATED");y.add("UNDEFINED");y.add("ERROR");y.add("PROCESSING");B.exports=y},"h.js":function(e,B,b,k,u,H,A,J,M){function q(b,e){return function(){b.apply(this,arguments);e.apply(this,arguments)}}var t={},x=1,y={},v={NONE:0,ALL:0,add:function(b,e,f){t[x]={handler:e,action:f};v[b]=x;v.ALL|=x;x<<=1},addProperty:function(b,e){var f={};f[e||b+"Changed"]=function(c,h){h&&v.unlink(b,c,h);c[b]&&v.link(b,c,c[b])};this.add(b.toUpperCase(),f,function(c,h){h[b]&&c(b,h,h[b])})},getMaskConfig:function(b){var e=
y[b];if(!e)for(var f=[],c={},h=1,e=y[b]={actions:f,handler:c};b;){if(b&1){var m=t[h];f.push(m.action);for(var l in m.handler)c[l]=c[l]?q(c[l],m.handler[l]):m.handler[l]}h<<=1;b>>=1}return e},link:function(b,e,f){b+=e.basisObjectId;var c=f.subscribers_;c||(c=f.subscribers_={});c[b]||(c[b]=e,1==(f.subscriberCount+=1)&&f.emit_subscribersChanged(1))},unlink:function(b,e,f){b+=e.basisObjectId;(e=f.subscribers_)&&e[b]&&(delete e[b],0==--f.subscriberCount&&(f.emit_subscribersChanged(-1),f.subscribers_=null))},
subscribe:function(b,e){for(var f=this.getMaskConfig(e),c=0,h;h=f.actions[c];c++)h(v.link,b);b.addHandler(f.handler)},unsubscribe:function(b,e){for(var f=this.getMaskConfig(e),c=0,h;h=f.actions[c++];)h(v.unlink,b);b.removeHandler(f.handler)},changeSubscription:function(b,e,f){var c=e^f;if(c){var h=v.getMaskConfig(e);f=v.getMaskConfig(f);b.removeHandler(h.handler);b.addHandler(f.handler);for(h=1;c;)c&1&&(f=t[h],e&h?f.action(v.unlink,b):f.action(v.link,b)),h<<=1,c>>=1}}};B.exports=v},"i.js":function(e,
B,b,k,u,H,A,J,M){function q(){this.fn.call(this.context,this.source)}function t(c,h,m,l,d){var e=c[l]||null,a=null;m&&h!==q&&b.fn.isFactory(m)&&(m=m.call(d||c,d||c));m&&m.bindingBridge&&(a=e&&e.source===m?e:new v(c,h,m,n),m=t(a,q,m.bindingBridge.get(m),"next"));if(l&&e!==a){for(h=e;h;)d=h,d.detach(),h=d.next,d.next=null;a&&a.attach(f);c[l]=a}return m}var x={},y=function(b,h,f,l){this.context=b;this.fn=h;this.source=f;this.handler=l};y.prototype={context:null,fn:null,source:null,handler:null,next:null,
attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var v=function(){y.apply(this,arguments)};v.prototype=new y;v.prototype.attach=function(b){this.source.bindingBridge.attach(this.source,this.handler,this,b)};v.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var n=function(){this.fn.call(this.context,this.source)},r=function(){this.fn.call(this.context,null)},f=function(){this.fn.call(this.context,
t(x,null,this.source.bindingBridge.get(this.source)))};B.exports={DEFAULT_CHANGE_ADAPTER_HANDLER:n,DEFAULT_DESTROY_ADAPTER_HANDLER:r,ResolveAdapter:y,BBResolveAdapter:v,createResolveFunction:function(b){return function m(f,d,e,a,p){var k=f[a]||null,C=null;d!==q&&"function"==typeof e&&(e=e.call(p||f,p||f));e&&e.bindingBridge&&(C=k&&k.source===e?k:new v(f,d,e,n),e=m(C,q,e.bindingBridge.get(e),"next"));0==e instanceof b&&(e=null);if(a&&k!==C){for(d=k;d;)p=d,p.detach(),d=p.next,p.next=null;C&&C.attach(r);
f[a]=C}return e}},resolveValue:t}},"12.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./2.js");var q=e.Emitter;e=e.create;var t=b.require("./g.js"),x=b.require("./h.js"),y=b.require("./i.js").resolveValue,v=b.PROXY,n={subscribersChanged:function(b){this.set(0<b.subscriberCount)}};e=q.subclass({className:"basis.data.AbstractData",propertyDescriptors:{state:"stateChanged",active:"activeChanged",subscriberCount:"subscribersChanged",subscribeTo:!1,syncAction:!1,syncEvents:!1},state:t.UNDEFINED,stateRA_:null,
emit_stateChanged:e("stateChanged","oldState"),active:!1,activeRA_:null,emit_activeChanged:e("activeChanged"),subscribeTo:x.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:e("subscribersChanged","delta"),syncEvents:b.Class.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){q.prototype.init.call(this);this.active&&(this.active===v&&(this.active=new b.Token(0<this.subscriberCount),this.addHandler(n,
this.active)),(this.active=!!y(this,this.setActive,this.active,"activeRA_"))&&this.addHandler(x.getMaskConfig(this.subscribeTo).handler));if(this.state!=t.UNDEFINED){var e=this.state;"string"!=typeof this.state&&(e=y(this,this.setState,e,"stateRA_"));e&&!t.isValid(e)&&(e=!1);this.state=e||t.UNDEFINED}if(e=this.syncAction)this.syncAction=null,this.setSyncAction(e)},setState:function(b,f){b=y(this,this.setState,b,"stateRA_")||t.UNDEFINED;var c=String(b);if(!t.isValid(c))return!1;this.stateRA_&&void 0===
f&&(f=b.data);if(this.state!=c||this.state.data!=f){var h=this.state;this.state=Object(c);this.state.data=f;this.emit_stateChanged(h);return!0}return!1},deprecate:function(){this.state!=t.PROCESSING&&this.setState(t.DEPRECATED)},setActive:function(e){var f=this.activeRA_&&this.activeRA_.proxyToken;e===v?(f||(f=new b.Token(0<this.subscriberCount),this.addHandler(n,f)),e=f):f&&e!==f&&(this.removeHandler(n,f),f=null);e=!!y(this,this.setActive,e,"activeRA_");f&&this.activeRA_&&(this.activeRA_.proxyToken=
f);return this.active!=e?(this.active=e,this.emit_activeChanged(),e?x.subscribe(this,this.subscribeTo):x.unsubscribe(this,this.subscribeTo),!0):!1},setSubscription:function(b){var f=this.subscribeTo;b&=x.ALL;return f^b?(this.subscribeTo=b,this.active&&x.changeSubscription(this,f,b),!0):!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==t.UNDEFINED||this.state==t.DEPRECATED)},setSyncAction:function(b){var f=this.syncAction;"function"!=typeof b&&(b=null);(this.syncAction=b)?(f||
this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):f&&this.removeHandler(this.syncEvents)},destroy:function(){q.prototype.destroy.call(this);if(this.active)for(var b=x.getMaskConfig(this.subscribeTo),f=0,c;c=b.actions[f];f++)c(x.unlink,this);this.activeRA_&&y(this,!1,!1,"activeRA_");this.stateRA_&&y(this,!1,!1,"stateRA_");this.state=t.UNDEFINED}});B.exports=e},"j.js":function(e,B,b,k,u,H,A,J,M){function q(a){return"string"==typeof a?v.getElementById(a):a}function t(a){if(!p&&
!this.ignoreTarget(a.sender,a)){var b=d(a.sender);a.mouseX<b.left||a.mouseX>b.right||a.mouseY<b.top||a.mouseY>b.bottom||(p=this,E={initX:a.mouseX,initY:a.mouseY,deltaX:0,minDeltaX:-Infinity,maxDeltaX:Infinity,deltaY:0,minDeltaY:-Infinity,maxDeltaY:Infinity},f("mousedown",y),f("touchstart",y),f("mousemove",x),f("touchmove",x),f("mouseup",y),f("touchend",y),D&&f("selectstart",r.kill),a.preventDefault(),this.prepareDrag(E,a))}}function x(c){var d=c.mouseX-E.initX,f=c.mouseY-E.initY;if(!a){if(!p.startRule(d,
f))return;a=!0;p.emit_start(E,c)}p.axisX&&(E.deltaX=p.axisXproxy(b.number.fit(d,E.minDeltaX,E.maxDeltaX)));p.axisY&&(E.deltaY=p.axisYproxy(b.number.fit(f,E.minDeltaY,E.maxDeltaY)));p.emit_drag(E,c)}function y(b){c("mousedown",y);c("touchstart",y);c("mousemove",x);c("touchmove",x);c("mouseup",y);c("touchend",y);D&&c("selectstart",r.kill);var d=p,f=E;E=p=null;a&&(a=!1,d.emit_over(f,b));b.die()}var v=k.document,n=b.cleaner,r=b.require("./d.js"),f=r.addGlobalHandler,c=r.removeGlobalHandler;e=b.require("./2.js");
var h=e.Emitter;e=e.create;var m=b.require("./k.js").get;u=b.require("./l.js");var l=u.getBoundingRect,d=u.getViewportRect,D=r.getEventInfo("selectstart").supported,a,p,E,C=h.subclass({className:"basis.dragdrop.DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:b.fn.$self,axisYproxy:b.fn.$self,prepareDrag:b.fn.$undef,startRule:b.fn.$true,ignoreTarget:function(a){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(a.tagName)},emit_start:e("start"),emit_drag:e("drag"),
emit_over:e("over"),init:function(){h.prototype.init.call(this);var a=this.element,b=this.trigger;this.trigger=this.element=null;this.setElement(a,b);this.setBase(this.baseElement);n.add(this)},setElement:function(a,b){this.element=q(a);b=q(b)||this.element;this.trigger!==b&&(this.trigger&&(r.removeHandler(this.trigger,"mousedown",t,this),r.removeHandler(this.trigger,"touchstart",t,this)),this.trigger=b)&&(r.addHandler(this.trigger,"mousedown",t,this),r.addHandler(this.trigger,"touchstart",t,this))},
setBase:function(a){this.baseElement=q(a)},getBase:function(){return"fixed"==m(this.element,"position")?k:this.baseElement?this.baseElement:"CSS1Compat"==v.compatMode?v.documentElement:v.body},isDragging:function(){return p===this},start:function(a){this.isDragging()||t.call(this,a)},stop:function(){this.isDragging()&&y()},destroy:function(){this.stop();n.remove(this);h.prototype.destroy.call(this);this.setElement();this.setBase()}});e=b.Class(null,{className:"basis.dragdrop.DeltaWriter",property:null,
invert:!1,format:b.fn.$self,init:function(a){"function"==typeof this.property&&(this.property=this.property(a));"function"==typeof this.invert&&(this.invert=this.invert(this.property));this.value=this.read(a)},read:function(a){return a[this.property]},write:function(a,b){a[this.property]=b},applyDelta:function(a,b){this.invert&&(b=-b);this.write(a,this.format(this.value+b,b))}});u=e.subclass({className:"basis.dragdrop.StyleDeltaWriter",format:function(a){return a+"px"},read:function(a){return parseFloat(m(a,
this.property))||0},write:function(a,b){a.style[this.property]=b}});H=u.subclass({className:"basis.dragdrop.StylePositionX",property:function(a){return"auto"==m(a,"left")&&"auto"!=m(a,"right")?"right":"left"},invert:function(a){return"right"==a}});A=u.subclass({className:"basis.dragdrop.StylePositionY",property:function(a){return"auto"==m(a,"top")&&"auto"!=m(a,"bottom")?"bottom":"top"},invert:function(a){return"bottom"==a}});H=C.subclass({className:"basis.dragdrop.MoveableElement",fixTop:!0,fixRight:!0,
fixBottom:!0,fixLeft:!0,axisX:H,axisY:A,emit_start:function(a,b){var c=this.element;if(c){var f=d(this.getBase()),h=l(c,this.getBase());a.element=c;this.axisX&&(a.axisX=new this.axisX(c),this.fixLeft&&(a.minDeltaX=f.left-h.left),this.fixRight&&(a.maxDeltaX=f.right-h.right));this.axisY&&(a.axisY=new this.axisY(c),this.fixTop&&(a.minDeltaY=f.top-h.top),this.fixBottom&&(a.maxDeltaY=f.bottom-h.bottom))}C.prototype.emit_start.call(this,a,b)},emit_drag:function(a,b){a.element&&(a.axisX&&a.axisX.applyDelta(a.element,
a.deltaX),a.axisY&&a.axisY.applyDelta(a.element,a.deltaY),C.prototype.emit_drag.call(this,a,b))}});B.exports={DragDropElement:C,MoveableElement:H,DeltaWriter:e,StyleDeltaWriter:u}},"k.js":function(e,B,b,k,u,H,A,J,M){var q=k.document;if("getComputedStyle"in k){var t={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},x=b.fn.runOnce(function(){var e=q.createElement("div");e.setAttribute("style","position:absolute;top:auto!important");b.doc.body.add(e);"auto"==k.getComputedStyle(e).top&&(t={});b.doc.remove(e)});
e=function(b,e){var f=k.getComputedStyle(b);if(f){e in t&&x();if(t[e]&&"static"!=f.position){var c=b.style.display;b.style.display="none";f=f.getPropertyValue(e);b.style.display=c}else f=f.getPropertyValue(e);return f}}}else{var y=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,v=/\dpx$/i;e=function(e,r){var f=e.currentStyle;if(f){var f=f["float"==r?"styleFloat":b.string.camelize(r)],c=(f||"").match(y);if(c&&c[2]&&"px"!=c[2])if(v.test(f))f=parseInt(f,10)+"px";else{var c=e.style,h=e.runtimeStyle,m=c.left,l=h.left;h.left=
e.currentStyle.left;c.left=f||0;f=c.pixelLeft;c.left=m;h.left=l;f+="px"}return f}}}B.exports={get:e}},"l.js":function(e,B,b,k,u,H,A,J,M){function q(b){var f=0,c=0;if(b&&b.getBoundingClientRect)b=b.getBoundingClientRect(),f=-b.top,c=-b.left;else if(n)f=k.pageYOffset||y.scrollTop,c=k.pageXOffset||y.scrollLeft;else{var h=x.body;b!==h&&(f=h.scrollTop-h.clientTop,c=h.scrollLeft-h.clientLeft)}return{left:c,top:f}}function t(b,f){var c=0,h=0,m=q(f);b&&b.getBoundingClientRect&&(c=b.getBoundingClientRect(),
h=c.top,c=c.left);return{top:h+m.top,left:c+m.left}}var x=k.document,y=x.documentElement,v=b.require("./k.js").get,n="CSS1Compat"==x.compatMode;B.exports={getOffset:q,getOffsetParent:function(b){for(b=b.offsetParent||y;b&&b!==y&&"static"==v(b,"position");)b=b.offsetParent;return b||y},getTopLeftPoint:t,getBoundingRect:function(b,f){var c=0,h=0,m=0,e=0,d=q(f);b&&b.getBoundingClientRect&&(e=b.getBoundingClientRect(),c=e.top,h=e.left,m=e.right,e=e.bottom);return{top:c+d.top,left:h+d.left,right:m+d.left,
bottom:e+d.top,width:m-h,height:e-c}},getViewportRect:function(b,f){var c=b!==(n?x.documentElement:x.body)||f?t(b,f):q(),h=c.top,c=c.left,m,e;b&&b!==k?(h+=b.clientTop,c+=b.clientLeft,m=b.clientWidth,e=b.clientHeight):(m=k.innerWidth||0,e=k.innerHeight||0);return{top:h,left:c,right:c+m,bottom:h+e,width:m,height:e}}}},"m.js":function(e,B,b,k,u,H,A,J,M){B.exports={getDelta:b.require("./13.js"),createRuleEvents:b.require("./14.js"),SourceDataset:b.require("./15.js"),Merge:b.require("./16.js"),Subtract:b.require("./17.js"),
MapFilter:b.require("./18.js"),Split:b.require("./19.js"),Cloud:b.require("./1b.js"),Extract:b.require("./1c.js"),Filter:b.require("./1d.js"),Slice:b.require("./1e.js")}},"13.js":function(e,B,b,k,u,H,A,J,M){B.exports=function(b,e){var k={},y;b&&b.length&&(y=k.inserted=b);e&&e.length&&(y=k.deleted=e);if(y)return k}},"14.js":function(e,B,b,k,u,H,A,J,M){var q=b.object.extend,t=b.require("./2.js").createHandler;B.exports=function(b,e){return function n(e){if(!e)return null;if(e.__extend__)return e;"string"==
typeof e||Array.isArray(e)||(e=null);return q(t(e,b),{__extend__:n})}(e)}},"15.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./2.js").create;var q=b.require("./f.js").resolveDataset,t=b.require("./f.js").ReadOnlyDataset,x=b.require("./f.js").Dataset.setAccumulateState;k=b.require("./h.js");k.addProperty("source");B.exports=t.subclass({className:"basis.data.dataset.SourceDataset",propertyDescriptors:{source:"sourceChanged",subtrahend:"subtrahendChanged"},active:b.PROXY,subscribeTo:k.SOURCE,source:null,
emit_sourceChanged:e("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var b=this.source;this.source=null;this.sourceMap_={};t.prototype.init.call(this);b&&this.setSource(b)},setSource:function(b){b=q(this,this.setSource,b,"sourceRA_");if(this.source!==b){var e=this.source,n=this.listen.source,k;n&&(k=n.itemsChanged,e&&e.removeHandler(n,this),b&&b.addHandler(n,this));this.source=b;this.emit_sourceChanged(e);
k&&(x(!0),e&&k.call(this,e,{deleted:e.getItems()}),b&&k.call(this,b,{inserted:b.getItems()}),x(!1))}},destroy:function(){this.setSource();t.prototype.destroy.call(this);this.sourceMap_=null}})},"16.js":function(e,B,b,k,u,H,A,J,M){var q=b.array.add,t=b.array.remove;e=b.require("./2.js").create;var x=b.require("./2.js").Emitter,y=b.require("./f.js").resolveDataset,v=b.require("./f.js").ReadOnlyDataset,n=b.require("./13.js"),r=b.require("./h.js");r.add("SOURCES",{sourcesChanged:function(b,f){var e;if(e=
f.inserted)for(var l=0;e[l];l++)r.link("source",b,e[l]);if(e=f.deleted)for(l=0;e[l];l++)r.unlink("source",b,e[l])}},function(b,f){for(var e=f.sources,l=0,d;d=e[l++];)b("source",f,d)});var f=function(b){return 0<b};e=v.subclass({className:"basis.data.dataset.Merge",propertyDescriptors:{rule:"ruleChanged"},active:b.PROXY,subscribeTo:r.SOURCES,emit_sourcesChanged:e("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:f,emit_ruleChanged:e("ruleChanged","oldRule"),
listen:{source:{itemsChanged:function(b,f){var e=this.members_,l={},d,n;if(f.inserted)for(var a=0;d=f.inserted[a];a++)n=d.basisObjectId,e[n]?e[n].count++:e[n]={count:1,object:d},l[n]=e[n];if(f.deleted)for(a=0;d=f.deleted[a];a++)n=d.basisObjectId,l[n]=e[n],e[n].count--;this.applyRule(l)}},sourceValue:{destroy:function(b){this.removeSource(b)}}},init:function(){v.prototype.init.call(this);var b=this.sources;this.sources=[];this.sourcesMap_={};this.sourceValues_=[];b&&this.setSources(b)},setRule:function(c){c=
b.getter(c||f);if(this.rule!==c){var h=this.rule;this.rule=c;this.emit_ruleChanged(h);return this.applyRule()}},applyRule:function(b){var f=this.members_,e=this.rule,l=this.sources.length,d=[],k=[],a,p;b||(b=f);for(var r in b)b=f[r],a=l&&b.count&&e(b.count,l),a!=r in this.items_&&(a?d.push(b.object):k.push(b.object)),0==b.count&&delete f[r];(p=n(d,k))&&this.emit_itemsChanged(p);return p},addDataset_:function(b){this.sources.push(b);this.listen.source&&b.addHandler(this.listen.source,this);var f=this.members_,
e;for(e in b.items_)f[e]?f[e].count++:f[e]={count:1,object:b.items_[e]};return!0},removeDataset_:function(b){t(this.sources,b);this.listen.source&&b.removeHandler(this.listen.source,this);var f=this.members_,e;for(e in b.items_)f[e].count--},updateDataset_:function(b){var f=this.owner,e=f.sourcesMap_;b=y(this,f.updateDataset_,b,"adapter",f);var l,d;if(this.dataset!==b){if(b){var k=(e[b.basisObjectId]||0)+1;e[b.basisObjectId]=k;1==k&&(f.addDataset_(b),l=[b])}this.dataset&&(k=(e[this.dataset.basisObjectId]||
0)-1,e[this.dataset.basisObjectId]=k,0==k&&(f.removeDataset_(this.dataset),d=[this.dataset]));this.dataset=b;f.applyRule();if(e=n(l,d))(l=f.sourceDelta_)?(e.inserted&&e.inserted.forEach(function(a){t(this.deleted,a)||q(this.inserted,a)},l),e.deleted&&e.deleted.forEach(function(a){t(this.inserted,a)||q(this.deleted,a)},l)):f.emit_sourcesChanged(e);return e}},getSourceValues:function(){return this.sourceValues_.map(function(b){return b.source})},addSource:function(b){if(b&&("object"==typeof b||"function"==
typeof b)&&!this.hasSource(b)){var f={owner:this,source:b,adapter:null,dataset:null};this.sourceValues_.push(f);this.updateDataset_.call(f,b);this.listen.sourceValue&&b instanceof x&&b.addHandler(this.listen.sourceValue,this)}},removeSource:function(b){for(var f=0,e;e=this.sourceValues_[f];f++)if(e.source===b){this.listen.sourceValue&&b instanceof x&&b.removeHandler(this.listen.sourceValue,this);this.updateDataset_.call(e,null);this.sourceValues_.splice(f,1);break}},hasSource:function(b){for(var f=
0,e;e=this.sourceValues_[f];f++)if(e.source===b)return!0;return!1},setSources:function(b){var f=this.sourceValues_.map(function(a){return a.source}),e=[],l=[],d;b||(b=[]);this.sourceDelta_={inserted:e,deleted:l};for(var k=0;k<b.length;k++){var a=b[k];t(f,a)||this.addSource(a)}f.forEach(this.removeSource,this);this.sourceDelta_=null;(d=n(e,l))&&this.emit_sourcesChanged(d);return d},destroy:function(){this.setSources();v.prototype.destroy.call(this);this.sources=this.sourceDelta_=this.sourcesMap_=this.sourceValues_=
null}});e.UNION=f;e.INTERSECTION=function(b,f){return b==f};e.DIFFERENCE=function(b){return 1==b};e.MORE_THAN_ONE_INCLUDE=function(b,f){return 1==f||1<b};e.AT_LEAST_ONE_EXCLUDE=function(b,f){return 1==f||b<f};B.exports=e},"17.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./2.js").create;var q=b.require("./f.js").resolveDataset,t=b.require("./f.js").ReadOnlyDataset,x=b.require("./13.js");k=b.require("./h.js");k.addProperty("minuend");k.addProperty("subtrahend");var y=function(b){return!this.has(b)};
B.exports=t.subclass({className:"basis.data.dataset.Subtract",propertyDescriptors:{minuend:"minuendChanged",subtrahend:"subtrahendChanged"},active:b.PROXY,subscribeTo:k.MINUEND+k.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:e("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,emit_subtrahendChanged:e("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(b,e){if(this.subtrahend){var k=x(e.inserted&&e.inserted.filter(y,this.subtrahend),e.deleted&&
e.deleted.filter(this.has,this));k&&this.emit_itemsChanged(k)}},destroy:function(){this.minuendRA_||this.setMinuend(null)}},subtrahend:{itemsChanged:function(b,e){if(this.minuend){var k=x(e.deleted&&e.deleted.filter(this.minuend.has,this.minuend),e.inserted&&e.inserted.filter(this.has,this));k&&this.emit_itemsChanged(k)}},destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}}},init:function(){t.prototype.init.call(this);var b=this.minuend,e=this.subtrahend;this.subtrahend=this.minuend=
null;(b||e)&&this.setOperands(b,e)},setOperands:function(b,e){var k,f=!1,c=this.minuend,h=this.subtrahend;b=q(this,this.setMinuend,b,"minuendRA_");e=q(this,this.setSubtrahend,e,"subtrahendRA_");if(c!==b){f=!0;this.minuend=b;var m=this.listen.minuend;m&&(c&&c.removeHandler(m,this),b&&b.addHandler(m,this));this.emit_minuendChanged(c)}if(h!==e){f=!0;this.subtrahend=e;if(m=this.listen.subtrahend)h&&h.removeHandler(m,this),e&&e.addHandler(m,this);this.emit_subtrahendChanged(h)}if(!f)return!1;if(b&&e){var f=
[],c=[],l;for(l in this.items_)b.items_[l]&&!e.items_[l]||f.push(this.items_[l]);for(l in b.items_)this.items_[l]||e.items_[l]||c.push(b.items_[l]);(k=x(c,f))&&this.emit_itemsChanged(k)}else this.itemCount&&this.emit_itemsChanged(k={deleted:this.getItems()});return k},setMinuend:function(b){return this.setOperands(b,this.subtrahendRA_?this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(b){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,b)},destroy:function(){this.setOperands();
t.prototype.destroy.call(this)}})},"1.js":function(e,B,b,k,u,H,A,J,M){function q(a){if(a=a.nodes)for(var b=a.length-1,c;c=a[b];b--)c.parentNode.insertBefore(c,c.nextSibling)}var t=k.document;e=b.Class;var x=b.require("./2.js").create,y=b.require("./3.js").Template,v=b.require("./6.js").MARKER,n=b.require("./8.js").TemplateSwitcher;H=b.require("./e.js");k=H.Node;u=H.PartitionNode;var r=H.GroupingNode,f=1,c=function(){var a={},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,c){a[b]||(a[b]=c)},process:function(c,
d){var f,h=d.match(b);h&&(f=a[h[1]],d=h[2]||c);return f?f(d):d}}}();c.add("data",function(a){return{events:"update",getter:"data."+a}});c.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var h=e.customExtendProperty({$role:{events:"ownerSatelliteNameChanged",getter:function(a){if(a.role){var b=a.roleId&&a.binding[a.roleId];return b&&"function"==typeof b.getter&&(b=b.getter(a),void 0===b)?"":a.role+(void 0!==b?"("+
b+")":"")}return a.ownerSatelliteName||""}},active:{events:"activeChanged",getter:function(a){return a.active}},state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",
getter:function(a){return!a.firstChild}}},function(a,d){a.bindingId=f++;for(var h in d){var e=null,m=d[h];C&&m instanceof C||b.resource.isResource(m)?e={events:"satelliteChanged",getter:function(a,b){var c="function"==typeof b?b:null,d=function(f){d=!1;if(c){b=c();if(0==b instanceof C)return;c=null}f.setSatellite(a,b)};return function(b){d&&d(b);return c||(b.satellite[a]?b.satellite[a].element:null)}}(h,m)}:m&&("string"==typeof m?m=c.process(h,m):m.bindingBridge&&(m=b.fn.$const(m)),e="object"!=typeof m?
{getter:"function"==typeof m?m:b.getter(m)}:Array.isArray(m)?{events:m[0],getter:b.getter(m[1])}:{events:m.events,getter:b.getter(m.getter)});a[h]=e}}),m={attach:function(a,b,c){a.addHandler(b,c)},detach:function(a,b,c){a.removeHandler(b,c)}},l=e.extensibleProperty({select:function(a){this.isDisabled()||this.selectedRA_||(this.contextSelection&&this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),d={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&
this.setTemplate(b.resolve(this))}},D=new y("<div/>"),a=[],p;H=function(c){return{propertyDescriptors:{action:!1,binding:!1,template:"templateChanged",tmpl:"templateChanged",element:!1,childNodesElement:!1},template:D,emit_templateChanged:x("templateChanged"),templateSwitcher_:null,binding:h,action:l,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=a.pop()||t.createDocumentFragment();c.init.call(this)},postInit:function(){c.postInit.call(this);var b=
this.template;if(b){var d=this.childNodesElement;this.template=null;this.setTemplate(b);a.push(d);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,m);b.childNodesHere&&(b.childNodesElement=b.childNodesHere.parentNode,b.childNodesElement.insertPoint=b.childNodesHere);this.tmpl=b;this.element=b.element;this.childNodesElement=b.childNodesElement||
b.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=t.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();for(b=this;b.grouping;)b=b.grouping;for(var c=b.lastChild;c;c=c.previousSibling)c instanceof E?b.insertBefore(c,c.nextSibling):q(c);q(b.nullGroup)}else for(b=this.lastChild;b;b=b.previousSibling)this.insertBefore(b,b.nextSibling);this instanceof E&&q(this);a&&a!==this.element&&11!=a.nodeType&&(b=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,
this.element),this.element.parentNode!==b&&b.replaceChild(this.element,a));this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,c;a instanceof n&&(c=a,a=c.resolve(this));0==a instanceof y&&(a=null);a&&(c&&(this.templateSwitcher_=c,b||this.addHandler(d,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(d,this)),b=this.tmpl,c=this.template,c!==a&&(this.template=a,this.templateSync(),c&&c.clearInstance(b)))},updateBind:function(a){var b=this.binding[a];
(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this));this.roleId==a&&this.updateBind("$roleId")},templateAction:function(a,b){var c=this.action[a];c&&c.call(this,b)},focus:function(a){var c=this.tmpl?this.tmpl.focus||this.element:null;c&&(p&&(p=b.clearImmediate(p)),p=b.setImmediate(function(){try{c.focus(),a&&c.select()}catch(b){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,b=this.element;this.templateSwitcher_&&
(this.templateSwitcher_=null,this.removeHandler(d,this));a.clearInstance(this.tmpl);c.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=b&&b.parentNode)&&1==a.nodeType&&a.removeChild(b)}}};A=function(a){return{insertBefore:function(b,c){b=a.insertBefore.call(this,b,c);var d=(b.groupNode||this).childNodesElement||this.childNodesElement,f=b.nextSibling,h=b.element,f=(f&&f.element.parentNode==d?f.element:null)||d.insertPoint||null;h.parentNode===d&&h.nextSibling===f||d.insertBefore(h,
f);return b},removeChild:function(b){a.removeChild.call(this,b);var c=b.element,d=c.parentNode;d&&d.removeChild(c);return b},clear:function(b){if(b)for(var c=this.firstChild;c;){var d=c.element,f=d.parentNode;f&&f.removeChild(d);c=c.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,c){var d=t.createDocumentFragment(),f=this.grouping||this,h=f.childNodesElement;f.childNodesElement=d;a.setChildNodes.call(this,b,c);h.insertBefore(d,h.insertPoint||null);f.childNodesElement=h}}};var E=e(u,H,{className:"basis.ui.PartitionNode",
binding:{title:"data:"}});u=e(r,A,{className:"basis.ui.GroupingNode",childClass:E,groupingClass:e.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();r.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=t.createDocumentFragment();r.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,c=null;b&&(c=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement);do a.element=a.childNodesElement=c;while(a=a.grouping)},
destroy:function(){r.prototype.destroy.call(this);this.childNodesElement=this.element=null}});var C=e(k,H,A,{className:"basis.ui.Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},disabled:{events:"disable enable",getter:function(a){return a.isDisabled()}},enabled:{events:"disable enable",getter:function(a){return!a.isDisabled()}},tabindex:{events:"enable disable",getter:function(a){return a.isDisabled()?
-1:a.tabindex||0}}},childClass:e.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:u});e=C.subclass({className:"basis.ui.ShadowNodeList",emit_ownerChanged:function(a){C.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||
this.owner.element)}}},childClass:{className:"basis.ui.ShadowNode",getElement:function(a){return a.element},templateSync:function(){C.prototype.templateSync.call(this);var a=this.getElement(this.delegate);a&&(a[v]=this.delegate.element[v],this.element=a)},listen:{delegate:{templateChanged:function(){var a=this.element,b=a.parentNode,c=this.getElement(this.delegate);c&&(c[v]=this.delegate.element[v]);this.element=c||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});B.exports={BINDING_PRESET:c,
Node:C,PartitionNode:E,GroupingNode:u,ShadowNodeList:e,ShadowNode:e.prototype.childClass}},"19.js":function(e,B,b,k,u,H,A,J,M){var q=b.fn.$undef;e=b.require("./f.js").ReadOnlyDataset;k=b.require("./f.js").DatasetWrapper;var t=b.require("./f.js").KeyObjectMap,x=b.require("./18.js"),y=b.require("./1a.js");B.exports=x.subclass({className:"basis.data.dataset.Split",subsetClass:e,subsetWrapperClass:k,keyMap:null,map:function(b){return this.keyMap.resolve(b)},rule:b.getter(q),setRule:function(e){e=b.getter(e||
q);if(this.rule!==e){var n=this.rule;this.rule=e;this.keyMap.keyGetter=e;this.emit_ruleChanged(n);return this.applyRule()}},addMemberRef:function(b,e){b.dataset.emit_itemsChanged({inserted:[e]})},removeMemberRef:function(b,e){b.dataset.emit_itemsChanged({deleted:[e]})},init:function(){this.keyMap&&0!=this.keyMap instanceof t||(this.keyMap=y(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));x.prototype.init.call(this)},getSubset:function(b,e){return this.keyMap.get(b,e)},destroy:function(){x.prototype.destroy.call(this);
this.keyMap.destroy();this.keyMap=null}})},"1a.js":function(e,B,b,k,u,H,A,J,M){var q=b.object.extend,t=b.require("./f.js").KeyObjectMap;B.exports=function(b,e,k,n){return new t(q({keyGetter:e,itemClass:k,create:function(b,f){var c=t.prototype.create.call(this,b,f);c.ruleValue=b;c.setDataset(new n({ruleValue:b}));return c}},b))}},"1b.js":function(e,B,b,k,u,H,A,J,M){e=b.fn.$self;k=b.fn.$undef;u=b.require("./f.js").ReadOnlyDataset;H=b.require("./f.js").DatasetWrapper;var q=b.require("./f.js").KeyObjectMap,
t=b.require("./f.js").Dataset.setAccumulateState,x=b.require("./15.js"),y=b.require("./1a.js");A=b.require("./14.js");var v=b.require("./13.js");B.exports=x.subclass({className:"basis.data.dataset.Cloud",subsetClass:u,subsetWrapperClass:H,rule:b.getter(k),ruleEvents:A(function(b){var e=this.sourceMap_,f=this.members_,c=b.basisObjectId,h=e[c].list,e=e[c].list={},c=this.rule(b),m,l=[],d=[],k;if(Array.isArray(c))for(var a=0;a<c.length;a++)(k=this.keyMap.get(c[a],!0))&&!k.has(b)&&(p=k.basisObjectId,e[p]=
k,h[p]||(k.dataset.emit_itemsChanged({inserted:[b]}),f[p]?f[p]++:(l.push(k),f[p]=1)));for(var p in h)e[p]||(k=h[p],k.dataset.emit_itemsChanged({deleted:[b]}),--f[p]||(delete f[p],d.push(k)));(m=v(l,d))&&this.emit_itemsChanged(m)},"update"),keyMap:null,map:e,listen:{source:{itemsChanged:function(b,e){var f=this.sourceMap_,c=this.members_,h=this.ruleEvents,m,l,d,k=[],a=[];t(!0);if(m=e.inserted)for(var p=0,q;q=m[p];p++){var C=this.rule(q),g={object:q,list:{}};f[q.basisObjectId]=g;if(Array.isArray(C))for(var w=
0,I={};w<C.length;w++)(l=this.keyMap.get(C[w],!0))&&!I[l.basisObjectId]&&(d=l.basisObjectId,I[d]=!0,g.list[d]=l,l.dataset.emit_itemsChanged({inserted:[q]}),c[d]?c[d]++:(k.push(l),c[d]=1));h&&q.addHandler(h,this)}if(m=e.deleted)for(p=0;q=m[p];p++){l=q.basisObjectId;C=f[l].list;delete f[l];for(d in C)l=C[d],l.dataset.emit_itemsChanged({deleted:[q]}),--c[d]||(delete c[d],a.push(l));h&&q.removeHandler(h,this)}t(!1);(e=v(k,a))&&this.emit_itemsChanged(e)}}},init:function(){this.keyMap&&0!=this.keyMap instanceof
q||(this.keyMap=y(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));x.prototype.init.call(this)},getSubset:function(b,e){return this.keyMap.get(b,e)},destroy:function(){x.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}})},"1c.js":function(e,B,b,k,u,H,A,J,M){function q(b,c,d){if((c=b.sourceMap_[c.basisObjectId])&&c.visited!==d){for(var f=c;f=f.ref;)if(f.object===b.source)return!0;c.visited=d;for(f=c;f=f.ref;)if(q(b,f.object,d||{}))return!0}}function t(b,c,d){var e=
b.sourceMap_,a=b.members_;c=n(c);for(var p=[],k=0;k<c.length;k++){var q=c[k],g=q.basisObjectId;g||(d=q.ref,q=q.object,g=q.basisObjectId);var w=e[g];if(w)w.ref={object:d,ref:w.ref};else if(w=e[g]={source:q,ref:{object:d,ref:null},visited:null,value:null},q instanceof r){var t=b.rule(q)||null;if(t instanceof r||t instanceof f)w.value=t,c.push({object:t,ref:q});a[g]=w;p.push(q);b.ruleEvents&&q.addHandler(b.ruleEvents,b)}else for(q.addHandler(h,b),g=0,w=q.getItems();g<w.length;g++)c.push({object:w[g],
ref:q})}return p}function x(b,c,d){var f=b.sourceMap_,a=b.members_;c=n(c);for(var e=[],k=0;k<c.length;k++){var C=c[k],g=C.basisObjectId;g||(d=C.ref,C=C.object,g=C.basisObjectId);for(var w=f[g],t=w.value,F=w,x=w;F=F.ref;){if(F.object===d){x.ref=F.ref;break}x=F}if(w.ref)t&&!q(b,C)&&(w.value=null,c.push({object:t,ref:C}));else{if(C instanceof r)delete a[g],e.push(C),b.ruleEvents&&C.removeHandler(b.ruleEvents,b),t&&c.push({object:t,ref:C});else for(C.removeHandler(h,b),w=0,t=C.getItems();w<t.length;w++)c.push({object:t[w],
ref:C});delete f[g]}}return e}var y=b.object.values,v=b.fn.$undef,n=b.array.from;e=b.require("./2.js").create;var r=b.require("./f.js").Object,f=b.require("./f.js").ReadOnlyDataset;k=b.require("./15.js");u=b.require("./14.js");var c=b.require("./13.js");H=function(b,f){var d=f.inserted,h=f.deleted;d&&(d=t(this,d,b));h&&(h=x(this,h,b));(f=c(d,h))&&this.emit_itemsChanged(f)};var h={itemsChanged:H,destroy:function(b){for(var c=this.sourceMap_,d=c[b.basisObjectId];d=d.ref;)c[d.object.basisObjectId].value=
null;delete c[b.basisObjectId]}};B.exports=k.subclass({className:"basis.data.dataset.Extract",propertyDescriptors:{rule:"ruleChanged"},rule:b.getter(v),emit_ruleChanged:e("ruleChanged","oldRule"),ruleEvents:u(function(b){var h=this.sourceMap_[b.basisObjectId],d=this.rule(b)||null,e=h.value,a,p,k;if(d!==e){if(d instanceof r||d instanceof f)a=t(this,d,b);e&&(p=x(this,e,b));h.value=d;(k=c(a,p))&&this.emit_itemsChanged(k)}},"update"),listen:{source:{itemsChanged:H}},setRule:function(c){c=b.getter(c||
v);if(this.rule!==c){var f=this.rule;this.rule=c;this.emit_ruleChanged(f);return this.applyRule()}},applyRule:function(){var b={},h={},d,e;for(e in this.sourceMap_){var a=this.sourceMap_[e],p=a.source;if(p instanceof r){var k=this.rule(p)||null,n=a.value;if(k!==n){if(k instanceof r||k instanceof f)for(var g=t(this,k,p),q=0;q<g.length;q++){var v=g[q],F=v.basisObjectId;h[F]?delete h[F]:b[F]=v}if(n)for(p=x(this,n,p),q=0;q<p.length;q++)v=p[q],F=v.basisObjectId,b[F]?delete b[F]:h[F]=v;a.value=k}}}(d=c(y(b),
y(h)))&&this.emit_itemsChanged(d);return d}})},"1d.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./18.js");B.exports=e.subclass({className:"basis.data.dataset.Filter",filter:function(b){return!this.rule(b)}})},"1e.js":function(e,B,b,k,u,H,A,J,M){function q(b,f){if(!b.length)return 0;var e=f.value,l=f.object.basisObjectId,d,k,a,p,n=0,q=b.length-1;do if(a=n+q>>1,p=b[a],d=p.value,e<d)q=a-1;else if(e>d)n=a+1;else if(k=p.object.basisObjectId,l<k)q=a-1;else if(l>k)n=a+1;else return a;while(n<=q);return a+
(d==e?k<l:d<e)}function t(b,f){return+(b.value>f.value)||-(b.value<f.value)||b.object.basisObjectId-f.object.basisObjectId}var x=b.fn.$true,y=b.object.values,v=b.object.slice;e=b.require("./2.js").create;var n=b.require("./f.js").Value;k=b.require("./14.js");var r=b.require("./13.js"),f=b.require("./15.js");B.exports=f.subclass({className:"basis.data.dataset.Slice",propertyDescriptors:{limit:"rangeChanged",offset:"rangeChanged",orderDesc:"ruleChanged",rule:"ruleChanged"},rule:b.getter(x),emit_ruleChanged:e("ruleChanged",
"oldRule","oldOrderDesc"),ruleEvents:k(function(b){var f=this.sourceMap_[b.basisObjectId];b=this.rule(b);var e=this.index_;if(b!==f.value){var l=q(e,f),d=e[l-1],k=e[l+1];f.value=b;if(d&&(d.value>b||d.value==b&&d.object.basisObjectId>f.object.basisObjectId)||k&&(k.value<b||k.value==b&&k.object.basisObjectId<f.object.basisObjectId))e.splice(l,1),e.splice(q(e,f),0,f),this.applyRule()}},"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(b,
f){var e=this.sourceMap_,l=this.index_,d=this.ruleEvents,k=!1,a=!1,p,n=f.inserted,r=f.deleted;if(r){r.length>l.length-r.length&&(k=!0,a=r.length!=l.length,l.length=0);for(var g=0,w;w=r[g];g++)k||(p=e[w.basisObjectId],l.splice(q(l,p),1)),delete e[w.basisObjectId],d&&w.removeHandler(d,this);if(a)for(var v in e)p=e[v],l.splice(q(l,p),0,p)}if(n){a=!l.length;for(g=0;w=n[g];g++)p={object:w,value:this.rule(w)},e[w.basisObjectId]=p,a?l.push(p):l.splice(q(l,p),0,p),d&&w.addHandler(d,this);a&&l.sort(t)}this.applyRule()}}},
emit_rangeChanged:e("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];f.prototype.init.call(this)},setRange:function(b,f){var e=this.offset,l=this.limit,d=!1;if(e!=b||l!=f)this.offset=b,this.limit=f,d=this.applyRule(),this.emit_rangeChanged(e,l);return d},setOffset:function(b){return this.setRange(b,this.limit)},setLimit:function(b){return this.setRange(this.offset,b)},setRule:function(c,f){c=b.getter(c||x);f=!!f;if(this.rule!=c||this.orderDesc!=f){var e=this.rule,l=this.orderDesc;
if(this.rule!=c){for(var d=this.index_,k=0;k<d.length;k++)d[k].value=c(d[k].object);d.sort(t);this.rule=c}this.orderDesc=f;this.rule=c;this.emit_ruleChanged(e,l);return this.applyRule()}},applyRule:function(){var b=this.offset,f=b+this.limit;this.orderDesc&&(b=this.index_.length-f,f=b+this.limit);for(var e=v(this.members_),l=this.index_.slice(Math.max(0,b),Math.max(0,f)),d=[],k,a=0,p;p=l[a];a++){var n=p.object.basisObjectId;e[n]?delete e[n]:(d.push(p.object),this.members_[n]=p.object)}for(n in e)delete this.members_[n];
if(this.left_)for(var q in this.left_)p=this.index_[this.orderDesc?f+Number(q)-1:b-Number(q)],this.left_[q].set(p?p.object:null);if(this.right_)for(q in this.right_)p=this.index_[this.orderDesc?b-Number(q):f+Number(q)-1],this.right_[q].set(p?p.object:null);(k=r(d,y(e)))&&this.emit_itemsChanged(k);return k},left:function(b){b=parseInt(b,10)||0;this.left_||(this.left_={});var f=this.left_[b];if(!f){var f=this.offset,e=f+this.limit;this.orderDesc&&(f=this.index_.length-e,e=f+this.limit);f=this.index_[this.orderDesc?
e+b-1:f-b];f=this.left_[b]=new n({value:f?f.object:null})}return f},right:function(b){b=parseInt(b,10)||0;this.right_||(this.right_={});var f=this.right_[b];if(!f){var f=this.offset,e=f+this.limit;this.orderDesc&&(f=this.index_.length-e,e=f+this.limit);f=this.index_[this.orderDesc?f-b:e+b-1];f=this.right_[b]=new n({value:f?f.object:null})}return f},destroy:function(){f.prototype.destroy.call(this);if(this.left_){for(var b in this.left_)this.left_[b].destroy();this.left_=null}if(this.right_){for(b in this.right_)this.right_[b].destroy();
this.right_=null}this.index_=null}})},"n.js":function(e,B,b,k,u,H,A,J,M){function q(){var a=arguments.length-1,b=arguments[a];if("function"!=typeof b)throw Error("basis.data.value.Expression: Last argument of constructor must be a function");for(var c=Array(a),d=0;d<a;d++){var f=c[d]=arguments[d];if(!f.bindingBridge)throw Error(t+".Expression: bb-value required");f.bindingBridge.attach(f,m,this,l)}this.calc_=b;this.values_=c;this.update();return this}function t(){return q.apply(new D(h),arguments)}
var x=b.cleaner;e=b.require("./f.js");var y=e.AbstractData,v=e.Value,n=e.ReadOnlyValue,r=e.STATE;e=v.subclass({className:"basis.data.value.Property",extendConstructor_:!1,init:function(a,b,c){this.value=a;this.handler=b;this.proxy=c;v.prototype.init.call(this)}});k=r.priority;var f={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},c=b.asap.schedule(function(a){a.update()});k=v.subclass({className:"basis.data.value.ObjectSet",
objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:k,stateChanged_:!0,init:function(){v.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var a=0,c=arguments.length;a<c;a++){var d=arguments[a];d instanceof y&&b.array.add(this.objects,d)&&d.addHandler(f,this)}this.fire(!0,
!0)},remove:function(a){b.array.remove(this.objects,a)&&a.removeHandler(f,this);this.fire(!0,!0)},clear:function(){for(var a=0,b;b=this.objects[a];a++)b.removeHandler(f,this);this.objects.length=0;this.fire(!0,!0)},fire:function(a,b){this.locked||(this.valueChanged_=this.valueChanged_||!!a,this.stateChanged_=this.stateChanged_||!!b,(this.valueChanged_||this.stateChanged_)&&c.add(this))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var a=this.valueChanged_,b=
this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;c.remove(this);if(!x.globalDestroy&&(a&&this.set(this.calculateValue()),b))if(a=this.objects.length){for(var b=-2,d,f=0;f<a;f++){var e=this.objects[f],h=this.statePriority.indexOf(String(e.state));h>b&&(d=e,b=h)}d&&this.setState(d.state,d.state.data)}else this.setState(r.UNDEFINED)},destroy:function(){this.lock();this.clear();c.remove(this);v.prototype.destroy.call(this)}});var h={},m=function(){c.add(this)},l=function(){this.destroy()},
d=function(a){return a.bindingBridge.get(a)},D=n.subclass({className:"basis.data.value.Expression",calc_:null,values_:null,extendConstructor_:!1,init:function(){n.prototype.init.call(this);arguments[0]!==h&&q.apply(this,arguments)},update:function(){c.remove(this);v.prototype.set.call(this,this.calc_.apply(null,this.values_.map(d)))},destroy:function(){c.remove(this);for(var a=0,b;b=this.values_[a];a++)b.bindingBridge.detach(b,m,this);n.prototype.destroy.call(this)}});B.exports={Property:e,ObjectSet:k,
Expression:D,expression:t}},"o.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./1f.js");k=b.require("./1g.js");u=b.require("./1h.js");H=b.require("./1i.js");var q=b.require("./1j.js");A=b.require("./1k.js");J=b.require("./1l.js");M=b.require("./1m.js");var t=b.require("./1n.js"),x=b.require("./1o.js"),y=b.require("./1p.js"),v=b.require("./1q.js"),n=A(J,b.fn.$true),r=A(M),f=A(t),c=A(x),h=A(y),m=A(v);B.exports={Index:e,VectorIndex:k,IndexWrapper:u,getDatasetIndex:e.getDatasetIndex,removeDatasetIndex:e.removeDatasetIndex,
Count:J,Sum:M,Avg:t,Min:x,Max:y,Distinct:v,createIndexConstructor:A,count:n,sum:r,avg:f,max:h,min:c,distinct:m,CalcIndexPreset:q,percentOfRange:function(f,d){var e=q.getId("min"),a=q.getId("max"),m={};m[e]=c(f,d);m[a]=h(f,d);d=b.getter(d||f);return new q(m,function(b,c,f){return(d(f)-c[e])/(c[a]-c[e])})},percentOfMax:function(c,d){var f=q.getId("max"),a={};a[f]=h(c,d);d=b.getter(d||c);return new q(a,function(a,b,c){return d(c)/b[f]})},percentOfSum:function(c,d){var f=q.getId("sum"),a={};a[f]=r(d,
c);c=b.getter(c||d);return new q(a,function(a,b,d){return c(d)/b[f]})},IndexMap:H}},"1f.js":function(e,B,b,k,u,H,A,J,M){function q(b,f,e){var l=b.indexCache_;b.lock();if(f)for(var d=0,k;k=f[d++];){var a=b.normalize(b.valueGetter(k));l[k.basisObjectId]=a;b.add_(a)}if(e)for(d=0;k=e[d++];)f=k.basisObjectId,b.remove_(l[f]),delete l[f];b.unlock()}function t(b,f){var e=v[b.basisObjectId];if(e&&e[f.indexId]){delete e[f.indexId];f.removeHandler(n,b);for(var l in e)return;b.removeHandler(r);r.itemsChanged.call(b,
b,{deleted:b.getItems()});delete v[b.basisObjectId]}}var x=b.require("./f.js").Value,y=x.subclass({className:"basis.data.index.Index",propertyDescriptors:{explicit:!1,wrapperCount:!1,updateEvents:!1},explicit:!1,wrapperCount:0,indexCache_:null,valueGetter:b.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};x.prototype.init.call(this)},add_:function(b){},remove_:function(b){},update_:function(b,f){},normalize:function(b){return Number(b)||0},destroy:function(){x.prototype.destroy.call(this);
this.indexCache_=null}}),v={},n={destroy:function(b){t(this,b)}},r={itemsChanged:function(b,e){var m;if(m=e.inserted)for(var l=0;l<m.length;l++)m[l].addHandler(f,this);if(m=e.deleted)for(l=0;l<m.length;l++)m[l].removeHandler(f,this);m=v[this.basisObjectId];for(var d in m)q(m[d],e.inserted,e.deleted)},destroy:function(){var b=v[this.basisObjectId],f;for(f in b){var e=b[f];t(this,e);e.destroy()}}},f={"*":function(b){var f=b.type;b=b.sender;var e=b.basisObjectId,l=v[this.basisObjectId],d,k,a,p;for(p in l)a=
l[p],a.updateEvents[f]&&(d=a.indexCache_[e],k=a.normalize(a.valueGetter(b)),k!==d&&(a.update_(k,d),a.indexCache_[e]=k))}};y.getDatasetIndex=function(b,f){if(!f||!1===f.prototype instanceof y)throw"IndexClass must be an instance of IndexClass";var e=b.basisObjectId,l=v[e];l||(l=v[e]={},b.addHandler(r),r.itemsChanged.call(b,b,{inserted:b.getItems()}));var e=f.indexId,d=l[e];d||(d=new f,d.addHandler(n,b),l[e]=d,q(d,b.getItems()));return d};y.removeDatasetIndex=t;B.exports=y},"1g.js":function(e,B,b,k,
u,H,A,J,M){function q(b,e){if(!b.length)return 0;var k,n,q=0,f=b.length-1;do if(k=q+f>>1,n=b[k]||0,e<n)f=k-1;else if(e>n)q=k+1;else return e==n?k:0;while(q<=f);return k+(n<e)}var t=b.require("./1f.js");B.exports=t.subclass({className:"basis.data.index.VectorIndex",vectorGetter:b.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];t.prototype.init.call(this)},add_:function(b){null!==b&&(this.vector_.splice(q(this.vector_,b),0,b),this.value=this.vectorGetter(this.vector_))},remove_:function(b){null!==
b&&(this.vector_.splice(q(this.vector_,b),1),this.value=this.vectorGetter(this.vector_))},update_:function(b,e){null!==e&&this.vector_.splice(q(this.vector_,e),1);null!==b&&this.vector_.splice(q(this.vector_,b),0,b);this.set(this.vectorGetter(this.vector_))},normalize:function(b){return"string"==typeof b||"number"==typeof b?b:null},destroy:function(){t.prototype.destroy.call(this);this.vector_=null}})},"1h.js":function(e,B,b,k,u,H,A,J,M){var q=b.require("./f.js").Value,t=b.require("./1f.js"),x=b.require("./f.js").resolveDataset,
y={destroy:function(){q.prototype.set.call(this,this.initValue);this.index=null}};B.exports=q.subclass({className:"basis.data.index.IndexWrapper",extendConstructor_:!1,source:null,sourceRA_:null,dataset:null,indexConstructor:null,index:null,init:function(e,k){this.source=e;this.indexConstructor=k;this.value=k.prototype.value;q.prototype.init.call(this);e.bindingBridge.attach(e,b.fn.$undef,this,this.destroy);this.setDataset(e)},setDataset:function(b){var e=this.dataset;b=x(this,this.setDataset,b,"sourceRA_");
if(b!==e){if(e=this.index)e.removeHandler(y,this),--e.wrapperCount,e.wrapperCount||e.explicit?e.unlink(this,q.prototype.set):e.destroy();b?(e=t.getDatasetIndex(b,this.indexConstructor),e.wrapperCount+=1,e.link(this,q.prototype.set),e.addHandler(y,this)):(e=null,q.prototype.set.call(this,this.initValue));this.dataset=b;this.index=e}},set:function(){},destroy:function(){this.source.bindingBridge.detach(this.source,b.fn.$undef,this);this.setDataset();q.prototype.destroy.call(this);this.indexConstructor=
this.source=null}})},"1i.js":function(e,B,b,k,u,H,A,J,M){var q=b.object.iterate,t=b.require("./f.js").Value;e=b.require("./f.js").Object;var x=b.require("./m.js").SourceDataset;k=b.require("./m.js").createRuleEvents;var y=b.require("./1f.js"),v=b.require("./1h.js"),n=b.require("./1j.js"),r=b.asap.schedule(function(b){b.recalc()});B.exports=x.subclass({className:"basis.data.index.IndexMap",calcs:null,copyDataFromSource:!0,indexes:null,indexValues:null,indexUpdated:!1,awaitToAdd_:null,itemClass:e,listen:{source:{itemsChanged:function(b,
c){var e=[],m;if(m=c.inserted)for(var l=0;l<m.length;l++){var d=m[l],k=d.basisObjectId;this.awaitToAdd_[k]=d;this.scheduleRecalc()}if(m=c.deleted)for(l=0;l<m.length;l++){var d=m[l],k=d.basisObjectId,a=this.sourceMap_[k];a?(a=a.member,e.push(a),this.listen.member&&a.removeHandler(this.listen.member,this),this.recalcEvents&&d.removeHandler(this.recalcEvents,this),delete this.sourceMap_[k]):delete this.awaitToAdd_[k]}if(e.length)for(this.emit_itemsChanged({deleted:e}),l=0;l<e.length;l++)a=e[l],a.source=
null,a.destroy()}}},recalcEvents:k(function(b){this.sourceMap_[b.basisObjectId].updated=!0;this.scheduleRecalc()},"update"),init:function(){var b=this.indexes,c=this.calcs;this.calcs={};this.indexes={};this.indexValues={};this.awaitToAdd_={};x.prototype.init.call(this);q(b,this.addIndex,this);for(var e in c)b=c[e],b instanceof n&&(q(b.indexes,this.addIndex,this),b=b.calc),this.calcs[e]=b;this.recalc()},addIndex:function(b,c){if(c&&!1!==c.prototype instanceof y&&!this.indexes[b]){var e=new v(t.from(this,
"sourceChanged","source"),c);this.indexes[b]=e;this.indexValues[b]=e.value;e.link(this,function(c){this.indexValues[b]=c;this.indexUpdated=!0;this.scheduleRecalc()})}},removeIndex:function(b){var c=this.indexes[b];c&&(delete this.indexes[b],delete this.indexValues[b],c.destroy())},lock:function(){for(var b in this.indexes)this.indexes[b].lock()},unlock:function(){for(var b in this.indexes)this.indexes[b].unlock()},scheduleRecalc:function(){r.add(this)},recalc:function(){for(var b in this.sourceMap_)this.calcMember(this.sourceMap_[b]);
var c=[],e=this.awaitToAdd_;this.awaitToAdd_={};for(b in e){var m=e[b],l={},d;for(d in this.calcs)l[d]=this.calcs[d](m.data,this.indexValues,m);if(this.copyDataFromSource)for(var k in m.data)this.calcs.hasOwnProperty(k)||(l[k]=m.data[k]);l=new this.itemClass({data:l,update:m.update.bind(m)});this.listen.member&&l.addHandler(this.listen.member,this);this.recalcEvents&&m.addHandler(this.recalcEvents,this);this.sourceMap_[b]={sourceObject:m,member:l,updated:!1};c.push(l)}c.length&&this.emit_itemsChanged({inserted:c});
this.indexUpdated=!1;r.remove(this)},calcMember:function(b){var c=b.member;if(b.updated||this.indexUpdated){var e=b.sourceObject,m={},l,d,k,a;for(a in this.calcs)l=this.calcs[a](e.data,this.indexValues,e),d=c.data[a],d===l||l!==l&&d!==d||(m[a]=l,k=!0);if(this.copyDataFromSource){for(var p in e.data)this.calcs.hasOwnProperty(p)||(l=e.data[p],d=c.data[p],d===l||l!==l&&d!==d||(m[p]=l,k=!0));for(p in c.data)this.calcs.hasOwnProperty(p)||e.data.hasOwnProperty(p)||(m[p]=void 0,k=!0)}k&&this.itemClass.prototype.update.call(c,
m);b.updated=!1}},getMember:function(b){return(b=b&&this.sourceMap_[b.basisObjectId])?b.member:null},destroy:function(){q(this.indexes,this.removeIndex,this);x.prototype.destroy.call(this);r.remove(this);this.indexValues=this.indexes=this.calcs=this.awaitToAdd_=null}})},"1j.js":function(e,B,b,k,u,H,A,J,M){var q=1;e=function(b,e){this.indexes=b;this.calc=e};e.getId=function(e){return e+"_calc-index-preset-"+b.number.lead(q++,4)};B.exports=e},"1k.js":function(e,B,b,k,u,H,A,J,M){function q(e,h,d){if(!t.isClass(e)||
!e.isSubclassOf(n))throw"Wrong class for index constructor";h=b.getter(h);d=d||"update";if("string"!=typeof d)throw"Events must be a event names space separated string";d=d.trim().split(" ").sort();var k=f+[e.basisClassId_,h[b.getter.ID],d].join("_"),a=c[k];if(!a){for(var a={},p=0;p<d.length;p++)a[d[p]]=!0;a=c[k]=e.subclass({indexId:k,updateEvents:a,valueGetter:h});a.indexId=k}return a}var t=b.Class,x=b.require("./f.js").ReadOnlyDataset,y=b.require("./f.js").DatasetWrapper,v=b.require("./f.js").chainValueFactory,
n=b.require("./1f.js"),r=b.require("./1h.js"),f="basisjsIndexConstructor"+b.genUID(),c={},h={destroy:function(b){b.source[this.indexId]=null}};B.exports=function(c,f){return function D(a,e,k){if(b.fn.isFactory(a)){var t=a;return v(function(a){return D(t(a),e,k,!0)})}if("function"==typeof a||"string"==typeof a)k=e,e=a,a=null;k||(k=e,e="");var g=q(c,k||f,e);if(!a)return g;if(a instanceof x||a instanceof y)return a=n.getDatasetIndex(a,g),a.explicit=!0,a;if(a.bindingBridge){var w=a[g.indexId];w||(w=new r(a,
g),a[g.indexId]=w,w.addHandler(h,g));return w}return null}}},"1l.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./1f.js");B.exports=e.subclass({className:"basis.data.index.Count",valueGetter:b.fn.$true,add_:function(b){this.value+=b},remove_:function(b){this.value-=b},normalize:function(b){return Boolean(b)},update_:function(b,e){this.set(this.value-Boolean(e)+Boolean(b))}})},"1m.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./1f.js");B.exports=e.subclass({className:"basis.data.index.Sum",add_:function(b){this.value+=
b},remove_:function(b){this.value-=b},update_:function(b,e){this.set(this.value-e+b)}})},"1n.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./1f.js");B.exports=e.subclass({className:"basis.data.index.Avg",sum_:0,count_:0,add_:function(b){this.sum_+=b;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(b){this.sum_-=b;--this.count_;this.value=this.count_?this.sum_/this.count_:0},update_:function(b,e){this.sum_+=b-e;this.set(this.sum_/this.count_)}})},"1o.js":function(e,B,b,k,u,H,A,J,M){e=
b.require("./1g.js");B.exports=e.subclass({className:"basis.data.index.Min",vectorGetter:function(b){return b[0]}})},"1p.js":function(e,B,b,k,u,H,A,J,M){e=b.require("./1g.js");B.exports=e.subclass({className:"basis.data.index..Max",vectorGetter:function(b){return b[b.length-1]}})},"1q.js":function(e,B,b,k,u,H,A,J,M){var q=b.require("./1f.js");B.exports=q.subclass({className:"basis.data.index.Distinct",map_:null,init:function(){this.map_={};q.prototype.init.call(this)},add_:function(b){this.map_.hasOwnProperty(b)||
(this.map_[b]=0);1==++this.map_[b]&&(this.value+=1)},remove_:function(b){0==--this.map_[b]&&--this.value},update_:function(b,e){var k=0;this.map_.hasOwnProperty(b)||(this.map_[b]=0);1==++this.map_[b]&&(k+=1);0==--this.map_[e]&&--k;k&&this.set(this.value+k)},normalize:String,destroy:function(){q.prototype.destroy.call(this);this.map_=null}})},"p.js":function(e,B,b,k,u,H,A,J,M){function q(f){return new Function("data","return {"+b.object.iterate(f,function(b,f){b=b.replace(/"/g,'\\"');f=f.replace(/"/g,
'\\"');return'"'+b+'": data["'+f+'"]'})+"}")}function t(b){this.host.setSource(this.name,b)}e=b.require("./2.js").create;var x=b.require("./f.js").SUBSCRIPTION,y=b.require("./f.js").Object,v=b.require("./f.js").resolveObject;x.add("OBJECTSOURCE",{sourceChanged:function(b,c,e){e&&x.unlink("sources",b,e);b.sources[c]&&x.link("sources",b,b.sources[c])}},function(b,c){var e=c.sources,m;for(m in e)b("sources",c,e[m])});var n={update:function(b,c){var e=this.host.fields,m={};if(this.name==e.defaultSource)for(var k in c)0==
k in e.fieldSource&&(m[k]=b.data[k]);else for(k in c){var d=e.fromNames[this.name][k];d&&this.host.fields.fieldSource[d]==this.name&&(m[d]=b.data[k])}for(k in m)return this.host.update(m)},destroy:function(){this.host.setSource(this.name,null)}},r=function(b){var c={},e={},k={},l={defaultSource:!1,fieldSource:{},toNames:e,fromNames:k,sources:c,__extend__:r};b["*"]&&(l.defaultSource=b["*"]);for(var d in b){var n=b[d].split(":"),a=n.shift(),n=n.length?n.join(":"):d;a==l.defaultSource||"-"==a&&n!=d||
(e[a]||(e[a]={},k[a]={}),e[a][d]=n,k[a][n]=d,l.fieldSource[d]=a)}for(a in e)c[a]=q(e[a]);l.defaultSource&&(c[l.defaultSource]=function(a){var b={},c;for(c in a)0==c in l.fieldSource&&(b[c]=a[c]);return b});return l};e=y.subclass({className:"basis.data.object.Merge",subscribeTo:y.prototype.subscribeTo+x.OBJECTSOURCE,propertyDescriptors:{sources:{nested:!0,events:"sourceChanged"}},fields:r({"*":"-"}),sources:null,sourcesContext_:null,emit_sourceChanged:e("sourceChanged","name","oldSource"),delta_:null,
init:function(){var b=this.data,c=this.sources;this.delegate=null;if(b&&"-"in this.fields.sources)if("-"!==this.fields.defaultSource)this.data=this.fields.sources["-"](b);else{this.data={};for(var e in b)"-"==(this.fields.fieldSource[e]||this.fields.defaultSource)&&(this.data[e]=b[e])}else this.data={};y.prototype.init.call(this);this.sources={};this.sourcesContext_={};c&&this.setSources(c)},update:function(b){if(this.delta_)for(var c in b){var e=this.fields.fieldSource[c]||this.fields.defaultSource;
if(e){var k=e!=this.fields.defaultSource?this.fields.toNames[e][c]:c;b=this.sources[e].data[k];b!==this.data[c]&&(0==c in this.delta_?this.delta_[c]=this.data[c]:this.delta_[c]===b&&delete this.delta_[c],this.data[c]=b)}}else{var l,d={};this.delta_=d;for(c in b)if(e=this.fields.fieldSource[c]||this.fields.defaultSource)"-"==e?(d[c]=this.data[c],this.data[c]=b[c]):this.sources[e]&&(k=e!=this.fields.defaultSource?this.fields.toNames[e][c]:c,this.sources[e].data[k]!==b[c]?(l||(l={}),0==e in l&&(l[e]=
{}),l[e][k]=b[c]):this.data[c]!==b[c]&&(d[c]=this.data[c],this.data[c]=b[c]));if(l)for(e in l)this.sources[e].update(l[e]);this.delta_=null;for(c in d)return this.emit_update(d),d;return!1}},setDelegate:function(){},setSource:function(b,c){var e=this.sources[b];if(0!=b in this.fields.sources&&"-"!=b&&(0==b in this.sourcesContext_&&(this.sourcesContext_[b]={host:this,name:b,adapter:null}),c=v(this.sourcesContext_[b],t,c,"adapter",this),e!==c)){var k=this.listen["source:"+b];e&&(k&&e.removeHandler(k,
this),e.removeHandler(n,this.sourcesContext_[b]));if(this.sources[b]=c){c.addHandler(n,this.sourcesContext_[b]);k&&c.addHandler(k,this);k=this.fields.sources[b](c.data);if(this.fields.defaultSource==b)for(var l in this.data)this.fields.fieldSource.hasOwnProperty(l)||k.hasOwnProperty(l)||(k[l]=void 0);this.update(k)}this.emit_sourceChanged(b,e)}},setSources:function(b){b||(b={});for(var c in this.fields.sources)this.setSource(c,b[c])},destroy:function(){this.setSources();this.sourcesContext_=this.sources=
null;y.prototype.destroy.call(this)}});B.exports={Merge:e}},"q.js":function(e,B,b,k,u,H,A,J,M){function q(a){qa[a]=qa[a]||0;return a+qa[a]++}function t(a,b){var c=aa[a];if(c){for(var d=0,e;e=c[d];d++)e[0][e[1]]=b;delete aa[a]}X[a]=b}function x(a,b,c){if(X[a])return X[a];var d=aa[a];d||(d=aa[a]=[]);d.push([b,c]);return function(b,c){var d=X[a];if(d)return d(b,c)}}function y(){var a=I(arguments),b=a.pop(),c=a[0],d=a[1],e=a[2],f;if("function"!=typeof b)throw"Last argument for calculate field constructor must be a function";
switch(a.length){case 0:f=function(){return b()};break;case 1:f=function(a,d,e){return c in a?b(d[c]):e};break;case 2:f=function(a,e,f){return c in a||d in a?b(e[c],e[d]):f};break;case 3:f=function(a,f,g){return c in a||d in a||e in a?b(f[c],f[d],f[e]):g};break;default:f=function(c,d,e){for(var f=!1,g=[],h=0,k;k=a[h];h++)f=f||k in c,g.push(d[k]);return f?b.apply(null,g):e}}f.args=a;return f.calc=f}function v(a){return 1==arguments.length?function(b,c,d){return a in b?null!=c[a]?String(c[a]):null:
d}:y.apply(null,I(arguments).concat(function(){for(var a=arguments.length-1;0<=a;a--)if(null==arguments[a])return null;return Array.prototype.join.call(arguments,"-")}))}function n(a){var c=b.object.slice(this.items_),d={},e=[],f=[],g=[],h;a=I(a);Z(!0);for(var k=0;h=a[k];k++)(h=this.wrapper(h))&&(c[h.basisObjectId]?c[h.basisObjectId]=null:d[h.basisObjectId]=h);Z(!1);for(var l in d)this.items_[l]?e.push(d[l]):f.push(d[l]);for(l in c)c[l]&&g.push(c[l]);var m;k={};f&&f.length&&(m=k.inserted=f);g&&g.length&&
(m=k.deleted=g);m=m?k:void 0;if(m){if(this instanceof wa&&(a=this.listen.item)){if(m.inserted)for(k=0;h=m.inserted[k];k++)h.addHandler(a,this);if(m.deleted)for(k=0;h=m.deleted[k];k++)h.removeHandler(a,this)}this.emit_itemsChanged(m)}if(g.length){Z(!0);for(k=0;h=g[k];k++)h.destroy();Z(!1)}f=f.concat(e);return f.length?f:null}function r(a,b,c){var d=["has"],e=[p],f=[],g;for(g in a)if(p.call(a,g)){var h='"'+g.replace(/"/g,'"')+'"';if(p.call(c,g))f.push(h+":undefined");else{var k="v"+f.length,m="f"+f.length,
N=a[g];d.push(k,m);e.push(N,b[g]);f.push(h+":"+m+"(has.call(data,"+h+")?data["+h+"]:"+k+("function"==typeof N?"(data)":"")+")")}}a=f.sort().join(",");(b=V[a])||(b=V[a]=new Function(d,"return function(data){return {"+a+"};};"));return b.apply(null,e)}function f(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;return b}function c(a,b){return"string"==typeof a&&a?ba(a):"number"==typeof a&&0==isNaN(a)?new Date(a):
null==a?null:a&&a.constructor===Date?a:b||null}function h(a,d,e){e="string"==typeof e||Array.isArray(e)||"function"==typeof e&&e.calc!==e?{type:e}:e?b.object.slice(e):{};if("type"in e){"string"==typeof e.type&&(e.type=x(e.type,a.fields,d));if(Array.isArray(e.type)){var g=e.type.slice();if(1==g.length)e.type=b.fn.$const(g[0]),e.defValue=g[0];else{var h;e.type=function(a,b){return a===h||-1!=g.indexOf(a)?a:void 0===b?h:b};h=-1!=g.indexOf(e.defValue)?e.defValue:g[0];e.defValue=h}}e.type===Array&&(e.type=
f);e.type===Date&&(e.type=c);"function"!=typeof e.type&&(e.type=null)}var k=e.type||w;if(e.id||e.index||-1!=[ia,pa,fa,va].indexOf(k))a.idFields[d]=e;e.calc?(l(a,d,e.calc),a.fields[d]=U):(a.fields[d]=k,a.aliases[d]=d);a.defaults[d]="defValue"in e?e.defValue:k();K[d]||(K[d]={destroy:function(){this.set(d,null)}})}function m(a,b,c){0!=c in a.fields&&(c in a.calcMap||b in a.aliases||(a.aliases[b]=c))}function l(a,c,d){var e=a.calcs,f=a.deps,g=d.args||[];d={args:g,wrapper:d};var h=a.calcs.length,k=0;if(g)for(var m=
0,l;l=e[m];m++)-1!=g.indexOf(l.key)&&(k=m+1);if(c){d.key=c;a.calcMap[c]=d;for(m=0;l=e[m];m++)if(-1!=l.args.indexOf(c)){h=m;break}if(k>h)return;f[c]=g.reduce(function(a,c){for(var d=f[c]||[c],e=0;e<d.length;e++)b.array.add(a,d[e]);return a},[]);for(var N in f)a=f[N].indexOf(c),-1!=a&&Array.prototype.splice.apply(f[N],[a,1].concat(f[c]))}else h=k;e.splice(Math.min(h,k),0,d)}function d(a){return function(b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]}}function D(a){return function(b,
c){return this.set(a,b,c)}}var a=b.Class,p=Object.prototype.hasOwnProperty,E=b.object.keys,C=b.object.extend,g=b.object.complete,w=b.fn.$self,I=b.array.from;e=b.require("./2.js");var F=e.Emitter;e=e.create;k=b.require("./f.js");var O=k.Object,G=k.Slot,T=k.Dataset;k=k.ReadOnlyDataset;H=b.require("./m.js");u=H.Filter;var S=H.Split,Z=T.setAccumulateState,ca={},ua=[],la={string:!0,number:!0},ia=function(a){return null==a||isNaN(a)?null:Number(a)},pa=function(a){return null==a||isNaN(a)?null:Number(a)},
fa=function(a){return null==a||isNaN(a)?null:parseInt(a,10)},va=function(a){return null==a?null:String(a)},qa={},X={},na={},aa={},ga=a(null,{className:"basis.entity.Index",items:null,init:function(){this.items={}},get:function(a,b){var c=p.call(this.items,a)&&this.items[a];if(c&&(!b||c.entityType===b))return c},add:function(a,b){if(b){var c=this.get(a);if(!c)return this.items[a]=b,!0;if(c!==b)throw"basis.entity: Value `"+a+"` for index is already occupied";}},remove:function(a,b){if(this.items[a]===
b)return delete this.items[a],!0},destroy:function(){this.items=null}});A=function(a){return{name:null,wrapper:w,setAndDestroyRemoved:n,destroy:function(){a.destroy.call(this);this.wrapper=this.name=null}}};var ra="wrapped"+b.genUID();J=function(a,b){return function(c){c&&!Array.isArray(c)&&(c=[c]);var d=c&&!c[ra];if(d){if(this.localId){var e=this.getItems().slice();c=c.map(function(a){for(var b=0;b<e.length;b++)if(this.localId(a,e[b]))return this.wrapper(a,e[b]);a=this.wrapper(a);e.push(a);return a},
this)}else c=c.map(this.wrapper);c[ra]=!0}var f=a.prototype[b].call(this,c);if(d&&(c[ra]=!1,this.localId&&f&&f.deleted)){Z(!0);for(c=0;d=f.deleted[c];c++)d.root&&d.destroy();Z(!1)}return f}};H=function(a,b){return function(){this.name||(this.name=q(b));a.prototype.init.call(this)}};var xa=a(k,A,{className:"basis.entity.ReadOnlyEntitySet",init:H(k,"ReadOnlyEntitySet")}),wa=a(T,A,{className:"basis.entity.EntitySet",init:H(T,"EntitySet"),add:J(T,"add"),remove:J(T,"remove"),set:J(T,"set"),setAndDestroyRemoved:function(a){return this.localId?
this.set(a):this.itemCount?a&&a.length?n.call(this,a):this.clear():this.add(a)},clear:function(){var a=T.prototype.clear.call(this);if(this.localId&&a&&a.deleted){Z(!0);for(var b=0,c;c=a.deleted[b];b++)c.destroy();Z(!1)}return a}});k=a(u,A,{className:"basis.entity.EntityCollection",init:H(u,"EntityCollection")});u=a(S,{className:"basis.entity.EntityGrouping",name:null,subsetClass:xa,init:H(S,"EntityGrouping"),getSubset:function(a,b){var c=S.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=
this.wrapper);return c}});var Q=function(a,b,c){function d(a){if("string"==typeof a)return function(b,c){return b[a]==c.data[a]};if("function"==typeof a)return a}if(this instanceof Q){a||(a=w);if(!b||X[b])b=q("UntitledEntitySetType");var e=new L({entitySetClass:{wrapper:a,localId:d(c&&c.localId)}}),f=e.entitySetClass,g=function(a,b){return null!=a?(0==b instanceof wa&&(b=e.createEntitySet()),b.set(a instanceof T?a.getItems():I(a)),b):null};"string"==typeof a&&(f.prototype.wrapper=x(a,f.prototype,
"wrapper"));t(b,g);C(g,{type:e,typeName:b,toString:function(){return b+"()"},reader:function(a){if(Array.isArray(a)){var b=f.prototype.wrapper;return a.map(b.reader||b)}return a},extendClass:function(a){f.extend.call(f,a);return g},extendReader:function(a){var b=g.reader;g.reader=function(c){Array.isArray(c)&&a(c);return b(c)};return g},entitySetType:e,extend:function(){return f.extend.apply(f,arguments)}});return g}},L=a(null,{className:"basis.entity.EntitySetConstructor",entitySetClass:wa,extendConstructor_:!0,
createEntitySet:function(){return new this.entitySetClass}}),z=function(a){if(this instanceof z){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){b&&b.entityType===c||(b=null);if(a===b||a.entityType===c)return a;var e,f=c.idField;if(la[typeof a]){if(!f)return;if(b=c.index.get(a,c))return b;e=a;a={};a[f]=e}else c.compositeKey&&(e=c.compositeKey(a,a)),null!=e&&(b=c.index.get(e,c));b&&b.entityType===c?b.update(a):b=new d(a);return b}};
var c=new ja(a||{},b),d=c.entityClass,e=c.name;t(e,b);C(b,{all:c.all,type:c,typeName:e,toString:function(){return e+"()"},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},reader:function(a){return c.reader(a)},readList:function(a,c){if(!a)return[];Array.isArray(a)||(a=[a]);"function"!=typeof c&&(c=w);for(var d=0;d<a.length;d++)a[d]=b(b.reader(c(a[d],d)));return a},extendClass:function(a){d.extend.call(d,a);return b},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&
"object"==typeof b&&a(b);return c(b)};return b},entityType:c,extend:function(){return d.extend.apply(d,arguments)}});return b}},K={},V={},U=function(a,b){return b},ha=/\D/,da=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,ba=function(){function a(c,d,e,f,g,h,k){c=new Date(c,d-1,e,f||0,0,h||0,k?k.substr(0,3):0);c.setMinutes((g||0)-b-c.getTimezoneOffset());return c}var b;return function(c){b=0;return a.apply(null,String(c||"").replace(da,function(a,c,d,e){b=60*Number(d||0)+Number(e||0);return c}).split(ha))}}(),
ja=a(null,{className:"basis.entity.EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(a,b){this.name=a.name;if(!this.name||X[this.name])this.name=q("UntitledEntityType");this.fields={};this.calcs=[];this.calcMap={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var c=a.index;c&&c instanceof
ga&&(this.index=c);this.wrapper=b;if(0=="all"in a||a.all||a.singleton)this.all=new xa(g({wrapper:b},a.all));if(this.singleton=!!a.singleton){var e;this.get=function(){return e};this.all.addHandler({itemsChanged:function(a,b){e=b.inserted?b.inserted[0]:null}},this)}for(var f in a.fields)h(this,f,a.fields[f]);for(f in a.aliases)m(this,f,a.aliases[f]);a.constrains&&a.constrains.forEach(function(a){l(this,null,a)},this);this.calcs.length||(this.calcs=null);var k={};if(E(this.idFields).length){for(var p in this.idFields){var c=
this.idFields[p].index,n;c&&0!=c instanceof ga||("string"==typeof c?(0==c in na&&(na[c]=new ga),c=na[c]):(this.index||(this.index=new ga),c=this.index));(n=k[c.basisObjectId])||(n=k[c.basisObjectId]={index:c,fields:[]});n.fields.push(p);this.idFields[p]=n}this.index&&0==this.index.basisObjectId in k&&(this.index=null);for(var w in k)n=k[w],n.property="__id__"+w,n.compositeKey=v.apply(null,n.fields),1==n.fields.length&&(n.idField=n.fields[0]);c=E(k);c=k[this.index?this.index.basisObjectId:c[0]];this.index=
c.index;this.idField=c.idField;this.compositeKey=c.compositeKey;this.idProperty=c.property;this.indexes=k}else this.index&&(this.index=null);k={};for(f in this.defaults)k[f]=void 0;this.entityClass=Y(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:b,typeName:this.name,generateData:r(this.defaults,this.fields,this.calcMap),initDelta:k});for(var F in this.fields)this.entityClass.prototype["get_"+F]=d(F),this.fields[F]!==U&&(this.entityClass.prototype["set_"+F]=D(F));
ua.push(this)},reader:function(a){var b={};if(la[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=this.aliases[c];if(d){var e=this.fields[d].reader;b[d]=e?e(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(this.index&&null!=a)return this.index.get(a,this)},getId:function(a){if(this.compositeKey&&null!=a){if(la[typeof a])return a;if(a&&a.entityType===this)return a[this.idProperty];a instanceof O&&(a=a.data);if(this.compositeKey)return this.compositeKey(a,
a)}},getSlot:function(a){var b=this.getId(a);if(null!=b){var c=p.call(this.slots,b)&&this.slots[b];c||(la[typeof a]&&(c={},this.idField&&(c[this.idField]=a),a=c),c=this.slots[b]=new G({delegate:this.get(b)||null,data:a}));return c}}}),ea=a(O,{className:"basis.entity.BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,propertyDescriptors:{modified:{nested:!0,events:"rollbackUpdate"}},modified:null,emit_rollbackUpdate:e("rollbackUpdate")}),Y=function(c,d,e,g){function h(a,
b,d){var e=c.calcs,f=a.data,g=!1;try{if(e)for(var m=0,l;l=e[m];m++){var p=l.key,n=f[p],q=l.wrapper(b,f,n);p&&q!==n&&(b[p]=n,f[p]=q,g=!0)}for(var r in c.indexes){var w=c.indexes[r],F=a[w.property],e=F;w.compositeKey&&(e=w.compositeKey(b,f,F));e!==F&&(k(w.index,a,F,e),a[w.property]=e)}return g}catch(t){for(p in b)a.data[p]=b[p];d&&!a.modified&&(a.modified=d)}}function k(a,b,c,d){null!=d&&(a.add(d,b),p.call(g,d)&&g[d].setDelegate(b));null!=c&&(a.remove(c,b),p.call(g,c)&&g[c].setDelegate())}return a(ea,
{className:c.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return O.prototype.isSyncRequired.call(this)&&(!c.idProperty||null!=this[c.idProperty])},init:function(a){this.delegate=null;this.data=this.generateData(a);ea.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof F&&(a.addHandler(K[b],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);h(this,this.initDelta);d&&d.emit_itemsChanged({inserted:[this]})},
toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[c.idProperty]},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(a,b,d,g){var k=e[a];if(!k)return!1;var m,l=this.modified;k===f&&l&&a in l&&(b=f(b,l[a]));b=k(b,this.data[a]);k=this.data[a];if(b===k||b&&k&&b.constructor===Date&&k.constructor===Date&&+b===+k)!d&&l&&a in l&&(m={rollback:{key:a,value:l[a]}},delete l[a],E(l).length||
(this.modified=null));else a:{m={};if(!c.idFields[a])if(d)l||(this.modified=l={}),!1===a in l?(m.rollback={key:a,value:void 0},l[a]=k):l[a]===b&&(m.rollback={key:a,value:b},delete l[a],E(l).length||(this.modified=null));else if(l&&a in l)if(l[a]!==b){m.rollback={key:a,value:l[a]};l[a]=b;break a}else return!1;this.data[a]=b;this.fieldHandlers_&&this.fieldHandlers_[a]&&(k.removeHandler(K[a],this),this.fieldHandlers_[a]=!1);b&&b!==this&&b instanceof F&&(b.addHandler(K[a],this),this.fieldHandlers_||(this.fieldHandlers_=
{}),this.fieldHandlers_[a]=!0);m.key=a;m.value=k;m.delta={};m.delta[a]=k}if(!g&&m){a=m.key;d=m.delta||{};var p;m.rollback&&(p={},p[m.rollback.key]=m.rollback.value);h(this,d,p)&&(a=!0);a&&(this.emit_update(d),m.delta=d);p&&this.emit_rollbackUpdate(p)}return m||!1},update:function(a,b){var c=!1,d={};if(a){var e,f,g;for(g in a)if(f=this.set(g,a[g],b,!0))f.key&&(c=!0,d[f.key]=f.value),f.rollback&&(e||(e={}),e[f.rollback.key]=f.rollback.value);h(this,d,e)&&(c=!0);c&&this.emit_update(d);e&&this.emit_rollbackUpdate(e)}return c?
d:!1},read:function(a){return this.update(this.type.reader(a))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(a){var d=this.modified;d&&a&&(Array.isArray(a)||(a=[a]),d=b.object.slice(d,a.reduce(function(a,b){return a.concat(c.deps[b]||b)},[])));this.update(d,
!0)},destroy:function(){if(this.fieldHandlers_){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(K[a],this);this.fieldHandlers_=null}for(a in c.indexes){var b=c.indexes[a],e=this[b.property];null!=e&&k(b.index,this,e,null)}d&&d.has(this)&&d.emit_itemsChanged({deleted:[this]});O.prototype.destroy.call(this);this.data=ca;this.modified=null}})};B.exports={isEntity:function(a){return a&&a instanceof ea},createType:function(a,c){var d=a||{};"string"==typeof a?d={name:d,
fields:c||{}}:c&&(d=b.object.merge(d,{fields:c}));return new z(d)},createSetType:function(a,c,d){switch(arguments.length){case 0:case 1:a&&a.constructor===Object?(d=b.object.slice(a),c=b.object.splice(d).type,a=b.object.splice(d).name):(c=a,a=void 0);break;case 2:c&&c.constructor===Object&&(d=c,c=a,a=void 0)}return new Q(c,a,d)},validate:function(){for(var a in aa)b.dev.warn("basis.entity: type `"+a+"` is not defined, but used by "+aa[a].length+" type(s)")},getTypeByName:function(a){return X[a]},
getIndexByName:function(a){return na[a]},is:function(a,b){var c;"string"==typeof b&&(b=X[b]);c=b&&b.type&&b.type.entityClass;return a&&c?a instanceof c:!1},get:function(a,b){var c=X[a];if(c)return c.get(b)},resolve:function(a,b){var c=X[a];if(c)return c(b)},getByIndex:function(a,b){if(a in na)return na[a].get(b)},NumericId:ia,NumberId:pa,IntId:fa,StringId:va,Index:ga,CalculateField:y,ConcatStringField:v,calc:y,arrayField:f,dateField:c,EntityType:z,Entity:Y,BaseEntity:ea,EntitySetType:Q,EntitySet:wa,
ReadOnlyEntitySet:xa,Collection:k,Grouping:u}},"r.js":function(e,B,b,k,u,H,A,J,M){function q(){var a=b.fn.publicCallback(function(b){d[a]=b});return a}function t(a){var b=d[a];delete d[a];return b}function x(a){delete d[a];delete k[a]}function y(a,b){var c,d;c=!1;if("number"!=typeof a){if(!a||this.script!==a.target)return;a=(c=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?4:3}if(a!=this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);
if(4==a){this.clearTimeout();this.script.onload=this.script.onerror=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;b?(this.emit_abort(),c=this.stateOnAbort):(this.processResponse(),this.isSuccessful()&&!c?(c=l.READY,this.emit_success(this.getResponseData())):(c=l.ERROR,d=this.getResponseError(),this.emit_failure(d)));this.emit_complete(this);var e=this.callback;b?setTimeout(k[e]=function(){x(e)},3E5):x(e)}else c=l.PROCESSING;
this.setState(c,d)}}var v=k.document,n=k.encodeURIComponent,r=b.object.extend,f=b.object.slice,c=b.object.merge;u=b.require("./s.js");e=u.createTransportEvent;H=u.createRequestEvent;var h=u.AbstractRequest,m=u.AbstractTransport,l=b.require("./f.js").STATE,d={};u=h.subclass({className:"basis.net.jsonp.Request",timeout:3E4,timer_:null,emit_readyStateChanged:H("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==this.data.status},processResponse:function(){this.callback in
d&&this.update({contentType:"application/javascript",data:t(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:b.fn.$true,prepareRequestData:function(a){var b=[],c=a.url;a=f(a);this.callback=q();for(var d in a.params){var e=a.params[d];null!=e&&null!=e.toString()&&b.push(n(d)+"="+n(e.toString()))}b.push(n(a.callbackParam)+"="+n(this.callback));b=b.join("&");a.routerParams&&(c=c.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,
function(b,c){return c in a.routerParams?a.routerParams[c]:b}));b&&(c+=(-1==c.indexOf("?")?"?":"&")+b);a.requestUrl=c;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!v)throw"JSONP is not supported for current environment";var b=v.head||v.getElementByName("head")[0]||v.documentElement,c=v.createElement("script");this.update({data:void 0,status:"",error:""});this.script=c;c.async=!0;c.src=a.requestUrl;c.charset=a.encoding;c.onload=c.onerror=
c.onreadystatechange=y.bind(this);this.prevReadyState_=-1;this.emit_start();y.call(this,0);this.setTimeout(this.timeout);b.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),y.call(this,4,!0))},setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",
message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();h.prototype.destroy.call(this)}});var D=m.subclass({className:"basis.net.jsonp.Transport",requestClass:u,emit_readyStateChanged:e("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",init:function(){m.prototype.init.call(this);this.params=f(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},
clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw Error("URL is not defined");r(a,{url:b,encoding:a.encoding||this.encoding,params:c(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||this.callbackParam});return a}});B.exports={Request:u,Transport:D,request:function(a,c,d){"string"==typeof a&&(a={url:a});var e=new D(a);e.addHandler({success:c&&function(a,b,d){c(d)},failure:d&&function(a,
b,c){d(c)},complete:function(){b.nextTick(function(){e.destroy()})}});e.request()}}},"s.js":function(e,B,b,k,u,H,A,J,M){function q(b){var c=v(b);return function(){c.apply(h,arguments);this.service&&c.apply(this.service,arguments);c.apply(this,arguments)}}function t(b){var c=v(b);return function(){var a=[this].concat(x(arguments));this.transport?this.transport["emit_"+b].apply(this.transport,a):c.apply(h,a);c.apply(this,arguments)}}var x=b.array.from,y=b.object.slice;e=b.require("./2.js");var v=e.create,
n=e.Emitter,r=b.require("./f.js").Object,f=b.require("./f.js").STATE,c=[],h=new n({abort:function(){for(var b=x(c),e=0;e<b.length;e++)b[e].abort();return b},handler:{start:function(d){b.array.add(c,d.transport)},complete:function(d){b.array.remove(c,d.transport)}}});e=r.subclass({className:"basis.net.AbstractRequest",requestData:null,transport:null,stateOnAbort:f.UNDEFINED,emit_start:t("start"),emit_timeout:t("timeout"),emit_abort:t("abort"),emit_success:t("success"),emit_failure:t("failure"),emit_complete:t("complete"),
abort:b.fn.$undef,doRequest:b.fn.$undef,destroy:function(){r.prototype.destroy.call(this);this.requestData=null}});var m={start:function(c,e){b.array.add(this.inprogressRequests,e)},complete:function(c,e){b.array.remove(this.inprogressRequests,e)}},l={complete:function(){var c=this.requestQueue.shift();c&&b.nextTick(function(){c.doRequest()})}};k=n.subclass({className:"basis.net.AbstractTransport",requestClass:e,stopped:!1,poolLimit:null,poolHashGetter:null,requests:null,requestQueue:null,inprogressRequests:null,
stoppedRequests:null,emit_start:q("start"),emit_timeout:q("timeout"),emit_abort:q("abort"),emit_success:q("success"),emit_failure:q("failure"),emit_complete:q("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];n.prototype.init.call(this);this.addHandler(m,this);this.poolLimit&&this.addHandler(l,this)},getRequestByHash:function(b){b=this.poolHashGetter?this.poolHashGetter(b):b.origin?b.origin.basisObjectId:"default";var c=this.requests[b];if(!c){var a;a:{for(a in this.requests)if(c=
this.requests[a],c.isIdle()&&-1==this.requestQueue.indexOf(c)){delete this.requests[a];a=c;break a}a=void 0}c=a||new this.requestClass({transport:this});this.requests[b]=c}return c},prepare:b.fn.$true,prepareRequestData:b.fn.$self,request:function(b){if(this.prepare()){b=this.prepareRequestData(y(b));var c=this.getRequestByHash(b);c.requestData&&c.abort();c.requestData=b;!this.poolLimit||this.inprogressRequests.length<this.poolLimit?c.doRequest():(this.requestQueue.push(c),c.setState(f.PROCESSING));
return c}},abort:function(){for(var b;b=this.requestQueue.pop();)b.setState(f.ERROR);for(;b=this.inprogressRequests.pop();)b.abort()},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stopped){for(var b;b=this.stoppedRequests.pop();)this.request(b.requestData);this.stopped=!1}},destroy:function(){for(var b in this.requests)this.requests[b].destroy();this.stoppedRequests=this.requestQueue=this.inprogressRequests=
this.requests=null;n.prototype.destroy.call(this)}});B.exports={createTransportEvent:q,createRequestEvent:t,transportDispatcher:h,AbstractRequest:e,AbstractTransport:k}},"t.js":function(e,B,b,k,u,H,A,J,M){function q(e,k){e.inprogressRequests=e.inprogressRequests.filter(function(b){return b.transport!==k});b.array.remove(e.inprogressTransports,k);-1!=e.inprogressTransports.indexOf(k)||e.stoppedTransports&&-1!=e.stoppedTransports.indexOf(k)||k.removeHandler(y,e)}k=b.require("./2.js");e=k.create;var t=
k.Emitter;k=b.require("./u.js").Transport;var x=b.require("./w.js").create,y={destroy:function(e){this.stoppedTransports&&b.array.remove(this.stoppedTransports,e);q(this,e)}},v={start:function(e,k){this.inprogressRequests.push(k);b.array.add(this.inprogressTransports,k.transport)&&k.transport.addHandler(y,this)},complete:function(e,k){b.array.remove(this.inprogressRequests,k);this.inprogressRequests.some(function(b){return b.transport===this.transport},k)||q(this,k.transport)}};e=t.subclass({className:"basis.net.service.Service",
inprogressRequests:null,inprogressTransports:null,stoppedTransports:null,transportClass:k,emit_sessionOpen:e("sessionOpen"),emit_sessionClose:e("sessionClose"),emit_sessionFreeze:e("sessionFreeze"),emit_sessionUnfreeze:e("sessionUnfreeze"),secure:!1,prepare:b.fn.$true,signature:b.fn.$undef,isSessionExpiredError:b.fn.$false,init:function(){t.prototype.init.call(this);"isSecure"in this&&(this.secure=this.isSecure);this.inprogressRequests=[];this.inprogressTransports=[];var e=this.transportClass;this.transportClass=
e.subclass({service:this,secure:this.secure,emit_failure:function(k,f){e.prototype.emit_failure.call(this,k,f);this.secure&&this.service.isSessionExpiredError(k)&&(this.service.freeze(),this.service.stoppedTransports&&b.array.add(this.service.stoppedTransports,this)&&this.addHandler(y,this.service),this.stop())},init:function(){e.prototype.init.call(this);"needSignature"in this&&(this.secure=this.needSignature)},request:function(b){if(this.service.prepare(this,b)&&(!this.secure||this.service.sign(this)))return e.prototype.request.call(this,
b)}});this.addHandler(v)},sign:function(b){if(this.sessionKey)return this.signature(b,this.sessionData),!0},openSession:function(b,e){this.sessionKey=b;this.sessionData=e||b;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(b){return b.secure});for(var b=0,e;e=this.inprogressTransports[b];b++)e.stop();this.emit_sessionFreeze()}},
unfreeze:function(){if(this.stoppedTransports){for(var b=0,e;e=this.stoppedTransports[b];b++)e.resume();this.stoppedTransports=null}this.emit_sessionUnfreeze()},createTransport:function(b){return new this.transportClass(b)},createAction:function(e){return x(b.object.complete({service:this},e))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=this.inprogressRequests=null;t.prototype.destroy.call(this)}});B.exports={Service:e}},"u.js":function(e,
B,b,k,u,H,A,J,M){function q(a,d){var e={};D.test(d.method)?y&&0!=d.body instanceof y||(e["Content-Type"]=d.contentType+(d.encoding?";charset="+d.encoding:"")):h.test("ie")&&(e["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");e=b.object.merge(e,d.headers);c(d.headers,function(a,b){"content-type"==a.trim().toLowerCase()?e["Content-Type"]=b:e[a]=b});c(e,function(b,c){null!=c&&"function"!=typeof c?a.setRequestHeader(b,c):delete e[b]});return e}function t(a){var c=this.xhr,e;this.sendDelayTimer_=
clearTimeout(this.sendDelayTimer_);c&&("number"!=typeof a&&(a=c.readyState),a!=this.prevReadyState_&&(this.prevReadyState_=a,this.emit_readyStateChanged(a),4==a?(this.clearTimeout(),c.onreadystatechange=b.fn.$undef,(a=0==c.status)||c.responseType||(a="unknown"==typeof c.responseText||!c.responseText&&!c.getAllResponseHeaders()),a?(this.emit_abort(),c=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(c=d.READY,this.emit_success(this.getResponseData())):(c=d.ERROR,e=this.getResponseError(),
!e&&this.data.error&&(e=this.data.error),this.emit_failure(e))),this.emit_complete(this)):c=d.PROCESSING,this.setState(c,e)))}var x=k.encodeURIComponent,y=k.FormData,v=k.XMLHttpRequest,n=b.object.extend,r=b.object.slice,f=b.object.merge,c=b.object.iterate,h=b.require("./v.js");u=b.require("./s.js");e=u.createTransportEvent;H=u.createRequestEvent;var m=u.AbstractRequest,l=u.AbstractTransport,d=b.require("./f.js").STATE,D=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,a=/^(HEAD|GET|POST|PUT|PATCH|DELETE|TRACE|LINK|UNLINK|CONNECT)\s+/i,
p=/^application\/json/i,E="native",C=function(){if("XMLHttpRequest"in k)return function(){return new v};var a=k.ActiveXObject;if(a)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;E=b[c];c++)try{if(new a(E))return function(){return new a(E)}}catch(d){}throw Error(E="XMLHttpRequest is not supported!");}();u=m.subclass({className:"basis.net.ajax.Request",requestStartTime:0,timeout:3E4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,
debug:!1,emit_readyStateChanged:H("readyStateChanged"),init:function(){m.prototype.init.call(this);this.xhr=C()},isIdle:function(){return 4==this.xhr.readyState||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var a=this.xhr;if(!a.responseType&&("json"==this.responseType||p.test(this.data.contentType))){var c;
a:{try{c=b.json.parse(a.responseText);break a}catch(d){}c=void 0}return c}return"response"in a?a.response:a.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){var a=this.xhr;return{code:"SERVER_ERROR",msg:this.responseType?a.response||a.statusText||"Error":a.responseText,response:this.getResponseData()}},prepare:b.fn.$true,prepareRequestData:function(a){var b=[],c=a.url;a=r(a);for(var d in a.params){var e=a.params[d];null!=e&&null!=e.toString()&&
b.push(x(d)+"="+x(e.toString()))}b=b.join("&");!a.body&&D.test(a.method)&&(a.body=b||"",b="");a.routerParams&&(c=c.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,c){return c in a.routerParams?a.routerParams[c]:b}));b&&(c+=(-1==c.indexOf("?")?"?":"&")+b);a.requestUrl=c;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",status:""});h.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=C());this.emit_start();var b=this.xhr;this.prevReadyState_=
-1;b.onreadystatechange=t.bind(this);a.asynchronous||t.call(this,0);b.open(a.method,a.requestUrl,a.asynchronous);this.lastRequestUrl_=a.requestUrl;if(a.responseType&&a.asynchronous&&"responseType"in b)try{b.responseType=a.responseType}catch(c){}this.responseType=a.responseType||"";var d=q(b,a);this.setTimeout(this.timeout);var e=null;if(D.test(a.method)&&(e=a.body,"function"==typeof e&&(e=e.call(a.bodyContext)),p.test(d["Content-Type"])&&"string"!=typeof e&&(e=JSON.stringify(e)),h.test("ie9-")))if("object"==
typeof e&&"undefined"!=typeof e.documentElement&&"string"==typeof e.xml)e=e.xml;else if("string"==typeof e)e=e.replace(/\r/g,"");else if(null==e||""==e)e="[No data]";this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null;this.xhr===b&&1==b.readyState&&b.send(e)}.bind(this),this.sendDelay)):b.send(e);return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||
(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&0!=this.xhr.readyState&&t.call(this,4))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},
destroy:function(){this.abort();this.xhr=null;m.prototype.destroy.call(this)}});var g=l.subclass({className:"basis.net.ajax.Transport",requestClass:u,emit_readyStateChanged:e("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:b.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",body:null,bodyContext:null,init:function(){l.prototype.init.call(this);"postBody"in this&&(null==this.body&&(this.body=
this.postBody),this.postBody=null);this.params=r(this.params);this.routerParams=r(this.routerParams)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(c){if(!c.url&&!this.url)throw Error("URL is not defined");n(c,{headers:f(this.requestHeaders,c.headers),params:f(this.params,c.params),
routerParams:f(this.routerParams,c.routerParams)});"postBody"in c&&(null==this.body&&(c.body=c.postBody),c.postBody=null);b.object.complete(c,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,body:this.body,bodyContext:this.bodyContext,responseType:this.responseType});var d=c.url.match(a);d&&(c.method=d[1],c.url=c.url.substr(d[0].length));return c}});B.exports={Request:u,Transport:g,request:function(a,c,d){"string"==typeof a&&(a={url:a,
asynchronous:!(!c&&!d)});var e=new g(a);e.addHandler({success:c&&function(a,b,d){c(d)},failure:d&&function(a,b,c){d(c)},complete:function(){b.nextTick(function(){e.destroy()})}});a=e.request();if(!a.requestData.asynchronous)return a.getResponseData()}}},"v.js":function(e,B,b,k,u,H,A,J,M){function q(b){var e=1E6;b=String(b).split(".");for(var f=0,c=0;4>f&&f<b.length;f++,e/=100)c+=b[f]*e;return c}function t(b){b=b.toLowerCase();if(b in y)return y[b];var e=b.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);
if(e){y[b]=!1;var f=e[1].toLowerCase(),c=q(e[3]),e=e[4]||"=";if(f=x[f])return y[b]=!c||"="==e&&f==c||"+"==e&&f>=c||"-"==e&&f<c}return!1}e=k.navigator&&k.navigator.userAgent||"";k=k.opera;var x={},y={};H="unknown";u={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox",
"firefox","ff"],Opera:["Opera","opera"]};for(var v in u)if(A=v,"MSIE"!=v||!k)if("Safari"!=v||!/chrome/i.test(e))if("AppleWebKit"!=v||!/iphone/i.test(e))if("MSIE"==v&&/Trident\/\d+/i.test(e)&&/rv:\d+/i.test(e)&&(A="rv"),e.match(new RegExp(A+".(\\d+(\\.\\d+)*)","i")))for(A=u[v],H=k&&"function"==typeof k.version?k.version():RegExp.$1,J=q(H),H=A[0]+" "+H,M=0;M<A.length;M++)x[A[M].toLowerCase()]=J;B.exports={prettyName:H,is:t,test:function(){return b.array(arguments).some(t)}}},"w.js":function(e,B,b,k,
u,H,A,J,M){e=b.require("./f.js").STATE;var q=e.UNDEFINED,t=e.READY,x=e.PROCESSING,y=e.ERROR,v=b.require("./u.js").Transport,n=b.require("./x.js"),r=function(){},f={start:function(b,c){var d=c.requestData.origin;this.start.call(c.requestData.origin);d.state!=x&&d.setState(x)},success:function(b,c,d){b=c.requestData.origin;this.success.call(b,d);b.state==x&&b.setState(t)},failure:function(b,c,d){b=c.requestData.origin;this.failure.call(b,d);b.state==x&&b.setState(y,d)},abort:function(b,c){var d=c.requestData.origin;
this.abort.call(d);d.state==x&&d.setState(b.stateOnAbort||c.stateOnAbort||q)},complete:function(b,c){this.complete.call(c.requestData.origin)}},c={start:r,success:r,failure:r,abort:r,complete:r},h={success:function(b,c){this.fulfill(c)},abort:function(){this.reject("Request aborted")},failure:function(b,c){this.reject(c)},complete:function(){this.request.removeHandler(h,this)}};B.exports={create:function(e){e=b.object.extend({prepare:r,request:r},e);if("function"==typeof e.body){var k=e.body;e.body=
function(){return k.apply(this.context,this.args)}}var d=b.object.splice(e,["prepare","request"]),q=b.object.merge(c,b.object.splice(e,["start","success","failure","abort","complete"])),a=b.fn.lazyInit(function(){var a;a=e;a=a.transport?a.transport:a.service?a.service.createTransport(a):a.createTransport?a.createTransport(a):new v(a);a.addHandler(f,q);return a});return function(){if(this.state!=x){if(d.prepare.apply(this,arguments))return n.reject("Prepare handler returns trulthy result. Operation aborted. Context: ",
this);var c,e=b.object.complete({origin:this,bodyContext:{context:this,args:b.array(arguments)}},d.request.apply(this,arguments));if("function"==typeof e.body){var f=e.body;e.body=function(){return f.apply(this.context,this.args)}}return(c=a().request(e))?new n(function(a,b){c.addHandler(h,{request:c,fulfill:a,reject:b})}):n.reject("Request is not performed")}return n.reject("Context in processing state, request is not performed")}}}},"x.js":function(e,B,b,k,u,H,A,J,M){function q(){for(var a=0;a<
l.length;a++)l[a][0](l[a][1]);l=[];d=!1}function t(a,c){l.push([a,c]);d||(d=!0,b.nextTick(q,0))}function x(a,b){function c(a){n(b,a)}function d(a){f(b,a)}try{a(c,d)}catch(e){d(e)}}function y(a){var b=a.owner,c=b.state_,b=b.data_,d=a[c];a=a.then;if("function"===typeof d){c="fulfilled";try{b=d(b)}catch(e){f(a,e)}}v(a,b)||("fulfilled"===c&&n(a,b),"rejected"===c&&f(a,b))}function v(a,b){var c;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(b&&("function"===
typeof b||"object"===typeof b)){var d=b.then;if("function"===typeof d)return d.call(b,function(d){c||(c=!0,b!==d?n(a,d):r(a,d))},function(b){c||(c=!0,f(a,b))}),!0}}catch(e){return c||f(a,e),!0}return!1}function n(a,b){a!==b&&v(a,b)||r(a,b)}function r(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,t(c,a))}function f(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,t(h,a))}function c(a){a.state_="fulfilled";a.then_=a.then_.forEach(y)}function h(a){a.state_="rejected";a.then_=a.then_.forEach(y)}
var m=function(){},l=[],d,D=function(a){if("function"!==typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof D)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];x(a,this)};D.prototype={constructor:D,state_:"pending",then_:null,data_:void 0,then:function(a,b){var c={owner:this,then:new this.constructor(m),fulfilled:a,rejected:b};"fulfilled"===this.state_||
"rejected"===this.state_?t(y,c):this.then_.push(c);return c.then},"catch":function(a){return this.then(null,a)}};D.all=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(b,c){function d(a){f++;return function(c){e[a]=c;--f||b(e)}}for(var e=[],f=0,h=0,k;h<a.length;h++)(k=a[h])&&"function"===typeof k.then?k.then(d(h),c):e[h]=k;f||b(e)})};D.race=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.race().");
return new this(function(b,c){for(var d=0,e;d<a.length;d++)(e=a[d])&&"function"===typeof e.then?e.then(b,c):b(e)})};D.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(b){b(a)})};D.reject=function(a){return new this(function(b,c){c(a)})};B.exports=D},"y.js":function(e,B,b,k,u,H,A,J,M){function q(a,b){for(var c=d(a.callbacks),e=0,f;f=c[e];e++)b&&f.enterInited||!f.callback.enter||(f.enterInited=!0,f.callback.enter.call(f.context))}function t(a,b){for(var c=
d(a.callbacks),e=0,f;f=c[e];e++)b&&f.matchInited||!f.callback.match||(f.matchInited=!0,f.callback.match.apply(f.context,a.matched))}function x(a){function c(a,f){for(var g="",h,k=a;k<d.length;k++)switch(h=d.charAt(k),h){case f:return{result:g,offset:k};case "\\":g+="\\"+d.charAt(++k);break;case "|":g+=")"!=f?"\\|":"|";break;case "(":(h=c(k+1,")"))?(k=h.offset,g+="(?:"+h.result+")?"):g+="\\(";break;case ":":(h=d.substr(k+1).match(/^\w+/))?(k+=h[0].length,g+="([^/]+)",e.push(h[0])):g+=":";break;case "*":(h=
d.substr(k+1).match(/^\w+/))?(k+=h[0].length,g+="(.*?)",e.push(h[0])):g+="\\*";break;default:g+=b.string.forRegExp(h)}return f?null:g}var d=String(a||""),e=[];a=new RegExp("^"+c(0)+"$","i");a.params=e;return a}function y(){a||(l?m.addHandler(k,"hashchange",n):E=setInterval(n,50),a=!0,n())}function v(a){if(g)return!0;var c=Date.now();C=C.filter(function(a){return 200>c-a.time});if(b.array.lastSearch(C,a,"path")&&b.array.lastSearch(C,a,"path",C.lastSearchIndex))return g=setTimeout(function(){g=null;
n()},200),!0;C.push({time:Date.now(),path:a})}function n(){var a=h.hash.substr(1)||"";if(a!=p){var b=[],c=[],e=[];if(!v(a)){p=a;for(var f in D){var g=D[f],k=a.match(g.regexp);g.inited=!0;w.remove(g.token);k?(g.matched||b.push(g),g.matched=d(k,1),e.push(g)):g.matched&&(c.push(g),g.matched=null)}for(a=0;g=c[a];a++)for(g.token.set(null),g=d(g.callbacks),f=0,k=void 0;k=g[f];f++)k.callback.leave&&k.callback.leave.call(k.context);for(a=0;g=b[a];a++)q(g);for(a=0;g=e[a];a++)g.token.set(g.matched),t(g)}}else for(f in D)g=
D[f],g.matched&&(q(g,!0),t(g,!0))}function r(a,b){a instanceof I&&(a=a.path);var c=D[a];if(!c&&b){var c="[object RegExp]"==Object.prototype.toString.call(a)?a:x(a),e=new I(c.params,a),c=D[a]={id:a,regexp:c,enterInited:!1,matchInited:!1,matched:null,token:e,callbacks:[]};"string"==typeof p&&(e=p.match(c.regexp))&&(e=d(e,1),c.matched=e,c.token.set(e))}return c}function f(a,b,c){a=r(a,!0);a.callbacks.push({inited:!1,cb_:b,context:c,callback:"function"!=typeof b?b||{}:{match:b}});w.add(a.token);return a.token}
function c(a,b,c){if(a=r(a))for(var d=0,e;e=a.callbacks[d];d++)if(e.cb_===b&&e.context===c){a.callbacks.splice(d,1);a.matched&&b&&b.leave&&b.leave.call(c);a.callbacks.length||(b=a.token,b.handler&&b.handler.handler||b.matched.handler||delete D[a.id]);break}}var h=k.location;e=k.document;var m=b.require("./d.js");e=e.documentMode;var l="onhashchange"in k&&(void 0===e||7<e),d=b.array.from,D={},a=!1,p,E,C=[],g,w=b.asap.schedule(function(a){a=r(a);a.matched&&(q(a,!0),t(a,!0))}),I=b.Token.subclass({className:"basis.router.Route",
path:null,matched:null,params_:null,names_:null,init:function(a,c){b.Token.prototype.init.call(this,null);this.path=c;this.matched=this.as(Boolean);this.names_=Array.isArray(a)?a:[];this.params_={}},param:function(a){var b="number"==typeof a?a:this.names_.indexOf(a);0==b in this.params_&&(this.params_[b]=this.as(function(a){return a&&a[b]}));return this.params_[b]},set:function(a){if(a){a=b.object.slice(a);for(var c in a)c in this.names_&&(a[this.names_[c]]=a[c])}b.Token.prototype.set.call(this,a)},
add:function(a,b){return f(this,a,b)},remove:function(a,b){c(this,a,b)}});y();B.exports={debug:!1,start:y,stop:function(){a&&(a=!1,l?m.removeHandler(k,"hashchange",n):clearInterval(E))},checkUrl:n,navigate:function(b,c){c?h.replace(h.pathname+"#"+b):h.hash=b;a&&n()},add:f,remove:c,route:function(a){return r(a,!0).token}}},"z.js":function(e,B,b,k,u,H,A,J,M){function q(b){v.title=b}function t(b){return"string"==typeof b?v.getElementById(b):b}function x(b,c){try{return b.parentNode.replaceChild(c,b),
c}catch(e){return b}}var y=b.require("./f.js").resolveValue,v=k.document||{title:"unknown"},n=v.title,r=b.fn.$undef,f,c;e=b.fn.lazyInit(function(e){var k=[],l=!1,d={inited:!1,setTitle:function(a){a!=n&&(n instanceof b.Token&&n.detach(q),a instanceof b.Token?(a.attach(q),q(a.get())):q(a),n=a)},setElement:function(a){(a=y(d,d.setElement,a,"elementRA_"))&&a.element&&(a=a.element);a=t(a);if(c!==a)if(c)c=x(c,a);else{f||(f={type:"append",node:v.body});var b=t(f.node);c=a;if(b)if("append"==f.type)try{c=
b.appendChild(c)}catch(e){c=b.appendChild(v.createComment(""))}else c=x(b,c)}},ready:function(a,b){l?a.call(b,d):k.push({fn:a,context:b})}};e.constructor!==Object&&(e={element:e});for(var u in e){var a=e[u];switch(u){case "title":d.setTitle(a);break;case "container":f={type:"append",node:a};break;case "replace":f={type:"replace",node:a};break;case "element":c=a;break;case "init":r="function"==typeof a?a:r}}b.doc.body.ready(function(){var a=c,b=r.call(d);b&&(a=b);c=null;d.setElement(a);l=!0;for(d.inited=
!0;a=k.shift();)a.fn.call(a.context,d)});return d});B.exports={create:e}}};(function B(b,k,u){function H(a){var b=Math.round(10+25*Math.random()).toString(36);for(a||(a=16);b.length<a;){var c;c=Math.round(new Date*Math.random()).toString(36);b+=c}return b.substr(0,a)}function A(a,b){for(var c in b)a[c]=b[c];return a}function J(a,b){for(var c in b)0==c in a&&(a[c]=b[c]);return a}function M(a){var b=[],c;for(c in a)b.push(c);return b}function q(a,b){var c={};if(!b)return A(c,a);for(var d=0,f;f=b[d++];)f in
a&&(c[f]=a[f]);return c}function t(){for(var a={},b=0;b<arguments.length;b++)A(a,arguments[b]);return a}function x(a,b,c){var d=[],f;for(f in a)d.push(b.call(c,f,a[f]));return d}function y(a){return a}function v(){}function n(a){"function"!=typeof a&&(a=I(a));var b=function(b){return a(b)};b.factory=w;return b}function r(a){var b=aa[a.url];if(b)for(var c=0;c<b.length;c++)b[c](a.get(),a.url)}function f(a,b,c){try{return new Function(b,'"use strict";\n'+c)}catch(d){O.error("Compilation error at "+a+
("line"in d?":"+(d.line-1):"")+": "+d)}}function c(a){if(0==a in K){var b=a.split("."),c=b.shift(),b=ra(c+":"+b.join("/")+".js").replace(/\/\.js$/,".js");K[a]=b;V[b]=a}return K[a]}function h(a){if(g.call(z,a))return z[a];a=a.split(".");var b;b=a[0];var c=z[b];c||(c=z[b]=new ha(b),c.namespaces_={},c.namespaces_[b]=c,la.noConflict||(d[b]=c));"library"!=b||Ma||(Ma=z[b]);for(var c=b=c,f=1;f<a.length;f++){var h=a[f],k=a.slice(0,f+1).join(".");if(!g.call(b.namespaces_,k)){var l=new ha(k);la.implicitExt&&
(c[h]=l);b.namespaces_[k]=l}c=b.namespaces_[k]}return z[a.join(".")]=c}function m(a,b){if(null!=a){var c=a.length;if("undefined"==typeof c||"[object Function]"==C.call(a))return[a];b||(b=0);if(0<c-b){for(var d=[],f=0,g=b;g<c;)d[f++]=a[g++];return d}}return[]}function l(a,b,c){for(var d=[],f="function"==typeof b,g=0;g<a;g++)d[g]=f?b.call(c,g,d):b;return d}var d=Function("return this")(),D=d.process,a=d.document,p=d.location,E=d!==b&&D&&D.argv?d:!1,C=Object.prototype.toString,g=Object.prototype.hasOwnProperty,
w={};b=function(){return function(){}}();var I=function(){function a(f){var m=this,n,p,q;if("function"==typeof f||"string"==typeof f){n=b(f,m[h]);q=d+n[h];if(g.call(m,q))return m[q];"function"==typeof n[k]&&(n=n[k]);p=function(a){return n(m(a))}}else{if(!f)return F;p=function(a){return f[m(a)]}}p[h]=l++;p[k]=f;p.__extend__=c;p.as=a;q&&(m[q]=p);return p}function b(d,f){var n=d,p;if(d&&"string"==typeof d){if(g.call(m,d))return m[d];n=m[d]=new Function("object","return object != null ? object."+d+" : object")}if("function"!=
typeof n)return F;if(n.__extend__===c)return n;if(g.call(n,f))return n[f];p=n[f]=n!==d?n:function(a){return n(a)};p[h]=l++;p[k]=d;p.__extend__=c;p.as=a;return p}function c(a,d){var g=a&&a!==F?b(a,f):F;return d||""===d?("string"==typeof d&&(d=ta.formatter(d)),g.as(d)):g}var d="basisGetterId"+H()+"_",f=d+"root",h=d,k=d+"base",l=1,m={};c.ID=h;c.SOURCE=k;c.PARENT=d+"parent";return c}(),F=function(){var a=function(){};a[I.ID]=I.ID+"nullGetter";a.__extend__=I;a.as=function(){return a};return a}(),O=function(){var a=
d.console,b={log:v,info:v,warn:v,error:v};a&&x(b,function(c){b[c]="bind"in Function.prototype&&"function"==typeof a[c]?Function.prototype.bind.call(a[c],a):function(){Function.prototype.apply.call(a[c],a,arguments)}});return b}(),G=d.setImmediate||d.msSetImmediate,T=d.clearImmediate||d.msSetImmediate;G&&(G=G.bind(d));T&&(T=T.bind(d));G||function(){var b=function(){var a={},b=0;G=function(d){if("function"==typeof d)return a[++b]={fn:d,args:m(arguments,1)},c(b),b};T=function(b){delete a[b]};return function(b){var c=
a[b];c&&(delete a[b],c.fn.apply(void 0,c.args));S.process()}}(),c=function(a){setTimeout(function(){b(a)},0)};if(E&&E.process&&"function"==typeof D.nextTick)c=function(a){D.nextTick(function(){b(a)})};else{var f=d.postMessage&&!d.importScripts;if(f){var h=d.onmessage;d.onmessage=function(){f=!1};d.postMessage("","*");d.onmessage=h}if(f){var k={},h=function(a){if(a&&a.source==d&&(a=a.data,g.call(k,a))){var c=k[a];delete k[a];b(c)}};d.addEventListener?d.addEventListener("message",h,!0):d.attachEvent("onmessage",
h);c=function(a){var b=H(32);k[b]=a;d.postMessage(b,"*")}}else if(d.MessageChannel){var l=new d.MessageChannel;l.port1.onmessage=function(a){b(a.data)};c=function(a){l.port2.postMessage(a)}}else if(a&&"onreadystatechange"in a.createElement("script"))var n=c,c=function Ba(d){"undefined"!=typeof Ca&&(c=n,Ca.head.ready(function(){c=function(c){var d=a.createElement("script");d.onreadystatechange=function(){d.onreadystatechange=null;Ca.remove(d);d=null;b(c)};Ca.head.add(d)}}));c===Ba?n(d):c(d)}}}();var S=
function(){function a(){d&&(d=T(d));if(b.length)try{c=!0;for(var f;f=b.shift();)f.fn.call(f.context)}finally{c=!1,b.length&&(d=G(a))}}var b=[],c=!1,d,f=function(c,f){b.push({fn:c,context:f});d||(d=G(a));return!0};f.process=function(){c||a()};f.schedule=function(a){function b(){var f=G(b);d=!1;for(var g in c){var h=c[g];delete c[g];a(h)}T(f);d||(c={})}var c={},d=!1;return{add:function(a){c[a.basisObjectId]=a;d||(d=f(b))},remove:function(a){delete c[a.basisObjectId]}}};return f}(),Z=function(){var a=
0,b={id:a,start:function(){b.id=a++},finish:function(){S.process();b.id="unknown"}};return b}(),ca=function(){var a=/^([^\/]+:|\/)/,b=/^[a-zA-Z0-9\-]+:\/?/,c=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,d=/[\?#].*$/,f,g,h;E?(g=(D.basisjsBaseURI||"/").replace(/\\/g,"/"),f=g.replace(/^[^\/]*/,""),g=g.replace(/\/.*/,"")):(f=p.pathname.replace(/[^\/]+$/,""),g=p.protocol+"//"+p.host);return h={baseURI:f,origin:g,normalize:function(a){a=(a||"").replace(b,"/").replace(c,"/").replace(d,"");for(var f=[],g=a.split("/"),
h=0;h<g.length;h++)".."==g[h]?(1<f.length||f[0])&&f.pop():!g[h]&&h||"."==g[h]||f.push(g[h]);return f.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=h.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==a[0]?"/":".")},extname:function(a){return(a=h.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?a[1]:""},basename:function(a,b){var c=h.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==h.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(){for(var b=m(arguments).reverse(),
c=[],d=!1,g=0;!d&&g<b.length;g++)"string"==typeof b[g]&&(c.unshift(b[g]),d=a.test(b[g]));d||c.unshift("/"==f?"":f);return h.normalize(c.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=f);a=h.normalize(a);b=h.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;if("/"==b[0]&&"/"!=a[0])return b;for(var c=a.replace(/^\/$/,"").split(/\//),d=b.replace(/^\/$/,"").split(/\//),g=[],k=0;d[k]==c[k]&&"string"==typeof c[k];)k++;for(c=c.length-k;0<c;c--)g.push("..");return g.concat(d.slice(k).filter(Boolean)).join("/")}}}(),
ua=k||"",la=u||{noConflict:!0,implicitExt:!0,modules:{},autoload:["./0.js"]},ia=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;return c===a}function c(g){var l=h++;"function"!=typeof g&&(g=p);var q=function(){};q.prototype=g.prototype;for(var q=new q,l={basisClassId_:l,superClass_:g,extendConstructor_:!!g.extendConstructor_,isSubclassOf:b,subclass:function(){return c.apply(null,[v].concat(m(arguments)))},extend:d,factory:function(a){return n(function(b){return new v(t(a,
b))})},__extend__:function(b){return b&&b!==k&&("object"==typeof b||"function"==typeof b&&!a(b))?p.create.call(null,v,b):b},prototype:q},r=1,u;u=arguments[r];r++)l.extend(u);var v=l.extendConstructor_?function(a){this.basisObjectId=f.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=f.id++;this.init.apply(this,arguments);this.postInit()};q.constructor=v;for(var w in q)q[w]===k&&(q[w]=v);A(v,l);return v}function d(b){var c=
this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype,q(c)));b.prototype&&(b=b.prototype);for(var f in b){var g=b[f],h=c[f];"className"==f||"extendConstructor_"==f?this[f]=g:c[f]=h&&h.__extend__?h.__extend__(g):g}l&&b[f="toString"]!==C&&(c[f]=b[f]);return this}var f={id:1},h=1,k={},l=function(){for(var a in{toString:1})return!1;return!0}(),p=A(c,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)g.call(this,
a)&&(this[a]=null);this.destroy=v}}}),r=function(a,b){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=new c;b(c,a);return c}}.__extend__(a||{})},u=function(a){return r(a,A,"extensibleProperty")};return A(p,{SELF:k,create:c,isClass:a,customExtendProperty:r,extensibleProperty:u,nestedExtendProperty:function(a){return r(a,function(a,b){for(var c in b)if(g.call(b,c)){var d=a[c],f=b[c];a[c]=f?d&&d.__extend__?d.__extend__(f):u(f):null}},"nestedExtendProperty")},
oneFunctionProperty:function(a,b){var c=function(b){var d={__extend__:c};if(b){if(b.__extend__)return b;for(var f in b)g.call(b,f)&&b[f]&&(d[f]=a)}return d};return c(b||{})}})}(),pa=ia(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c,d){a.attach(b,c,d)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},
attach:function(a,b,c){this.handler={fn:a,context:b,destroy:c||null,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=v;c.destroy=c.destroy&&v;d.handler=c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new va(this.get()),this.attach(a.set,a));return a},as:function(a){var b=new pa,c=function(b){this.set(a.call(this,b))};
"function"!=typeof a&&(a=I(a));c.call(b,this.get());this.attach(c,b,b.destroy);b.attach(v,this,function(){this.detach(c,b)});return b},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.detach=this.attach=v;for(var a=this;a=a.handler;)a.destroy&&a.destroy.call(a.context);this.value=this.handler=null}}),fa=S.schedule(function(a){a.apply()}),va=pa.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,fa.add(this))},deferred:function(){return this}}),
qa={},X={},na={},aa={},ga=1;(function(){var a="undefined"!=typeof Oa?Oa:null;if(a)for(var b in a)na[ca.resolve(b)]=a[b]})();var ra=function(a,b){var c=a.match(/^([a-zA-Z0-9\_\-]+):/);if(c){var d=c[1];0==d in U&&(U[d]=ca.baseURI+d+"/");a=U[d]+ca.normalize("./"+a.substr(c[0].length))}else a=ca.resolve(b,a);return a},xa=function(a,b){if(b||!g.call(na,a)){var c="";if(E)try{c=D.basisjsReadFile?D.basisjsReadFile(a):""}catch(f){}else{var h=new d.XMLHttpRequest;h.open("GET",a,!1);h.setRequestHeader("If-Modified-Since",
(new Date(0)).toGMTString());h.setRequestHeader("X-Basis-Resource",1);h.send("");200<=h.status&&400>h.status&&(c=h.responseText)}na[a]=c}return na[a]},wa=function(a,b){var c=ca.extname(a),d=Q.extensions[c],f=1<arguments.length,g=!1,h=!1;f&&(a+="#virtual");var k=function(){if(g)return b;var c=f?b:xa(a);d?h||(h=!0,b=d(c,a)):b=c;g=!0;r(k);k.apply();return b};A(k,A(new pa,{url:a,type:c,virtual:f,fetch:function(){return k()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return g},
update:function(c){if(!g||f||c!=na[a])f||(na[a]=c),d?(!h&&f&&(b=c),h&&!d.permanent&&(b=d(c,a,b),r(k),k.apply())):(b=c,g=!0,r(k),k.apply())},reload:function(){if(!f){var b=na[a],c=xa(a,!0);c!=b&&(g=!1,k.update(c))}},get:function(c){return f&&c?d?void 0:b:c?xa(a):k()},ready:function(a,b){if(g&&(a.call(b,k()),d&&d.permanent))return;k.attach(a,b);return k}}));qa[a]=k;return X[a]=k},Q=function(a,b){var c=b?b+"\x00"+a:a,d=X[c];d||(d=ra(a,b,"basis.resource('{url}')"),d=qa[d]||wa(d),X[c]=d);return d};A(Q,
{resolveURI:ra,isResource:function(a){return a?qa[a.url]===a:!1},isResolved:function(a){return(a=Q.get(a))?a.isResolved():!1},exists:function(a){return g.call(qa,ra(a,null,"basis.resource.exists('{url}')"))},get:function(a){a=ra(a,null,"basis.resource.get('{url}')");return Q.exists(a)?Q(a):null},getFiles:function(a){return a?M(na):M(qa).filter(function(a){return!qa[a].virtual})},virtual:function(a,b,c){return wa((c?c+":":ca.normalize("/"==ca.baseURI?"":ca.baseURI)+"/")+"virtual-resource"+ga++ +"."+
a,b)},extensions:{".js":A(function(a,b){var c=V[b];if(!c){var d=!0,c=(ca.dirname(b)+"/"+ca.basename(b,ca.extname(b))).replace(/^\/\//,"/"),f;for(f in U){var g=U[f]+f+"/";if(c.substr(0,g.length)==g){d=!1;c=c.substr(U[f].length);break}}c=c.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,".");d&&(c="implicit."+c)}f=h(c);f.inited||(f.inited=!0,f.exports=L({path:f.path,exports:f.exports},b,a).exports,f.exports&&f.exports.constructor===Object&&la.implicitExt&&J(f,f.exports));return f.exports},{permanent:!0}),
".css":function(a,b,c){c||(c=new Ga(b));c.updateCssText(a);return c},".json":function(a){if("object"==typeof a)return a;var b;try{a=String(a),b=Ja.json.parse(a)}catch(c){}return b||null}}});var L=function(a,b,c){var g=ca.dirname(b),h=c;a.exports||(a.exports={});"function"!=typeof h&&(h=f(b,"exports module basis global __filename __dirname resource require asset".split(" "),c));"function"==typeof h&&h.call(a.exports,a.exports,a,Ja,d,b,g,function(a){return Q(a,g)},function(a){return da(a,g)},function(a){return ra(a,
g,"asset('{url}')")});return a},z={},K={},V={},U={};x(la.modules,function(a,b){U[a]=b.path+"/";K[a]=b.filename;V[b.filename]=a});(function(a){if(a="undefined"!=typeof La?La:null)for(var b in a){var c=ca.resolve(b),d=a[b];V[c]=d;K[d]=c}})();var ha=ia(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={}},toString:function(){return"[basis.namespace "+this.name+"]"},extend:function(a){A(this.exports,a);return J(this,a)}}),da=function(a,b){var d=ca.extname(a);/[^a-z0-9_\.]/i.test(a)||
".js"==d?/[\?#]/.test(a)||(d||(a+=".js"),a=ra(a,b,"basis.require('{url}')")):a=c(a);return Q(a).fetch()};J(Function.prototype,{bind:function(a){var b=this,c=m(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});J(Array,{isArray:function(a){return"[object Array]"===C.call(a)}});J(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,
b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],d=0,f=this.length;d<f;d++)d in this&&
a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,f=this.length;d<f;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw new TypeError;var f,g=0;1<d&&(f=b,g=1);for(d=0;d<c;d++)d in this&&(f=g++?a.call(null,f,this[d],d,this):this[d]);return f}});var ba={from:m,create:l,flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return ba.flatten(l(parseInt(b,10)||0,a))},
search:function(a,b,c,d){a.lastSearchIndex=-1;c=I(c||y);d=parseInt(d,10)||0;for(var f=a.length;d<f;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=I(c||y);var f=a.length;d=isNaN(d)||null==d?f:parseInt(d,10);for(f=d>f?f:d;0<f--;)if(c(a[f])===b)return a[a.lastSearchIndex=f]},add:function(a,b){return-1==a.indexOf(b)&&!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(){return ba.sort.apply(this,
arguments)},sort:function(a,b,c,d){b=I(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(a){return this[a.i]},a)}};if(![1,2].splice(1).length){var ja=Array.prototype.splice;Array.prototype.splice=function(){var a=m(arguments);2>a.length&&(a[1]=this.length);return ja.apply(this,a)}}var ea=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,Y=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,sa={};J(String,{toLowerCase:function(a){return String(a).toLowerCase()},
toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});J(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var ta={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw c;}},repeat:function(a,b){return Array(parseInt(b,
10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(ea,"\\$1")},format:function(a,b){var c=m(arguments,1);"object"==typeof b&&A(c,b);return a.replace(Y,function(a,b,d,f,g){a=b in c?c[b]:g?"":a;return d&&!isNaN(a)?(a=Number(a),"."==d?a.toFixed(f):Ea.lead(a,f)):a})},formatter:function(a){a=String(a);if(g.call(sa,a))return sa[a];var b=function(b){return ta.format(a,b)};return sa[a]=b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},
camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}};if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var ya=String.prototype.split;String.prototype.split=function(a,b){if(!a||0==a instanceof RegExp||""==a.source)return ya.call(this,a,b);var c=[],d=0,f;for(a.global||
(a=new RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));f=a.exec(this);)f[0]=this.substring(d,f.index),c.push.apply(c,f),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var oa=String.prototype.substr;String.prototype.substr=function(a,b){return oa.call(this,0>a?Math.max(0,this.length+a):a,b)}}var Ea={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||
0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,function(d,f){return!f+(a.length-f)%(b||3)?d:(c||" ")+d})})},format:function(a,b,c,d,f,g){a=a.toFixed(b);if(c||g)a=a.replace(/(\d+)(\.?)/,function(a,b,d){return(c?Ja.number.group(Number(b),3,c):b)+(d?g||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(f||"")}};J(Date,{now:function(){return Number(new Date)}});var Fa=function(){function b(){var a;k&&(k=T(k));for(1<h.length&&(k=G(b));a=h.shift();)a[0].call(a[1]);
k=T(k);S.process()}function c(){g++||b()}function f(){try{a.documentElement.doScroll("left"),c()}catch(b){setTimeout(f,1)}}var g=!a||"complete"==a.readyState,h=[],k;if(!g)if(a.addEventListener)a.addEventListener("DOMContentLoaded",c,!1),d.addEventListener("load",c,!1);else{a.attachEvent("onreadystatechange",c);d.attachEvent("onload",c);try{!d.frameElement&&a.documentElement.doScroll&&f()}catch(l){}}return function(a,c){h.length||!g||k||(k=G(b));h.push([a,c])}}(),Ha=function(){return"addEventListener"in
d?function(a,b){d.addEventListener("unload",function(c){a.call(b||null,c||d.event)},!1)}:"attachEvent"in d?function(a,b){d.attachEvent("onunload",function(c){a.call(b||null,c||d.event)})}:v}(),Ca=function(){function b(c){if(a&&!h[c]&&(h[c]=a[c]||a.getElementsByTagName(c)[0],h[c])){var d=k[c];delete k[c];for(var f=0,g;g=d[f];f++)g[0].call(g[1],h[c])}return h[c]}function c(){var a=this[0],f=this[1],g=this[2];d(f);var h=b(a);h?(!0===g&&(g=h.firstChild),g&&g.parentNode===h||(g=null),h.insertBefore(f,
g)):k[a].push([c,[a,f,g]])}function d(a){for(var b in k){var c=ba.search(k[b],a,function(a){return a[1]&&a[1][1]});c&&ba.remove(k[b],c)}a&&a.parentNode&&1==a.parentNode.nodeType&&a.parentNode.removeChild(a)}function f(){g&&b("head")&&b("body")&&(g=clearInterval(g))}var g,h={},k={head:[],body:[]};!a||b("head")&&b("body")||(g=setInterval(f,5),Fa(f));return{head:{ready:function(a,b){k.head?k.head.push([a,b]):a.call(b,h.head)},add:function(a,b){c.call(["head",a,b])}},body:{ready:function(a,b){k.body?
k.body.push([a,b]):a.call(b,h.body)},add:function(a,b){c.call(["body",a,b])}},remove:d}}();k=function(){var a=[];if(Ha===v)return{add:v,remove:v};Ha(function(){b.globalDestroy=!0;b.add=v;b.remove=v;for(var c;c=a.pop();)if("function"==typeof c.destroy)try{c.destroy()}catch(d){}else for(var f in c)c[f]=null;a=[]});var b={add:function(b){null!=b&&a.push(b)},remove:function(b){ba.remove(a,b)}};return b}();var Ga=function(){function b(a){h.setAttribute("href",a);Ca.head.add(h,!0)}function c(){h.setAttribute("href",
p.href);Ca.remove(h)}function d(){b(this.baseURI);this.element||(this.element=a.createElement("style"),f||this.element.appendChild(a.createTextNode("")));Ca.head.add(this.element);this.syncCssText();c()}var f;try{f=!a.createElement("style").appendChild(a.createTextNode(""))}catch(g){f=!0}var h=a&&a.createElement("base");return ia(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(a){this.url=a;this.baseURI=ca.dirname(a)+"/"},updateCssText:function(a){this.cssText!=
a&&(this.cssText=a,this.inUse&&this.element&&(b(this.baseURI),this.syncCssText(),c()))},syncCssText:f?function(){this.element.styleSheet.cssText=this.cssText}:function(){this.element.firstChild.nodeValue=this.cssText},startUse:function(){this.inUse||Ca.head.ready(d,this);this.inUse+=1},stopUse:function(){this.inUse&&(--this.inUse,!this.inUse&&this.element&&Ca.remove(this.element))},destroy:function(){this.element&&Ca.remove(this.element);this.cssText=this.element=null}})}();u=function(){return{fixSourceOffset:y,
setInfo:function(a,b,c){},getInfo:function(a,b){}}}();var Ja=h("basis").extend({version:"1.6.1",NODE_ENV:E,config:la,createSandbox:function(a){return B(d,ua,J({noConflict:!0,devpanel:!1},a))},dev:O=(new ha("basis.dev")).extend(O).extend(u).extend({warnPropertyAccess:b}),resolveNSFilename:c,patch:function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==ca.extname(a)?ra(a,null,"basis.patch('{url}')"):c(a);aa[a]?aa[a].push(b):aa[a]=[b];var d=Q.get(a);d&&d.isResolved()&&b(d.get(),d.url)},namespace:h,require:da,
resource:Q,asset:function(a){return ra(a,null,"basis.asset('{url}')")},setImmediate:G,clearImmediate:T,nextTick:function(){G.apply(null,arguments)},asap:S,FACTORY:w,PROXY:{},Class:ia,Token:pa,DeferredToken:va,codeFrame:Z,ready:Fa,teardown:Ha,cleaner:k,genUID:H,getter:I,console:O,path:ca,doc:Ca,object:{extend:A,complete:J,keys:M,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:q,splice:function(a,b){var c={};if(!b)return A(c,a);for(var d=0,f;f=b[d++];)f in a&&(c[f]=a[f],delete a[f]);
return c},merge:t,iterate:x},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==this},$self:y,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:v,getter:I,nullGetter:F,wrapper:function(a){return function(b){var c=
{};c[a]=b;return c}},factory:n,isFactory:function(a){return"function"===typeof a&&a.factory===w},lazyInit:function(a,b){var c=0,d,f;return d=function(){c++||(d.inited=!0,d.data=f=a.apply(b||this,arguments));return f}},lazyInitAndRun:function(a,b,c){var d=0,f,g;return f=function(){d++||(f.inited=!0,f.data=g=a.call(c||this));b.apply(g,arguments);return g}},runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}},publicCallback:function(a,b){var c="basisjsCallback"+
H();d[c]=b?a:function(){try{delete d[c]}catch(b){d[c]=void 0}a.apply(this,arguments)};return c}},array:A(m,ba),string:ta,number:Ea,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return ta.toObject(a,!0)}}});E||la.autoload&&la.autoload.forEach(function(a){da(a)});E&&exports&&(exports.basis=Ja);return Ja})(this)}).call(this)