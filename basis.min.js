(function(){var Da={"0.js":"library","1.js":"basis.ui","2.js":"basis.event","3.js":"basis.template.html","4.js":"basis.l10n","5.js":"basis.template.htmlfgen","6.js":"basis.template.const","7.js":"basis.template","8.js":"basis.template.declaration","9.js":"basis.template.store","a.js":"basis.template.theme","b.js":"basis.template.buildDom","c.js":"basis.dom.event","d.js":"basis.dom.wrapper","e.js":"basis.data","f.js":"basis.dragdrop","g.js":"basis.dom.computedStyle","h.js":"basis.layout","i.js":"basis.data.dataset",
"j.js":"basis.data.value","k.js":"basis.data.index","l.js":"basis.data.object","m.js":"basis.entity","n.js":"basis.net.jsonp","o.js":"basis.net","p.js":"basis.net.service","q.js":"basis.net.ajax","r.js":"basis.ua","s.js":"basis.net.action","t.js":"basis.promise","u.js":"basis.router","v.js":"basis.app"},Ea,Fa={"f.js":function(d,U,b,k,g,z,O,T,ca){function E(a){return"string"==typeof a?J.getElementById(a):a}function B(a){if(!c&&!this.ignoreTarget(a.sender,a)){var b=p(a.sender);a.mouseX<b.left||a.mouseX>
b.right||a.mouseY<b.top||a.mouseY>b.bottom||(c=this,v={initX:a.mouseX,initY:a.mouseY,deltaX:0,minDeltaX:-Infinity,maxDeltaX:Infinity,deltaY:0,minDeltaY:-Infinity,maxDeltaY:Infinity},l("mousedown",A),l("touchstart",A),l("mousemove",x),l("touchmove",x),l("mouseup",A),l("touchend",A),M&&l("selectstart",w.kill),a.preventDefault(),this.prepareDrag(v,a))}}function x(h){var t=h.mouseX-v.initX,H=h.mouseY-v.initY;if(!a){if(!c.startRule(t,H))return;a=!0;c.emit_start(v,h)}c.axisX&&(v.deltaX=c.axisXproxy(b.number.fit(t,
v.minDeltaX,v.maxDeltaX)));c.axisY&&(v.deltaY=c.axisYproxy(b.number.fit(H,v.minDeltaY,v.maxDeltaY)));c.emit_drag(v,h)}function A(b){y("mousedown",A);y("touchstart",A);y("mousemove",x);y("touchmove",x);y("mouseup",A);y("touchend",A);M&&y("selectstart",w.kill);var t=c,H=v;v=c=null;a&&(a=!1,t.emit_over(H,b));b.die()}d=this.path;var J=k.document,F=b.cleaner,w=b.require("./c.js"),l=w.addGlobalHandler,y=w.removeGlobalHandler;g=b.require("./2.js");var D=g.Emitter;g=g.create;var n=b.require("./g.js").get;
z=b.require("./h.js");var r=z.getBoundingRect,p=z.getViewportRect,M=w.getEventInfo("selectstart").supported,a,c,v,I=D.subclass({className:d+".DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:b.fn.$self,axisYproxy:b.fn.$self,prepareDrag:b.fn.$undef,startRule:b.fn.$true,ignoreTarget:function(a){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(a.tagName)},emit_start:g("start"),emit_drag:g("drag"),emit_over:g("over"),init:function(){D.prototype.init.call(this);var a=
this.element,b=this.trigger;this.trigger=this.element=null;this.setElement(a,b);this.setBase(this.baseElement);F.add(this)},setElement:function(a,b){this.element=E(a);b=E(b)||this.element;this.trigger!==b&&(this.trigger&&(w.removeHandler(this.trigger,"mousedown",B,this),w.removeHandler(this.trigger,"touchstart",B,this)),this.trigger=b)&&(w.addHandler(this.trigger,"mousedown",B,this),w.addHandler(this.trigger,"touchstart",B,this))},setBase:function(a){this.baseElement=E(a)},getBase:function(){return"fixed"==
n(this.element,"position")?k:this.baseElement?this.baseElement:"CSS1Compat"==J.compatMode?J.documentElement:J.body},isDragging:function(){return c===this},start:function(a){this.isDragging()||B.call(this,a)},stop:function(){this.isDragging()&&A()},destroy:function(){this.stop();F.remove(this);D.prototype.destroy.call(this);this.setElement();this.setBase()}});g=b.Class(null,{className:d+".DeltaWriter",property:null,invert:!1,format:b.fn.$self,init:function(a){"function"==typeof this.property&&(this.property=
this.property(a));"function"==typeof this.invert&&(this.invert=this.invert(this.property));this.value=this.read(a)},read:function(a){return a[this.property]},write:function(a,b){a[this.property]=b},applyDelta:function(a,b){this.invert&&(b=-b);this.write(a,this.format(this.value+b,b))}});z=g.subclass({className:d+".StyleDeltaWriter",format:function(a){return a+"px"},read:function(a){return parseFloat(n(a,this.property))||0},write:function(a,b){a.style[this.property]=b}});O=z.subclass({property:function(a){return"auto"==
n(a,"left")&&"auto"!=n(a,"right")?"right":"left"},invert:function(a){return"right"==a}});T=z.subclass({property:function(a){return"auto"==n(a,"top")&&"auto"!=n(a,"bottom")?"bottom":"top"},invert:function(a){return"bottom"==a}});d=I.subclass({className:d+".MoveableElement",fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:O,axisY:T,emit_start:function(a,b){var c=this.element;if(c){var v=p(this.getBase()),n=r(c,this.getBase());a.element=c;this.axisX&&(a.axisX=new this.axisX(c),this.fixLeft&&(a.minDeltaX=
v.left-n.left),this.fixRight&&(a.maxDeltaX=v.right-n.right));this.axisY&&(a.axisY=new this.axisY(c),this.fixTop&&(a.minDeltaY=v.top-n.top),this.fixBottom&&(a.maxDeltaY=v.bottom-n.bottom))}I.prototype.emit_start.call(this,a,b)},emit_drag:function(a,b){a.element&&(a.axisX&&a.axisX.applyDelta(a.element,a.deltaX),a.axisY&&a.axisY.applyDelta(a.element,a.deltaY),I.prototype.emit_drag.call(this,a,b))}});U.exports={DragDropElement:I,MoveableElement:d,DeltaWriter:g,StyleDeltaWriter:z}},"0.js":function(d,U,
b,k,g,z,O,T,ca){b.require("./1.js");b.require("./f.js");b.require("./i.js");b.require("./j.js");b.require("./k.js");b.require("./l.js");b.require("./m.js");b.require("./n.js");b.require("./p.js");b.require("./s.js");b.require("./u.js");b.require("./v.js");k.basis=b},"2.js":function(d,U,b,k,g,z,O,T,ca){function E(b){var d=x[b];d||(d=function(){for(var d=this,l,y;d=d.handler;){y=d.callbacks[b];if("function"==typeof y){if(!l){l=[this];for(var k=0;k<arguments.length;k++)l.push(arguments[k])}y.apply(d.context||
this,l)}y=d.callbacks["*"];if("function"==typeof y){if(!l)for(l=[this],k=0;k<arguments.length;k++)l.push(arguments[k]);y.call(d.context||this,{sender:this,type:b,args:l})}}},x[b]=d);return d}d=b.Class;var B={},x={},A=function(){};d=d(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:E("destroy"),listen:d.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(b,
d){this.handler={callbacks:b,context:d||this,handler:this.handler}},removeHandler:function(b,d){var k=this,l;for(d=d||this;l=k,k=k.handler;)if(k.callbacks===b&&k.context===d){k.callbacks=B;l.handler=k.handler;break}},destroy:function(){this.destroy=A;this.emit_destroy();this.handler=null}});U.exports={create:E,createHandler:function(b,d){var k={events:[]};if(b){b=String(b).trim().split(/\s+|\s*,\s*/).sort();for(var k={events:b},l=0,y;y=b[l];l++)"destroy"!=y&&(k[y]=d)}return k},events:x,Emitter:d}},
"3.js":function(d,U,b,k,g,z,O,T,ca){function E(a){var b=a.dictionary,c=b.resource?b.resource.url:"dictionary"+b.basisObjectId;a=a.getName();var h=a+"@"+c,p=v[h],d;if(!p){var n=b.token(a),p=v[h]=n.as(function(a){if("markup"==n.getType()){var b=n.getParentType();"string"!=typeof a||"plural"!=b&&"plural-markup"!=b||(a=a.replace(/\{#\}/g,"{__templateContext}"));a!=this.value&&d&&(d.detach(n,n.apply),d=null);a&&"path:"==String(a).substr(0,5)&&(d=D(a.substr(5)),d.attach(n,n.apply));return d?d.bindingBridge.get(d):
a}return this.value});p.id="{l10n:"+h+"}";p.url=c+":"+a}return p}function B(a){"string"==typeof a&&(a=w(a));if(!a)return null;a=E(a);var b=a.id,h=c[b];h||(h=c[b]=new I(a));return h}d=this.path;var x=k.document,A=k.Node,J=b.string.camelize,F=b.require("./4.js").isMarkupToken,w=b.require("./4.js").token,l=b.require("./5.js").getFunctions;O=b.require("./7.js");var y=O.TemplateSwitchConfig;g=O.TemplateSwitcher;z=O.Template;var D=O.get,n=b.require("./b.js"),r=b.require("./6.js").CLONE_NORMALIZATION_TEXT_BUG,
p;a:{try{p=x.documentElement.style.color="x";break a}catch(M){}p=void 0}var a=!!p,c={},v={};p=function(){function c(){this.set(this.name,this.value)}function h(a,b,N){var H=b&&b.bindingBridge,f=this.attaches&&this.attaches[a],e=null;if(H||f)if(H){var m;F(b)&&(m=B(b));if(f&&f.value===b&&f.template===m)e=b&&F(b)?f.tmpl:null;else{f&&(f.tmpl&&f.template.clearInstance(f.tmpl),f.value.bindingBridge.detach(f.value,c,f));if(m){var q=this.context,C=this.bindings,p=this.action,u=this.bindingInterface,e=m.createInstance(q,
p,function X(){e=ka.tmpl=m.createInstance(q,p,X,C,u);e.parent=e.element.parentNode||e.element;c.call(ka)},C,u);e.parent=e.element.parentNode||e.element}this.attaches||(this.attaches=new N);var ka=this.attaches[a]={name:a,value:b,template:m,tmpl:e,set:this.tmpl.set};H.attach(b,c,ka)}if(e)return e.set("__templateContext",b.value),e.parent;b=H.get(b)}else f&&(f.tmpl&&f.template.clearInstance(f.tmpl),f.value.bindingBridge.detach(f.value,c,f),this.attaches[a]=null);return b}function p(a,b){var c=a[0],
N=a[1],f=b[c],e=b[N];switch(a.length){case 1:return function(e){this(c,f(e))};case 2:return function(a){this(c,f(a));this(N,e(a))};default:var m=a.map(function(e){return b[e]});return function(e){for(var f=0;f<a.length;f++)this(a[f],m[f](e))}}}function d(a){var b={};return function(c,N){var f=c.bindings;if(!f)return{};var e="bindingId"in f?f.bindingId:null,m=b[e];if(!m){for(var m=[],q={},C={},h=0,u;u=a[h];h++){var H=f[u],t=H&&H.getter;if(t&&(q[u]=t,m.push(u),H.events))for(var H=String(H.events).trim().split(/\s+|\s*,\s*/),
t=0,d;d=H[t];t++)C[d]?C[d].push(u):C[d]=[u]}var f=p(m,q),n;for(n in C)C[n]=p(C[n],q);m={names:m,sync:f,handler:n?C:null};e&&(b[e]=m)}N&&m.sync.call(N,c.context);if(c.bindingInterface)return m.handler&&c.bindingInterface.attach(c.context,m.handler,N),m.handler}}var v=/\s+/,y=k.DOMTokenList&&x&&x.documentElement.classList instanceof k.DOMTokenList,I;a:{try{I=x instanceof A;break a}catch(D){}I=void 0}var N=I?function(a,b,c,N){a=!N&&c&&c instanceof A?c:a;if(a!==b){11!==a.nodeType||a.startMarker||(a.startMarker=
x.createTextNode(""),a.endMarker=x.createTextNode(""),a.insertBefore(a.startMarker,a.firstChild),a.appendChild(a.endMarker));if(11===b.nodeType&&b.startMarker){c=b.startMarker;N=b.endMarker;for(var f=c.nextSibling;f&&f!==N;){var e=f,f=f.nextSibling;b.appendChild(e)}N.parentNode.removeChild(N);b.startMarker=null;b.endMarker=null;b=c}b.parentNode.replaceChild(a,b)}return a}:function(a,b,c,N){c=!N&&c&&"object"==typeof c?c:a;if(c!==b)try{b.parentNode.replaceChild(c,b)}catch(f){c=a,b!==c&&b.parentNode.replaceChild(c,
b)}return c},M=function(a,b,c,N){c!==N&&(N?a.setAttribute(b,N):a.removeAttribute(b));return N},g={bind_textNode:function(a,b,c,h){b=N(a,b,c,h);b===a&&(a.nodeValue=String(c));return b},bind_node:N,bind_element:function(a,b,c,h){b=N(a,b,c,h);b===a&&"string"==typeof c&&(a.innerHTML=c);return b},bind_comment:N,bind_attr:M,bind_attrClass:y?function(a,c,N,h){var f=N?N:"";f!=c&&(c&&a.classList.remove(c),f&&(a.classList.add(f),h&&(a.classList.add(f+"-anim"),b.nextTick(function(){a.classList.remove(f+"-anim")}))));
return f}:function(a,c,N,h){var f=N?N:"";if(f!=c){N=a.className;var e="string"!=typeof N;e&&(N=N.baseVal);N=N.split(v);c&&b.array.remove(N,c);f&&(N.push(f),h&&(b.array.add(N,f+"-anim"),b.nextTick(function(){var m=(e?a.className.baseVal:a.className).split(v);b.array.remove(m,f+"-anim");e?a.className.baseVal=m.join(" "):a.className=m.join(" ")})));e?a.className.baseVal=N.join(" "):a.className=N.join(" ")}return f},bind_attrStyle:a?function(a,b,c,N){c!==N&&(a.style[J(b)]=N);return N}:function(a,b,c,
N){if(c!==N)try{a.style[J(b)]=N}catch(f){}return N},resolve:h,l10nToken:w};return function(a,c){var N=l(a,!0,this.source.url,a.source_,!r),t=N.createL10nSync,f,e,m={},q=[],C=[],p=0,u={cloneNode:function(){if(1==p)return n(a);u=n(a);if(t){e=N.createL10nSync(u,m,M,r);for(var b=0,f;f=q[b];b++)e(f.path,m[f.path])}return u.cloneNode(!0)}};if(t)var ka=function(a){for(var e=0,b;b=q[e];e++)a(b.path,m[b.path])},v=function(a){var f=F(this.token);f?b.array.add(C,this):b.array.remove(C,this);m[this.path]=f?void 0:
null==a?"{"+this.path+"}":a;e&&e(this.path,m[this.path]);for(var u in c)c[u].tmpl.set(this.path,f?this.token:a)},q=N.l10nKeys.map(function(a){var e=w(a),b={path:a,token:e,handler:v};e.attach(v,b);F(e)?C.push(b):m[a]=null==e.value?"{"+a+"}":e.value;return b});f=N.createInstanceFactory(this.templateId,function(){return u.cloneNode(!0)},g,m,C,d(N.keys),r);return{createInstance:function(a,e,b,m,u){var q=p++;a={context:a,action:e,rebuild:b,handler:null,bindings:m,bindingInterface:u,attaches:null,compute:null,
tmpl:null};f(q,a,q?null:ka);c[q]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var e=c[a];if(e){e.handler&&e.bindingInterface.detach(e.context,e.handler,e.tmpl.set);if(e.compute){for(var b=0;b<e.compute.length;b++)e.compute[b].destroy();e.compute=null}for(var f in e.attaches)h.call(e,f,null);delete c[a]}},destroy:function(a){for(var b=0,f;f=q[b];b++)f.token.detach(f.handler,f);for(var C in c)if(b=c[C],a&&b.rebuild&&b.rebuild.call(b.context),!a||C in c)for(C in b.handler&&b.bindingInterface.detach(b.context,
b.handler,b.tmpl.set),b.attaches)h.call(C,null);c=e=q=m=u=N=null}}}}();var I=z.subclass({className:d+".Template",__extend__:function(a){return a instanceof I?a:a instanceof y?new h(a):new I(a)},builder:p}),h=g.subclass({className:d+".TemplateSwitcher",templateClass:I});U.exports={Template:I,TemplateSwitcher:h}},"4.js":function(d,U,b,k,g,z,O,T,ca){function E(b){return b?b instanceof c||b instanceof a:!1}function B(a,b,c,h){var H=a.cultureValues[b];h=h?h+".":"";for(var t in c)if(-1==t.indexOf(".")&&
l.call(c,t)){var p=h+t,f=c[t];(H[p]=f)&&("object"==typeof f||Array.isArray(f))&&B(a,b,f,p)}}function x(a){var c;if("string"==typeof a){var h=b.path.extname(a);".l10n"!=h&&(a=a.replace(new RegExp(h+"([#?]|$)"),".l10n$1"));a=b.resource(a)}b.resource.isResource(a)&&(c=I[a.url]);return c||new t(a)}function A(a,b){a&&!P[a]&&(P[a]=new ma(a,b));return P[a||G]}function J(a){if(a&&G!=a&&-1!=H.indexOf(a)){G=a;for(var c=0,h;h=v[c];c++)h.syncValues();b.Token.prototype.set.call(A,a)}}function F(a){"string"==typeof a&&
(a=a.trim().split(" "));if(a.length){var c={},h,t;V={};for(var p=0,d;h=a[p];p++)h=h.split("/"),2<h.length&&(h=h.slice(0,2)),d=h[0],t||(t=d),c[d]=A(d),V[d]=h;for(d in V)V[d]=b.array.flatten(V[d].map(function(a){return V[a]})).concat(t).filter(function(a,b,e){return!b||-1==e.lastIndexOf(a,b-1)});H=b.object.keys(c);0==G in c&&J(t)}}d=this.path;k=b.Class;var w=b.require("./2.js").Emitter,l=Object.prototype.hasOwnProperty;b.resource.extensions[".l10n"]=function(a,c){return x(c).update(b.resource.extensions[".json"](a,
c))};var y=[],D={},n=b.Token.prototype.set,r={"default":!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},p={"default":"default",plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},M={plural:!0,"plural-markup":!0},a=k(b.Token,{className:d+".ComputeToken",dictionary:null,token:null,parent:"",init:function(a){this.token.computeTokens[this.basisObjectId]=this;b.Token.prototype.init.call(this,a)},get:function(){var a=this.dictionary.getValue(this.getName());M[this.token.getType()]&&
(a=String(a).replace(/\{#\}/g,this.value));return a},getName:function(){var a=this.value;M[this.token.getType()]&&(a=P[G].plural(a));return this.parent+"."+a},getType:function(){var a=this.token.getType();return this.dictionary.types[this.getName()]||p[a]||"default"},getParentType:function(){return this.token.getType()},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];b.Token.prototype.destroy.call(this)}}),c=k(b.Token,{className:d+".Token",
index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(a,c,h){b.Token.prototype.init.call(this,h);this.index=y.push(this)-1;this.name=c;this.parent=c.replace(/(^|\.)[^.]+$/,"");this.dictionary=a;this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var a in this.computeTokens)this.computeTokens[a].apply();b.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.dictionary.types[this.name]||
p[this.dictionary.types[this.parent]]||"default"},getParentType:function(){return this.parent?this.dictionary.token(this.parent).getType():"default"},setType:function(){},compute:function(a,c){1==arguments.length&&(c=a,a="");c=b.getter(c);a=String(a).trim().split(/\s+|\s*,\s*/).sort();var h=a.concat(this.basisObjectId,c[b.getter.ID]).join("_");if(D[h])return D[h];for(var H=this,t={},p=function(a){n.call(this,c(a))},d={destroy:function(a){delete t[a.basisObjectId];this.destroy()}},f=0,e;e=a[f];f++)"destroy"!=
e&&(d[e]=p);return D[h]=function(a){if(0==a instanceof w)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";var e=a.basisObjectId,b=t[e];b||(b=t[e]=H.computeToken(c(a)),a.addHandler(d,b));return b}},computeToken:function(b){var c=this.computeTokenClass;c||(c=this.computeTokenClass=a.subclass({dictionary:this.dictionary,token:this,parent:this.name}));return new c(b)},token:function(a){if(M[this.getType()])return this.computeToken(a,this);if(this.dictionary)return this.dictionary.token(this.name+
"."+a)},destroy:function(){for(var a in this.computeTokens)this.computeTokens[a].destroy();this.dictionary=this.value=this.computeTokens=this.computeTokenClass=null;y[this.index]=null;b.Token.prototype.destroy.call(this)}}),v=[],I={},h=new b.Token,t=k(null,{className:d+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(a){this.tokens={};this.types={};this.cultureValues={};this.index=v.push(this)-1;b.resource.isResource(a)?(this.resource=a,I[a.url]||(I[a.url]=
this,h.set(a.url)),a.fetch()):this.update(a||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]={},B(this,b,a[b]));a=a._meta&&a._meta.type||{};b={};for(var c in this.tokens)b[c]=this.tokens[c].getType();this.types={};for(c in a)this.types[c]=1==r[a[c]]?a[c]:"default";for(c in this.tokens)this.tokens[c].getType()!=b[c]&&this.tokens[c].apply();this.syncValues();return this},syncValues:function(){for(var a in this.tokens)n.call(this.tokens[a],
this.getValue(a))},getValue:function(a){for(var b=V[G]||[],c=0,h;h=b[c];c++)if((h=this.cultureValues[h])&&a in h)return h[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new c(this,a,this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;b.array.remove(v,this);this.resource&&(delete I[this.resource.url],this.resource=null)}}),H=[],G=null,P={},V={},la={},Q=[[1,function(){return 0}],
[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==a?0:1}],[2,function(a){return 0==a||1==a?0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==
a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>
a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){la[a]=this},Q[b])});var ma=b.Class(null,{className:d+".Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;P[a]||(P[a]=this);this.pluralForm=b||la[a]||la[a.split("-")[0]]||Q[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});b.object.extend(A,new b.Token);A.set=J;F("en-US");J("en-US");U.exports={ComputeToken:a,Token:c,token:function(a){if("#"==a.charAt(0))return y[parseInt(a.substr(1),36)];if(a=a.match(/^(.+?)@(.+)$/))return x(b.path.resolve(a[2])).token(a[1])},
isToken:E,isPluralToken:function(a){return E(a)&&M[a.getType()]},isMarkupToken:function(a){return E(a)&&"markup"==a.getType()},Dictionary:t,dictionary:x,getDictionaries:function(){return v.slice(0)},addCreateDictionaryHandler:h.attach.bind(h),removeCreateDictionaryHandler:h.detach.bind(h),Culture:ma,culture:A,getCulture:function(){return G},setCulture:J,getCultureList:function(){return H.slice(0)},setCultureList:F,pluralForms:Q,onCultureChange:function(a,b,c){A.attach(a,b);c&&a.call(b,G)}}},"5.js":function(d,
U,b,k,g,z,O,T,ca){function E(a,b){return new Function(a,b)}var B=Object.prototype.hasOwnProperty;d=b.require("./6.js");var x=d.MARKER,A=d.TYPE_ELEMENT,J=d.TYPE_ATTRIBUTE,F=d.TYPE_ATTRIBUTE_CLASS,w=d.TYPE_ATTRIBUTE_STYLE,l=d.TYPE_ATTRIBUTE_EVENT,y=d.TYPE_TEXT,D=d.TYPE_COMMENT,n=d.TOKEN_TYPE,r=d.TOKEN_BINDINGS,p=d.TOKEN_REFS,M=d.ATTR_NAME,a=d.ATTR_NAME_BY_TYPE,c=d.ELEMENT_NAME,v=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,I=d.CLASS_BINDING_ENUM,h=d.CLASS_BINDING_BOOL,t={},H;try{k.document.createTextNode("").x=
1,H=!0}catch(G){H=!1}var P=function(){function b(a,e){for(var c=0,q;q=a[c];c++)-1==q.indexOf(":")&&I.push(q+":"+e)}function h(a){var e=k.length,e=d[e]||"r"+e;k.push(e+"="+a);return e}function t(f,e,m){for(var q,C,d,u,ka=0,I=0,X=0,ia;ia=f[ka];ka++,I++,u=!1){ka?f[ka+1]?(ia[n]==f[ka-1][n]&&ia[n]==y&&X++,q=e+".childNodes["+(m?I:I+(X?" + "+X+" * TEXT_BUG":""))+"]"):q=e+".lastChild":q=e+".firstChild";if(C=ia[p])u=!0,q=h(q),b(C,q);ia[r]&&(ia[r]&&"number"==typeof ia[r]&&(ia[r]=ia[p][ia[r]-1]),u||(u=!0,q=
h(q)),d=[ia[n],q,ia[r],C?-1!=C.indexOf("element"):!1],G.push(d));e!=P||!H&&ia[n]!=A||g.push(q+"."+x);if(ia[n]==A){d=-1;u||(q=h(q),d=k.length);for(var N=[],B=[],J=v,V;V=ia[J];J++)V[n]==A||V[n]==y||V[n]==D?B.push(V):N.push(V);for(var J=0,z;z=N[J];J++){var qa=z[n];if(qa!=l){V=a[qa]||z[M];if(C=z[p])u=!0,b(C,h(q+'.getAttributeNode("'+V+'")'));if(C=z[r])switch(u=!0,qa){case F:for(qa=0;z=C[qa];qa++)z=[2,q,z[1],V,z[0]].concat(-1==z[2]?[]:z.slice(2)),G.push(z);break;case w:for(qa=0;z=C[qa];qa++){E++;for(var ba=
0,K;K=z[0][ba];ba++)G.push([2,q,K,V,z[0],z[1],z[2],z[3],E])}break;default:for(E++,qa=0;K=C[0][qa];qa++)G.push([2,q,K,V,C[0],C[1],ia[c],E])}}}B.length&&t(B,q,m);u||d!=k.length||k.pop()}}}var d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),k,I,G,g,P,E;return function(a,e,b){k=[];I=[];G=[];g=[];P=e||"_";E=0;t(a,P,b);return{path:k,ref:I,binding:G,markedElementList:g}}}(),V=function(){function a(b,h,t){var f=[],e=b[5];b=b[4];for(var m,q,C=0;C<e.length;C++)if("string"==typeof e[C])f.push('"'+
e[C].replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"');else if(m=b[e[C]],q=m.indexOf(":"),-1==q)f.push("l10n"==h?'"{'+m+'}"':"bool"==h?"(__"+m+'||"")':"__"+m);else{var H=null,u=m.substr(q+1).replace(c,function(a,e){H=e;return""});H?f.push(t[m.substr(q+1)]):f.push('l10n["'+u+'"]')}1==f.length&&f.push('""');return f.join("+")}var c=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,t={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],
readonly:["input"],selected:["option"],multiple:["select"]},H={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},d={show:'"none"',visible:'"hidden"'},p={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},n={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(v){function k(a){F[a]=!0;f.push(e+"="+a+"("+b.array(arguments,1)+");")}for(var l={},f,e,m=0,q=[],C=[],sa=[],u,ka,G=[],X={},w=0,D={},F={resolve:!0},r=0,g;g=v[r];r++){var P=
g[0],x=g[1],ba=g[2],K=g[3],ja=ba.split(":");if("l10n"==ja[0]&&ja[1]){var ja=ja[1],S=null,ra=ja.replace(c,function(a,e){S=e;return""});if(S){0==ja in X&&(u="$l10n_"+w++,X[ja]=u,G.push(u),q.push(u+'=tools.l10nToken("'+ra+'").computeToken()'),f=l[S],f||(f=l[S]=[],q.push("__"+S)),f.push(u+".set(__"+S+");"));ba=X[ja];e="_"+m++;u="__"+ba;f=l[ba];f||(f=l[ba]=[],q.push(u));P==y?(q.push(e+"="+x),k(n[P],x,e,"value",K)):(u='"'+g[M]+'"',q.push(e),k("bind_attr",x,u,e,a(g,!1,X)));continue}}sa.push(g)}for(r=0;g=
sa[r];r++)if(P=g[0],x=g[1],ba=g[2],K=g[3],-1==["get","set","templateId_"].indexOf(ba)){ja=ba.split(":");v="anim"==ja[0];ra="l10n"==ja[0];v&&(ba=ja[1]);f=B.call(l,ba)?l[ba]:null;e="_"+m++;u="__"+ba;if(ra&&ja[1])if(ja=ja[1],S=null,ra=ja,ka||(ka={}),l[ra]||(l[ra]=[],l[ra].l10n="$l10n_"+w++,q.push("__"+l[ra].l10n+'=l10n["'+ra+'"]'),ka[ra]=[]),f=l[ra],P==y){ka[ra].push(x+".nodeValue=value;");f.nodeBind?f.push(x+".nodeValue=value;"):(q.push(e+"="+x),k(n[P],x,e,"value",K),f.nodeBind=e);continue}else ka[ra].push("bind_attr("+
[x,'"'+g[M]+'"',"NaN",a(g,"l10n",X)]+");");f||(f=l[ba]=[],q.push(u));if(P!=J)if(f.nodeBind)switch(P){case A:k(n[P],x,x,"value!==null?String(value):null");break;case y:f.push(x+".nodeValue=value;")}else q.push(e+"="+x),k(n[P],x,e,"value",K),f.nodeBind=e;else switch(u=g[M],u){case "class":u="";K="value";P=g[7];switch(g[5]){case h:var K=[g[6]],ha=g[4],wa=Array.isArray(ha)?ha:K.map(function(a){return ha+a}),K='value?"'+wa[0]+'":""';P&&(u=wa[P-1]);break;case I:K=g[8];ha=g[4];wa=Array.isArray(ha)?ha:K.map(function(a){return ha+
a});K=K.map(function(a,e){return'value=="'+a+'"?"'+wa[e]+'"'}).join(":")+':""';P&&(u=wa[P-1]);break;default:ha=g[4],K='typeof value=="string"||typeof value=="number"?"'+ha+'"+value:(value?"'+ha+ba+'":"")'}q.push(e+'="'+u+'"');k("bind_attrClass",x,e,K,v);break;case "style":P=a(g,!1,X);v=g[8];D[v]||(D[v]=e,q.push(e+"="+(d[g[7]]||'""')));g[7]&&(P=P.replace(/\+""$/,"")+(p[g[7]]||""));e=D[v];k("bind_attrStyle",x,'"'+g[6]+'"',e,P);break;default:K=t[u],ja=g[6].toLowerCase(),P=K&&H[u]?a(g,"bool",X)+'?"'+
u+'":""':a(g,!1,X),v=g[7],D[v]||(q.push(e+"="+P),D[v]=e),e=D[v],"tabindex"==u?k("bind_attr",x,'"'+u+'"',e,P+"==-1?"+(-1==["input","button","textarea"].indexOf(ja)?'""':"-1")+":"+P):k("bind_attr",x,'"'+u+'"',e,P),!K||"*"!=K&&-1==K.indexOf(ja)||f.push("if("+x+"."+u+"!="+e+")"+x+"."+u+"="+(H[u]?"!!"+e:e)+";")}}C.push(';function set(bindName,value){if(typeof bindName!="string")');for(ba in l)l[ba].nodeBind&&C.push("if(bindName==="+l[ba].nodeBind+')bindName="'+ba+'";else ');C.push("return;");C.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");
for(ba in l)m=l[ba].l10n||ba,C.push('case"'+ba+'":if(__'+m+"!==value){__"+m+"=value;"+l[ba].join("")+"}break;");C.push("}}");var ba=[],ya;for(ya in F)ba.push(ya+"=tools."+ya);return{keys:b.object.keys(l).filter(function(a){return-1==a.indexOf("@")}),tools:ba,vars:q,set:C.join(""),l10n:ka,l10nCompute:G}}}();U.exports={getFunctions:function(a,c,h,H,d){if(c=t[h&&b.path.relative(h)])return c;d=P(a,"_",d);c=V(d.binding);h=d.markedElementList.join("=");H={keys:c.keys,l10nKeys:b.object.keys(c.l10n)};1==
a.length&&(d.path[0]="a=_");if(c.l10n){a=[];for(var p in c.l10n)a.push('case"'+p+'":'+c.l10n[p].join("")+"break;");H.createL10nSync=E(["_","l10n","bind_attr","TEXT_BUG"],"var "+d.path+";return function(path, value){switch(path){"+a.join("")+"}}")}H.createInstanceFactory=E("tid createDOM tools l10nMap l10nMarkup getBindings TEXT_BUG".split(" "),"var "+(c.tools.length?c.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+c.keys.map(function(a){return a+":null"})+"};return function createTmpl_(id,instance,initL10n){var _=createDOM(),"+
(c.l10n?"l10n=initL10n?{}:l10nMap,":"")+d.path.concat(c.vars)+(c.l10nCompute.length?";instance.compute=["+c.l10nCompute+"]":"")+";instance.tmpl={"+[d.ref,"templateId_:id","set:set"]+"}"+(h?";if(instance.context||instance.onAction)"+h+"=(id<<12)|tid":"")+c.set+(c.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+";if(instance.bindings)instance.handler=getBindings(instance,set);"+c.l10nCompute.map(function(a){return'set("'+
a+'",'+a+")"})+"}");return H}}},"6.js":function(d,U,b,k,g,z,O,T,ca){d="basisTemplateId_"+b.genUID();(k=k.document)?(b=k.createElement("div"),b.appendChild(k.createTextNode("a")),b.appendChild(k.createTextNode("a")),k=1==b.cloneNode(!0).childNodes.length):k=!0;U.exports={MARKER:d,TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:{4:"class",
5:"style"},ATTR_TYPE_BY_NAME:{"class":4,style:5},ATTR_VALUE_INDEX:{2:4,4:3,5:3,6:2},ELEMENT_NAME:3,ELEMENT_ATTRIBUTES_AND_CHILDREN:4,TEXT_VALUE:3,COMMENT_VALUE:3,CLASS_BINDING_ENUM:1,CLASS_BINDING_BOOL:2,CLASS_BINDING_INVERT:3,CLASS_BINDING_EQUAL:4,CLASS_BINDING_NOTEQUAL:5,CLONE_NORMALIZATION_TEXT_BUG:k}},"7.js":function(d,U,b,k,g,z,O,T,ca){function E(a){var c=n[a];if(!c){var c=A.getElementById(a),d="";c&&"SCRIPT"==c.tagName&&"text/basis-template"==c.type&&(d=c.textContent||c.text);c=n[a]=b.resource.virtual("tmpl",
d||"")}return c}function B(){this.destroyBuilder&&x.call(this);for(var a=this;a=a.attaches_;)a.handler.call(a.context)}function x(){var a=w(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),c=this.destroyBuilder,d={},p=this.builder(a.tokens,d);this.createInstance=p.createInstance;this.clearInstance=p.destroyInstance;this.destroyBuilder=p.destroy;l.add(this.templateId,this,d);var p=a.deps,h=this.deps_;this.deps_=p;if(h)for(var d=0,t;t=h[d];d++)t.bindingBridge.detach(t,x,this);if(p)for(d=
0;t=p[d];d++)t.bindingBridge.attach(t,x,this);a=a.resources;p=this.resources;if(this.resources=a)for(d=0;h=a[d];d++)h=b.resource(h).fetch(),"function"==typeof h.startUse&&h.startUse();if(p)for(d=0;h=p[d];d++)h=b.resource(h).fetch(),"function"==typeof h.stopUse&&h.stopUse();c&&c(!0)}d=this.path;var A=k.document;k=b.Class;var J=b.cleaner,F=b.path;g=b.require("./6.js");z=b.require("./8.js").VERSION;var w=b.require("./8.js").getDeclFromSource;O=b.require("./8.js").makeDeclaration;var l=b.require("./9.js");
T=b.require("./a.js");var y=T.get,D=[],n={},r=k(null,{className:d+".Template",__extend__:function(a){return a instanceof r?a:a instanceof p?new M(a):new r(a)},source:"",baseURI:"",url:"",attaches_:null,init:function(a){if(4096==D.length)throw"Too many templates (maximum 4096)";this.setSource(a||"");this.templateId=D.push(this)-1},bindingBridge:{attach:function(a,b,d){a.attaches_={handler:b,context:d,attaches_:a.attaches_}},detach:function(a,b,d){for(var p;p=a,a=a.attaches_;)if(a.handler===b&&a.context===
d){p.attaches_=a.attaches_;break}},get:function(a){return(a=a.source)&&a.bindingBridge?a.bindingBridge.get(a):a}},createInstance:function(a,b,d,p,h){x.call(this);return this.createInstance(a,b,d,p,h)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(a){var b=this.source;if(b!=a){if("string"==typeof a){var d=a.match(/^([a-z]+):/);if(d)switch(a=a.substr(d[0].length),d[1]){case "id":a=E(a);break;case "path":a=y(a)}}b&&b.bindingBridge&&(this.baseURI=
this.url="",b.bindingBridge.detach(b,B,this));a&&a.bindingBridge&&(a.url&&(this.url=a.url,this.baseURI=F.dirname(a.url)+"/"),a.bindingBridge.attach(a,B,this));this.source=a;B.call(this)}},destroy:function(){this.destroyBuilder&&(l.remove(this.templateId),this.destroyBuilder());this.source=this.resources=this.createInstance=this.attaches_=null}}),p=function(a){b.object.extend(this,a)},M=b.Class(null,{className:d+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:r,ruleEvents:null,rule:String,
init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,d;d=a[b];b++)this.ruleEvents[d]=!0}J.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}});J.add({destroy:function(){for(var a=0,b;b=D[a];a++)b.destroy();D=null}});U.exports=
{DECLARATION_VERSION:z,TYPE_ELEMENT:g.TYPE_ELEMENT,TYPE_ATTRIBUTE:g.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:g.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:g.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:g.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:g.TYPE_TEXT,TYPE_COMMENT:g.TYPE_COMMENT,TOKEN_TYPE:g.TOKEN_TYPE,TOKEN_BINDINGS:g.TOKEN_BINDINGS,TOKEN_REFS:g.TOKEN_REFS,ATTR_NAME:g.ATTR_NAME,ATTR_VALUE:g.ATTR_VALUE,ATTR_NAME_BY_TYPE:g.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:g.CLASS_BINDING_ENUM,CLASS_BINDING_BOOL:g.CLASS_BINDING_BOOL,
ELEMENT_NAME:g.ELEMENT_NAME,ELEMENT_ATTRS:g.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:g.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:g.TEXT_VALUE,COMMENT_VALUE:g.COMMENT_VALUE,TemplateSwitchConfig:p,TemplateSwitcher:M,Template:r,switcher:function(a,b){b||(b=a,a=null);"string"==typeof a&&(a=a.split(/\s+/));return new p({rule:b,events:a})},getDeclFromSource:w,makeDeclaration:O,resolveResource:function(a,c){return/^#\d+$/.test(a)?D[a.substr(1)]:/^id:/.test(a)?E(a.substr(3)):/^[a-z0-9\.]+$/i.test(a)&&
!/\.tmpl$/.test(a)?y(a):b.resource(b.resource.resolveURI(a,c,'<b:include src="{url}"/>'))},resolveTemplateById:l.resolveTemplateById,resolveObjectById:l.resolveObjectById,resolveTmplById:l.resolveTmplById,SourceWrapper:T.SourceWrapper,Theme:T.Theme,theme:T.theme,getThemeList:T.getThemeList,currentTheme:T.currentTheme,setTheme:T.setTheme,onThemeChange:T.onThemeChange,define:T.define,get:T.get,getPathList:T.getPathList}},"8.js":function(d,U,b,k,g,z,O,T,ca){function E(){return b.genUID()+"__"}function B(a){for(var b=
[],f=0;f<a.length;f++)b.push(Array.isArray(a[f])?B(a[f]):a[f]);return b}function x(a,c,f,e){var m=a,q;a.bindingBridge&&(c="baseURI"in a?a.baseURI:"url"in a?b.path.dirname(a.url):c,q="url"in a?a.url:q,m=a.bindingBridge.get(a));Array.isArray(m)?(f&&(m=B(m)),m={tokens:m}):"object"==typeof m&&Array.isArray(m.tokens)||(m=String(m));"string"==typeof m&&(m=da(m,c,e,q,a));return m}var A=Object.prototype.hasOwnProperty,J=b.array.search,F=b.array.add,w=b.array.remove,l=b.require("./w.js"),y=b.require("./x.js");
d=b.require("./6.js");var D=d.TYPE_ELEMENT,n=d.TYPE_ATTRIBUTE,r=d.TYPE_ATTRIBUTE_CLASS,p=d.TYPE_ATTRIBUTE_STYLE,M=d.TYPE_ATTRIBUTE_EVENT,a=d.TYPE_TEXT,c=d.TYPE_COMMENT,v=d.TOKEN_TYPE,I=d.TOKEN_BINDINGS,h=d.TOKEN_REFS,t=d.ATTR_NAME,H=d.ATTR_VALUE,G=d.ATTR_NAME_BY_TYPE,P=d.ATTR_TYPE_BY_NAME,V=d.ATTR_VALUE_INDEX,la=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,Q=d.TEXT_VALUE,ma=d.CLASS_BINDING_ENUM,N=d.CLASS_BINDING_BOOL,oa=/^[a-z_][a-z0-9_\-]*$/i,Y=/^event-(.+)$/,na=function(){},da=function(){function d(a){return(a.prefix?
a.prefix+":":"")+a.name}function k(a){return(a=a.refs)&&a.length?a:0}function f(a,b){a[h]||(a[h]=[]);F(a[h],b);"element"!=b&&(a[I]=1==a[h].length?b:0)}function e(a,b){var e=a[h].indexOf(b);if(-1!=e){var f=a[I]&&"number"==typeof a[I];a[h].splice(e,1);f&&e==a[I]-1&&(a[I]=b,f=!1);a[h].length?f&&(a[I]-=e<a[I]-1):a[h]=0}}function m(a){var b={};if(a.attrs)for(var e=0,f;f=a.attrs[e];e++)b[d(f)]=f.value;return b}function q(a){var b={};if(a.attrs)for(var e=0,f;f=a.attrs[e];e++)b[d(f)]=f;return b}function C(a,
b){for(var e=0;e<b.length;e++)F(a,b[e])}function sa(a,b,e,f){for(var S=0,c;c=b[S];S++)c[1]!==O&&(c[1]=e+c[1]),c[3]||(c[3]=f);a.unshift.apply(a,b)}function u(a,e,K,f,S){var c=e.children[0],u=K?b.resource.resolveURI(K,a.baseURI,'<b:style src="{url}"/>'):b.resource.virtual("css",c?c.value:"",a.sourceUrl).url;a.resources.push([u,f,e,null,K?!1:c||!0,S]);return u}function ka(h,l,K){function ja(a){var R={};a=(a||"").trim().split(/\s*,\s*/);for(var b=0;b<a.length;b++){var e=a[b].split(/\s*:\s*/);if(2!=e.length)return{};
R[e[0]]=e[1]}return R}function S(a,R){for(var b="number"==typeof a[0]?la:0,e,s;e=a[b];b++)if(s=e[v]==M?"event-"+e[1]:G[e[v]]||e[t],s==R)return e}function ra(a,R){var b=a[I];if(b)for(var e=0,s;s=b[e];e++)if(s[2]==R)return s}function ha(a,R,b,e,s){var L=S(a,"style");L||(L=[p,0,0],a.push(L));a=R.binding;var K=!1,K=R.name==e;e=L[3];if(a&&a[0].length==a[1].length){var f=L[I];a=a.concat(b,R.name);f?(w(f,ra(L,b)),f.push(a)):L[I]=[a]}else K=!(K^""===R.value);e&&(e=e.replace(new RegExp(b+"\\s*:\\s*[^;]+(;|$)"),
""));K&&(e=(e?e+" ":"")+s);L[3]=e}function wa(a,R){"show"!=R.name&&"hide"!=R.name||ha(a,R,"display","show","display: none;");"visible"!=R.name&&"hidden"!=R.name||ha(a,R,"visibility","visible","visibility: hidden;")}function y(a,R){for(var e=[],b,s,L,S=0,W;W=a.attrs[S];S++)if("b"==W.prefix)switch(W.name){case "ref":W=(W.value||"").trim().split(/\s+/);for(L=0;L<W.length;L++)f(R,W[L]);break;case "show":case "hide":b=W;break;case "visible":case "hidden":s=W}else(L=W.name.match(Y))?L=L[1]==W.value?[M,
L[1]]:[M,L[1],W.value]:(L=[W.type,W.binding,0],2==W.type&&L.push(d(W)),!W.value||K.optimizeSize&&W.binding&&2==W.type||L.push(W.value)),e.push(L);b&&wa(e,b);s&&wa(e,s);return e.length?e:0}function ua(a,R,e,s){var L=m(R),f=q(R);e&&(L.name=e);if(L.name&&oa.test(L.name)){var W=Q[L.ref||"element"];if(W&&W.token[v]==D){e=W.token;var c=L.name.match(Y),u="class"==L.name||"style"==L.name,ha=c?M:P[L.name]||n;R=V[ha]||H;(a=e&&S(e,L.name))&&"set"==s&&(w(e,a),a=null);a||"set"!=s&&"append"!=s||(s="set",c?a=[ha,
c[1]]:(a=[ha,0,0,ha==n?L.name:""],ha==n&&a.push("")),e||(e=[],W.token.push(e)),e.push(a));switch(s){case "set":if(a[v]==M){L.value==c[1]?a.length=2:a[R]=L.value;break}f=f.value||{};a[I]=f.binding||0;K.optimizeSize&&a[I]&&!u?a.length=R:a[R]=f.value||"";if(u&&!a[I]&&!a[R]){w(e,a);break}break;case "append":f=f.value||{};W=f.value||"";f=f.binding;if(!c)if(f)if(ha=a[I])switch(L.name){case "style":s=0;for(var ga;ga=f[s];s++)w(ha,ra(a,ga[2])),ha.push(ga);break;case "class":ha.push.apply(ha,f);break;default:for(f[0].forEach(function(a){F(this,
a)},ha[0]),s=0;s<f[1].length;s++)ga=f[1][s],"number"==typeof ga&&(ga=ha[0].indexOf(f[0][ga])),ha[1].push(ga)}else a[I]=f,u||a[I][1].unshift(a[R]);else!u&&a[I]&&a[I][1].push(L.value);if(W)if(c||"class"==L.name){L=(a[R]||"").trim();c=W.trim();L=L?L.split(/\s+/):[];c=c?c.split(/\s+/):[];for(s=0;s<c.length;s++)f=c[s],b.array.remove(L,f),L.push(f);a[R]=L.join(" ")}else a[R]=(a[R]||"")+(a[R]&&u?" ":"")+W;!u||a[I]||a[R]||w(e,a);break;case "remove-class":if(a){f=f.value||{};u=(a[R]||"").split(" ");L=(f.value||
"").split(" ");c=a[I];if(f.binding&&c){for(s=0;W=f.binding[s];s++)for(ha=c.length-1;ga=c[ha];ha--){var h=ga[3]||ga[1];ga[0]===W[0]&&h===W[1]&&c.splice(ha,1)}c.length||(a[I]=0)}for(s=0;s<L.length;s++)w(u,L[s]);a[R]=u.join(" ");c.length||u.length||w(e,a)}break;case "remove":a&&w(e,a)}}}}for(var Ba=[],ea=0,s,R;s=h[ea];ea++){var L=k(s),W=L&&1==L.length?L[0]:0;switch(s.type){case D:if("b"==s.prefix){var ga=m(s),fa=q(s);switch(s.name){case "style":var $=!0;if(ga.options){var za=ja(ga.options),g;for(g in za)$=
$&&za[g]==K.includeOptions[g]}$&&($=ga.namespace?"namespace":"ns",za=($=ga[$])?O:"",fa=u(l,s,ga.src,za,$),$&&(0==fa in O&&(O[fa]=E()),l.styleNSPrefix[$]={name:$,prefix:O[fa]}));break;case "isolate":l.isolate||(l.isolate=ga.prefix||K.isolate||E());break;case "l10n":ga.src&&(K.dictURI=b.resource.resolveURI(ga.src,l.baseURI,"<b:"+s.name+' src="{url}"/>'));break;case "define":if("name"in ga&&"type"in ga&&!A.call(K.defines,ga.name)){s=ga.from||ga.name;var L=ga.name,r=!1;switch(ga.type){case "bool":r=[s,
N,L,"true"==ga["default"]?1:0];break;case "enum":if(0=="values"in ga)break;W=(ga.values||"").trim();if(!W)break;W=W.split(/\s+/);r=W.indexOf(ga["default"]);r=[s,ma,L,r+1,W]}r&&(K.defines[L]=r)}break;case "text":s=s.children[0];h[ea--]=b.object.extend(s,{refs:(ga.ref||"").trim().split(/\s+/),value:"notrim"in ga?s.value:s.value.replace(/^\s*[\r\n]+|[\r\n]+\s*$/g,"")});break;case "include":if(L=ga.src){var ia=na(L,l.baseURI);if(!ia)continue;if(-1==da.indexOf(ia)){L=fa.isolate?fa.isolate.value||E():"";
W=ga.options?ja(ga.options):null;r=b.object.merge(K,{includeOptions:W});r=x(ia,"",!0,r);F(l.deps,ia);l.includes.push({token:s,resource:ia,nested:r.includes});r.deps&&C(l.deps,r.deps);r.warns&&l.warns.push.apply(l.warns,r.warns);r.resources&&0=="no-style"in ga&&sa(l.resources,r.resources,L,s);var ia=b.array(s.children),z={prefix:E()},Q=X(r.tokens,z),T;for(T in r.styleNSPrefix)l.styleNSPrefix[z.prefix+T]=b.object.merge(r.styleNSPrefix[T],{});L&&B(r.tokens,L);for(var U in fa)switch(U){case "class":ia.unshift({type:D,
prefix:"b",name:"append-class",attrs:[b.object.complete({name:"value"},fa["class"])]});break;case "id":ia.unshift({type:D,prefix:"b",name:"set-attr",attrs:[{type:n,name:"name",value:"id"},b.object.complete({name:"value"},fa.id)]});break;case "ref":Q.element&&ga.ref.trim().split(/\s+/).map(function(a){f(Q.element.token,a)});break;case "show":case "hide":case "visible":case "hidden":(s=($=Q.element)&&$.token)&&s[v]==D&&wa(s,fa[U])}for(ga=0;fa=ia[ga];ga++)if(fa.type==D&&"b"==fa.prefix)switch(fa.name){case "style":var Z=
m(fa),$=q(fa),$=!0;if(Z.options)for(g in za=ja(Z.options),za)$=$&&za[g]==W[g];$&&($=Z.namespace?"namespace":"ns",za=($=Z[$])?O:L,fa=u(l,fa,Z.src,za,$),$&&(0==fa in O&&(O[fa]=E()),l.styleNSPrefix[z.prefix+$]={name:$,prefix:O[fa]}));break;case "replace":case "remove":case "before":case "after":za="replace"==fa.name||"remove"==fa.name;Z=m(fa);if($=($="ref"in Z||!za?Z.ref:"element")&&Q[$])Z=$.owner,$=Z.indexOf($.token),-1!=$&&($=[$+("after"==fa.name),za],"remove"!=fa.name&&($=$.concat(ka(fa.children,
l,K)||[])),Z.splice.apply(Z,$));break;case "prepend":case "append":Z=m(fa);(s=($=($="ref"in Z?Z.ref:"element")&&Q[$])&&$.token)&&s[v]==D&&(Z=ka(fa.children,l,K)||[],"prepend"==fa.name?s.splice.apply(s,[la,0].concat(Z)):s.push.apply(s,Z));break;case "show":case "hide":case "visible":case "hidden":Z=m(fa);if((s=($=($="ref"in Z?Z.ref:"element")&&Q[$])&&$.token)&&s[v]==D){if(!q(fa).expr)break;wa(s,b.object.complete({name:fa.name},q(fa).expr))}break;case "attr":case "set-attr":ua(s,fa,!1,"set");break;
case "append-attr":ua(s,fa,!1,"append");break;case "remove-attr":ua(s,fa,!1,"remove");break;case "class":case "append-class":ua(s,fa,"class","append");break;case "set-class":ua(s,fa,"class","set");break;case "remove-class":$=q(fa);if(Z=$.value)Z.value=Z.value.split(/\s+/).map(function(a){return 0<a.indexOf(":")?z.prefix+a:a}).join(" "),Z.binding&&Z.binding.forEach(function(a){0<a[0].indexOf(":")&&(a[0]=z.prefix+a[0])}),Z.map_&&Z.map_.forEach(function(a){0<a.value.indexOf(":")&&(a.value=z.prefix+a.value)});
ua(s,fa,"class","remove-class");break;case "add-ref":Z=m(fa);(s=($=($="ref"in Z?Z.ref:"element")&&Q[$])&&$.token)&&Z.name&&f(s,Z.name);break;case "remove-ref":Z=m(fa),(s=($=($="ref"in Z?Z.ref:"element")&&Q[$])&&$.token)&&e(s,Z.name||Z.ref)}else r.tokens.push.apply(r.tokens,ka([fa],l,K)||[]);Q.element&&e(Q.element.token,"element");Ba.push.apply(Ba,r.tokens)}}}continue}R=[1,W,L,d(s)];R.push.apply(R,y(s,R,K.optimizeSize)||[]);R.push.apply(R,ka(s.children,l,K)||[]);break;case a:L&&2==L.length&&J(L,"element")&&
(W=L[+!L.lastSearchIndex]);R=[3,W,L];L&&s.value=="{"+L.join("|")+"}"||R.push(s.value);break;case c:if(K.optimizeSize&&!W&&!L)continue;R=[8,W,L];K.optimizeSize||L&&s.value=="{"+L.join("|")+"}"||R.push(s.value)}for(;0===R[R.length-1];)R.pop();Ba.push(R)}return Ba.length?Ba:0}function ea(a,e,b){if("string"==typeof a){var f=a.split(":"),S=f[1];if("l10n"==f[0]){if(2==f.length&&-1==S.indexOf("@")){if(!e)return!1;S=S+"@"+e;a="l10n:"+S}F(b,S)}}return a}function X(a,b,K,f){function S(a){if(0>=a.indexOf(":"))return a;
var e=a.split(":")[0];b.map[b.prefix+e]=e;return b.prefix+a}K||(K={});f=f||0;for(var c;c=a[f];f++){var u=c[v],m=c[h];if(b&&u==r){var q=c[I],C=V[u];c[C]&&(c[C]=c[C].split(/\s+/).map(S).join(" "));if(q)for(var C=0,d;d=q[C];C++)d[0]=S(d[0])}if(u!=M&&m)for(q=m.length-1;C=m[q];q--)-1!=C.indexOf(":")?e(c,C):(K[C]&&e(K[C].token,C),c[I]==C&&(c[I]=q+1),K[C]={owner:a,token:c});u===D&&X(c,b,K,la)}return K}function g(e,b,K,f){f=f||0;for(var S;S=e[f];f++){var c=S[v],u=S[I];switch(S[v]){case D:g(S,b,K,la);break;
case a:u&&(c=ea(u,K.dictURI,b.l10n),S[I]=c||0,!1===c&&(S[Q]="{"+u+"}"));break;case n:if(u)for(S=u[0],u=0;u<S.length;u++)c=ea(S[u],K.dictURI,b.l10n),S[u]=!1===c?"{"+S[u]+"}":c;break;case r:if(u){for(var m=0,q;q=u[m];m++)if(!(2<q.length)){var h=q[1].split(":"),C=h.pop(),h=h.pop()||"";A.call(K.defines,C)?(C=K.defines[C],q[1]=(h?h+":":"")+C[0],q.push.apply(q,C.slice(1))):q.push(0)}K.optimizeSize&&(u=V[c],S[u]||(S.length=u))}}}}function B(a,e,b,f,S){function c(a){if(-1==a.indexOf(":"))return e+a;if(!b)return a;
a=a.split(":");if(!a[0])return a[1];var R=A.call(b.styleNSPrefix,a[0])?b.styleNSPrefix[a[0]]:!1;return R?R.prefix+a[1]:!1}S=S||0;for(var u;u=a[S];S++){var m=u[v];m==D&&B(u,e,b,f,la);if(m==r){var q=u[I],m=V[m];u[m]&&(u[m]=u[m].split(/\s+/).map(function(a){return c(a,a,u.valueLocMap?u.valueLocMap[a]:null)}).filter(Boolean).join(" "));if(q){for(var m=0,h,C,d;h=q[m];m++)C=c(h[0],h[0]+"{"+h[1]+"}",h.loc),!1===C?(d=!0,q[m]=null):h[0]=C;d&&(q=q.filter(Boolean),u[I]=q.length?q:0)}}}}function z(a){return a[0]+
"|"+a[1]}var da=[],O={},T={};return function(e,c,K,u,S){var m=[];K=b.object.slice(K);K.includeOptions=K.includeOptions||{};K.defines={};K.dictURI=u?b.path.resolve(u):c||"";c={sourceUrl:u,baseURI:c||"",tokens:null,includes:[],deps:[],isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:m};K.dictURI&&(u=b.path.extname(K.dictURI))&&".l10n"!=u&&(K.dictURI=K.dictURI.substr(0,K.dictURI.length-u.length)+".l10n");e.templateTokens||(e=l(String(e),{loc:!!K.loc,range:!!K.range}));da.push(!0!==S&&S||{});c.tokens=
ka(e,c,K);da.pop();c.tokens||(c.tokens=[[a,0,0,""]]);f(c.tokens[0],"element");X(c.tokens);g(c.tokens,c,K);if(0==da.length){B(c.tokens,c.isolate||"",c,K);if(c.isolate)for(e=0;K=c.resources[e];e++)K[1]!==O&&(K[1]=c.isolate+K[1]);c.resources=c.resources.filter(function(a,e,K){return a[0]&&!b.array.search(K,z(a),z,e+1)}).map(function(a){var e=a[0],K=a[1];a=K===O;var f;if(a&&(K=O[e],e in T))return T[e].url;if(!K)return e;var S=b.resource.virtual("css","").ready(function(a){a.url=e+"?isolate-prefix="+K;
a.baseURI=b.path.dirname(e)+"/";a.map=f;c()}),c=b.resource(e).ready(function(a){a=y(a.cssText||"",K,!0);f=a.map;S.update(a.css)});a&&(T[e]=S);return S.url})}m.length||(c.warns=!1);return c}}();b.resource("./7.js").ready(function(a){na=a.resolveResource});U.exports={VERSION:3,makeDeclaration:da,getDeclFromSource:x}},"w.js":function(d,U,b,k,g,z,O,T,ca){function E(a){for(var b,c=[],h=[],d={},H=0;H<a.length;H++)H%2?(b=a[H],d[b]||(d[b]=c.length,c.push(b)),h.push(d[b])):a[H]&&h.push(la(a[H]));return[c,
h]}function B(a,b,c){function d(a){return a.attrs.reduce(function(a,e){a[(e.prefix?e.prefix+":":"")+e.name]=e.value;return a},{})}function p(){var a=1,b=0;f=Array(c.length);e=Array(c.length);for(var h=0;h<c.length+1;h++)f[h]=a,e[h]=b,"\n"===c[h]?(a++,b=0):b++}function l(a){return{line:f[a],column:e[a]}}function n(a){return{start:l(a.start_),end:l(a.end_)}}function k(a){b.loc&&(a.loc=n(a.range),a.valueRange&&(a.valueLoc=n(a.valueRange)));b.range?(a.range=[a.range.start_,a.range.end_],a.valueRange&&
(a.valueRange=[a.valueRange.start_,a.valueRange.end_])):(delete a.range,delete a.valueRange)}function y(a){for(var e,b,f=0;e=a[f++];b=e){if(e.type==x){for(var c=d(e),p=0,l;l=e.attrs[p++];){var n=l.name;if("b"==e.prefix&&"value"==l.name){var v=e.name.match(V);v&&(n="class"==v[1]?"class":c.name)}var v=l,I=k,r=v.value,g=0,D=void 0,M=void 0;if(r)switch(n){case "class":for(var D=v.valueRange.start_,z=/(\s*)(\S+)/g,B=[],K=[],M=void 0,g=[];M=z.exec(r);){var ja=M[2],S={value:ja,binding:!1,range:{start_:D+=
M[1].length,end_:D+=ja.length}};I(S);(M=ja.match(t))?(M=[M[1]||"",M[2]],M.info_=S,S.binding=!0,g.push(M)):B.push(ja);K.push(S)}r=B.join(" ");v.map_=K;break;case "style":I=[];g=[];if(D=r.match(H))for(z=0,M=void 0;M=D[z];z++)M=M.match(G),B=M[1],r=M[2].trim(),M=r.split(P),1<M.length?(r=E(M),r.push(B),g.push(r)):I.push(B+": "+la(r));(r=I.join("; "))&&(r+=";");break;default:D=r.split(h),1<D.length?g=E(D):r=la(r)}g&&!g.length&&(g=0);v.binding=g;v.value=r;v.type=w[n]||A;k(l)}y(e.children)}e.type==J&&(e.value=
la(e.value),e.refs||!b||b.type!=J||b.refs||(b.value+=e.value,b.end_=e.end_,a.splice(--f,1)));e.type==F&&(e.value=la(e.value));k(e)}}var f,e;b.loc&&p();y(a)}d=b.require("./6.js");var x=d.TYPE_ELEMENT,A=d.TYPE_ATTRIBUTE,J=d.TYPE_TEXT,F=d.TYPE_COMMENT,w=d.ATTR_TYPE_BY_NAME,l=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,y=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,D=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,
n=/(.|[\r\n])*?--\x3e/g,r=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,p=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,M=/"((?:(\\")|[^"])*?)"\s*/g,a=/\\"/g,c=/^/g,v=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,I={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},h=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,t=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,
H=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,G=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,P=/\{([a-z_][a-z0-9_]*)\}/i,V=/^(?:|append-|set-|remove-)(class|attr)$/,la=function(){function a(b,d){c[d]||("#"==d.charAt(0)?c[d]=String.fromCharCode("x"==d.charAt(1)||"X"==d.charAt(1)?parseInt(d.substr(2),16):d.substr(1)):h&&(h.innerHTML=b,c[d]=h.firstChild?h.firstChild.nodeValue:b));return c[d]||b}var c={},h=b.NODE_ENV?null:k.document.createElement("div"),d=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;
return function(b){return String(b).replace(d,a)}}();U.exports=function(b,h){var d=[],H=[],t={children:d},k=!1,g,G=l,w=0,f=0,e,m,q,C;h&&!1===h.trim||(w=f=b.match(/^\s*/)[0].length,b=b.trimRight());for(;w<b.length||G!=l;)if(q=G.lastIndex=w,(C=G.exec(b))&&C.index===w){w=G.lastIndex;switch(G){case l:e=q+C[1].length;f!=e&&(q=f==q?C[1]:b.substring(f,e),(q=q.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&t.children.push({type:J,len:q.length,value:q,range:{start_:f,end_:e}}));f=e;C[3]?t.children.push({type:J,refs:["l10n:"+
C[3]],value:"{l10n:"+C[3]+"}",range:{start_:e,end_:w}}):"{"==C[2]?(m=w-1,t.children.push(g={type:J,range:{start_:e,end_:e}}),G=p):C[4]?"/"==C[4]?(g=null,G=r):(t.children.push(g={type:F,range:{start_:e,end_:e}}),C[5]?(m=w-C[5].length,G=p):(m=w,G=n)):C[2]&&(k=!0,H.push(t),t.children.push(g={type:x,attrs:[],children:[],range:{start_:e,end_:e}}),t=g,G=y);break;case r:C[1]!==(t.prefix?t.prefix+":":"")+t.name?t.children.push({type:J,value:"</"+C[0],range:{start_:q-2,end_:q+C[0].length}}):t=H.pop();G=l;
break;case y:case D:if(":"==C[2]){g.prefix?G=c:g.prefix=C[1];break}C[1]&&(g.name=C[1],g.range.end_=q+C[1].length,g.type==A&&t.attrs.push(g));if("{"==C[2]){G=g.type==x?p:c;break}if(C[3]){k=!1;t.range.end_=w;if("/>"==C[3]||!t.prefix&&v.test(t.name))t=H.pop();else if("b"==t.prefix&&t.name in I){G=I[t.name];break}G=l;break}if("="==C[2]){G=M;break}g={type:A,range:{start_:w,end_:w}};G=D;break;case n:g.value=b.substring(m,w-3);g.range.end_=w;G=l;break;case p:g.refs?g.refs.push(C[1]):g.refs=[C[1]];"|"!=C[2]&&
(g.type==J?(w-=C[2].length-1,g.value=b.substring(m,w),g.range.end_=w,G=l):g.type==F?G=n:g.type==A&&"="==b[w]?(w++,G=M):(g={type:A,range:{start_:w,end_:w}},G=D));break;case M:g.value=C[1].replace(a,'"');g.range.end_=w;g.valueRange={start_:q+1,end_:q+1+C[1].length};g={type:A,range:{start_:w,end_:w}};G=D;break;case I.text:case I.style:t.children.push({type:J,value:C[1],range:{start_:q,end_:q+C[1].length}});t=H.pop();G=l;break;default:throw"Invalid or unsupported syntax";}G==l&&(f=w)}else if(G==p&&g&&
g.type==F)G=n;else{k&&(t=H.pop());g&&t.children.pop();if(g=t.children.pop())g.type!=J||g.refs?t.children.push(g):f-="len"in g?g.len:g.value.length;k=!1;G=l}f!=w&&t.children.push({type:J,value:b.substring(f,w),range:{start_:f,end_:w}});B(d,h||{},b);d.templateTokens=!0;return d}},"x.js":function(d,U,b,k,g,z,O,T,ca){var E=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,B=/^(media|supports|document)\b/i,x=/^(not|has|matches|nth-child|nth-last-child)\(/i;U.exports=function(d,
g,k){function w(a,b){var t=d.indexOf(a,b);h=-1!==t?t+a.length:c.length}function l(){var a=c[h];if('"'===a||"'"===a){for(h++;h<v&&c[h]!==a;h++)"\\"===c[h]&&h++;return!0}}function y(){var a=c[h];if("("===a)return w(")",h+1),!0;if("["===a){for(h++;h<v&&"]"!==c[h];h++)l();return!0}}function D(){if("/"===c[h]&&"*"===c[h+1])return w("*/",h+2),!0}function n(){if(":"===c[h]){var a=d.substr(h+1,15).match(x);if(a)for(h+=a[0].length+1;h<v&&")"!=c[h];h++)D()||y()||n()||r();return!0}}function r(){if("."===c[h])return d.substr(h+
1,8).match(E)&&(h++,M[h+a.length/2*g.length-1]=h,a.push(d.substring(I,h),g),I=h),!0}function p(a){for(t=!1;h<v;h++){var b;if(!(b=D()))if("@"!==c[h])b=void 0;else{if(b=d.substr(h+1,8).match(B))h+=b[0].length,t=!0;b=!0}if(!(b||n()||y()||r())){if(a&&"}"==c[h])break;if("{"===c[h])if(t)h++,p(!0);else for(h++;h<v&&"}"!==c[h];h++)l()||y()}}}var M={},a=[],c=d.split(""),v=c.length,I=0,h=0,t;g||(g=b.genUID()+"__");p(!1);a=a.join("")+d.substring(I);return k?{css:a,map:M,prefix:g}:a}},"9.js":function(d,U,b,k,
g,z,O,T,ca){function E(b){var d=B[b&4095];return d&&d.instances[b>>12]}var B={};U.exports={add:function(b,d,g){B[b]={template:d,instances:g}},remove:function(b){delete B[b]},resolveActionById:function(b){return(b=E(b))&&{context:b.context,action:b.action}},resolveTemplateById:function(b){return(b=B[b&4095])&&b.template},resolveObjectById:function(b){return(b=E(b))&&b.context},resolveTmplById:function(b){return(b=E(b))&&b.tmpl}}},"a.js":function(d,U,b,k,g,z,O,T,ca){function E(){var d=b.array(arguments).join("."),
l=w[d];l||(l=new r("",d),w[d]=l);return l}function B(b,d){for(var a=[],c={},l=[],n=0;n<d.length;n++)c[d[n]]||(c[d[n]]=!0,l.push(d[n]));a.source=l.join("/");c={base:!0};for(l=0;l<d.length;l++)n=d[l]||"base",n==b||c[n]||(c[n]=!0,a.push(n),d.splice.apply(d,[l+1,0].concat(F[n].fallback)));a.unshift(b);"base"!=b&&a.push("base");a.value=a.join("/");return a}function x(b,d){for(var a=F[b].sourcesList,c=0,l;l=a[c];c++)if(l.hasOwnProperty(d))return l[d];return""}function A(){for(var b in w)E(b).set()}function J(d){d||
(d="base");if(F[d])return F[d].theme;if(!/^([a-z0-9\_\-]+)$/.test(d))throw"Bad name for theme - "+d;var g={},a=[g],c=new n;F[d]={theme:c,sources:g,sourcesList:a,fallback:[]};var k=function(a,b){0==a in g&&(g[a]=b,-1!=F[y].fallback.indexOf(d)&&E(a).set());return E(a)};b.object.extend(c,{name:d,fallback:function(a){if(c!==D&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],t={},b=B(d,b);if(F[d].fallback.source!=b.source){F[d].fallback.source=b.source;for(var H in F){var l=F[H].fallback,
b=B(H,(l.source||"").split("/"));if(b.value!=l.value){t[H]=!0;F[H].fallback=b;l=F[H].sourcesList;l.length=b.length;for(var n=0;n<l.length;n++)l[n]=F[b[n]].sources}}}for(H in t)if(-1!=F[y].fallback.indexOf(H)){A();break}}b=F[d].fallback.slice(1);b.source=F[d].fallback.source;return b},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var d=a,l=b,n={},g;for(g in l)l.hasOwnProperty(g)&&(n[g]=k(d+"."+g,l[g]));return n}return 1==arguments.length?E(a):k(a,
b)}if("object"==typeof a){l=a;for(d in l)l.hasOwnProperty(d)&&k(d,l[d]);return c}},apply:function(){if(d!=y){y=d;A();for(var a=0,b;b=l[a];a++)b.fn.call(b.context,d)}return c},getSource:function(a,b){return b?x(d,a):g[a]},drop:function(a){g.hasOwnProperty(a)&&(delete g[a],-1!=F[y].fallback.indexOf(d)&&E(a).set())}});F[d].fallback=B(d,[]);a.push(F.base.sources);return c}d=this.path;var F={},w={},l=[],y="base",D,n=b.Class(null,{className:d+".Theme",get:E}),r=b.Class(b.Token,{className:d+".SourceWrapper",
path:"",url:"",baseURI:"",init:function(d,l){this.path=l;b.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var d=x(y,this.path);this.value!=d&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,r.prototype.apply,this),this.url=(this.value=d)&&d.url||"",this.baseURI=("object"==typeof d||"function"==typeof d)&&"baseURI"in d?d.baseURI:b.path.dirname(this.url)+
"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,r.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);b.Token.prototype.destroy.call(this)}});b.cleaner.add({destroy:function(){for(var b in w)w[b].destroy();w=F=null}});D=J();U.exports={SourceWrapper:r,Theme:n,theme:J,getThemeList:function(){return b.object.keys(F)},currentTheme:function(){return F[y].theme},
setTheme:function(b){return J(b).apply()},onThemeChange:function(b,d,a){l.push({fn:b,context:d});a&&b.call(d,y)},define:D.define,get:E,getPathList:function(){return b.object.keys(w)}}},"b.js":function(d,U,b,k,g,z,O,T,ca){function E(a){return function(b){if("click"!=b.type||3!=b.which){for(var e=aa[b.type]||"mouseenter"!=b.type&&"mouseleave"!=b.type,f=b.sender,c;f;){c=f.getAttribute&&f.getAttribute(a);if(!e||"string"==typeof c)break;f=f.parentNode}if("string"==typeof c){var d=f,e=d,m,q;aa[b.type]&&
(m=b.relatedTarget)&&(d===m||pa(d,m))&&(d=null);for(;d;){m=d[l];if("number"==typeof m&&(q=w(m)))break;d=d.parentNode}c=c.trim().split(/\s+/);d=q&&q.action;m=0;for(var h;h=c[m++];)switch(h){case "prevent-default":b.preventDefault();break;case "stop-propagation":b.stopPropagation();break;case "log-event":break;default:d&&(b.actionTarget=e,d.call(q.context,h,b))}}if(b.type in da)da[b.type](b,f)}}}function B(a,b){x(b);aa[a]=!0;da[b]=function(b){b=new F.Event(b);b.type=a;na[a](b)};da[a]=function(b,e){e&&
e.parentNode&&(b=new F.Event(b),b.type=a,b.sender=e.parentNode,na[a](b))}}function x(a){if(!J.call(na,a)&&(na[a]=E("event-"+a),!Y)){if(!oa){if("mouseenter"==a)return B(a,"mouseover");if("mouseleave"==a)return B(a,"mouseout")}for(var b=0,e=F.browserEvents(a),f;f=e[b];b++)F.addGlobalHandler(f,na[a])}}function A(a,b,f){e&&"class"==b&&(b="className");if(m&&"style"==b)return a.style.cssText=f;a.setAttribute(b,f)}d=k.Node;var J=Object.prototype.hasOwnProperty,F=b.require("./c.js"),w=b.require("./9.js").resolveActionById;
k=b.require("./6.js");var l=k.MARKER,y=k.CLONE_NORMALIZATION_TEXT_BUG,D=k.TYPE_ELEMENT,n=k.TYPE_ATTRIBUTE,r=k.TYPE_ATTRIBUTE_CLASS,p=k.TYPE_ATTRIBUTE_STYLE,M=k.TYPE_ATTRIBUTE_EVENT,a=k.TYPE_TEXT,c=k.TYPE_COMMENT,v=k.TOKEN_TYPE,I=k.TOKEN_BINDINGS,h=k.TOKEN_REFS,t=k.ATTR_NAME,H=k.ATTR_VALUE,G=k.ATTR_VALUE_INDEX,P=k.ELEMENT_NAME,V=k.ELEMENT_ATTRIBUTES_AND_CHILDREN,la=k.TEXT_VALUE,Q=k.COMMENT_VALUE,ma=k.CLASS_BINDING_ENUM,N=k.CLASS_BINDING_BOOL,oa="onmouseenter"in document.documentElement,Y=!1,na={},
da={},aa={},pa;pa=d&&!d.prototype.contains?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a.contains(b)};document.addEventListener||(Y=b.publicCallback(function(a,b){F.fireEvent(document,a);b.returnValue=!0;var e=na[a];e&&e(new F.Event(b))},!0));var f={svg:"http://www.w3.org/2000/svg"},e=function(){var a=document.createElement("div");a.setAttribute("class","a");return!a.className}(),m=function(){var a=document.createElement("div");a.setAttribute("style","position:absolute");
return"absolute"!=a.style.position}(),q=function(b,e){for(var u=e||document.createDocumentFragment(),d=e?V:0,m;m=b[d];d++){var l=m[v];switch(l){case D:var l=m[P],g=l.indexOf(":"),l=-1!=g?document.createElementNS(f[l.substr(0,g)],l):document.createElement(l);q(m,l);u.appendChild(l);break;case n:m[I]||A(u,m[t],m[H]||"");break;case r:l=(l=m[G[l]])?[l]:[];if(m[I])for(var g=0,k;k=m[I][g];g++){var w=k[4];if(w){var F=k[0];if(Array.isArray(F))l.push(F[w-1]);else switch(k[2]){case N:l.push(F+k[3]);break;case ma:l.push(F+
k[5][w-1])}}}l.length&&A(u,"class",l.join(" "));break;case p:(l=m[G[l]])&&A(u,"style",l);break;case M:l=u;g=m[1];m=m[2]||m[1];x(g);Y&&l.setAttribute("on"+g,Y+'("'+g+'",event)');l.setAttribute("event-"+g,m);break;case c:u.appendChild(document.createComment(m[Q]||(m[h]?"{"+m[h].join("|")+"}":"")));break;case a:y&&d&&b[d-1][v]==a&&u.appendChild(document.createComment("")),u.appendChild(document.createTextNode(m[la]||(m[h]?"{"+m[h].join("|")+"}":"")||(m[I]?"{"+m[I]+"}":"")))}}e||1!=b.length||(u=u.firstChild);
return u};U.exports=q},"c.js":function(d,U,b,k,g,z,O,T,ca){function E(a){return a instanceof aa?a.event_:a||k.event}function B(a){return"string"==typeof a?P.getElementById(a):a}function x(a){a=a.target||a.srcElement||P;return 3==a.nodeType?a.parentNode:a}function A(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function J(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function F(a,b){(b=B(b))?h(b,a,F):(J(a),A(a))}function w(a){return a.keyCode||a.which||0}function l(a){return a.charCode||
a.keyCode||0}function y(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function D(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==P.compatMode?P.documentElement.scrollLeft:P.body.scrollLeft):0}function n(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==P.compatMode?P.documentElement.scrollTop:P.body.scrollTop):0}function r(a){var b=0;"deltaY"in a?
b=-a.deltaY:"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b&&b/Math.abs(b)}function p(a){m&&a!==q&&(q=a,b.codeFrame.start())}function M(a){m&&a!==C&&(C=a,b.codeFrame.finish())}function a(a){var b=la(pa[a.type]),e=f[a.type],c=new aa(a);p(a);if(e)e.handler.call(e.thisObject,c);else if(b)for(e=b.length;0<e--;){var d=b[e];d.handler.call(d.thisObject,c)}M(a)}function c(a){var b=f[a];b&&(I(a,b.handler,b.thisObject),delete f[a])}function v(b,f,c){var d=pa[b];if(d){b=0;for(var m;m=
d[b];b++)if(m.handler===f&&m.thisObject===c)return}else e?h(P,b,V):P.addEventListener(b,a,!0),d=pa[b]=[];d.push({handler:f,thisObject:c})}function I(b,f,c){var d=pa[b];if(d)for(var m=0,q;q=d[m];m++)if(q.handler===f&&q.thisObject===c){d.splice(m,1);d.length||(delete pa[b],e?t(P,b,V):P.removeEventListener(b,a,!0));break}}function h(b,f,c,d){b=B(b);if(!b)throw"basis.event.addHandler: can't attach event listener to undefined";if("function"!=typeof c)throw"basis.event.addHandler: handler is not a function";
var m=b===k?Q:b[ma];m||(m=b[ma]={});var q=m[f],h={handler:c,thisObject:d};if(q){for(b=0;m=q[b];b++)if(m.handler===c&&m.thisObject===d)return;q.push(h)}else q=m[f]=[h],q.fireEvent=function(b){b=E(b);if(e&&b&&pa[f]&&"undefined"==typeof b.returnValue){a(b);if(!0===b.cancelBubble)return;"undefined"==typeof b.returnValue&&(b.returnValue=!0)}p(b);for(var c=0,d=new aa(b),m;m=q[c++];)m.handler.call(m.thisObject,d);M(b)},N?b.addEventListener(f,q.fireEvent,!1):b.attachEvent("on"+f,q.fireEvent)}function t(a,
b,e,f){a=B(a);var c=a===k?Q:a[ma];if(c&&(c=c[b]))for(var d=0,m;m=c[d];d++)if(m.handler===e&&m.thisObject===f){c.splice(d,1);c.length||H(a,b);break}}function H(a,b){a=B(a);var e=a===k?Q:a[ma];if(e)if("string"!=typeof b)for(b in e)H(a,b);else{var f=e[b];f&&(a.removeEventListener?a.removeEventListener(b,f.fireEvent,!1):a.detachEvent("on"+b,f.fireEvent),delete e[b])}}function G(a){return function(b,e){return a(E(b),e)}}d=this.path;var P=k.document,V=b.fn.$null,la=b.array.from,Q={},ma="basisEvents_"+b.genUID(),
N=!!P.addEventListener;g={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var oa={VALUE:1,BIT:1},Y={VALUE:2,BIT:4},na={VALUE:3,BIT:2},da={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},aa=b.Class(null,{className:d+".Event",KEY:g,init:function(a){a=E(a);for(var e in a)"function"!=
typeof a[e]&&0==e in this&&(this[e]=a[e]);e=x(a);b.object.extend(this,{event_:a,sender:e,target:e,key:w(a),charCode:l(a),mouseLeft:y(a,oa),mouseMiddle:y(a,Y),mouseRight:y(a,na),mouseX:D(a),mouseY:n(a),wheelDelta:r(a)})},stopBubble:function(){A(this.event_)},stopPropagation:function(){A(this.event_)},preventDefault:function(){J(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),pa={},f={},e=!N,m=!0,q,C,sa={};U.exports={W3CSUPPORT:N,browserEvents:function(a){return da[a]||[a]},
getEventInfo:function(a,b){b||(b="div");var e=b+"-"+a;if(sa[e])return sa[e];var f=!1,c=!1;if(!N){var d="on"+a,m=P.createElement("div"),q=m.appendChild(P.createElement(b));m[d]=function(){c=!0};try{q.fireEvent(d),f=!0}catch(h){}}return sa[e]={supported:f,bubble:c}},KEY:g,MOUSE_LEFT:oa,MOUSE_RIGHT:na,MOUSE_MIDDLE:Y,Event:aa,sender:G(x),cancelBubble:G(A),cancelDefault:G(J),kill:G(F),key:G(w),charCode:G(l),mouseButton:G(y),mouseX:G(D),mouseY:G(n),wheelDelta:G(r),addGlobalHandler:v,removeGlobalHandler:I,
captureEvent:function(a,e,d){f[a]&&c(a);e||(e=b.fn.$undef);v(a,e,d);f[a]={handler:e,thisObject:d}},releaseEvent:c,addHandler:h,addHandlers:function(a,b,e){a=B(a);for(var f in b)h(a,f,b[f],e)},removeHandler:t,clearHandlers:H,fireEvent:function(a,b,e){a=B(a);if((a=a===k?Q:a[ma])&&a[b])try{m=!1,a[b].fireEvent(e)}finally{m=!0}},onUnload:function(a,e){b.teardown(a,e)},wrap:E}},"d.js":function(d,U,b,k,g,z,O,T,ca){function E(){}function B(){}function x(){}function A(a){var b=a.constructor.prototype;a.setDelegate=
b.setDelegate;a.destroy=b.destroy}function J(a){return a.sortingValue}function F(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function w(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function l(a){return a.childNodes.sort(a.sortingDesc?w:F)}function y(a,b,e,f){if(!a.length)return 0;f=!!f;var c=0,d=a.length-1,m=typeof b,q,h,l;do{l=c+d>>1;q=e(a[l]);h=typeof q;if(f){if(m>h||b>q){d=l-1;continue}if(m<h||b<q){c=l+1;continue}}else{if(m<h||b<q){d=l-1;continue}if(m>
h||b>q){c=l+1;continue}}return b==q?l:0}while(c<=d);return l+((h<m||q<b)^f)}function D(a,b,e,f,c){if(b!==e){var d=a,m=[];f&&(a.contextSelection=e,a.selected&&!a.selectedRA_&&m.push(a));for(;d;){if((f=!d.selection||c&&d===a?d.firstChild:null)&&f.contextSelection!==b)throw"Try change wrong context selection";for(;!f;){if(d===a){if(m.length&&(b&&b.remove(m),e))for(e.add(m),a=0;a<m.length;a++)b=m[a],b.selected&&!e.has(b)&&(b.selected=!1,b.emit_unselect());return}f=d.nextSibling;f||(d=d.parentNode)}d=
f;d.selected&&!d.selectedRA_&&m.push(d);d.contextSelection=e}}}function n(a,b){a.contextDisabled!=b&&(a.contextDisabled=b,a.disabled||(b?a.emit_disable():a.emit_enable()))}function r(a){return a.isSubclassOf(X)?a:X}function p(a){if(!a)return null;if(a.isSatelliteConfig||a instanceof X)return a;a.constructor!==Object&&(a={instance:a});var e=!1,f="update",d={isSatelliteConfig:!0},m;for(m in a){var q=a[m];switch(m){case "instance":q instanceof X?d.instance=q:c.isClass(q)?d.instanceClass=r(q):("string"==
typeof q&&(q=b.getter(q)),d.getInstance=q);break;case "instanceOf":case "satelliteClass":if("instanceOf"==m&&"satelliteClass"in a)break;if("instance"in a)break;c.isClass(q)&&(d.instanceClass=r(q));break;case "existsIf":case "delegate":case "dataSource":q&&("string"==typeof q&&(q=H(q)),"function"!=typeof q?q=b.fn.$const(q):e=!0);d[m]=q;break;case "config":"string"==typeof q&&(q=H(q));d.config=q;break;case "events":f=a.events}}d.instance||d.getInstance||d.instanceClass||(d.instanceClass=r(X));if(e&&
(Array.isArray(f)&&(f=f.join(" ")),"string"==typeof f))for(a={},f=f.split(/\s+/),e=0;m=f[e];e++)a[m]=ka,d.handler=a;return d}function M(a,b){var e=b.length-1;a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[e]||null;for(var f=e;e=b[f];f--)e.nextSibling=b[f+1]||null,e.previousSibling=b[f-1]||null,a.insertBefore(e,e.nextSibling)}function a(a,b){var e;if("function"==typeof a.childFactory&&(e=a.childFactory(b),e instanceof a.childClass))return e;if(!e)throw pa;throw aa;}d=this.path;var c=b.Class,
v=b.object.complete,I=b.array,h=b.array.remove,t=b.fn.$undef,H=b.getter,G=b.fn.nullGetter;g=b.require("./2.js");k=g.create;var P=g.events;g=b.require("./e.js");var V=g.resolveValue,la=g.resolveDataset;z=g.createResolveFunction;var Q=g.SUBSCRIPTION,ma=g.STATE,N=g.Object,oa=g.ReadOnlyDataset,Y=g.Dataset,na=d+": Node can't be inserted at specified point in hierarchy",da=d+": Node was not found",aa=d+": Child node has wrong class",pa=d+": Child node is null",f=d+": Operation is not allowed because node is under dataSource control",
e=d+": Operation is not allowed because node is under dataSource adapter control",m=d+": Node can't has owner and parentNode",q=d+": Node can't has children and dataSource as childClass isn't specified",C={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},sa={};Q.addProperty("owner");Q.addProperty("dataSource");Q.add("CHILD",{childNodesModified:function(a,b){var e;if(e=b.inserted)for(var f=0;e[f];f++)Q.link("child",a,e[f]);if(e=b.deleted)for(f=0;e[f];f++)Q.unlink("child",a,e[f])}},function(a,b){for(var e=
b.childNodes||[],f=0,c;c=e[f];f++)a("child",b,c)});Q.add("SATELLITE",{satelliteChanged:function(a,b,e){e&&Q.unlink("satellite",a,e);a.satellite[b]&&Q.link("satellite",a,a.satellite[b])}},function(a,b){var e=b.satellite;if(e!==u)for(var f in e)"__auto__"!==f&&a("satellite",b,e[f])});var u=c.customExtendProperty({},function(a,b){for(var e in b)a[e]=p(b[e])}),ka=function(){var a=this.name,e=this.config,f=this.owner,d=0=="existsIf"in e||e.existsIf(f);if(V(this,ka,d,"existsRA_")){d=this.instance||e.instance;
if(!d||"value"==this.factoryType){if(!this.factoryType){var d=e.getInstance,m=e.instanceClass;"function"==typeof d&&(d=d.call(f,f),c.isClass(d)&&(m=r(d)));this.factoryType=m?"class":"value";this.factory=m||d}if("class"==this.factoryType){d={destroy:x};e.delegate&&(d.autoDelegate=!1,d.delegate=e.delegate(f));e.dataSource&&(d.dataSource=e.dataSource(f));e.config&&b.object.complete(d,"function"==typeof e.config?e.config(f):e.config);this.instance=new this.factory(d);f.setSatellite(a,this.instance,!0);
return}d=ia(this,ka,this.factory,"instanceRA_")}this.instance!==d&&(this.instance=d||null,f.setSatellite(a,this.instance,!0));d&&d.owner===f&&(e.delegate&&d.setDelegate(e.delegate(f)),e.dataSource&&d.setDataSource(e.dataSource(f)))}else if(d=this.instance)e.instance&&(e.delegate&&d.setDelegate(),e.dataSource&&d.setDataSource()),this.instance=null,f.setSatellite(a,null,!0)},ea={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},X=c(N,{className:d+".AbstractNode",subscribeTo:N.prototype.subscribeTo+
Q.DATASOURCE+Q.SATELLITE,isSyncRequired:function(){return this.state==ma.UNDEFINED||this.state==ma.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){N.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:C.NONE,name:null,childNodes:null,emit_childNodesModified:k("childNodesModified","delta")&&function(a){P.childNodesModified.call(this,
a);var b=this.listen.childNode,e;if(b){if(e=a.inserted)for(var f=0,c;c=e[f];f++)c.addHandler(b,this);if(e=a.deleted)for(f=0;c=e[f];f++)c.removeHandler(b,this)}},childNodesState:ma.UNDEFINED,emit_childNodesStateChanged:k("childNodesStateChanged","oldState"),childClass:X,dataSource:null,emit_dataSourceChanged:k("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:k("parentChanged","oldParentNode"),nextSibling:null,
previousSibling:null,firstChild:null,lastChild:null,sorting:G,sortingDesc:!1,emit_sortingChanged:k("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:k("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:u,ownerSatelliteName:null,emit_satelliteChanged:k("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:k("ownerChanged","oldOwner"),init:function(){N.prototype.init.call(this);var a=this.childNodes,b=this.dataSource;
a&&(this.childNodes=null);b&&(this.dataSource=null);var e=this.grouping;e&&(this.grouping=null,this.setGrouping(e));this.childClass&&(this.childNodes=[],b?this.setDataSource(b):a&&this.setChildNodes(a));a=this.satellite;if(a!==u){this.satellite=u;for(var f in a)a[f]&&"object"==typeof a[f]&&this.setSatellite(f,a[f])}if(f=this.owner)this.owner=null,this.setOwner(f)},setChildNodesState:function(a,b){var e=String(a),f=this.childNodesState;if(!ma.values[e])throw Error("Wrong state value");if(f!=e||f.data!=
b)this.childNodesState=Object(e),this.childNodesState.data=b,this.emit_childNodesStateChanged(f)},appendChild:function(a){},insertBefore:function(a,b){},removeChild:function(a){},replaceChild:function(a,b){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,b){},setSorting:function(a,b){},setDataSource:function(a){},setOwner:function(a){a&&0!=a instanceof X||(a=null);if(a&&this.parentNode)throw m;var b=this.owner;if(b!==a){var e=this.listen.owner;if(b){if(this.ownerSatelliteName&&
b.satellite.__auto__&&this.ownerSatelliteName in b.satellite.__auto__)return;e&&b.removeHandler(e,this);this.ownerSatelliteName&&(this.owner=null,b.setSatellite(this.ownerSatelliteName,null))}a&&e&&a.addHandler(e,this);this.owner=a;this.emit_ownerChanged(b);this.autoDelegate!=C.OWNER&&this.autoDelegate!==C.ANY||this.setDelegate(a)}},setSatellite:function(a,b,e){var f=this.satellite[a]||null,c=this.satellite.__auto__,d=c&&c[a],m=e&&d;if(m)(b=d.instance)&&d.config.instance&&delete d.config.instance.setOwner;
else{if((b=p(b))&&b.owner===this&&c&&b.ownerSatelliteName&&c[b.ownerSatelliteName])return;d&&(delete c[a],d.config.instance&&d.config.instance.removeHandler(ea,d),d.config.handler&&this.removeHandler(d.config.handler,d))}if(f!==b){e=this.listen.satellite;var q=this.listen["satellite:"+a],h;f&&(delete this.satellite[a],f.ownerSatelliteName=null,d&&f.destroy===x?h=f:(e&&f.removeHandler(e,this),q&&f.removeHandler(q,this),f.setOwner(null)),m&&!b&&d.config.instance&&(d.config.instance.setOwner=B));if(b){if(0==
b instanceof X){d={owner:this,name:a,config:b,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};b.handler&&this.addHandler(b.handler,d);b.instance&&(b.instance.addHandler(ea,d),b.instance.setOwner=B);c||(this.satellite===u&&(this.satellite={}),c=this.satellite.__auto__={});c[a]=d;ka.call(d,this);!d.instance&&f&&this.emit_satelliteChanged(a,f);h&&(delete h.destroy,h.destroy());return}if(b.owner!==this){d&&d.config.delegate?(c=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),
b.autoDelegate=c):b.setOwner(this);if(b.owner!==this){this.setSatellite(a,null);return}e&&b.addHandler(e,this);q&&b.addHandler(q,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==u&&(this.satellite={});this.satellite[a]=b;b.ownerSatelliteName=a}this.emit_satelliteChanged(a,f);h&&(delete h.destroy,h.destroy())}},getChildNodesDataset:function(){return sa[this.basisObjectId]||new qa({sourceNode:this})},destroy:function(){N.prototype.destroy.call(this);
this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==u){var b=a.__auto__;delete a.__auto__;for(var e in b)b[e].config.instance&&!b[e].instance&&b[e].config.instance.destroy(),b[e].existsRA_&&V(b[e],null,null,"existsRA_"),b[e].instanceRA_&&V(b[e],null,null,"instanceRA_");for(e in a)b=a[e],b.owner=null,
b.ownerSatelliteName=null,b.destroy===x&&delete b.destroy,b.destroy();this.satellite=null}this.childNodes=null}}),ia=z(X),ta=c(X,{className:d+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];X.prototype.init.call(this)},insert:function(a,b){var e=this.nodes,f=b?e.indexOf(b):-1;-1==f?(e.push(a),this.last=a):e.splice(f,0,a);this.first=e[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var b=this.nodes;h(b,a)&&(this.first=
b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,b=a.length;0<b--;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){X.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),Z={childClass:X,childFactory:null,listen:{dataSource:{itemsChanged:function(e,
f){var c={},d=[];if(f.deleted)if(c.deleted=d,this.childNodes.length==f.deleted.length){for(var d=I(this.childNodes),m=0,q;q=d[m];m++)A(q);this.dataSourceMap_=null;this.clear(!0);this.dataSourceMap_={}}else for(m=0;q=f.deleted[m];m++){q=q.basisObjectId;var h=this.dataSourceMap_[q];A(h);delete this.dataSourceMap_[q];this.removeChild(h);d.push(h)}if(f.inserted)for(c.inserted=[],m=0;q=f.inserted[m];m++){var l=h=a(this,{delegate:q});l.setDelegate=b.fn.$undef;l.destroy=E;this.dataSourceMap_[q.basisObjectId]=
h;c.inserted.push(h);this.firstChild&&this.insertBefore(h)}this.firstChild?this.emit_childNodesModified(c):this.setChildNodes(c.inserted);if(this.destroyDataSourceMember&&d.length)for(m=0;q=d[m];m++)q.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}}},getChild:function(a,e){return b.array.search(this.childNodes,a,e)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},
insertBefore:function(b,c){if(!this.childClass)throw q;if(b.firstChild)for(var d=this;d=d.parentNode;)if(d===b)throw na;var l=b&&b instanceof this.childClass;if(this.dataSource){if(!l||!b.delegate||this.dataSourceMap_[b.delegate.basisObjectId]!==b)throw f;}else if(this.dataSourceRA_)throw e;l||(b=a(this,b instanceof N?{delegate:b}:b));if(b.owner)throw m;var l=b.parentNode===this,t=this.childNodes,H=this.grouping,g=b.groupNode,u=null,k=this.sorting,p,s=!1,R,d=-1,L,W;l&&(L=b.nextSibling,W=b.previousSibling);
if(k!==G){c=null;p=this.sortingDesc;R=k(b);if(null==R)R=-Infinity;else if("number"!=typeof R||R!==R)R=String(R);if(l)if(R===b.sortingValue)s=!0;else if(s=p?(!L||typeof L.sortingValue<=typeof R&&L.sortingValue<=R)&&(!W||typeof W.sortingValue>=typeof R&&W.sortingValue>=R):(!L||typeof L.sortingValue>=typeof R&&L.sortingValue>=R)&&(!W||typeof W.sortingValue<=typeof R&&W.sortingValue<=R))b.sortingValue=R}if(H){u=H.getGroupNode(b,!0);H=u.nodes;if(g===u&&(s||k===G&&L===c))return b;k!==G?g===u&&s?d=L&&L.groupNode===
u?H.indexOf(L):H.length:(d=y(H,R,J,p),b.sortingValue=R):d=c&&c.groupNode===u?H.indexOf(c):H.length;if(d<H.length)c=H[d];else if(u.last)c=u.last.nextSibling;else for(d=u,c=null;(d=d.nextSibling)&&!(c=d.first););if(b===c||l&&L===c)return g!==u&&(g&&g.remove(b),u.insert(b,c)),b;d=-1}else if(k!==G){if(s)return b;d=y(t,R,J,p,this.lll);c=t[d];b.sortingValue=R;if(b===c||l&&L===c)return b}else{if(c&&c.parentNode!==this)throw da;if(l){if(L===c)return b;if(b===c)throw na;}}l?(L?(L.previousSibling=W,b.nextSibling=
null):this.lastChild=W,W?(W.nextSibling=L,b.previousSibling=null):this.firstChild=L,-1==d?h(t,b):(p=t.indexOf(b),t.splice(p,1),d-=p<d),g&&(g.remove(b),g=null)):b.parentNode&&b.parentNode.removeChild(b);g!=u&&u.insert(b,c);if(c){-1==d&&(d=t.indexOf(c));if(-1==d)throw da;b.nextSibling=c;t.splice(d,0,b)}else d=t.length,t.push(b),c={previousSibling:this.lastChild},this.lastChild=b;b.parentNode=this;b.previousSibling=c.previousSibling;0==d?this.firstChild=b:c.previousSibling.nextSibling=b;c.previousSibling=
b;l||(D(b,b.contextSelection,this.selection||this.contextSelection,!0),n(b,this.disabled||this.contextDisabled),(b.underMatch_||this.matchFunction)&&b.match&&b.match(this.matchFunction),b.autoDelegate!=C.PARENT&&b.autoDelegate!==C.ANY||b.setDelegate(this),b.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[b]}),b.listen.parentNode&&this.addHandler(b.listen.parentNode,b));return b},removeChild:function(a){if(!a||a.parentNode!==this)throw da;if(0==a instanceof this.childClass)throw aa;
if(this.dataSource){if(this.dataSource.has(a.delegate))throw f;}else if(this.dataSourceRA_)throw e;var b=this.childNodes.indexOf(a);if(-1==b)throw da;this.childNodes.splice(b,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);D(a,a.contextSelection,
null,!0);a.groupNode&&a.groupNode.remove(a);a.emit_parentChanged(this);this.dataSource||this.emit_childNodesModified({deleted:[a]});a.autoDelegate!=C.PARENT&&a.autoDelegate!==C.ANY||a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw f;if(this.dataSourceRA_)throw e;if(null==b||b.parentNode!==this)throw da;this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource&&this.dataSourceMap_&&this.dataSource.itemCount)throw f;if(this.firstChild){a&&D(this,
this.selection||this.contextSelection,null,!1,!0);var b=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:b});for(var e=b.length;0<e--;){var c=b[e];c.listen.parentNode&&c.parentNode.removeHandler(c.listen.parentNode,c);c.parentNode=null;c.groupNode=null;a?(c.nextSibling=null,c.previousSibling=null,c.emit_parentChanged(this),c.autoDelegate!=C.PARENT&&c.autoDelegate!==C.ANY||c.setDelegate()):c.destroy()}if(this.grouping)for(b=this.grouping.childNodes,
e=b.length-1;a=b[e];e--)a.clear()}},setChildNodes:function(a,b){this.dataSource||this.dataSourceRA_||this.clear(b);if(a&&(0=="length"in a&&(a=[a]),a.length)){var e=this.emit_childNodesModified;this.emit_childNodesModified=t;for(var f=0,c=a.length;f<c;f++)this.insertBefore(a[f]);this.emit_childNodesModified=e;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(a){if(!this.childClass)throw q;a=la(this,this.setDataSource,a,"dataSourceRA_");if(this.dataSource!==a){var b=
this.dataSource,e=this.listen.dataSource;b&&(this.dataSource=this.dataSourceMap_=null,e&&b.removeHandler(e,this));if(this.firstChild){if(b)for(var f=0,c;c=this.childNodes[f];f++)A(c);this.clear(!this.destroyDataSourceMember)}(this.dataSource=a)?(this.dataSourceMap_={},this.setChildNodesState(a.state,a.state.data),e&&(a.addHandler(e,this),a.itemCount&&e.itemsChanged&&e.itemsChanged.call(this,a,{inserted:a.getItems()}))):this.setChildNodesState(ma.UNDEFINED);this.emit_dataSourceChanged(b)}},setGrouping:function(a,
b){if("function"==typeof a||"string"==typeof a)a={rule:a};0==a instanceof va&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var e=this.grouping,f;if(e){this.grouping=null;if(!a&&this.firstChild){f=this.sorting!==G?l(this):this.childNodes;e.nullGroup.clear();for(var c=e.childNodes.slice(0),d=0;d<c.length;d++)c[d].clear();M(this,f)}e.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){f=this.sorting!==G?l(this):this.childNodes;for(d=0;c=f[d];d++)c.groupNode=
this.grouping.getGroupNode(c,!0);d=f;for(f=0;c=d[f];f++)c.groupNode.nodes.push(c);d=[this.grouping.nullGroup].concat(this.grouping.childNodes);c=[];f=0;for(var m;m=d[f];f++){var q=m.nodes;m.first=q[0]||null;m.last=q[q.length-1]||null;c.push.apply(c,q);m.emit_childNodesModified({inserted:q})}M(this,c)}this.emit_groupingChanged(e);e&&!b&&e.destroy()}},setSorting:function(a,b){a=H(a);b=!!b;if(this.sorting!==a||this.sortingDesc!=!!b){var e=this.sorting,f=this.sortingDesc;this.sorting=a;this.sortingDesc=
!!b;if(a!==G&&this.firstChild){var c=[],d;for(d=this.firstChild;d;d=d.nextSibling){var m=a(d);if(null==m)m=-Infinity;else if("number"!=typeof m||m!==m)m=String(m);d.sortingValue=m}if(this.grouping)for(var m=[this.grouping.nullGroup].concat(this.grouping.childNodes),q=0,h;h=m[q];q++)d=h.nodes=l({childNodes:h.nodes,sortingDesc:this.sortingDesc}),h.first=d[0]||null,h.last=d[d.length-1]||null,c.push.apply(c,d);else c=l(this);M(this,c)}this.emit_sortingChanged(e,f)}},setMatchFunction:function(a){if(this.matchFunction!=
a){var b=this.matchFunction;this.matchFunction=a;for(var e=this.lastChild;e;e=e.previousSibling)e.match(a);this.emit_matchFunctionChanged(b)}}},xa=c(X,Z,{className:d+".Node",emit_enable:k("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)n(a,!1);P.enable.call(this)},emit_disable:k("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)n(a,!0);P.disable.call(this)},emit_satelliteChanged:function(a,b){X.prototype.emit_satelliteChanged.call(this,a,b);this.satellite[a]instanceof
xa&&n(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:k("select"),emit_unselect:k("unselect"),emit_match:k("match"),emit_unmatch:k("unmatch"),emit_matchFunctionChanged:k("matchFunctionChanged","oldMatchFunction"),selected:!1,selectedRA_:null,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,disabledRA_:null,contextDisabled:!1,listen:{owner:{enable:function(){n(this,!1)},disable:function(){n(this,!0)}},selection:{destroy:function(){this.setSelection()}}},
init:function(){var a=this.disabled;this.disabled=!1;var b=this.selection;b&&(this.selection=null,this.setSelection(b));X.prototype.init.call(this);if(a&&(a=!!V(this,this.setDisabled,a,"disabledRA_")))for(this.disabled=a,a=this.firstChild;a;a=a.nextSibling)n(a,!0);this.selected&&(this.selected=!!V(this,this.setSelected,this.selected,"selectedRA_"))},setSelection:function(a){!1===a instanceof ba&&(a=a?new ba(a):null);if(this.selection!==a)return D(this,this.selection||this.contextSelection,a||this.contextSelection,
!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},setSelected:function(a,b){var e=this.contextSelection;a=!!V(this,this.setSelected,a,"selectedRA_");this.selected&&e&&(this.selectedRA_?e.has(this)&&(this.selected=!1,e.remove(this),this.selected=!0):e.has(this)||e.add(this));if(a!==this.selected)return this.selectedRA_?(this.selected=a)?this.emit_select():this.emit_unselect():
a?e?b?e.add(this):e.set(this):(this.selected=!0,this.emit_select()):e?e.remove(this):(this.selected=!1,this.emit_unselect()),!0;!this.selectedRA_&&a&&e&&(b?e.remove(this):e.set(this));return!1},select:function(a){return this.selectedRA_?!1:this.setSelected(!0,a)},unselect:function(){return this.selectedRA_?!1:this.setSelected(!1)},setDisabled:function(a){a=!!V(this,this.setDisabled,a,"disabledRA_");return this.disabled!==a?(this.disabled=a,this.contextDisabled||(a?this.emit_disable():this.emit_enable()),
!0):!1},disable:function(){return this.disabledRA_?!1:this.setDisabled(!0)},enable:function(){return this.disabledRA_?!1:this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&V(this,null,null,"disabledRA_");this.selectedRA_&&
V(this,null,null,"selectedRA_");this.contextSelection=null;this.selection&&this.setSelection();X.prototype.destroy.call(this)}}),va=c(X,Z,{className:d+".GroupingNode",emit_childNodesModified:function(a){P.childNodesModified.call(this,a);var b;if(b=a.inserted){a=0;for(var e;e=b[a++];)e.groupId_=e.delegate?e.delegate.basisObjectId:e.data.id,this.map_[e.groupId_]=e;if(this.dataSource&&this.nullGroup.first)for(b=this.owner,e=I(this.nullGroup.nodes),a=e.length;0<a--;)b.insertBefore(e[a],e[a].nextSibling)}},
emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);P.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:G,childClass:ta,childFactory:function(a){return new this.childClass(v({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new ta;
X.prototype.init.call(this)},getGroupNode:function(a,b){var e=this.rule(a),f=e instanceof N,c=this.map_[f?e.basisObjectId:e];this.dataSource&&(b=!1);!c&&b&&(c=this.appendChild(f?e:{data:{id:e,title:e}}));return c||this.nullGroup},setDataSource:function(a){var b=this.dataSource;Z.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==b)for(var b=I(a.childNodes),e=b.length-1;0<=e;e--)a.insertBefore(b[e],b[e+1])},insertBefore:function(a,b){a=Z.insertBefore.call(this,a,b);var e=a.first;if(e){for(var f=
e.parentNode,c=a.last,d,m,q,h=null,l=a;(l=l.nextSibling)&&!(h=l.first););q=h?h.previousSibling:f.lastChild;d=e.previousSibling;m=c.nextSibling;if(m!==h){var s=f.childNodes,l=a.nodes,R=l.length;d&&(d.nextSibling=m);m&&(m.previousSibling=d);q&&(q.nextSibling=e);h&&(h.previousSibling=c);e.previousSibling=q;c.nextSibling=h;var c=s.indexOf(e),L=h?s.indexOf(h):s.length;L>c&&(L-=R);s.splice(c,R);s.splice.apply(s,[L,0].concat(l));q&&d||(f.firstChild=s[0]);h&&m||(f.lastChild=s[s.length-1]);if(e instanceof
ta)for(e=R;0<e--;)f.insertBefore(l[e],h),h=l[e]}}return a},removeChild:function(a){if(a=Z.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var b=0,e;e=a.nodes[b];b++)e.parentNode.insertBefore(e)}return a},clear:function(a){var b=[],e=this.getGroupNode,f=this.nullGroup;this.getGroupNode=function(){return f};for(var c=this.firstChild;c;c=c.nextSibling)b.push.apply(b,c.nodes);for(var c=0,d;d=b[c];c++)d.parentNode.insertBefore(d);this.getGroupNode=e;Z.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=
!1;X.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});X.prototype.groupingClass=va;var Aa={childNodesModified:function(a,b){var e=this.members_,f={},c,d=0,m=0,q=b.inserted,h=b.deleted;if(q&&q.length)for(f.inserted=q;c=q[d];)e[c.basisObjectId]=c,d++;if(h&&h.length)for(f.deleted=h;c=h[m];)delete e[c.basisObjectId],m++;(d||m)&&this.emit_itemsChanged(f)},destroy:function(){this.destroy()}},qa=c(oa,{className:d+".ChildNodesDataset",sourceNode:null,init:function(){oa.prototype.init.call(this);
var a=this.sourceNode;sa[a.basisObjectId]=this;a.firstChild&&Aa.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(Aa,this)},destroy:function(){this.sourceNode.removeHandler(Aa,this);delete sa[this.sourceNode.basisObjectId];oa.prototype.destroy.call(this)}}),ba=c(Y,{className:d+".Selection",multiple:!1,emit_itemsChanged:function(a){var b;Y.prototype.emit_itemsChanged.call(this,a);if(b=a.deleted)for(var e=0,f;f=b[e];e++)f.selected&&f.contextSelection===this&&(f.selected=!1,f.emit_unselect());
if(b=a.inserted)for(e=0;f=b[e];e++)f.selected||f.contextSelection!==this||(f.selected=!0,f.emit_select())},add:function(a){if(a){if(!this.multiple&&this.itemCount)return this.set(a);Array.isArray(a)||(a=[a]);a=a.filter(this.filter,this);!this.multiple&&1<a.length&&(a=[a[0]]);if(a.length)return Y.prototype.add.call(this,a)}},set:function(a){if(!a)return this.clear();Array.isArray(a)||(a=[a]);a=a.filter(this.filter,this);!this.multiple&&1<a.length&&(a=[a[0]]);return a.length?Y.prototype.set.call(this,
a):this.clear()},filter:function(a){return a instanceof xa&&!a.selectedRA_&&a.contextSelection===this}});U.exports={DELEGATE:C,AbstractNode:X,Node:xa,GroupingNode:va,PartitionNode:ta,ChildNodesDataset:qa,Selection:ba,nullSelection:new oa}},"e.js":function(d,U,b,k,g,z,O,T,ca){function E(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}function B(a){var b=pa[a];if(!b)for(var e=[],f={},c=1,b=pa[a]={actions:e,handler:f};a;){if(a&1){var d=na[c];e.push(d.action);for(var s in d.handler)f[s]=
f[s]?E(f[s],d.handler[s]):d.handler[s]}c<<=1;a>>=1}return b}function x(a){a.factory=ma;a.deferred=A;a.compute=J;a.pipe=w;a.as=F;return a}function A(){var a=this;return x(function(b){return(b=a(b))?b.deferred():b})}function J(a,b){var e=this;return x(function(f){var c=e(f);return c?c.compute(a,b)(f):c})}function F(a){var b=this;return x(function(e){return(e=b(e))?e.as(a):e})}function w(a,b){var e=this;return x(function(f){return(f=e(f))?f.pipe(a,b):f})}function l(a,b){for(;b&&b!==a&&b!==b.delegate;)b=
b.delegate;return b===a}function y(a,b,e){var f=a.delegate;f&&(a.root=f.root,a.target=f.target,a.data=f.data,a.state=f.state);if(a.root!==b){if(f=a.listen.root)b&&b!==a&&b.removeHandler(f,a),a.root&&a.root!==a&&a.root.addHandler(f,a);a.emit_rootChanged(b)}if(a.target!==e){if(f=a.listen.target)e&&e!==a&&e.removeHandler(f,a),a.target&&a.target!==a&&a.target.addHandler(f,a);a.emit_targetChanged(e)}for(a=a.delegates_;a;)a.delegate&&y(a.delegate,b,e),a=a.next}function D(a,b){var e={},f;a&&a.length&&(f=
e.inserted=a);b&&b.length&&(f=e.deleted=b);if(f)return e}function n(a,b){if(a&&a.itemCount){if(b&&b.itemCount){var e=[],f=[],c;for(c in a.items_){var d=a.items_[c];0==d.basisObjectId in b.items_&&f.push(d)}for(c in b.items_)d=b.items_[c],0==d.basisObjectId in a.items_&&e.push(d);return D(e,f)}if(a.itemCount)return{deleted:a.getItems()}}else if(b&&b.itemCount)return{inserted:b.getItems()}}function r(){this.fn.call(this.context,this.source)}function p(a,b,e,f,c){var d=a[f]||null,s=null;b!==r&&"function"==
typeof e&&(e=e.call(c||a,c||a));e&&(c=s=d&&d.source===e?d:null,e instanceof ja?(s=c||new ha(a,b,e,Ca),e=e.dataset):e.bindingBridge&&(s=c||new wa(a,b,e,ya),e=p(s,r,e.value,"next")));0==e instanceof S&&(e=null);if(f&&d!==s){for(b=d;b;)c=b,c.detach(),b=c.next,c.next=null;s&&s.attach(ua);a[f]=s}return e}function M(a){return function W(b,e,f,c,d){var s=b[c]||null,m=null;e!==r&&"function"==typeof f&&(f=f.call(d||b,d||b));f&&f.bindingBridge&&(m=s&&s.source===f?s:new wa(b,e,f,ya),f=W(m,r,f.bindingBridge.get(f),
"next"));0==f instanceof a&&(f=null);if(c&&s!==m){for(e=s;e;)d=e,d.detach(),e=d.next,d.next=null;m&&m.attach(ua);b[c]=m}return f}}function a(e,f,c,d,s){var m=e[d]||null,q=null;c&&f!==r&&b.fn.isFactory(c)&&(c=c.call(s||e,s||e));c&&c.bindingBridge&&(q=m&&m.source===c?m:new wa(e,f,c,ya),c=a(q,r,c.bindingBridge.get(c),"next"));if(d&&m!==q){for(f=m;f;)s=f,s.detach(),f=s.next,s.next=null;q&&q.attach(Ba);e[d]=q}return c}function c(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function v(a){a&&
a.constructor===Object||(a={value:a});return new ba({data:a})}d=this.path;k=b.Class;var I=Array.prototype.slice,h=Object.prototype.hasOwnProperty,t=b.object.values,H=b.fn.$self;z=b.require("./2.js");var G=z.Emitter;g=z.create;var P=z.createHandler,V=z.events,la={},Q=[],ma=b.FACTORY,N=b.PROXY,oa={},Y={priority:[],values:{},add:function(a,b){var e=a.toLowerCase();Y[a]=e;oa[e]=a;this.values[e]=a;b=b?this.priority.indexOf(b):-1;-1==b?this.priority.push(e):this.priority.splice(b,0,e)},getList:function(){return t(oa)},
factory:function(a,b){return ea.stateFactory(a,b)},from:function(a){return ea.state(a)}};Y.add("READY");Y.add("DEPRECATED");Y.add("UNDEFINED");Y.add("ERROR");Y.add("PROCESSING");var na={},da=1,aa={NONE:0,ALL:0,link:function(a,b,e){a+=b.basisObjectId;var f=e.subscribers_;f||(f=e.subscribers_={});f[a]||(f[a]=b,1==(e.subscriberCount+=1)&&e.emit_subscribersChanged(1))},unlink:function(a,b,e){a+=b.basisObjectId;(b=e.subscribers_)&&b[a]&&(delete b[a],0==--e.subscriberCount&&(e.emit_subscribersChanged(-1),
e.subscribers_=null))},add:function(a,b,e){na[da]={handler:b,action:e};aa[a]=da;aa.ALL|=da;da<<=1},addProperty:function(a,b){var e={};e[b||a+"Changed"]=function(b,e){e instanceof f&&aa.unlink(a,b,e);b[a]instanceof f&&aa.link(a,b,b[a])};this.add(a.toUpperCase(),e,function(b,e){e[a]&&b(a,e,e[a])})}},pa={};aa.addProperty("delegate");aa.addProperty("target");aa.addProperty("dataset");aa.addProperty("value","change");var f=k(G,{className:d+".AbstractData",state:Y.UNDEFINED,stateRA_:null,emit_stateChanged:g("stateChanged",
"oldState"),active:!1,activeRA_:null,emit_activeChanged:g("activeChanged"),subscribeTo:aa.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:g("subscribersChanged","delta"),syncEvents:k.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){G.prototype.init.call(this);this.active&&(this.active===N&&(this.active=ea.from(this,"subscribersChanged","subscriberCount")),(this.active=!!a(this,this.setActive,
this.active,"activeRA_"))&&this.addHandler(B(this.subscribeTo).handler));if(this.state!=Y.UNDEFINED){var b=this.state;"string"!=typeof this.state&&(b=a(this,this.setState,b,"stateRA_"));b&&!h.call(oa,b)&&(b=!1);this.state=b||Y.UNDEFINED}if(b=this.syncAction)this.syncAction=null,this.setSyncAction(b)},setState:function(b,e){b=a(this,this.setState,b,"stateRA_")||Y.UNDEFINED;var f=String(b);if(!h.call(oa,f))return!1;this.stateRA_&&void 0===e&&(e=b.data);if(this.state!=f||this.state.data!=e){var c=this.state;
this.state=Object(f);this.state.data=e;this.emit_stateChanged(c);return!0}return!1},deprecate:function(){this.state!=Y.PROCESSING&&this.setState(Y.DEPRECATED)},setActive:function(b){b===N&&(b=ea.from(this,"subscribersChanged","subscriberCount"));b=!!a(this,this.setActive,b,"activeRA_");if(this.active!=b){this.active=b;this.emit_activeChanged();if(b){b=B(this.subscribeTo);for(var e=0,f;f=b.actions[e];e++)f(aa.link,this);this.addHandler(b.handler)}else{b=B(this.subscribeTo);for(e=0;f=b.actions[e++];)f(aa.unlink,
this);this.removeHandler(b.handler)}return!0}return!1},setSubscription:function(a){var b=this.subscribeTo,e=a&aa.ALL;if(a=b^e){this.subscribeTo=e;if(this.active){var f=B(b),e=B(e);this.removeHandler(f.handler);this.addHandler(e.handler);for(f=1;a;)a&1&&(e=na[f],b&f?e.action(aa.unlink,this):e.action(aa.link,this)),f<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==Y.UNDEFINED||this.state==Y.DEPRECATED)},setSyncAction:function(a){var b=this.syncAction;
"function"!=typeof a&&(a=null);(this.syncAction=a)?(b||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):b&&this.removeHandler(this.syncEvents)},destroy:function(){G.prototype.destroy.call(this);if(this.active)for(var b=B(this.subscribeTo),e=0,f;f=b.actions[e];e++)f(aa.unlink,this);this.activeRA_&&a(this,!1,!1,"activeRA_");this.stateRA_&&a(this,!1,!1,"stateRA_");this.state=Y.UNDEFINED}}),e=b.getter.ID,m={destroy:function(a){this.value.unlink(a,this.fn)}},q={destroy:function(){this.set(null)}},
C={},sa={},u=function(a){ea.prototype.set.call(this,a)},ka=function(a,b){b instanceof G?b.removeHandler(this.pipeHandler,this):b=null;a instanceof G?a.addHandler(this.pipeHandler,this):a=null;a!==b&&ea.prototype.set.call(this,a)},ea=k(f,{className:d+".Value",subscribeTo:aa.VALUE,emit_change:g("change","oldValue")&&function(a){V.change.call(this,a);for(var b=this;b=b.links_;)b.fn.call(b.context,this.value,a)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,
pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,b,e,f){a.link(e,b,!0,f)},detach:function(a,b,e){a.unlink(e,b)},get:function(a){return a.value}},init:function(){f.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.setNullOnEmitterDestroy&&this.value instanceof G&&this.value.addHandler(q,this);this.initValue=this.value},set:function(a){var b=this.value;a=this.proxy?this.proxy(a):a;var e=a!==b;e&&(this.setNullOnEmitterDestroy&&(b instanceof G&&b.removeHandler(q,
this),a instanceof G&&a.addHandler(q,this)),this.value=a,this.locked||this.emit_change(b));return e},reset:function(){this.set(this.initValue)},isLocked:function(){return 0<this.locked},lock:function(){this.locked++;1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&(this.locked--,!this.locked)){var a=this.lockedValue_;this.lockedValue_=null;this.value!==a&&this.emit_change(a)}},compute:function(a,b){b||(b=a,a=null);b||(b=H);var f=this,c=P(a,function(a){ea.prototype.set.call(this,
b(a,f.value))}),d=c.events.concat(b[e]||String(b),this.basisObjectId).join("_"),s=C[d];if(!s){var m={};c.destroy=function(a){delete m[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in m){var e=m[a];ea.prototype.set.call(e.value,b(e.object,this.value))}},destroy:function(){for(var a in m){var b=m[a];b.object.removeHandler(c,b.value);b.value.destroy()}f=m=null}});s=C[d]=x(function(a){var e=a.basisObjectId,d=m[e],s=b(a,f.value);d?ea.prototype.set.call(d.value,s):(d=new X({value:s}),
a.addHandler(c,d),d=m[e]={value:d,object:a});return d.value})}return s},pipe:function(a,f){var c=P(a,Aa),d=f[e]||String(f),d=c.events.join("_")+"_"+d,s=this.pipes_,m;s?m=s[d]:s=this.pipes_={};m||(m=new xa({source:this,pipeId:d,pipeHandler:c}),m.proxy=b.getter(f),this.value instanceof G&&(m.value=m.proxy(this.value),this.value.addHandler(c,m)),s[d]=m,this.link(m,ka,!0,m.destroy));return m},as:function(a){if(!a||a===H)return this;if(this.links_)for(var b=this,f=a[e]||String(a);b=b.links_;){var c=b.context;
if(c instanceof X&&c.proxy&&(c.proxy[e]||String(c.proxy))==f)return c}a=new X({proxy:a,value:this.value});this.link(a,u,!0,a.destroy);return a},deferred:function(){this.deferred_||(this.deferred_=new Z({source:this,value:this.value}));return this.deferred_},link:function(a,b,e,f){if("function"!=typeof b){var c=String(b);(b=sa[c])||(b=sa[c]=function(a){this[c]=a})}this.links_={value:this,context:a,fn:b,destroy:f||null,links_:this.links_};a instanceof G&&a.addHandler(m,this.links_);e||b.call(a,this.value);
return a},unlink:function(a,e){for(var f=this,c;c=f,f=f.links_;)f.context!==a||e&&f.fn!==e||(f.fn=b.fn.$undef,c.links_=f.links_,f.context instanceof G&&f.context.removeHandler(m,f))},destroy:function(){f.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof G&&this.value.removeHandler(q,this);var a=this.links_;for(this.links_=null;a;)a.context instanceof G&&a.context.removeHandler(m,a),a.destroy&&a.destroy.call(a.context),a=a.links_;this.pipes_=this.deferred_=this.lockedValue_=
this.value=this.initValue=this.proxy=null}}),X=k(ea,{className:d+".ReadOnlyValue",set:b.fn.$false}),ia={change:function(a){this.isLocked()||(this.lock(),ta.add(this));ea.prototype.set.call(this,a.value)},destroy:function(){this.destroy()}},ta=b.asap.schedule(function(a){a.unlock()}),Z=k(X,{className:d+".DeferredValue",setNullOnEmitterDestroy:!1,source:null,init:function(){ea.prototype.init.call(this);this.source.addHandler(ia,this)},deferred:function(){return this},destroy:function(){ta.remove(this);
this.source=null;ea.prototype.destroy.call(this)}}),xa=k(X,{className:d+".PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var a=this.source,b=a.value;b instanceof G&&b.removeHandler(this.pipeHandler,this);this.pipeHandler=this.source=a.pipes_[this.pipeId]=null;ea.prototype.destroy.call(this)}}),va={},Aa=function(a){ea.prototype.set.call(this,a)};ea.from=function(a,f,c){var d;if(!a)return null;if(a instanceof G){c||(c=f,f=null);c||(c=H);var s=P(f,Aa),m=s.events.concat(c[e]||
String(c),a.basisObjectId).join("_");d=va[m];d||(d=va[m]=new X({proxy:b.getter(c),value:a,handler:{destroy:function(){va[m]=null;a.removeHandler(s,this)}}}),s.destroy=function(){va[m]=null;this.destroy()},a.addHandler(s,d))}if(!d){var m=a.basisObjectId,q=a.bindingBridge;m&&q&&(d=va[m],d||(d=va[m]=new X({value:q.get(a),handler:{destroy:function(){va[m]=null;q.detach(a,ea.prototype.set,d)}}}),q.attach(a,ea.prototype.set,d,d.destroy)))}if(!d)throw"Bad object type";return d};ea.factory=function(a,b){return x(function(e){return ea.from(e,
a,b)})};ea.state=function(a){return a instanceof f?ea.from(a,"stateChanged","state"):Y.UNDEFINED};ea.stateFactory=function(a,b){return ea.factory(a,b).pipe("stateChanged","state").as(function(a){return a||Y.UNDEFINED})};var qa={},ba=k(f,{className:d+".Object",subscribeTo:aa.DELEGATE+aa.TARGET,data:null,emit_update:g("update","delta")&&function(a){var b=this.delegates_;for(V.update.call(this,a);b;)b.delegate&&b.delegate.emit_update(a),b=b.next},emit_stateChanged:function(a){var b=this.delegates_;for(f.prototype.emit_stateChanged.call(this,
a);b;)b.delegate&&(b.delegate.state=this.state,b.delegate.emit_stateChanged(a)),b=b.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:g("delegateChanged","oldDelegate"),target:null,emit_targetChanged:g("targetChanged","oldTarget"),root:null,emit_rootChanged:g("rootChanged","oldRoot"),init:function(){this.root=this;f.prototype.init.call(this);var a=this.delegate,b=this.data;a?(this.target=this.delegate=null,this.data=qa,this.setDelegate(a),this.data===qa&&(this.data=b||{})):
(b||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(a){if((a=s(this,this.setDelegate,a,"delegateRA_"))&&a instanceof ba){if(a.delegate&&l(this,a))return!1}else a=null;if(this.delegate!==a){var b=this.state,e=this.data,f=this.delegate,c=this.target,d=this.root,m=this.listen.delegate,q=!1,h;if(f){m&&f.removeHandler(m,this);for(var t=f.delegates_,H=f;t;){if(t.delegate===this){t.delegate=null;H===f?f.delegates_=t.next:H.next=t.next;break}H=t;t=t.next}}if(a){if(this.delegate=
a,m&&a.addHandler(m,this),a.delegates_={delegate:this,next:a.delegates_},this.data!==qa){h={};for(var S in a.data)!1===S in e&&(q=!0,h[S]=void 0);for(S in e)e[S]!==a.data[S]&&(q=!0,h[S]=e[S])}}else for(S in this.target=this.delegate=null,this.root=this,this.data={},e)this.data[S]=e[S];y(this,d,c);q&&this.emit_update(h);!h||b===this.state||String(b)==this.state&&b.data===this.state.data||this.emit_stateChanged(b);this.emit_delegateChanged(f);return!0}return!1},setState:function(a,b){return this.delegate?
this.root.setState(a,b):f.prototype.setState.call(this,a,b)},update:function(a){if(this.delegate)return this.root.update(a);if(a){var b={},e=!1,f;for(f in a)this.data[f]!==a[f]&&(e=!0,b[f]=this.data[f],this.data[f]=a[f]);if(e)return this.emit_update(b),b}return!1},destroy:function(){f.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.delegateRA_&&s(this,!1,!1,"delegateRA_");this.data=la;this.target=
this.root=null}});z=k(ba,{className:d+".Slot"});var K={destroy:function(){delete this.map[this.id]}};O=k(f,{className:d+".KeyObjectMap",itemClass:ba,keyGetter:b.getter(H),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={};f.prototype.init.call(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a){return new this.itemClass(a instanceof ba?{delegate:a}:{data:{id:a,title:a}})},get:function(a,b){var e=a instanceof ba?a.basisObjectId:a,f=this.map_[e];
!f&&b&&(f=this.map_[e]={map:this.map_,id:e,item:this.create(a,b)},f.item.addHandler(K,f));if(f)return f.item},destroy:function(){f.prototype.destroy.call(this);var a=this.map_;this.map_=null;for(var b in a){var e=a[b];this.autoDestroyMembers?e.item.destroy():e.item.removeHandler(K,e)}}});var ja=k(ba,{className:d+".DatasetWrapper",active:b.PROXY,subscribeTo:ba.prototype.subscribeTo+aa.DATASET,listen:{dataset:{itemsChanged:function(a,b){this.itemCount=a.itemCount;this.emit_itemsChanged(b)},destroy:function(){this.setDataset()}}},
dataset:null,datasetRA_:null,emit_datasetChanged:g("datasetChanged","oldDataset"),emit_itemsChanged:g("itemsChanged","delta"),init:function(){ba.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=p(this,this.setDataset,a,"datasetRA_");if(this.dataset!==a){var b=this.listen.dataset,e=this.dataset,f;b&&(e&&e.removeHandler(b,this),a&&a.addHandler(b,this));this.itemCount=a?a.itemCount:0;this.dataset=a;(f=n(e,a))&&this.emit_itemsChanged(f);
this.emit_datasetChanged(e)}},has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},getValues:function(a){return this.dataset?this.dataset.getValues(a):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset();ba.prototype.destroy.call(this)}}),
S=k(f,{className:d+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:g("itemsChanged","delta")&&function(a){var b,e=0,f=0,c;if(b=a.inserted)for(;c=b[e];)this.items_[c.basisObjectId]=c,e++;if(b=a.deleted)for(;c=b[f];)delete this.items_[c.basisObjectId],f++;this.itemCount+=e-f;this.cache_=e==this.itemCount?a.inserted:null;V.itemsChanged.call(this,a)},init:function(){f.prototype.init.call(this);this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},
getItems:function(){this.cache_||(this.cache_=t(this.items_));return this.cache_},getValues:function(a){return this.getItems().map(b.getter(a||H))},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var b=[];if(a)for(var e in this.items_)if(b.push(this.items_[e])>=a)break;return b},forEach:function(a){for(var b=this.getItems(),e=0;e<b.length;e++)a(b[e])},destroy:function(){f.prototype.destroy.call(this);this.cache_=Q;this.itemCount=0;this.items_=this.members_=
null}}),ra=k(S,{className:d+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){S.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var b=this.members_,e=this.listen.item,f=[],c;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var s=a[d];if(s instanceof ba){var m=s.basisObjectId;b[m]||(b[m]=s,e&&s.addHandler(e,this),f.push(s))}}f.length&&this.emit_itemsChanged(c={inserted:f});return c},remove:function(a){var b=this.members_,
e=this.listen.item,f=[],c;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var s=a[d];if(s instanceof ba){var m=s.basisObjectId;b[m]&&(e&&s.removeHandler(e,this),delete b[m],f.push(s))}}f.length&&this.emit_itemsChanged(c={deleted:f});return c},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var b=this.members_,e=this.listen.item,f={},c=[],d=[],s,m,q,h=0;h<a.length;h++)s=a[h],s instanceof ba&&(m=s.basisObjectId,f[m]=s,b[m]||(b[m]=s,e&&s.addHandler(e,
this),d.push(s)));for(m in b)f[m]||(s=b[m],e&&s.removeHandler(e,this),delete b[m],c.push(s));(q=D(d,c))&&this.emit_itemsChanged(q);return q},sync:function(a){return this.setAndDestroyRemoved(a)},setAndDestroyRemoved:function(a){a=this.set(a)||{};var b=a.deleted;ra.setAccumulateState(!0);if(b)for(var e=0,f;f=b[e];e++)f.destroy();ra.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),b=this.listen.item,e;if(a.length){if(b)for(e=0;e<a.length;e++)a[e].removeHandler(b,this);
this.emit_itemsChanged(e={deleted:a});this.members_={}}return e},destroy:function(){this.clear();S.prototype.destroy.call(this)}}),ha=function(a,b,e,f){this.context=a;this.fn=b;this.source=e;this.handler=f};ha.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var wa=function(){ha.apply(this,arguments)};wa.prototype=new ha;wa.prototype.attach=function(a){this.source.bindingBridge.attach(this.source,
this.handler,this,a)};wa.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var ya=function(){this.fn.call(this.context,this.source)},ua=function(){this.fn.call(this.context,null)},Ba=function(){this.fn.call(this.context,a(la,null,this.source.bindingBridge.get(this.source)))},Ca={datasetChanged:ya,destroy:ua},s=M(ba);ra.setAccumulateState=function(){function a(){var b=d;d={};for(var e in b){var f=b[e];f&&q.call(f.dataset,f)}}function e(a){var b=this.basisObjectId,
f=a.inserted,c=a.deleted,s=d[b];if(f&&c||s&&s.mixed)s&&(d[b]=null,q.call(s.dataset,s)),q.call(this,a);else if(s){a=f?"inserted":"deleted";var m=s[a];if(m)m.push.apply(m,f||c);else{for(var m=f?"deleted":"inserted",h=s[m],R={},f=f||c,c=[],L=0,l=0;l<h.length;l++)R[h[l].basisObjectId]=l;for(l=0;l<f.length;l++){var t=f[l].basisObjectId;0==t in R?c.push(f[l]):(L||(h=I.call(h)),L++,h[R[t]]=null)}L&&(h=L<h.length?h.filter(Boolean):null,s[m]=h);c.length?(s[a]=c,h&&(s.mixed=!0)):h||(d[b]=null)}}else d[b]={inserted:f,
deleted:c,dataset:this,mixed:!1}}function f(){m=null;s&&(s=0,c.emit_itemsChanged=q,a())}var c=S.prototype,d={},s=0,m,q;return function(d){d?(0==s&&(q=c.emit_itemsChanged,c.emit_itemsChanged=e,m||(m=b.setImmediate(f))),s++):(s-=0<s,0==s&&(c.emit_itemsChanged=q,a()))}}();U.exports={STATE:Y,SUBSCRIPTION:aa,AbstractData:f,Value:ea,ReadOnlyValue:X,DeferredValue:Z,PipeValue:xa,Object:ba,Slot:z,KeyObjectMap:O,ReadOnlyDataset:S,Dataset:ra,DatasetWrapper:ja,isConnected:l,getDatasetDelta:n,ResolveAdapter:ha,
createResolveFunction:M,resolveDataset:p,resolveObject:s,resolveValue:a,wrapData:c,wrapObject:v,wrap:function(a,b){var e=b?v:c;return Array.isArray(a)?a.map(e):e(a)}}},"1.js":function(d,U,b,k,g,z,O,T,ca){function E(a){if(a=a.nodes)for(var b=a.length-1,c;c=a[b];b--)c.parentNode.insertBefore(c,c.nextSibling)}d=this.path;var B=k.document;k=b.Class;var x=b.require("./2.js").create,A=b.require("./3.js").Template,J=b.require("./6.js").MARKER,F=b.require("./7.js").TemplateSwitcher;O=b.require("./d.js");
g=O.Node;z=O.PartitionNode;var w=O.GroupingNode,l=1,y=function(){var a={},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,c){a[b]||(a[b]=c)},process:function(c,d){var l,g=d.match(b);g&&(l=a[g[1]],d=g[2]||c);return l?l(d):d}}}();y.add("data",function(a){return{events:"update",getter:"data."+a}});y.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var D=k.customExtendProperty({active:{events:"activeChanged",getter:function(a){return a.active}},
state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(a,c){a.bindingId=l++;for(var d in c){var g=null,n=c[d];
I&&n instanceof I||b.resource.isResource(n)?g={events:"satelliteChanged",getter:function(a,b){var c="function"==typeof b?b:null,d=function(h){d=!1;if(c){b=c();if(0==b instanceof I)return;c=null}h.setSatellite(a,b)};return function(b){d&&d(b);return c||(b.satellite[a]?b.satellite[a].element:null)}}(d,n)}:n&&("string"==typeof n?n=y.process(d,n):n.bindingBridge&&(n=b.fn.$const(n)),g="object"!=typeof n?{getter:"function"==typeof n?n:b.getter(n)}:Array.isArray(n)?{events:n[0],getter:b.getter(n[1])}:{events:n.events,
getter:b.getter(n.getter)});a[d]=g}}),n={attach:function(a,b,c){a.addHandler(b,c)},detach:function(a,b,c){a.removeHandler(b,c)}},r=k.extensibleProperty({select:function(a){this.isDisabled()||this.selectedRA_||(this.contextSelection&&this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),p={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&this.setTemplate(b.resolve(this))}},M=new A("<div/>"),a=[],c;O=function(d){return{template:M,emit_templateChanged:x("templateChanged"),
templateSwitcher_:null,binding:D,action:r,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=a.pop()||B.createDocumentFragment();d.init.call(this)},postInit:function(){d.postInit.call(this);var b=this.template;if(b){var c=this.childNodesElement;this.template=null;this.setTemplate(b);a.push(c);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.template.createInstance(this,
this.templateAction,this.templateSync,this.binding,n);b.childNodesHere&&(b.childNodesElement=b.childNodesHere.parentNode,b.childNodesElement.insertPoint=b.childNodesHere);this.tmpl=b;this.element=b.element;this.childNodesElement=b.childNodesElement||b.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=B.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();for(b=this;b.grouping;)b=b.grouping;for(var c=b.lastChild;c;c=c.previousSibling)c instanceof v?b.insertBefore(c,
c.nextSibling):E(c);E(b.nullGroup)}else for(b=this.lastChild;b;b=b.previousSibling)this.insertBefore(b,b.nextSibling);this instanceof v&&E(this);a&&a!==this.element&&11!=a.nodeType&&(b=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,this.element),this.element.parentNode!==b&&b.replaceChild(this.element,a));this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,c;a instanceof F&&(c=a,a=c.resolve(this));0==a instanceof A&&(a=null);a&&(c&&(this.templateSwitcher_=
c,b||this.addHandler(p,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(p,this)),b=this.tmpl,c=this.template,c!==a&&(this.template=a,this.templateSync(),c&&c.clearInstance(b)))},updateBind:function(a){var b=this.binding[a];(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var c=this.action[a];c&&c.call(this,b)},focus:function(a){var d=this.tmpl?this.tmpl.focus||this.element:null;d&&(c&&(c=b.clearImmediate(c)),c=b.setImmediate(function(){try{d.focus(),
a&&d.select()}catch(b){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,b=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(p,this));a.clearInstance(this.tmpl);d.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=b&&b.parentNode)&&1==a.nodeType&&a.removeChild(b)}}};T=function(a){return{insertBefore:function(b,c){b=a.insertBefore.call(this,b,c);var d=
(b.groupNode||this).childNodesElement||this.childNodesElement,l=b.nextSibling,g=b.element,l=(l&&l.element.parentNode==d?l.element:null)||d.insertPoint||null;g.parentNode===d&&g.nextSibling===l||d.insertBefore(g,l);return b},removeChild:function(b){a.removeChild.call(this,b);var c=b.element,d=c.parentNode;d&&d.removeChild(c);return b},clear:function(b){if(b)for(var c=this.firstChild;c;){var d=c.element,l=d.parentNode;l&&l.removeChild(d);c=c.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,
c){var d=B.createDocumentFragment(),l=this.grouping||this,g=l.childNodesElement;l.childNodesElement=d;a.setChildNodes.call(this,b,c);g.insertBefore(d,g.insertPoint||null);l.childNodesElement=g}}};var v=k(z,O,{className:d+".PartitionNode",binding:{title:"data:"}});z=k(w,T,{className:d+".GroupingNode",childClass:v,groupingClass:k.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();w.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=
B.createDocumentFragment();w.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,c=null;b&&(c=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement);do a.element=a.childNodesElement=c;while(a=a.grouping)},destroy:function(){w.prototype.destroy.call(this);this.childNodesElement=this.element=null}});var I=k(g,O,T,{className:d+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},
disabled:{events:"disable enable",getter:function(a){return a.isDisabled()}},enabled:{events:"disable enable",getter:function(a){return!a.isDisabled()}},tabindex:{events:"enable disable",getter:function(a){return a.isDisabled()?-1:a.tabindex||0}}},childClass:k.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:z});d=I.subclass({className:d+".ShadowNodeList",emit_ownerChanged:function(a){I.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},
getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:d+".ShadowNode",getElement:function(a){return a.element},templateSync:function(){I.prototype.templateSync.call(this);var a=this.getElement(this.delegate);a&&(a[J]=this.delegate.element[J],this.element=a)},listen:{delegate:{templateChanged:function(){var a=
this.element,b=a.parentNode,c=this.getElement(this.delegate);c&&(c[J]=this.delegate.element[J]);this.element=c||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});U.exports={BINDING_PRESET:y,Node:I,PartitionNode:v,GroupingNode:z,ShadowNodeList:d,ShadowNode:d.prototype.childClass}},"g.js":function(d,U,b,k,g,z,O,T,ca){var E=k.document;if("getComputedStyle"in k){var B={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},x=b.fn.runOnce(function(){var d=E.createElement("div");d.setAttribute("style",
"position:absolute;top:auto!important");b.doc.body.add(d);"auto"==k.getComputedStyle(d).top&&(B={});b.doc.remove(d)});d=function(b,d){var l=k.getComputedStyle(b);if(l){d in B&&x();if(B[d]&&"static"!=l.position){var g=b.style.display;b.style.display="none";l=l.getPropertyValue(d);b.style.display=g}else l=l.getPropertyValue(d);return l}}}else{var A=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,J=/\dpx$/i;d=function(d,g){var l=d.currentStyle;if(l){var l=l["float"==g?"styleFloat":b.string.camelize(g)],k=(l||"").match(A);
if(k&&k[2]&&"px"!=k[2])if(J.test(l))l=parseInt(l,10)+"px";else{var k=d.style,D=d.runtimeStyle,n=k.left,r=D.left;D.left=d.currentStyle.left;k.left=l||0;l=k.pixelLeft;k.left=n;D.left=r;l+="px"}return l}}}U.exports={get:d}},"h.js":function(d,U,b,k,g,z,O,T,ca){function E(b){var d=0,g=0;if(b&&b.getBoundingClientRect)b=b.getBoundingClientRect(),d=-b.top,g=-b.left;else if(F)d=k.pageYOffset||A.scrollTop,g=k.pageXOffset||A.scrollLeft;else{var D=x.body;b!==D&&(d=D.scrollTop-D.clientTop,g=D.scrollLeft-D.clientLeft)}return{left:g,
top:d}}function B(b,d){var g=0,k=0,n=E(d);b&&b.getBoundingClientRect&&(g=b.getBoundingClientRect(),k=g.top,g=g.left);return{top:k+n.top,left:g+n.left}}var x=k.document,A=x.documentElement,J=b.require("./g.js").get,F="CSS1Compat"==x.compatMode;U.exports={getOffset:E,getOffsetParent:function(b){for(b=b.offsetParent||A;b&&b!==A&&"static"==J(b,"position");)b=b.offsetParent;return b||A},getTopLeftPoint:B,getBoundingRect:function(b,d){var g=0,k=0,n=0,r=0,p=E(d);b&&b.getBoundingClientRect&&(r=b.getBoundingClientRect(),
g=r.top,k=r.left,n=r.right,r=r.bottom);return{top:g+p.top,left:k+p.left,right:n+p.left,bottom:r+p.top,width:n-k,height:r-g}},getViewportRect:function(b,d){var g=b!==(F?x.documentElement:x.body)||d?B(b,d):E(),D=g.top,g=g.left,n,r;b&&b!==k?(D+=b.clientTop,g+=b.clientLeft,n=b.clientWidth,r=b.clientHeight):(n=k.innerWidth||0,r=k.innerHeight||0);return{top:D,left:g,right:g+n,bottom:D+r,width:n,height:r}}}},"i.js":function(d,U,b,k,g,z,O,T,ca){function E(a,b){var c={},d;a&&a.length&&(d=c.inserted=a);b&&
b.length&&(d=c.deleted=b);if(d)return c}function B(a,b){return function q(b){if(!b)return null;if(b.__extend__)return b;"string"==typeof b||Array.isArray(b)||(b=null);return y(t(b,a),{__extend__:q})}(b)}function x(a,b,c,d){return new la(y({keyGetter:b,itemClass:c,create:function(a,b){var e=la.prototype.create.call(this,a,b);e.ruleValue=a;e.setDataset(new d({ruleValue:a}));return e}},a))}function A(a,b){if(!a.length)return 0;var c=b.value,d=b.object.basisObjectId,l,h,g,n,k=0,t=a.length-1;do if(g=k+
t>>1,n=a[g],l=n.value,c<l)t=g-1;else if(c>l)k=g+1;else if(h=n.object.basisObjectId,d<h)t=g-1;else if(d>h)k=g+1;else return g;while(k<=t);return g+(l==c?h<d:l<c)}function J(a,b){return+(a.value>b.value)||-(a.value<b.value)||a.object.basisObjectId-b.object.basisObjectId}function F(a,b,c){if((b=a.sourceMap_[b.basisObjectId])&&b.visited!==c){for(var d=b;d=d.ref;)if(d.object===a.source)return!0;b.visited=c;for(d=b;d=d.ref;)if(F(a,d.object,c||{}))return!0}}function w(a,b,c){var d=a.sourceMap_,l=a.members_;
b=h(b);for(var g=[],n=0;n<b.length;n++){var k=b[n],t=k.basisObjectId;t||(c=k.ref,k=k.object,t=k.basisObjectId);var p=d[t];if(p)p.ref={object:c,ref:p.ref};else if(p=d[t]={source:k,ref:{object:c,ref:null},visited:null,value:null},k instanceof V){var r=a.rule(k)||null;if(r instanceof V||r instanceof Q)p.value=r,b.push({object:r,ref:k});l[t]=p;g.push(k);a.ruleEvents&&k.addHandler(a.ruleEvents,a)}else for(k.addHandler(pa,a),t=0,p=k.getItems();t<p.length;t++)b.push({object:p[t],ref:k})}return g}function l(a,
b,c){var d=a.sourceMap_,l=a.members_;b=h(b);for(var g=[],n=0;n<b.length;n++){var k=b[n],t=k.basisObjectId;t||(c=k.ref,k=k.object,t=k.basisObjectId);for(var p=d[t],r=p.value,v=p,H=p;v=v.ref;){if(v.object===c){H.ref=v.ref;break}H=v}if(p.ref)r&&!F(a,k)&&(p.value=null,b.push({object:r,ref:k}));else{if(k instanceof V)delete l[t],g.push(k),a.ruleEvents&&k.removeHandler(a.ruleEvents,a),r&&b.push({object:r,ref:k});else for(k.removeHandler(pa,a),p=0,r=k.getItems();p<r.length;p++)b.push({object:r[p],ref:k});
delete d[t]}}return g}d=this.path;z=b.Class;var y=b.object.extend,D=b.object.values,n=b.object.slice,r=b.array.add,p=b.array.remove,M=b.getter,a=b.fn.$self,c=b.fn.$true,v=b.fn.$false,I=b.fn.$undef,h=b.array.from;g=b.require("./2.js");k=g.create;var t=g.createHandler,H=g.Emitter;g=b.require("./e.js");var G=g.SUBSCRIPTION,P=g.Value,V=g.Object,la=g.KeyObjectMap,Q=g.ReadOnlyDataset,ma=g.Dataset;ca=g.DatasetWrapper;var N=g.resolveDataset,oa=ma.setAccumulateState;G.add("SOURCE",{sourceChanged:function(a,
b){b&&G.unlink("source",a,b);a.source&&G.link("source",a,a.source)},sourcesChanged:function(a,b){var c;if(c=b.inserted)for(var d=0;c[d];d++)G.link("source",a,c[d]);if(c=b.deleted)for(d=0;c[d];d++)G.unlink("source",a,c[d])}},function(a,b){for(var c=b.sources||(b.source?[b.source]:[]),d=0,l;l=c[d++];)a("source",b,l)});G.addProperty("minuend");G.addProperty("subtrahend");var Y=z(Q,{className:d+".Merge",active:b.PROXY,subscribeTo:G.SOURCE,emit_sourcesChanged:k("sourcesChanged","delta"),sources:null,sourceValues_:null,
sourcesMap_:null,sourceDelta_:null,rule:function(a){return 0<a},emit_ruleChanged:k("ruleChanged","oldRule"),listen:{source:{itemsChanged:function(a,b){var c=this.members_,d={},l,h;if(b.inserted)for(var g=0;l=b.inserted[g];g++)h=l.basisObjectId,c[h]?c[h].count++:c[h]={count:1,object:l},d[h]=c[h];if(b.deleted)for(g=0;l=b.deleted[g];g++)h=l.basisObjectId,d[h]=c[h],c[h].count--;this.applyRule(d)}},sourceValue:{destroy:function(a){this.removeSource(a)}}},init:function(){Q.prototype.init.call(this);var a=
this.sources;this.sources=[];this.sourcesMap_={};this.sourceValues_=[];a&&this.setSources(a)},setRule:function(a){a=M(a||Y.UNION);if(this.rule!==a){var b=this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(a){var b=this.members_,c=this.rule,d=this.sources.length,l=[],h=[],g,k;a||(a=b);for(var n in a)a=b[n],g=d&&a.count&&c(a.count,d),g!=n in this.items_&&(g?l.push(a.object):h.push(a.object)),0==a.count&&delete b[n];(k=E(l,h))&&this.emit_itemsChanged(k);return k},
addDataset_:function(a){this.sources.push(a);this.listen.source&&a.addHandler(this.listen.source,this);var b=this.members_,c;for(c in a.items_)b[c]?b[c].count++:b[c]={count:1,object:a.items_[c]};return!0},removeDataset_:function(a){p(this.sources,a);this.listen.source&&a.removeHandler(this.listen.source,this);var b=this.members_,c;for(c in a.items_)b[c].count--},updateDataset_:function(a){var b=this.owner,c=b.sourcesMap_;a=N(this,b.updateDataset_,a,"adapter",b);var d,l;if(this.dataset!==a){if(a){var h=
(c[a.basisObjectId]||0)+1;c[a.basisObjectId]=h;1==h&&(b.addDataset_(a),d=[a])}this.dataset&&(h=(c[this.dataset.basisObjectId]||0)-1,c[this.dataset.basisObjectId]=h,0==h&&(b.removeDataset_(this.dataset),l=[this.dataset]));this.dataset=a;b.applyRule();if(c=E(d,l))(d=b.sourceDelta_)?(c.inserted&&c.inserted.forEach(function(a){p(this.deleted,a)||r(this.inserted,a)},d),c.deleted&&c.deleted.forEach(function(a){p(this.inserted,a)||r(this.deleted,a)},d)):b.emit_sourcesChanged(c);return c}},getSourceValues:function(){return this.sourceValues_.map(function(a){return a.source})},
addSource:function(a){if(a&&("object"==typeof a||"function"==typeof a)&&!this.hasSource(a)){var b={owner:this,source:a,adapter:null,dataset:null};this.sourceValues_.push(b);this.updateDataset_.call(b,a);this.listen.sourceValue&&a instanceof H&&a.addHandler(this.listen.sourceValue,this)}},removeSource:function(a){for(var b=0,c;c=this.sourceValues_[b];b++)if(c.source===a){this.listen.sourceValue&&a instanceof H&&a.removeHandler(this.listen.sourceValue,this);this.updateDataset_.call(c,null);this.sourceValues_.splice(b,
1);break}},hasSource:function(a){for(var b=0,c;c=this.sourceValues_[b];b++)if(c.source===a)return!0;return!1},setSources:function(a){var b=this.sourceValues_.map(function(a){return a.source}),c=[],d=[],l;a||(a=[]);this.sourceDelta_={inserted:c,deleted:d};for(var h=0;h<a.length;h++){var g=a[h];p(b,g)||this.addSource(g)}b.forEach(this.removeSource,this);this.sourceDelta_=null;(l=E(c,d))&&this.emit_sourcesChanged(l);return l},destroy:function(){this.setSources();Q.prototype.destroy.call(this);this.sources=
this.sourceDelta_=this.sourcesMap_=this.sourceValues_=null}});Y.UNION=Y.prototype.rule;Y.INTERSECTION=function(a,b){return a==b};Y.DIFFERENCE=function(a){return 1==a};Y.MORE_THAN_ONE_INCLUDE=function(a,b){return 1==b||1<a};Y.AT_LEAST_ONE_EXCLUDE=function(a,b){return 1==b||a<b};var na=function(a){return!this.has(a)};g=z(Q,{className:d+".Subtract",active:b.PROXY,subscribeTo:G.MINUEND+G.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:k("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,
emit_subtrahendChanged:k("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,b){if(this.subtrahend){var c=E(b.inserted&&b.inserted.filter(na,this.subtrahend),b.deleted&&b.deleted.filter(this.has,this));c&&this.emit_itemsChanged(c)}},destroy:function(){this.minuendRA_||this.setMinuend(null)}},subtrahend:{itemsChanged:function(a,b){if(this.minuend){var c=E(b.deleted&&b.deleted.filter(this.minuend.has,this.minuend),b.inserted&&b.inserted.filter(this.has,this));c&&this.emit_itemsChanged(c)}},
destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}}},init:function(){Q.prototype.init.call(this);var a=this.minuend,b=this.subtrahend;this.subtrahend=this.minuend=null;(a||b)&&this.setOperands(a,b)},setOperands:function(a,b){var c,d=!1;a=N(this,this.setMinuend,a,"minuendRA_");b=N(this,this.setSubtrahend,b,"subtrahendRA_");var l=this.minuend,h=this.subtrahend;if(l!==a){d=!0;this.minuend=a;var g=this.listen.minuend;g&&(l&&l.removeHandler(g,this),a&&a.addHandler(g,this));this.emit_minuendChanged(l)}if(h!==
b){d=!0;this.subtrahend=b;if(g=this.listen.subtrahend)h&&h.removeHandler(g,this),b&&b.addHandler(g,this);this.emit_subtrahendChanged(h)}if(!d)return!1;if(a&&b){var d=[],l=[],k;for(k in this.items_)a.items_[k]&&!b.items_[k]||d.push(this.items_[k]);for(k in a.items_)this.items_[k]||b.items_[k]||l.push(a.items_[k]);(c=E(l,d))&&this.emit_itemsChanged(c)}else this.itemCount&&this.emit_itemsChanged(c={deleted:this.getItems()});return c},setMinuend:function(a){return this.setOperands(a,this.subtrahendRA_?
this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,a)},destroy:function(){this.setOperands();Q.prototype.destroy.call(this)}});var da=z(Q,{className:d+".SourceDataset",active:b.PROXY,subscribeTo:G.SOURCE,source:null,emit_sourceChanged:k("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var a=this.source;this.source=
null;this.sourceMap_={};Q.prototype.init.call(this);a&&this.setSource(a)},setSource:function(a){a=N(this,this.setSource,a,"sourceRA_");if(this.source!==a){var b=this.source,c=this.listen.source,d;c&&(d=c.itemsChanged,b&&b.removeHandler(c,this),a&&a.addHandler(c,this));this.source=a;this.emit_sourceChanged(b);d&&(ma.setAccumulateState(!0),b&&d.call(this,b,{deleted:b.getItems()}),a&&d.call(this,a,{inserted:a.getItems()}),ma.setAccumulateState(!1))}},destroy:function(){this.setSource();Q.prototype.destroy.call(this);
this.sourceMap_=null}}),aa=z(da,{className:d+".MapFilter",map:a,filter:v,rule:M(c),emit_ruleChanged:k("ruleChanged","oldRule"),ruleEvents:B(function(a){var b=this.map?this.map(a):a;if(0==b instanceof V||this.filter(b))b=null;var c=this.sourceMap_[a.basisObjectId],d=c.member;if(d!==b){var l=this.members_,h,g,k;c.member=b;d&&(c=d.basisObjectId,this.removeMemberRef&&this.removeMemberRef(d,a),0==--l[c]&&(delete l[c],k=[d]));b&&(d=b.basisObjectId,this.addMemberRef&&this.addMemberRef(b,a),l[d]?l[d]++:(l[d]=
1,g=[b]));(h=E(g,k))&&this.emit_itemsChanged(h)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.members_,l=[],h=[],g,k,n,t=this.ruleEvents;oa(!0);if(b.inserted)for(var p=0;g=b.inserted[p];p++){n=this.map?this.map(g):g;if(0==n instanceof V||this.filter(n))n=null;t&&g.addHandler(t,this);c[g.basisObjectId]={sourceObject:g,member:n};n&&(k=n.basisObjectId,d[k]?d[k]++:(d[k]=1,l.push(n)),this.addMemberRef&&this.addMemberRef(n,g))}if(b.deleted)for(p=
0;g=b.deleted[p];p++)k=g.basisObjectId,n=c[k].member,t&&g.removeHandler(t,this),delete c[k],n&&(k=n.basisObjectId,0==--d[k]&&(delete d[k],h.push(n)),this.removeMemberRef&&this.removeMemberRef(n,g));oa(!1);(b=E(l,h))&&this.emit_itemsChanged(b)}}},setMap:function(b){"function"!=typeof b&&(b=a);if(this.map!==b)return this.map=b,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=v);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){a=M(a||c);if(this.rule!==a){var b=
this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(){var a=this.sourceMap_,b=this.members_,c,d,l,h,g,k=[],n=[],t,p;for(p in a){g=a[p];h=g.sourceObject;c=g.member;d=this.map?this.map(h):h;if(0==d instanceof V||this.filter(d))d=null;c!=d&&(g.member=d,c&&(l=c.basisObjectId,this.removeMemberRef&&this.removeMemberRef(c,h),b[l]--),d&&(c=d.basisObjectId,this.addMemberRef&&this.addMemberRef(d,h),c in b?b[c]++:(b[c]=1,k.push(d))))}for(l in this.items_)0==b[l]&&(delete b[l],
n.push(this.items_[l]));(t=E(k,n))&&this.emit_itemsChanged(t);return t}});b=z(aa,{className:d+".Filter",filter:function(a){return!this.rule(a)}});O=z(aa,{className:d+".Split",subsetClass:Q,subsetWrapperClass:ca,keyMap:null,map:function(a){return this.keyMap.resolve(a)},rule:M(I),setRule:function(a){a=M(a||I);if(this.rule!==a){var b=this.rule;this.rule=a;this.keyMap.keyGetter=a;this.emit_ruleChanged(b);return this.applyRule()}},addMemberRef:function(a,b){a.dataset.emit_itemsChanged({inserted:[b]})},
removeMemberRef:function(a,b){a.dataset.emit_itemsChanged({deleted:[b]})},init:function(){this.keyMap&&0!=this.keyMap instanceof la||(this.keyMap=x(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));aa.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){aa.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});T=z(da,{className:d+".Slice",rule:M(c),emit_ruleChanged:k("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:B(function(a){var b=
this.sourceMap_[a.basisObjectId];a=this.rule(a);var c=this.index_;if(a!==b.value){var d=A(c,b),l=c[d-1],h=c[d+1];b.value=a;if(l&&(l.value>a||l.value==a&&l.object.basisObjectId>b.object.basisObjectId)||h&&(h.value<a||h.value==a&&h.object.basisObjectId<b.object.basisObjectId))c.splice(d,1),c.splice(A(c,b),0,b),this.applyRule()}},"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.index_,l=this.ruleEvents,
h=!1,g=!1,k,n=b.inserted,t=b.deleted;if(t){t.length>d.length-t.length&&(h=!0,g=t.length!=d.length,d.length=0);for(var p=0,r;r=t[p];p++)h||(k=c[r.basisObjectId],d.splice(A(d,k),1)),delete c[r.basisObjectId],l&&r.removeHandler(l,this);if(g)for(var v in c)k=c[v],d.splice(A(d,k),0,k)}if(n){g=!d.length;for(p=0;r=n[p];p++)k={object:r,value:this.rule(r)},c[r.basisObjectId]=k,g?d.push(k):d.splice(A(d,k),0,k),l&&r.addHandler(l,this);g&&d.sort(J)}this.applyRule()}}},emit_rangeChanged:k("rangeChanged","oldOffset",
"oldLimit"),init:function(){this.index_=[];da.prototype.init.call(this)},setRange:function(a,b){var c=this.offset,d=this.limit,l=!1;if(c!=a||d!=b)this.offset=a,this.limit=b,l=this.applyRule(),this.emit_rangeChanged(c,d);return l},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},setRule:function(a,b){a=M(a||c);b=!!b;if(this.rule!=a||this.orderDesc!=b){var d=this.rule,l=this.orderDesc;if(this.rule!=a){for(var h=this.index_,g=0;g<h.length;g++)h[g].value=
a(h[g].object);h.sort(J);this.rule=a}this.orderDesc=b;this.rule=a;this.emit_ruleChanged(d,l);return this.applyRule()}},applyRule:function(){var a=this.offset,b=a+this.limit;this.orderDesc&&(a=this.index_.length-b,b=a+this.limit);for(var c=n(this.members_),d=this.index_.slice(Math.max(0,a),Math.max(0,b)),l=[],h,g=0,k;k=d[g];g++){var t=k.object.basisObjectId;c[t]?delete c[t]:(l.push(k.object),this.members_[t]=k.object)}for(t in c)delete this.members_[t];if(this.left_)for(var p in this.left_)k=this.index_[this.orderDesc?
b+Number(p)-1:a-Number(p)],this.left_[p].set(k?k.object:null);if(this.right_)for(p in this.right_)k=this.index_[this.orderDesc?a-Number(p):b+Number(p)-1],this.right_[p].set(k?k.object:null);(h=E(l,D(c)))&&this.emit_itemsChanged(h);return h},left:function(a){a=parseInt(a,10)||0;this.left_||(this.left_={});var b=this.left_[a];if(!b){var b=this.offset,c=b+this.limit;this.orderDesc&&(b=this.index_.length-c,c=b+this.limit);b=this.index_[this.orderDesc?c+a-1:b-a];b=this.left_[a]=new P({value:b?b.object:
null})}return b},right:function(a){a=parseInt(a,10)||0;this.right_||(this.right_={});var b=this.right_[a];if(!b){var b=this.offset,c=b+this.limit;this.orderDesc&&(b=this.index_.length-c,c=b+this.limit);b=this.index_[this.orderDesc?b-a:c+a-1];b=this.right_[a]=new P({value:b?b.object:null})}return b},destroy:function(){da.prototype.destroy.call(this);if(this.left_){for(var a in this.left_)this.left_[a].destroy();this.left_=null}if(this.right_){for(a in this.right_)this.right_[a].destroy();this.right_=
null}this.index_=null}});z=z(da,{className:d+".Cloud",subsetClass:Q,subsetWrapperClass:ca,rule:M(I),ruleEvents:B(function(a){var b=this.sourceMap_,c=this.members_,d=a.basisObjectId,l=b[d].list,b=b[d].list={},d=this.rule(a),h,g=[],k=[],n;if(Array.isArray(d))for(var t=0;t<d.length;t++)(n=this.keyMap.get(d[t],!0))&&!n.has(a)&&(p=n.basisObjectId,b[p]=n,l[p]||(n.dataset.emit_itemsChanged({inserted:[a]}),c[p]?c[p]++:(g.push(n),c[p]=1)));for(var p in l)b[p]||(n=l[p],n.dataset.emit_itemsChanged({deleted:[a]}),
--c[p]||(delete c[p],k.push(n)));(h=E(g,k))&&this.emit_itemsChanged(h)},"update"),keyMap:null,map:a,listen:{source:{itemsChanged:function(a,b){var c=this.sourceMap_,d=this.members_,l=this.ruleEvents,h,g,k,n=[],p=[];oa(!0);if(h=b.inserted)for(var t=0,r;r=h[t];t++){var v=this.rule(r),H={object:r,list:{}};c[r.basisObjectId]=H;if(Array.isArray(v))for(var y=0,D={};y<v.length;y++)(g=this.keyMap.get(v[y],!0))&&!D[g.basisObjectId]&&(k=g.basisObjectId,D[k]=!0,H.list[k]=g,g.dataset.emit_itemsChanged({inserted:[r]}),
d[k]?d[k]++:(n.push(g),d[k]=1));l&&r.addHandler(l,this)}if(h=b.deleted)for(t=0;r=h[t];t++){g=r.basisObjectId;v=c[g].list;delete c[g];for(k in v)g=v[k],g.dataset.emit_itemsChanged({deleted:[r]}),--d[k]||(delete d[k],p.push(g));l&&r.removeHandler(l,this)}oa(!1);(b=E(n,p))&&this.emit_itemsChanged(b)}}},init:function(){this.keyMap&&0!=this.keyMap instanceof la||(this.keyMap=x(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));da.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,
b)},destroy:function(){da.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});ca=function(a,b){var c=b.inserted,d=b.deleted;c&&(c=w(this,c,a));d&&(d=l(this,d,a));(b=E(c,d))&&this.emit_itemsChanged(b)};var pa={itemsChanged:ca,destroy:function(a){for(var b=this.sourceMap_,c=b[a.basisObjectId];c=c.ref;)b[c.object.basisObjectId].value=null;delete b[a.basisObjectId]}};d=da.subclass({className:d+".Extract",rule:M(I),emit_ruleChanged:k("ruleChanged","oldRule"),ruleEvents:B(function(a){var b=
this.sourceMap_[a.basisObjectId],c=this.rule(a)||null,d=b.value,h,g,k;if(c!==d){if(c instanceof V||c instanceof Q)h=w(this,c,a);d&&(g=l(this,d,a));b.value=c;(k=E(h,g))&&this.emit_itemsChanged(k)}},"update"),listen:{source:{itemsChanged:ca}},setRule:function(a){a=M(a||I);if(this.rule!==a){var b=this.rule;this.rule=a;this.emit_ruleChanged(b);return this.applyRule()}},applyRule:function(){var a={},b={},c,d;for(d in this.sourceMap_){var h=this.sourceMap_[d],g=h.source;if(g instanceof V){var k=this.rule(g)||
null,n=h.value;if(k!==n){if(k instanceof V||k instanceof Q)for(var t=w(this,k,g),p=0;p<t.length;p++){var r=t[p],v=r.basisObjectId;b[v]?delete b[v]:a[v]=r}if(n)for(g=l(this,n,g),p=0;p<g.length;p++)r=g[p],v=r.basisObjectId,a[v]?delete a[v]:b[v]=r;h.value=k}}}(c=E(D(a),D(b)))&&this.emit_itemsChanged(c);return c}});U.exports={getDelta:E,createRuleEvents:B,Merge:Y,Subtract:g,SourceDataset:da,MapFilter:aa,Filter:b,Split:O,Extract:d,Slice:T,Cloud:z}},"j.js":function(d,U,b,k,g,z,O,T,ca){d=this.path;var E=
b.cleaner;k=b.require("./e.js");var B=k.AbstractData,x=k.Value,A=k.ReadOnlyValue,J=k.STATE;k=x.subclass({className:d+".Property",extendConstructor_:!1,init:function(b,d,l){this.value=b;this.handler=d;this.proxy=l;x.prototype.init.call(this)}});g=J.priority;var F={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(b){this.remove(b)}},w=b.asap.schedule(function(b){b.update()});g=x.subclass({className:d+".ObjectSet",objects:null,
value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:g,stateChanged_:!0,init:function(){x.prototype.init.call(this);var b=this.objects;this.objects=[];b&&Array.isArray(b)&&(this.lock(),this.add.apply(this,b),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var d=0,l=arguments.length;d<l;d++){var g=arguments[d];g instanceof B&&b.array.add(this.objects,g)&&g.addHandler(F,this)}this.fire(!0,
!0)},remove:function(d){b.array.remove(this.objects,d)&&d.removeHandler(F,this);this.fire(!0,!0)},clear:function(){for(var b=0,d;d=this.objects[b];b++)d.removeHandler(F,this);this.objects.length=0;this.fire(!0,!0)},fire:function(b,d){this.locked||(this.valueChanged_=this.valueChanged_||!!b,this.stateChanged_=this.stateChanged_||!!d,(this.valueChanged_||this.stateChanged_)&&w.add(this))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var b=this.valueChanged_,d=
this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;w.remove(this);if(!E.globalDestroy&&(b&&this.set(this.calculateValue()),d))if(b=this.objects.length){for(var d=-2,l,g=0;g<b;g++){var a=this.objects[g],c=this.statePriority.indexOf(String(a.state));c>d&&(l=a,d=c)}l&&this.setState(l.state,l.state.data)}else this.setState(J.UNDEFINED)},destroy:function(){this.lock();this.clear();w.remove(this);x.prototype.destroy.call(this)}});var l=function(){w.add(this)},y=function(){this.destroy()},D=function(b){return b.bindingBridge.get(b)};
d=A.subclass({className:d+".Expression",calc_:null,values_:null,extendConstructor_:!1,init:function(){A.prototype.init.call(this);var b=arguments.length-1,d=arguments[b];if("function"!=typeof d)throw Error(this.constructor.className+": Last argument of constructor must be a function");for(var g=Array(b),k=0;k<b;k++){var a=g[k]=arguments[k];if(!a.bindingBridge)throw Error(this.constructor.className+": bb-value required");a.bindingBridge.attach(a,l,this,y)}this.calc_=d;this.values_=g;this.update()},
update:function(){w.remove(this);x.prototype.set.call(this,this.calc_.apply(null,this.values_.map(D)))},destroy:function(){w.remove(this);for(var b=0,d;d=this.values_[b];b++)d.bindingBridge.detach(d,l,this);A.prototype.destroy.call(this)}});U.exports={Property:k,ObjectSet:g,Expression:d}},"k.js":function(d,U,b,k,g,z,O,T,ca){function E(a,b){if(!a.length)return 0;var c,d,f=0,l=a.length-1;do if(c=f+l>>1,d=a[c]||0,b<d)l=c-1;else if(b>d)f=c+1;else return b==d?c:0;while(f<=l);return c+(d<b)}function B(a){this.indexId=
a}function x(a,b,c){var d=a.indexCache_;a.lock();if(b)for(var f=0,l;l=b[f++];){var g=a.normalize(a.valueGetter(l));d[l.basisObjectId]=g;a.add_(g)}if(c)for(f=0;l=c[f++];)b=l.basisObjectId,a.remove_(d[b]),delete d[b];a.unlock()}function A(a,b){if(0==b instanceof B)throw"indexConstructor must be an instance of IndexConstructor";var c=a.basisObjectId,d=da[c];d||(d=da[c]={},a.addHandler(na),na.itemsChanged.call(a,a,{inserted:a.getItems()}));var c=b.indexId,f=d[c];if(!f){b=H[c];if(!b)throw"Wrong index constructor";
f=new b.indexClass;f.addHandler(G,a);d[c]=f;x(f,a.getItems())}return f}function J(a,b){var c=da[a.basisObjectId];if(c&&c[b.indexId]){delete c[b.indexId];b.removeHandler(G,a);for(var d in c)return;a.removeHandler(na);na.itemsChanged.call(a,a,{deleted:a.getItems()});delete da[a.basisObjectId]}}function F(){return"calc-index-preset-"+b.number.lead(pa++,8)}d=this.path;var w=b.Class,l=b.object.iterate;g=b.require("./e.js");var y=g.Value;k=g.Object;var D=g.ReadOnlyDataset,n=g.DatasetWrapper,r=g.resolveDataset;
g=b.require("./i.js");var p=g.MapFilter,M=g.createRuleEvents,a=w(y,{className:d+".Index",explicit:!1,wrapperCount:0,indexCache_:null,valueGetter:b.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};y.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,b){},normalize:function(a){return Number(a)||0},destroy:function(){y.prototype.destroy.call(this);this.indexCache_=null}});g=w(a,{className:d+".Sum",add_:function(a){this.value+=
a},remove_:function(a){this.value-=a},update_:function(a,b){this.set(this.value-b+a)}});z=w(a,{className:d+".Count",valueGetter:b.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,b){this.set(this.value-!!b+!!a)}});O=w(a,{className:d+".Avg",sum_:0,count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=a;--this.count_;this.value=this.count_?this.sum_/this.count_:
0},update_:function(a,b){this.sum_+=a-b;this.set(this.sum_/this.count_)}});T=w(a,{className:d+".VectorIndex",vectorGetter:b.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];a.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(E(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},remove_:function(a){null!==a&&(this.vector_.splice(E(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},update_:function(a,b){null!==b&&this.vector_.splice(E(this.vector_,
b),1);null!==a&&this.vector_.splice(E(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){a.prototype.destroy.call(this);this.vector_=null}});ca=w(T,{className:d+".Min",vectorGetter:function(a){return a[0]}});var c=w(T,{className:d+".Max",vectorGetter:function(a){return a[a.length-1]}}),v=w(a,{className:d+".Distinct",map_:null,init:function(){this.map_={};a.prototype.init.call(this)},add_:function(a){this.map_.hasOwnProperty(a)||
(this.map_[a]=0);1==++this.map_[a]&&(this.value+=1)},remove_:function(a){0==--this.map_[a]&&--this.value},update_:function(a,b){var c=0;this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(c+=1);0==--this.map_[b]&&--c;c&&this.set(this.value+c)},normalize:String,destroy:function(){a.prototype.destroy.call(this);this.map_=null}}),I={destroy:function(){y.prototype.set.call(this,this.initValue);this.index=null}},h=y.subclass({className:d+".IndexWrapper",extendConstructor_:!1,source:null,
dataset:null,datasetRA_:null,indexConstructor:null,index:null,init:function(a,c){this.source=a;this.indexConstructor=c;this.value=H[c.indexId].indexClass.prototype.value;y.prototype.init.call(this);a.bindingBridge.attach(a,b.fn.$undef,this,this.destroy);this.setDataset(a);this.source[c.indexId]=this},setDataset:function(a){var b=this.dataset;a=r(this,this.setDataset,a,"sourceRA_");if(a!==b){if(b=this.index)b.removeHandler(I,this),--b.wrapperCount,b.wrapperCount||b.explicit||b.destroy();a?(b=A(a,this.indexConstructor),
b.wrapperCount+=1,b.link(this,y.prototype.set),b.addHandler(I,this)):(b=null,y.prototype.set.call(this,this.initValue));this.dataset=a;this.index=b}},set:function(){},destroy:function(){this.source.bindingBridge.detach(this.source,b.fn.$undef,this);this.setDataset();y.prototype.destroy.call(this);delete this.source[this.indexConstructor.indexId];this.indexConstructor=this.source=null}}),t="basisjsIndexConstructor"+b.genUID(),H={},G={destroy:function(a){J(this,a)}},P=function(c,d){return function(f,
l,g){if("function"==typeof f||"string"==typeof f)g=l,l=f,f=null;g||(g=l,l="");g=g||d;if(!w.isClass(c)||!c.isSubclassOf(a))throw"Wrong class for index constructor";g=b.getter(g);l=l||"update";if("string"!=typeof l)throw"Events must be a event names space separated string";l=l.trim().split(" ").sort();var k=t+[c.basisClassId_,g[b.getter.ID],l].join("_"),p=H[k];if(p)g=p.owner;else{for(var v={},p=0;p<l.length;p++)v[l[p]]=!0;p=new B(k);H[k]={owner:p,indexClass:c.subclass({indexId:k,updateEvents:v,valueGetter:g})};
g=p}return f?f instanceof D||f instanceof n?(f=A(f,g),f.explicit=!0,f):f.bindingBridge?f[g.indexId]||new h(f,g):null:g}},V=P(z,b.fn.$true),la=P(g),Q=P(O),ma=P(ca),N=P(c),oa=P(v),Y={"*":function(a){var b,c,d=a.type,f=a.sender,l=f.basisObjectId,g=da[this.basisObjectId],h;for(h in g)c=g[h],c.updateEvents[d]&&(a=c.indexCache_[l],b=c.normalize(c.valueGetter(f)),b!==a&&(c.update_(b,a),c.indexCache_[l]=b))}},na={itemsChanged:function(a,b){var c;if(c=b.inserted)for(var d=c.length;0<d--;)c[d].addHandler(Y,
this);if(c=b.deleted)for(d=c.length;0<d--;)c[d].removeHandler(Y,this);c=da[this.basisObjectId];for(var f in c)x(c[f],b.inserted,b.deleted)},destroy:function(){var a=da[this.basisObjectId],b;for(b in a){var c=a[b];J(this,c);c.destroy()}}},da={},aa=b.asap.schedule(function(a){a.recalc()}),pa=1,f=w(null,{className:d+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:b.fn.$null});d=w(p,{className:d+".IndexMap",calcs:null,copyDataFromSource:!0,indexes:null,indexValues:null,indexUpdated:!1,itemClass:k,
map:function(a){var b=this.getMember(a);if(!b){var b={},c;for(c in this.calcs)b[c]=this.calcs[c](a.data,this.indexValues,a);if(this.copyDataFromSource)for(var d in a.data)this.calcs.hasOwnProperty(d)||(b[d]=a.data[d]);b=new this.itemClass({source:a,data:b})}return b},addMemberRef:function(a){this.listen.member&&a.addHandler(this.listen.member,this)},removeMemberRef:function(a){this.listen.member&&a.removeHandler(this.listen.member,this);a.source=null;a.destroy()},ruleEvents:M(function(a){p.prototype.ruleEvents.update.call(this,
a);this.sourceMap_[a.basisObjectId].updated=!0;this.scheduleRecalc()},"update"),init:function(){var a=this.indexes;this.indexes={};this.indexValues={};var b=this.calcs;this.calcs={};p.prototype.init.call(this);l(a,this.addIndex,this);for(var c in b)a=b[c],a instanceof f&&(l(a.indexes,this.addIndex,this),a=a.calc),this.calcs[c]=a;this.itemCount&&this.recalc()},addIndex:function(a,b){if(0!=b instanceof B&&!this.indexes[a]){var c=new h(y.from(this,"sourceChanged","source"),b);this.indexes[a]=c;this.indexValues[a]=
c.value;c.link(this,function(b){this.indexValues[a]=b;this.indexUpdated=!0;this.scheduleRecalc()})}},removeIndex:function(a){var b=this.indexes[a];b&&(delete this.indexes[a],delete this.indexValues[a],b.destroy())},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},scheduleRecalc:function(){aa.add(this)},recalc:function(){for(var a in this.sourceMap_)this.calcMember(this.sourceMap_[a]);this.indexUpdated=!1;aa.remove(this)},
calcMember:function(a){var b=a.member;if(a.updated||this.indexUpdated){var c=a.sourceObject,d={},f,l,g,h;for(h in this.calcs)f=this.calcs[h](c.data,this.indexValues,c),l=b.data[h],l===f||f!==f&&l!==l||(d[h]=f,g=!0);if(this.copyDataFromSource){for(var k in c.data)this.calcs.hasOwnProperty(k)||(f=c.data[k],l=b.data[k],l===f||f!==f&&l!==l||(d[k]=f,g=!0));for(k in b.data)this.calcs.hasOwnProperty(k)||c.data.hasOwnProperty(k)||(d[k]=void 0,g=!0)}g&&b.update(d);a.updated=!1}},getMember:function(a){return(a=
a&&this.sourceMap_[a.basisObjectId])?a.member:null},destroy:function(){l(this.indexes,this.removeIndex,this);p.prototype.destroy.call(this);aa.remove(this);this.indexValues=this.indexes=this.calcs=null}});U.exports={IndexConstructor:B,createIndexConstructor:P,getDatasetIndex:A,removeDatasetIndex:J,Index:a,Count:z,Sum:g,Avg:O,VectorIndex:T,Min:ca,Max:c,Distinct:v,count:V,sum:la,avg:Q,max:N,min:ma,distinct:oa,CalcIndexPreset:f,percentOfRange:function(a,c){var d="min_"+F(),l="max_"+F(),g={};g[d]=ma(a,
c);g[l]=N(a,c);c=b.getter(c||a);var h=function(a,b,e){return(c(e)-b[d])/(b[l]-b[d])};return h.preset=new f({indexes:g,calc:h})},percentOfMax:function(a,c){var d="max_"+F(),l={};l[d]=N(a,c);c=b.getter(c||a);var g=function(a,b,e){return c(e)/b[d]};return g.preset=new f({indexes:l,calc:g})},percentOfSum:function(a,c){var d="sum_"+F(),l={};l[d]=la(c,a);a=b.getter(a||c);var g=function(b,c,f){return a(f)/c[d]};return g.preset=new f({indexes:l,calc:g})},IndexMap:d}},"l.js":function(d,U,b,k,g,z,O,T,ca){function E(d){return new Function("data",
"return {"+b.object.iterate(d,function(b,d){b=b.replace(/"/g,'\\"');d=d.replace(/"/g,'\\"');return'"'+b+'": data["'+d+'"]'})+"}")}function B(b){this.host.setSource(this.name,b)}d=this.path;k=b.require("./2.js").create;var x=b.require("./e.js").SUBSCRIPTION,A=b.require("./e.js").Object,J=b.require("./e.js").resolveObject;x.add("OBJECTSOURCE",{sourceChanged:function(b,d,g){g&&x.unlink("sources",b,g);b.sources[d]&&x.link("sources",b,b.sources[d])}},function(b,d){var g=d.sources,k;for(k in g)b("sources",
d,g[k])});var F={update:function(b,d){var g=this.host.fields,k={};if(this.name==g.defaultSource)for(var r in d)0==r in g.fieldSource&&(k[r]=b.data[r]);else for(r in d){var p=g.fromNames[this.name][r];p&&this.host.fields.fieldSource[p]==this.name&&(k[p]=b.data[r])}for(r in k)return this.host.update(k)},destroy:function(){this.host.setSource(this.name,null)}},w=function(b){var d={},g={},k={},r={defaultSource:!1,fieldSource:{},toNames:g,fromNames:k,sources:d,__extend__:w};b["*"]&&(r.defaultSource=b["*"]);
for(var p in b){var F=b[p].split(":"),a=F.shift(),F=F.length?F.join(":"):p;a==r.defaultSource||"-"==a&&F!=p||(g[a]||(g[a]={},k[a]={}),g[a][p]=F,k[a][F]=p,r.fieldSource[p]=a)}for(a in g)d[a]=E(g[a]);r.defaultSource&&(d[r.defaultSource]=function(a){var b={},d;for(d in a)0==d in r.fieldSource&&(b[d]=a[d]);return b});return r};d=A.subclass({className:d+".Merge",subscribeTo:A.prototype.subscribeTo+x.OBJECTSOURCE,emit_sourceChanged:k("sourceChanged","name","oldSource"),fields:w({"*":"-"}),sources:null,
sourcesContext_:null,delta_:null,init:function(){var b=this.data,d=this.sources;this.delegate=null;if(b&&"-"in this.fields.sources)if("-"!==this.fields.defaultSource)this.data=this.fields.sources["-"](b);else{this.data={};for(var g in b)"-"==(this.fields.fieldSource[g]||this.fields.defaultSource)&&(this.data[g]=b[g])}else this.data={};A.prototype.init.call(this);this.sources={};this.sourcesContext_={};d&&this.setSources(d)},update:function(b){if(this.delta_)for(var d in b){var g=this.fields.fieldSource[d]||
this.fields.defaultSource;if(g){var k=g!=this.fields.defaultSource?this.fields.toNames[g][d]:d;b=this.sources[g].data[k];b!==this.data[d]&&(0==d in this.delta_?this.delta_[d]=this.data[d]:this.delta_[d]===b&&delete this.delta_[d],this.data[d]=b)}}else{var r,p={};this.delta_=p;for(d in b)if(g=this.fields.fieldSource[d]||this.fields.defaultSource)"-"==g?(p[d]=this.data[d],this.data[d]=b[d]):this.sources[g]&&(k=g!=this.fields.defaultSource?this.fields.toNames[g][d]:d,this.sources[g].data[k]!==b[d]?(r||
(r={}),0==g in r&&(r[g]={}),r[g][k]=b[d]):this.data[d]!==b[d]&&(p[d]=this.data[d],this.data[d]=b[d]));if(r)for(g in r)this.sources[g].update(r[g]);this.delta_=null;for(d in p)return this.emit_update(p),p;return!1}},setDelegate:function(){},setSource:function(b,d){var g=this.sources[b];if(0!=b in this.fields.sources&&"-"!=b&&(0==b in this.sourcesContext_&&(this.sourcesContext_[b]={host:this,name:b,adapter:null}),d=J(this.sourcesContext_[b],B,d,"adapter",this),g!==d)){var k=this.listen["source:"+b];
g&&(k&&g.removeHandler(k,this),g.removeHandler(F,this.sourcesContext_[b]));if(this.sources[b]=d){d.addHandler(F,this.sourcesContext_[b]);k&&d.addHandler(k,this);k=this.fields.sources[b](d.data);if(this.fields.defaultSource==b)for(var r in this.data)this.fields.fieldSource.hasOwnProperty(r)||k.hasOwnProperty(r)||(k[r]=void 0);this.update(k)}this.emit_sourceChanged(b,g)}},setSources:function(b){b||(b={});for(var d in this.fields.sources)this.setSource(d,b[d])},destroy:function(){this.setSources();this.sourcesContext_=
this.sources=null;A.prototype.destroy.call(this)}});U.exports={Merge:d}},"m.js":function(d,U,b,k,g,z,O,T,ca){function E(a){f[a]=f[a]||0;return a+f[a]++}function B(a,b){var c=q[a];if(c){for(var d=0,f;f=c[d];d++)f[0][f[1]]=b;delete q[a]}e[a]=b}function x(a,b,c){if(e[a])return e[a];var d=q[a];d||(d=q[a]=[]);d.push([b,c]);return function(b,c){var d=e[a];if(d)return d(b,c)}}function A(){var a=G(arguments),b=a.pop(),c=a[0],d=a[1],e=a[2],f;if("function"!=typeof b)throw"Last argument for calculate field constructor must be a function";
switch(a.length){case 0:f=function(){return b()};break;case 1:f=function(a,d,e){return c in a?b(d[c]):e};break;case 2:f=function(a,e,s){return c in a||d in a?b(e[c],e[d]):s};break;case 3:f=function(a,f,s){return c in a||d in a||e in a?b(f[c],f[d],f[e]):s};break;default:f=function(c,d,e){for(var f=!1,g=[],l=0,h;h=a[l];l++)f=f||h in c,g.push(d[h]);return f?b.apply(null,g):e}}f.args=a;return f.calc=f}function J(a){return 1==arguments.length?function(b,c,d){return a in b?null!=c[a]?String(c[a]):null:
d}:A.apply(null,G(arguments).concat(function(){for(var a=arguments.length-1;0<=a;a--)if(null==arguments[a])return null;return Array.prototype.join.call(arguments,"-")}))}function F(a,b){var c={},d;a&&a.length&&(d=c.inserted=a);b&&b.length&&(d=c.deleted=b);if(d)return c}function w(a,b,c){var d=["has"],e=[v],f=[],g;for(g in a)if(v.call(a,g)){var l='"'+g.replace(/"/g,'"')+'"';if(v.call(c,g))f.push(l+":undefined");else{var s="v"+f.length,h="f"+f.length,k=a[g];d.push(s,h);e.push(k,b[g]);f.push(l+":"+h+
"(has.call(data,"+l+")?data["+l+"]:"+s+("function"==typeof k?"(data)":"")+")")}}a=f.sort().join(",");(b=Z[a])||(b=Z[a]=new Function(d,"return function(data){return {"+a+"};};"));return b.apply(null,e)}function l(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;return b}function y(a,b){return"string"==typeof a&&a?qa(a):"number"==typeof a&&0==isNaN(a)?new Date(a):null==a?null:a&&a.constructor===Date?a:b||
null}function D(a,c,d){d="string"==typeof d||Array.isArray(d)||"function"==typeof d&&d.calc!==d?{type:d}:d?b.object.slice(d):{};if("type"in d){"string"==typeof d.type&&(d.type=x(d.type,a.fields,c));if(Array.isArray(d.type)){var e=d.type.slice();if(1==e.length)d.type=b.fn.$const(e[0]),d.defValue=e[0];else{var f;d.type=function(a,b){return a===f||-1!=e.indexOf(a)?a:void 0===b?f:b};f=-1!=e.indexOf(d.defValue)?d.defValue:e[0];d.defValue=f}}d.type===Array&&(d.type=l);d.type===Date&&(d.type=y);"function"!=
typeof d.type&&(d.type=null)}var g=d.type||H;if(d.id||d.index||-1!=[na,da,aa,pa].indexOf(g))a.idFields[c]=d;d.calc?(r(a,c,d.calc),a.fields[c]=xa):(a.fields[c]=g,a.aliases[c]=c);a.defaults[c]="defValue"in d?d.defValue:g();ta[c]||(ta[c]={destroy:function(){this.set(c,null)}})}function n(a,b,c){0!=c in a.fields&&(c in a.calcMap||b in a.aliases||(a.aliases[b]=c))}function r(a,c,d){var e=a.calcs,f=a.deps,g=d.args||[];d={args:g,wrapper:d};var l=a.calcs.length,h=0;if(g)for(var s=0,k;k=e[s];s++)-1!=g.indexOf(k.key)&&
(h=s+1);if(c){d.key=c;a.calcMap[c]=d;for(s=0;k=e[s];s++)if(-1!=k.args.indexOf(c)){l=s;break}if(h>l)return;f[c]=g.reduce(function(a,c){for(var d=f[c]||[c],e=0;e<d.length;e++)b.array.add(a,d[e]);return a},[]);for(var L in f)a=f[L].indexOf(c),-1!=a&&Array.prototype.splice.apply(f[L],[a,1].concat(f[c]))}else l=h;e.splice(Math.min(l,h),0,d)}function p(a){return function(b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]}}function M(a){return function(b,c){return this.set(a,b,
c)}}var a=this.path,c=b.Class,v=Object.prototype.hasOwnProperty,I=b.object.keys,h=b.object.extend,t=b.object.complete,H=b.fn.$self,G=b.array.from;d=b.require("./2.js");var P=d.Emitter;d=d.create;k=b.require("./e.js");var V=k.Object,la=k.Slot,Q=k.Dataset;g=b.require("./i.js");k=g.Filter;var ma=g.Split,N={},oa=[],Y={string:!0,number:!0},na=function(a){return null==a||isNaN(a)?null:Number(a)},da=function(a){return null==a||isNaN(a)?null:Number(a)},aa=function(a){return null==a||isNaN(a)?null:parseInt(a,
10)},pa=function(a){return null==a?null:String(a)},f={},e={},m={},q={},C=c(null,{className:a+".Index",items:null,init:function(){this.items={}},get:function(a,b){var c=v.call(this.items,a)&&this.items[a];if(c&&(!b||c.entityType===b))return c},add:function(a,b){if(b){var c=this.get(a);if(!c)return this.items[a]=b,!0;if(c!==b)throw"basis.entity: Value `"+a+"` for index is already occupied";}},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=null}}),
sa="wrapped"+b.genUID();z=function(a,b){return function(c){c&&!Array.isArray(c)&&(c=[c]);var d=c&&!c[sa];if(d){if(this.localId){var e=G(this.getItems());c=c.map(function(a){for(var b=0;b<e.length;b++)if(this.localId(a,e[b]))return this.wrapper(a,e[b]);a=this.wrapper(a);e.push(a);return a},this)}else c=c.map(this.wrapper);c[sa]=!0}var f=a.prototype[b].call(this,c);if(d&&(c[sa]=!1,this.localId&&f&&f.deleted)){Q.setAccumulateState(!0);for(c=0;c<f.deleted.length;c++)f.deleted[c].root&&f.deleted[c].destroy();
Q.setAccumulateState(!1)}return f}};g=function(a,b){return function(){this.name||(this.name=E(b));a.prototype.init.call(this)}};var u=c(Q,{className:a+".EntitySet",name:null,wrapper:H,init:g(Q,"EntitySet"),setAndDestroyRemoved:function(){return function(a){if(this.localId)return this.set(a);var c=b.object.slice(this.items_),d=!1,e=this.listen.item,f=[],g=[],l;if(a){Q.setAccumulateState(!0);for(var h=0;h<a.length;h++){var s=this.wrapper(a[h]);s&&(0==s.basisObjectId in c&&f.push(s),c[s.basisObjectId]=
!1)}a={itemsChanged:function(){d=!0}};this.addHandler(a);Q.setAccumulateState(!1);this.removeHandler(a)}for(var k in c)c[k]&&g.push(c[k]);if(!d&&(l=F(f,g))){if(e){if(l.deleted)for(h=0;h<l.deleted.length;h++)l.deleted[h].removeHandler(e,this);if(l.inserted)for(h=0;h<l.inserted.length;h++)l.inserted[h].addHandler(e,this)}this.emit_itemsChanged(l)}g.length&&this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:g});Q.setAccumulateState(!0);for(h=0;h<g.length;h++)g[h].destroy();Q.setAccumulateState(!1);
return f.length?f:null}}(Q),set:z(Q,"set"),add:z(Q,"add"),remove:z(Q,"remove"),clear:function(){var a=Q.prototype.clear.call(this);if(this.localId&&a&&a.deleted){Q.setAccumulateState(!0);for(var b=0;b<a.deleted.length;b++)a.deleted[b].destroy();Q.setAccumulateState(!1)}return a},destroy:function(){Q.prototype.destroy.call(this);this.wrapper=null}}),ka=c(u,{className:a+".ReadOnlyEntitySet",set:b.fn.$false,add:b.fn.$false,remove:b.fn.$false,clear:b.fn.$false});k=c(k,{className:a+".EntityCollection",
name:null,init:g(k,"EntityCollection")});g=c(ma,{className:a+".EntityGrouping",name:null,subsetClass:ka,init:g(ma,"EntityGrouping"),getSubset:function(a,b){var c=ma.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=this.wrapper);return c}});var ea=function(a,b,c){function d(a){if("string"==typeof a)return function(b,c){return b[a]==c.data[a]};if("function"==typeof a)return a}if(this instanceof ea){a||(a=H);if(!b||e[b])b=E("UntitledEntitySetType");var f=new X({entitySetClass:{wrapper:a,
localId:d(c&&c.localId)}}),g=f.entitySetClass,l=function(a,b){return null!=a?(0==b instanceof u&&(b=f.createEntitySet()),b.set(a instanceof Q?a.getItems():G(a)),b):null};"string"==typeof a&&(g.prototype.wrapper=x(a,g.prototype,"wrapper"));B(b,l);h(l,{type:f,typeName:b,toString:function(){return b+"()"},reader:function(a){if(Array.isArray(a)){var b=g.prototype.wrapper;return a.map(b.reader||b)}return a},extendClass:function(a){g.extend.call(g,a);return l},extendReader:function(a){var b=l.reader;l.reader=
function(c){Array.isArray(c)&&a(c);return b(c)};return l},entitySetType:f,extend:function(){return g.extend.apply(g,arguments)}});return l}},X=c(null,{className:a+".EntitySetConstructor",entitySetClass:u,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),ia=function(a){if(this instanceof ia){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){b&&b.entityType===c||(b=null);if(a===b||a.entityType===c)return a;
var e,f=c.idField;if(Y[typeof a]){if(!f)return;if(b=c.index.get(a,c))return b;e=a;a={};a[f]=e}else c.compositeKey&&(e=c.compositeKey(a,a)),null!=e&&(b=c.index.get(e,c));b&&b.entityType===c?b.update(a):b=new d(a);return b}};var c=new ba(a||{},b),d=c.entityClass,e=c.name;B(e,b);h(b,{all:c.all,type:c,typeName:e,toString:function(){return e+"()"},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},reader:function(a){return c.reader(a)},readList:function(a,c){if(!a)return[];Array.isArray(a)||
(a=[a]);"function"!=typeof c&&(c=H);for(var d=0;d<a.length;d++)a[d]=b(b.reader(c(a[d],d)));return a},extendClass:function(a){d.extend.call(d,a);return b},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&"object"==typeof b&&a(b);return c(b)};return b},entityType:c,extend:function(){return d.extend.apply(d,arguments)}});return b}},ta={},Z={},xa=function(a,b){return b},va=/\D/,Aa=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,qa=function(){function a(c,d,e,f,g,l,s){c=new Date(c,d-1,e,f||0,0,l||
0,s?s.substr(0,3):0);c.setMinutes((g||0)-b-c.getTimezoneOffset());return c}var b;return function(c){b=0;return a.apply(null,String(c||"").replace(Aa,function(a,c,d,e){b=60*Number(d||0)+Number(e||0);return c}).split(va))}}(),ba=c(null,{className:a+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(a,b){this.name=
a.name;if(!this.name||e[this.name])this.name=E("UntitledEntityType");this.fields={};this.calcs=[];this.calcMap={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var c=a.index;c&&c instanceof C&&(this.index=c);this.wrapper=b;if(0=="all"in a||a.all||a.singleton)this.all=new ka(t({wrapper:b},a.all));if(this.singleton=!!a.singleton){var d;this.get=function(){return d};this.all.addHandler({itemsChanged:function(a,b){d=b.inserted?b.inserted[0]:null}},this)}for(var f in a.fields)D(this,
f,a.fields[f]);for(f in a.aliases)n(this,f,a.aliases[f]);a.constrains&&a.constrains.forEach(function(a){r(this,null,a)},this);this.calcs.length||(this.calcs=null);var g={};if(I(this.idFields).length){for(var l in this.idFields){var c=this.idFields[l].index,h;c&&0!=c instanceof C||("string"==typeof c?(0==c in m&&(m[c]=new C),c=m[c]):(this.index||(this.index=new C),c=this.index));(h=g[c.basisObjectId])||(h=g[c.basisObjectId]={index:c,fields:[]});h.fields.push(l);this.idFields[l]=h}this.index&&0==this.index.basisObjectId in
g&&(this.index=null);for(var s in g)h=g[s],h.property="__id__"+s,h.compositeKey=J.apply(null,h.fields),1==h.fields.length&&(h.idField=h.fields[0]);c=I(g);c=g[this.index?this.index.basisObjectId:c[0]];this.index=c.index;this.idField=c.idField;this.compositeKey=c.compositeKey;this.idProperty=c.property;this.indexes=g}else this.index&&(this.index=null);g={};for(f in this.defaults)g[f]=void 0;this.entityClass=ja(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:b,typeName:this.name,
generateData:w(this.defaults,this.fields,this.calcMap),initDelta:g});for(var k in this.fields)this.entityClass.prototype["get_"+k]=p(k),this.fields[k]!==xa&&(this.entityClass.prototype["set_"+k]=M(k));oa.push(this)},reader:function(a){var b={};if(Y[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=this.aliases[c];if(d){var e=this.fields[d].reader;b[d]=e?e(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(this.index&&null!=a)return this.index.get(a,this)},
getId:function(a){if(this.compositeKey&&null!=a){if(Y[typeof a])return a;if(a&&a.entityType===this)return a[this.idProperty];a instanceof V&&(a=a.data);if(this.compositeKey)return this.compositeKey(a,a)}},getSlot:function(a){var b=this.getId(a);if(null!=b){var c=v.call(this.slots,b)&&this.slots[b];c||(Y[typeof a]&&(c={},this.idField&&(c[this.idField]=a),a=c),c=this.slots[b]=new la({delegate:this.get(b)||null,data:a}));return c}}}),K=c(V,{className:a+".BaseEntity",target:!0,setDelegate:function(){},
extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:d("rollbackUpdate")}),ja=function(a,d,e,f){function g(b,c,d){var e=a.calcs,f=b.data,l=!1;try{if(e)for(var k=0,m;m=e[k];k++){var t=m.key,p=f[t],n=m.wrapper(c,f,p);t&&n!==p&&(c[t]=p,f[t]=n,l=!0)}for(var q in a.indexes){var v=a.indexes[q],r=b[v.property],e=r;v.compositeKey&&(e=v.compositeKey(c,f,r));e!==r&&(h(v.index,b,r,e),b[v.property]=e)}return l}catch(H){for(t in c)b.data[t]=c[t];d&&!b.modified&&(b.modified=d)}}function h(a,
b,c,d){null!=d&&(a.add(d,b),v.call(f,d)&&f[d].setDelegate(b));null!=c&&(a.remove(c,b),v.call(f,c)&&f[c].setDelegate())}return c(K,{className:a.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return V.prototype.isSyncRequired.call(this)&&(!a.idProperty||null!=this[a.idProperty])},init:function(a){this.delegate=null;this.data=this.generateData(a);K.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof P&&(a.addHandler(ta[b],
this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);g(this,this.initDelta);d&&d.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[a.idProperty]},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(b,c,d,f){var h=e[b];if(!h)return!1;var k,m=this.modified;h===l&&m&&b in m&&(c=l(c,m[b]));c=h(c,this.data[b]);h=
this.data[b];if(c===h||c&&h&&c.constructor===Date&&h.constructor===Date&&+c===+h)!d&&m&&b in m&&(k={rollback:{key:b,value:m[b]}},delete m[b],I(m).length||(this.modified=null));else a:{k={};if(!a.idFields[b])if(d)m||(this.modified=m={}),!1===b in m?(k.rollback={key:b,value:void 0},m[b]=h):m[b]===c&&(k.rollback={key:b,value:c},delete m[b],I(m).length||(this.modified=null));else if(m&&b in m)if(m[b]!==c){k.rollback={key:b,value:m[b]};m[b]=c;break a}else return!1;this.data[b]=c;this.fieldHandlers_&&this.fieldHandlers_[b]&&
(h.removeHandler(ta[b],this),this.fieldHandlers_[b]=!1);c&&c!==this&&c instanceof P&&(c.addHandler(ta[b],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);k.key=b;k.value=h;k.delta={};k.delta[b]=h}if(!f&&k){b=k.key;d=k.delta||{};var t;k.rollback&&(t={},t[k.rollback.key]=k.rollback.value);g(this,d,t)&&(b=!0);b&&(this.emit_update(d),k.delta=d);t&&this.emit_rollbackUpdate(t)}return k||!1},update:function(a,b){var c=!1,d={};if(a){var e,f,h;for(h in a)if(f=this.set(h,a[h],
b,!0))f.key&&(c=!0,d[f.key]=f.value),f.rollback&&(e||(e={}),e[f.rollback.key]=f.rollback.value);g(this,d,e)&&(c=!0);c&&this.emit_update(d);e&&this.emit_rollbackUpdate(e)}return c?d:!1},read:function(a){return this.update(this.type.reader(a))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},
rollback:function(c){var d=this.modified;d&&c&&(Array.isArray(c)||(c=[c]),d=b.object.slice(d,c.reduce(function(b,c){return b.concat(a.deps[c]||c)},[])));this.update(d,!0)},destroy:function(){if(this.fieldHandlers_){for(var b in this.fieldHandlers_)this.fieldHandlers_[b]&&this.data[b].removeHandler(ta[b],this);this.fieldHandlers_=null}for(b in a.indexes){var c=a.indexes[b],e=this[c.property];null!=e&&h(c.index,this,e,null)}d&&d.has(this)&&d.emit_itemsChanged({deleted:[this]});V.prototype.destroy.call(this);
this.data=N;this.modified=null}})};U.exports={isEntity:function(a){return a&&a instanceof K},createType:function(a,c){var d=a||{};"string"==typeof a?d={name:d,fields:c||{}}:c&&(d=b.object.merge(d,{fields:c}));return new ia(d)},createSetType:function(a,c,d){switch(arguments.length){case 0:case 1:a&&a.constructor===Object?(d=b.object.slice(a),c=b.object.splice(d).type,a=b.object.splice(d).name):(c=a,a=void 0);break;case 2:c&&c.constructor===Object&&(d=c,c=a,a=void 0)}return new ea(c,a,d)},validate:function(){for(var c in q)b.dev.warn(a+
": type `"+c+"` is not defined, but used by "+q[c].length+" type(s)")},getTypeByName:function(a){return e[a]},getIndexByName:function(a){return m[a]},is:function(a,b){var c;"string"==typeof b&&(b=e[b]);c=b&&b.type&&b.type.entityClass;return a&&c?a instanceof c:!1},get:function(a,b){var c=e[a];if(c)return c.get(b)},resolve:function(a,b){var c=e[a];if(c)return c(b)},getByIndex:function(a,b){if(a in m)return m[a].get(b)},NumericId:na,NumberId:da,IntId:aa,StringId:pa,Index:C,CalculateField:A,ConcatStringField:J,
calc:A,EntityType:ia,Entity:ja,BaseEntity:K,EntitySetType:ea,EntitySet:u,ReadOnlyEntitySet:ka,Collection:k,Grouping:g}},"n.js":function(d,U,b,k,g,z,O,T,ca){function E(){var a=b.fn.publicCallback(function(b){p[a]=b});return a}function B(a){var b=p[a];delete p[a];return b}function x(a){delete p[a];delete k[a]}function A(a,b){var d,g;d=!1;if("number"!=typeof a){if(!a||this.script!==a.target)return;a=(d=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?4:3}if(a!=
this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);if(4==a){this.clearTimeout();this.script.onload=this.script.onerror=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;b?(this.emit_abort(),d=this.stateOnAbort):(this.processResponse(),this.isSuccessful()&&!d?(d=r.READY,this.emit_success(this.getResponseData())):(d=r.ERROR,g=this.getResponseError(),this.emit_failure(g)));this.emit_complete(this);var h=
this.callback;b?setTimeout(k[h]=function(){x(h)},3E5):x(h)}else d=r.PROCESSING;this.setState(d,g)}}d=this.path;var J=k.document,F=k.encodeURIComponent,w=b.object.extend,l=b.object.slice,y=b.object.merge;z=b.require("./o.js");g=z.createTransportEvent;O=z.createRequestEvent;var D=z.AbstractRequest,n=z.AbstractTransport,r=b.require("./e.js").STATE,p={};z=D.subclass({className:d+".Request",timeout:3E4,timer_:null,emit_readyStateChanged:O("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==
this.data.status},processResponse:function(){this.callback in p&&this.update({contentType:"application/javascript",data:B(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:b.fn.$true,prepareRequestData:function(a){var b=[],d=a.url;a=l(a);this.callback=E();for(var g in a.params){var h=a.params[g];null!=h&&null!=h.toString()&&b.push(F(g)+"="+F(h.toString()))}b.push(F(a.callbackParam)+"="+F(this.callback));
b=b.join("&");a.routerParams&&(d=d.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,c){return c in a.routerParams?a.routerParams[c]:b}));b&&(d+=(-1==d.indexOf("?")?"?":"&")+b);a.requestUrl=d;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!J)throw"JSONP is not supported for current environment";var b=J.head||J.getElementByName("head")[0]||J.documentElement,d=J.createElement("script");this.update({data:void 0,status:"",error:""});this.script=
d;d.async=!0;d.src=a.requestUrl;d.charset=a.encoding;d.onload=d.onerror=d.onreadystatechange=A.bind(this);this.prevReadyState_=-1;this.emit_start();A.call(this,0);this.setTimeout(this.timeout);b.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),A.call(this,4,!0))},setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},
timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();D.prototype.destroy.call(this)}});var M=n.subclass({className:d+".Transport",requestClass:z,emit_readyStateChanged:g("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",init:function(){n.prototype.init.call(this);this.params=l(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();
for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw Error("URL is not defined");w(a,{url:b,encoding:a.encoding||this.encoding,params:y(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||this.callbackParam});return a}});U.exports={Request:z,Transport:M,request:function(a,c,d){"string"==typeof a&&(a={url:a});
var g=new M(a);g.addHandler({success:c&&function(a,b,d){c(d)},failure:d&&function(a,b,c){d(c)},complete:function(){b.nextTick(function(){g.destroy()})}});g.request()}}},"o.js":function(d,U,b,k,g,z,O,T,ca){function E(b){var d=J(b);return function(){d.apply(D,arguments);this.service&&d.apply(this.service,arguments);d.apply(this,arguments)}}function B(b){var d=J(b);return function(){var a=[this].concat(x(arguments));this.transport?this.transport["emit_"+b].apply(this.transport,a):d.apply(D,a);d.apply(this,
arguments)}}d=this.path;var x=b.array.from,A=b.object.slice;k=b.require("./2.js");var J=k.create,F=k.Emitter,w=b.require("./e.js").Object,l=b.require("./e.js").STATE,y=[],D=new F({abort:function(){for(var b=x(y),d=0;d<b.length;d++)b[d].abort();return b},handler:{start:function(d){b.array.add(y,d.transport)},complete:function(d){b.array.remove(y,d.transport)}}});k=w.subclass({className:d+".AbstractRequest",requestData:null,transport:null,stateOnAbort:l.UNDEFINED,emit_start:B("start"),emit_timeout:B("timeout"),
emit_abort:B("abort"),emit_success:B("success"),emit_failure:B("failure"),emit_complete:B("complete"),abort:b.fn.$undef,doRequest:b.fn.$undef,destroy:function(){w.prototype.destroy.call(this);this.requestData=null}});var n={start:function(d,g){b.array.add(this.inprogressRequests,g)},complete:function(d,g){b.array.remove(this.inprogressRequests,g)}},r={complete:function(){var d=this.requestQueue.shift();d&&b.nextTick(function(){d.doRequest()})}};d=F.subclass({className:d+".AbstractTransport",requestClass:k,
stopped:!1,poolLimit:null,poolHashGetter:null,requests:null,requestQueue:null,inprogressRequests:null,stoppedRequests:null,emit_start:E("start"),emit_timeout:E("timeout"),emit_abort:E("abort"),emit_success:E("success"),emit_failure:E("failure"),emit_complete:E("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];F.prototype.init.call(this);this.addHandler(n,this);this.poolLimit&&this.addHandler(r,this)},getRequestByHash:function(b){b=this.poolHashGetter?this.poolHashGetter(b):
b.origin?b.origin.basisObjectId:"default";var d=this.requests[b];if(!d){var a;a:{for(a in this.requests)if(d=this.requests[a],d.isIdle()&&-1==this.requestQueue.indexOf(d)){delete this.requests[a];a=d;break a}a=void 0}d=a||new this.requestClass({transport:this});this.requests[b]=d}return d},prepare:b.fn.$true,prepareRequestData:b.fn.$self,request:function(b){if(this.prepare()){b=this.prepareRequestData(A(b));var d=this.getRequestByHash(b);d.requestData&&d.abort();d.requestData=b;!this.poolLimit||this.inprogressRequests.length<
this.poolLimit?d.doRequest():(this.requestQueue.push(d),d.setState(l.PROCESSING));return d}},abort:function(){for(var b;b=this.requestQueue.pop();)b.setState(l.ERROR);for(;b=this.inprogressRequests.pop();)b.abort()},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stopped){for(var b;b=this.stoppedRequests.pop();)this.request(b.requestData);this.stopped=!1}},destroy:function(){for(var b in this.requests)this.requests[b].destroy();
this.stoppedRequests=this.requestQueue=this.inprogressRequests=this.requests=null;F.prototype.destroy.call(this)}});U.exports={createTransportEvent:E,createRequestEvent:B,transportDispatcher:D,AbstractRequest:k,AbstractTransport:d}},"p.js":function(d,U,b,k,g,z,O,T,ca){function E(d,g){d.inprogressRequests=d.inprogressRequests.filter(function(b){return b.transport!==g});b.array.remove(d.inprogressTransports,g);-1!=d.inprogressTransports.indexOf(g)||d.stoppedTransports&&-1!=d.stoppedTransports.indexOf(g)||
g.removeHandler(A,d)}d=this.path;g=b.require("./2.js");k=g.create;var B=g.Emitter;g=b.require("./q.js").Transport;var x=b.require("./s.js").create,A={destroy:function(d){this.stoppedTransports&&b.array.remove(this.stoppedTransports,d);E(this,d)}},J={start:function(d,g){this.inprogressRequests.push(g);b.array.add(this.inprogressTransports,g.transport)&&g.transport.addHandler(A,this)},complete:function(d,g){b.array.remove(this.inprogressRequests,g);this.inprogressRequests.some(function(b){return b.transport===
this.transport},g)||E(this,g.transport)}};d=B.subclass({className:d+".Service",inprogressRequests:null,inprogressTransports:null,stoppedTransports:null,transportClass:g,emit_sessionOpen:k("sessionOpen"),emit_sessionClose:k("sessionClose"),emit_sessionFreeze:k("sessionFreeze"),emit_sessionUnfreeze:k("sessionUnfreeze"),secure:!1,prepare:b.fn.$true,signature:b.fn.$undef,isSessionExpiredError:b.fn.$false,init:function(){B.prototype.init.call(this);"isSecure"in this&&(this.secure=this.isSecure);this.inprogressRequests=
[];this.inprogressTransports=[];var d=this.transportClass;this.transportClass=d.subclass({service:this,secure:this.secure,emit_failure:function(g,l){d.prototype.emit_failure.call(this,g,l);this.secure&&this.service.isSessionExpiredError(g)&&(this.service.freeze(),this.service.stoppedTransports&&b.array.add(this.service.stoppedTransports,this)&&this.addHandler(A,this.service),this.stop())},init:function(){d.prototype.init.call(this);"needSignature"in this&&(this.secure=this.needSignature)},request:function(b){if(this.service.prepare(this,
b)&&(!this.secure||this.service.sign(this)))return d.prototype.request.call(this,b)}});this.addHandler(J)},sign:function(b){if(this.sessionKey)return this.signature(b,this.sessionData),!0},openSession:function(b,d){this.sessionKey=b;this.sessionData=d||b;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(b){return b.secure});
for(var b=0,d;d=this.inprogressTransports[b];b++)d.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports){for(var b=0,d;d=this.stoppedTransports[b];b++)d.resume();this.stoppedTransports=null}this.emit_sessionUnfreeze()},createTransport:function(b){return new this.transportClass(b)},createAction:function(d){return x(b.object.complete({service:this},d))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=this.inprogressRequests=
null;B.prototype.destroy.call(this)}});U.exports={Service:d}},"q.js":function(d,U,b,k,g,z,O,T,ca){function E(a,c){var d={};M.test(c.method)?A&&0!=c.body instanceof A||(d["Content-Type"]=c.contentType+(c.encoding?";charset="+c.encoding:"")):D.test("ie")&&(d["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");d=b.object.merge(d,c.headers);y(c.headers,function(a,b){"content-type"==a.trim().toLowerCase()?d["Content-Type"]=b:d[a]=b});y(d,function(b,c){null!=c&&"function"!=typeof c?a.setRequestHeader(b,
c):delete d[b]});return d}function B(a){var c=this.xhr,d;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);c&&("number"!=typeof a&&(a=c.readyState),a!=this.prevReadyState_&&(this.prevReadyState_=a,this.emit_readyStateChanged(a),4==a?(this.clearTimeout(),c.onreadystatechange=b.fn.$undef,(a=0==c.status)||c.responseType||(a="unknown"==typeof c.responseText||!c.responseText&&!c.getAllResponseHeaders()),a?(this.emit_abort(),c=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(c=p.READY,
this.emit_success(this.getResponseData())):(c=p.ERROR,d=this.getResponseError(),!d&&this.data.error&&(d=this.data.error),this.emit_failure(d))),this.emit_complete(this)):c=p.PROCESSING,this.setState(c,d)))}d=this.path;var x=k.encodeURIComponent,A=k.FormData,J=k.XMLHttpRequest,F=b.object.extend,w=b.object.slice,l=b.object.merge,y=b.object.iterate,D=b.require("./r.js");z=b.require("./o.js");g=z.createTransportEvent;O=z.createRequestEvent;var n=z.AbstractRequest,r=z.AbstractTransport,p=b.require("./e.js").STATE,
M=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,a=/^(HEAD|GET|POST|PUT|PATCH|DELETE|TRACE|LINK|UNLINK|CONNECT)\s+/i,c=/^application\/json/i,v="native",I=function(){if("XMLHttpRequest"in k)return function(){return new J};var a=k.ActiveXObject;if(a)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;v=b[c];c++)try{if(new a(v))return function(){return new a(v)}}catch(d){}throw Error(v="XMLHttpRequest is not supported!");}();z=n.subclass({className:d+".Request",requestStartTime:0,
timeout:3E4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:O("readyStateChanged"),init:function(){n.prototype.init.call(this);this.xhr=I()},isIdle:function(){return 4==this.xhr.readyState||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var a=this.xhr;
if(!a.responseType&&("json"==this.responseType||c.test(this.data.contentType))){var d;a:{try{d=b.json.parse(a.responseText);break a}catch(g){}d=void 0}return d}return"response"in a?a.response:a.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){var a=this.xhr;return{code:"SERVER_ERROR",msg:this.responseType?a.response||a.statusText||"Error":a.responseText,response:this.getResponseData()}},prepare:b.fn.$true,prepareRequestData:function(a){var b=
[],c=a.url;a=w(a);for(var d in a.params){var g=a.params[d];null!=g&&null!=g.toString()&&b.push(x(d)+"="+x(g.toString()))}b=b.join("&");!a.body&&M.test(a.method)&&(a.body=b||"",b="");a.routerParams&&(c=c.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,c){return c in a.routerParams?a.routerParams[c]:b}));b&&(c+=(-1==c.indexOf("?")?"?":"&")+b);a.requestUrl=c;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",status:""});
D.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=I());this.emit_start();var b=this.xhr;this.prevReadyState_=-1;b.onreadystatechange=B.bind(this);a.asynchronous||B.call(this,0);b.open(a.method,a.requestUrl,a.asynchronous);this.lastRequestUrl_=a.requestUrl;if(a.responseType&&a.asynchronous&&"responseType"in b)try{b.responseType=a.responseType}catch(d){}this.responseType=a.responseType||"";var g=E(b,a);this.setTimeout(this.timeout);var h=null;if(M.test(a.method)&&(h=a.body,"function"==typeof h&&(h=h.call(a.bodyContext)),
c.test(g["Content-Type"])&&"string"!=typeof h&&(h=JSON.stringify(h)),D.test("ie9-")))if("object"==typeof h&&"undefined"!=typeof h.documentElement&&"string"==typeof h.xml)h=h.xml;else if("string"==typeof h)h=h.replace(/\r/g,"");else if(null==h||""==h)h="[No data]";this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null;this.xhr===b&&1==b.readyState&&b.send(h)}.bind(this),this.sendDelay)):b.send(h);
return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&0!=this.xhr.readyState&&B.call(this,4))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",
message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();this.xhr=null;n.prototype.destroy.call(this)}});var h=r.subclass({className:d+".Transport",requestClass:z,emit_readyStateChanged:g("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:b.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",body:null,bodyContext:null,init:function(){r.prototype.init.call(this);
"postBody"in this&&(null==this.body&&(this.body=this.postBody),this.postBody=null);this.params=w(this.params);this.routerParams=w(this.routerParams)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(c){if(!c.url&&!this.url)throw Error("URL is not defined");F(c,{headers:l(this.requestHeaders,
c.headers),params:l(this.params,c.params),routerParams:l(this.routerParams,c.routerParams)});"postBody"in c&&(null==this.body&&(c.body=c.postBody),c.postBody=null);b.object.complete(c,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,body:this.body,bodyContext:this.bodyContext,responseType:this.responseType});var d=c.url.match(a);d&&(c.method=d[1],c.url=c.url.substr(d[0].length));return c}});U.exports={Request:z,Transport:h,request:function(a,
c,d){"string"==typeof a&&(a={url:a,asynchronous:!(!c&&!d)});var g=new h(a);g.addHandler({success:c&&function(a,b,d){c(d)},failure:d&&function(a,b,c){d(c)},complete:function(){b.nextTick(function(){g.destroy()})}});a=g.request();if(!a.requestData.asynchronous)return a.getResponseData()}}},"r.js":function(d,U,b,k,g,z,O,T,ca){function E(b){var d=1E6;b=String(b).split(".");for(var g=0,k=0;4>g&&g<b.length;g++,d/=100)k+=b[g]*d;return k}function B(b){b=b.toLowerCase();if(b in A)return A[b];var d=b.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);
if(d){A[b]=!1;var g=d[1].toLowerCase(),k=E(d[3]),d=d[4]||"=";if(g=x[g])return A[b]=!k||"="==d&&g==k||"+"==d&&g>=k||"-"==d&&g<k}return!1}d=k.navigator&&k.navigator.userAgent||"";k=k.opera;var x={},A={};z="unknown";g={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox",
"firefox","ff"],Opera:["Opera","opera"]};for(var J in g)if(O=J,"MSIE"!=J||!k)if("Safari"!=J||!/chrome/i.test(d))if("AppleWebKit"!=J||!/iphone/i.test(d))if("MSIE"==J&&/Trident\/\d+/i.test(d)&&/rv:\d+/i.test(d)&&(O="rv"),d.match(new RegExp(O+".(\\d+(\\.\\d+)*)","i")))for(O=g[J],z=k&&"function"==typeof k.version?k.version():RegExp.$1,T=E(z),z=O[0]+" "+z,ca=0;ca<O.length;ca++)x[O[ca].toLowerCase()]=T;U.exports={prettyName:z,is:B,test:function(){return b.array(arguments).some(B)}}},"s.js":function(d,U,
b,k,g,z,O,T,ca){d=b.require("./e.js").STATE;var E=d.UNDEFINED,B=d.READY,x=d.PROCESSING,A=d.ERROR,J=b.require("./q.js").Transport,F=b.require("./t.js"),w=function(){},l={start:function(b,d){var g=d.requestData.origin;this.start.call(d.requestData.origin);g.state!=x&&g.setState(x)},success:function(b,d,g){b=d.requestData.origin;this.success.call(b,g);b.state==x&&b.setState(B)},failure:function(b,d,g){b=d.requestData.origin;this.failure.call(b,g);b.state==x&&b.setState(A,g)},abort:function(b,d){var g=
d.requestData.origin;this.abort.call(g);g.state==x&&g.setState(b.stateOnAbort||d.stateOnAbort||E)},complete:function(b,d){this.complete.call(d.requestData.origin)}},y={start:w,success:w,failure:w,abort:w,complete:w},D={success:function(b,d){this.fulfill(d)},abort:function(){this.reject("Request aborted")},failure:function(b,d){this.reject(d)},complete:function(){this.request.removeHandler(D,this)}};U.exports={create:function(d){d=b.object.extend({prepare:w,request:w},d);if("function"==typeof d.body){var g=
d.body;d.body=function(){return g.apply(this.context,this.args)}}var k=b.object.splice(d,["prepare","request"]),A=b.object.merge(y,b.object.splice(d,["start","success","failure","abort","complete"])),a=b.fn.lazyInit(function(){var a;a=d;a=a.transport?a.transport:a.service?a.service.createTransport(a):a.createTransport?a.createTransport(a):new J(a);a.addHandler(l,A);return a});return function(){if(this.state!=x){if(k.prepare.apply(this,arguments))return F.reject("Prepare handler returns trulthy result. Operation aborted. Context: ",
this);var c,d=b.object.complete({origin:this,bodyContext:{context:this,args:b.array(arguments)}},k.request.apply(this,arguments));if("function"==typeof d.body){var g=d.body;d.body=function(){return g.apply(this.context,this.args)}}return(c=a().request(d))?new F(function(a,b){c.addHandler(D,{request:c,fulfill:a,reject:b})}):F.reject("Request is not performed")}return F.reject("Context in processing state, request is not performed")}}}},"t.js":function(d,U,b,k,g,z,O,T,ca){function E(){for(var a=0;a<
r.length;a++)r[a][0](r[a][1]);r=[];p=!1}function B(a,c){r.push([a,c]);p||(p=!0,b.nextTick(E,0))}function x(a,b){function d(a){F(b,a)}function g(a){l(b,a)}try{a(d,g)}catch(h){g(h)}}function A(a){var b=a.owner,d=b.state_,b=b.data_,g=a[d];a=a.then;if("function"===typeof g){d="fulfilled";try{b=g(b)}catch(h){l(a,h)}}J(a,b)||("fulfilled"===d&&F(a,b),"rejected"===d&&l(a,b))}function J(a,b){var d;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(b&&("function"===
typeof b||"object"===typeof b)){var g=b.then;if("function"===typeof g)return g.call(b,function(g){d||(d=!0,b!==g?F(a,g):w(a,g))},function(b){d||(d=!0,l(a,b))}),!0}}catch(h){return d||l(a,h),!0}return!1}function F(a,b){a!==b&&J(a,b)||w(a,b)}function w(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,B(y,a))}function l(a,b){"pending"===a.state_&&(a.state_="sealed",a.data_=b,B(D,a))}function y(a){a.state_="fulfilled";a.then_=a.then_.forEach(A)}function D(a){a.state_="rejected";a.then_=a.then_.forEach(A)}
var n=function(){},r=[],p,M=function(a){if("function"!==typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof M)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];x(a,this)};M.prototype={constructor:M,state_:"pending",then_:null,data_:void 0,then:function(a,b){var d={owner:this,then:new this.constructor(n),fulfilled:a,rejected:b};"fulfilled"===this.state_||
"rejected"===this.state_?B(A,d):this.then_.push(d);return d.then},"catch":function(a){return this.then(null,a)}};M.all=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(b,d){function g(a){k++;return function(d){h[a]=d;--k||b(h)}}for(var h=[],k=0,l=0,n;l<a.length;l++)(n=a[l])&&"function"===typeof n.then?n.then(g(l),d):h[l]=n;k||b(h)})};M.race=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.race().");
return new this(function(b,d){for(var g=0,h;g<a.length;g++)(h=a[g])&&"function"===typeof h.then?h.then(b,d):b(h)})};M.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(b){b(a)})};M.reject=function(a){return new this(function(b,d){d(a)})};U.exports=M},"u.js":function(d,U,b,k,g,z,O,T,ca){function E(a){function d(a,l){for(var n="",p,r=a;r<g.length;r++)switch(p=g.charAt(r),p){case l:return{result:n,offset:r};case "\\":n+="\\"+g.charAt(++r);break;case "|":n+=")"!=
l?"\\|":"|";break;case "(":(p=d(r+1,")"))?(r=p.offset,n+="(?:"+p.result+")?"):n+="\\(";break;case ":":(p=g.substr(r+1).match(/^\w+/))?(r+=p[0].length,n+="([^/]+)",k.push(p[0])):n+=":";break;case "*":(p=g.substr(r+1).match(/^\w+/))?(r+=p[0].length,n+="(.*?)",k.push(p[0])):n+="\\*";break;default:n+=b.string.forRegExp(p)}return l?null:n}var g=String(a||""),k=[];a=new RegExp("^"+d(0)+"$","i");a.params=k;return a}function B(){n||(w?F.addHandler(k,"hashchange",x):p=setInterval(x,50),n=!0,x())}function x(){var a=
J.hash.substr(1)||"";if(a!=r){var b=[],d=[];r=a;for(var g in y){var h=y[g],k=a.match(h.regexp);k?(D[g]||b.push(h),k=l(k,1),D[g]=k):D[g]&&(d.push(h),delete D[g],h.token.set(null))}for(a=0;h=d[a];a++)for(var k=l(h.callbacks),h=0,n;n=k[h];h++)n.callback.leave&&n.callback.leave.call(n.context);for(a=0;h=b[a];a++)for(k=l(h.callbacks),h=0;n=k[h];h++)n.callback.enter&&n.callback.enter.call(n.context);for(g in D){h=y[g];b=D[g];k=l(h.callbacks);for(a=0;n=k[a];a++)n.callback.match&&n.callback.match.apply(n.context,
b);h.token.set(b)}}}function A(a,b){var d=a instanceof M?a:y[a];if(!d&&b&&(d="[object RegExp]"==Object.prototype.toString.call(a)?a:E(a),d=y[a]={id:a,callbacks:[],token:new M(d.params),regexp:d},"string"==typeof r)){var g=r.match(d.regexp);g&&(g=l(g,1),D[a]=g,d.token.set(g))}return d}d=this.path;var J=k.location;g=k.document;var F=b.require("./c.js");g=g.documentMode;var w="onhashchange"in k&&(void 0===g||7<g),l=b.array.from,y={},D={},n=!1,r,p,M=b.Token.subclass({className:d+".Route",matched:null,
params_:null,names_:null,init:function(a){b.Token.prototype.init.call(this,null);this.matched=this.as(Boolean);this.names_=Array.isArray(a)?a:[];this.params_={}},param:function(a){var b="number"==typeof a?a:this.names_.indexOf(a);0==b in this.params_&&(this.params_[b]=this.as(function(a){return a&&a[b]}));return this.params_[b]},set:function(a){if(a){a=b.object.slice(a);for(var d in a)d in this.names_&&(a[this.names_[d]]=a[d])}b.Token.prototype.set.call(this,a)}});B();U.exports={debug:!1,start:B,
stop:function(){n&&(w?F.removeHandler(k,"hashchange",x):clearInterval(p),n=!1)},checkUrl:x,navigate:function(a,b){b?J.replace(J.pathname+"#"+a):J.hash=a;n&&x()},add:function(a,b,d){var g=A(a,!0);b={cb_:b,context:d,callback:"function"!=typeof b?b||{}:{match:b}};g.callbacks.push(b);g.id in D&&(b.callback.enter&&b.callback.enter.call(d),b.callback.match&&b.callback.match.apply(d,D[a]));return g.token},remove:function(a,b,d){if(a=A(a))for(var g=0,h;h=a.callbacks[g];g++)if(h.cb_===b&&h.context===d){b=
a.token;a.callbacks.splice(g,1);a.callbacks.length||b.handler&&b.handler.handler||b.matched.handler||(delete y[a.id],delete D[a.id]);break}},route:function(a){return A(a,!0).token}}},"v.js":function(d,U,b,k,g,z,O,T,ca){function E(b){J.title=b}function B(b){return"string"==typeof b?J.getElementById(b):b}function x(b,d){try{return b.parentNode.replaceChild(d,b),d}catch(g){return b}}var A=b.require("./e.js").resolveValue,J=k.document||{title:"unknown"},F=J.title,w=b.fn.$undef,l,y;d=b.fn.lazyInit(function(d){var g=
[],k=!1,p={inited:!1,setTitle:function(a){a!=F&&(F instanceof b.Token&&F.detach(E),a instanceof b.Token?(a.attach(E),E(a.get())):E(a),F=a)},setElement:function(a){(a=A(p,p.setElement,a,"elementRA_"))&&a.element&&(a=a.element);a=B(a);if(y!==a)if(y)y=x(y,a);else{l||(l={type:"append",node:J.body});var b=B(l.node);y=a;if(b)if("append"==l.type)try{y=b.appendChild(y)}catch(d){y=b.appendChild(J.createComment(""))}else y=x(b,y)}},ready:function(a,b){k?a.call(b,p):g.push({fn:a,context:b})}};d.constructor!==
Object&&(d={element:d});for(var z in d){var a=d[z];switch(z){case "title":p.setTitle(a);break;case "container":l={type:"append",node:a};break;case "replace":l={type:"replace",node:a};break;case "element":y=a;break;case "init":w="function"==typeof a?a:w}}b.doc.body.ready(function(){var a=y,b=w.call(p);b&&(a=b);y=null;p.setElement(a);k=!0;for(p.inited=!0;a=g.shift();)a.fn.call(a.context,p)});return p});U.exports={create:d}}};(function U(b,k,g){function z(a){function b(a){return Math.round(a).toString(36)}
var c=b(10+25*Math.random());for(a||(a=16);c.length<a;)c+=b(new Date*Math.random());return c.substr(0,a)}function O(a,b){for(var c in b)a[c]=b[c];return a}function T(a,b){for(var c in b)0==c in a&&(a[c]=b[c]);return a}function ca(a){var b=[],c;for(c in a)b.push(c);return b}function E(a,b){var c={};if(!b)return O(c,a);for(var e=0,f;f=b[e++];)f in a&&(c[f]=a[f]);return c}function B(a,b,c){var e=[],f;for(f in a)e.push(b.call(c,f,a[f]));return e}function x(a){return a}function A(){}function J(a){var b=
e[a.url];if(b)for(var c=0;c<b.length;c++)b[c](a.get(),a.url)}function F(a,b,c){try{return new Function(b,'"use strict";\n'+c)}catch(e){H.error("Compilation error at "+a+("line"in e?":"+(e.line-1):"")+": "+e)}}function w(a){if(0==a in X){var b=a.split("."),c=b.shift(),b=q(c+":"+b.join("/")+".js").replace(/\/\.js$/,".js");X[a]=b;ia[b]=a}return X[a]}function l(a){if(v.call(ea,a))return ea[a];a=a.split(".");var b;b=a[0];var c=ea[b];c||(c=ea[b]=new Z(b),c.namespaces_={},c.namespaces_[b]=c,N.noConflict||
(n[b]=c));"library"!=b||Ea||(Ea=ea[b]);for(var c=b=c,e=1;e<a.length;e++){var f=a[e],g=a.slice(0,e+1).join(".");if(!v.call(b.namespaces_,g)){var h=new Z(g);N.implicitExt&&(c[f]=h);b.namespaces_[g]=h}c=b.namespaces_[g]}return ea[a.join(".")]=c}function y(a,b){if(null!=a){var e=a.length;if("undefined"==typeof e||"[object Function]"==c.call(a))return[a];b||(b=0);if(0<e-b){for(var f=[],g=0,h=b;h<e;)f[g++]=a[h++];return f}}return[]}function D(a,b,c){for(var e=[],f="function"==typeof b,g=0;g<a;g++)e[g]=
f?b.call(c,g,e):b;return e}var n=Function("return this")(),r=n!==b?n:!1,p=n.document,M=n.location,a=n.process,c=Object.prototype.toString,v=Object.prototype.hasOwnProperty,n=b,I={};b=function(){return function(){}}();var h=function(){function a(f){var l=this,m,n,p;if("function"==typeof f||"string"==typeof f){m=b(f,l[g]);p=e+m[g];if(v.call(l,p))return l[p];"function"==typeof m[h]&&(m=m[h]);n=function(a){return m(l(a))}}else{if(!f)return t;n=function(a){return f[l(a)]}}n[g]=k++;n[h]=f;n.__extend__=
c;n.as=a;p&&(l[p]=n);return n}function b(e,f){var m=e,n;if(e&&"string"==typeof e){if(v.call(l,e))return l[e];m=l[e]=new Function("object","return object != null ? object."+e+" : object")}if("function"!=typeof m)return t;if(m.__extend__===c)return m;if(v.call(m,f))return m[f];n=m[f]=m!==e?m:function(a){return m(a)};n[g]=k++;n[h]=e;n.__extend__=c;n.as=a;return n}function c(a,e){var g=a&&a!==t?b(a,f):t;return e||""===e?("string"==typeof e&&(e=ja.formatter(e)),g.as(e)):g}var e="basisGetterId"+z()+"_",
f=e+"root",g=e,h=e+"base",k=1,l={};c.ID=g;c.SOURCE=h;c.PARENT=e+"parent";return c}(),t=function(){var a=function(){};a[h.ID]=h.ID+"nullGetter";a.__extend__=h;a.as=function(){return a};return a}(),H=function(){var a=n.console,b={log:A,info:A,warn:A,error:A};a&&B(b,function(c){b[c]="bind"in Function.prototype&&"function"==typeof a[c]?Function.prototype.bind.call(a[c],a):function(){Function.prototype.apply.call(a[c],a,arguments)}});return b}(),G=n.setImmediate||n.msSetImmediate,P=n.clearImmediate||n.msSetImmediate;
G&&(G=G.bind(n));P&&(P=P.bind(n));G||function(){var b=function(){var a={},b=0;G=function(e){if("function"==typeof e)return a[++b]={fn:e,args:y(arguments,1)},c(b),b};P=function(b){delete a[b]};return function(b){var c=a[b];c&&(delete a[b],c.fn.apply(void 0,c.args));V.process()}}(),c=function(a){setTimeout(function(){b(a)},0)};if(r&&r.process&&"function"==typeof a.nextTick)c=function(c){a.nextTick(function(){b(c)})};else{var e=n.postMessage&&!n.importScripts;if(e){var f=n.onmessage;n.onmessage=function(){e=
!1};n.postMessage("","*");n.onmessage=f}if(e){var g={},f=function(a){if(a&&a.source==n&&(a=a.data,v.call(g,a))){var c=g[a];delete g[a];b(c)}};n.addEventListener?n.addEventListener("message",f,!0):n.attachEvent("onmessage",f);c=function(a){var b=z(32);g[b]=a;n.postMessage(b,"*")}}else if(n.MessageChannel){var h=new n.MessageChannel;h.port1.onmessage=function(a){b(a.data)};c=function(a){h.port2.postMessage(a)}}else if(p&&"onreadystatechange"in p.createElement("script"))var k=c,c=function Ga(a){"undefined"!=
typeof ua&&(c=k,ua.head.ready(function(){c=function(a){var c=p.createElement("script");c.onreadystatechange=function(){c.onreadystatechange=null;ua.remove(c);c=null;b(a)};ua.head.add(c)}}));c===Ga?k(a):c(a)}}}();var V=function(){function a(){e&&(e=P(e));if(b.length)try{c=!0;for(var f;f=b.shift();)f.fn.call(f.context)}finally{c=!1,b.length&&(e=G(a))}}var b=[],c=!1,e,f=function(c,f){b.push({fn:c,context:f});e||(e=G(a));return!0};f.process=function(){c||a()};f.schedule=function(a){function b(){var f=
G(b);e=!1;for(var g in c){var s=c[g];delete c[g];a(s)}P(f);e||(c={})}var c={},e=!1;return{add:function(a){c[a.basisObjectId]=a;e||(e=Ca.asap(b))},remove:function(a){delete c[a.basisObjectId]}}};return f}(),la=function(){var a=0,b={id:a,start:function(){b.id=a++},finish:function(){V.process();b.id="unknown"}};return b}(),Q=function(){var b=/^([^\/]+:|\/)/,c=/^[a-zA-Z0-9\-]+:\/?/,e=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,f=/[\?#].*$/,g,h,k;r?(h=(a.basisjsBaseURI||require("path").resolve(".")).replace(/\\/g,
"/"),g=h.replace(/^[^\/]*/,""),h=h.replace(/\/.*/,"")):(g=M.pathname.replace(/[^\/]+$/,""),h=M.protocol+"//"+M.host);return k={baseURI:g,origin:h,normalize:function(a){a=(a||"").replace(c,"/").replace(e,"/").replace(f,"");for(var b=[],g=a.split("/"),s=0;s<g.length;s++)".."==g[s]?(1<b.length||b[0])&&b.pop():!g[s]&&s||"."==g[s]||b.push(g[s]);return b.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=k.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==a[0]?"/":".")},extname:function(a){return(a=
k.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?a[1]:""},basename:function(a,b){var c=k.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==k.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(){for(var a=y(arguments).reverse(),c=[],e=!1,f=0;!e&&f<a.length;f++)"string"==typeof a[f]&&(c.unshift(a[f]),e=b.test(a[f]));e||c.unshift("/"==g?"":g);return k.normalize(c.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=g);a=k.normalize(a);b=k.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;
if("/"==b[0]&&"/"!=a[0])return b;for(var c=a.replace(/^\/$/,"").split(/\//),e=b.replace(/^\/$/,"").split(/\//),f=[],s=0;e[s]==c[s]&&"string"==typeof c[s];)s++;for(c=c.length-s;0<c;c--)f.push("..");return f.concat(e.slice(s).filter(Boolean)).join("/")}}}(),ma=k||"",N=g||{noConflict:!0,implicitExt:!0,modules:{},autoload:["./0.js"]},oa=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;return c===a}function e(c){var l=h++;"function"!=
typeof c&&(c=m);var n=function(){};n.prototype=c.prototype;for(var n=new n,l={basisClassId_:l,superClass_:c,extendConstructor_:!!c.extendConstructor_,isSubclassOf:b,subclass:function(){return e.apply(null,[r].concat(y(arguments)))},extend:f,__extend__:function(b){return b&&b!==k&&("object"==typeof b||"function"==typeof b&&!a(b))?m.create.call(null,r,b):b},prototype:n},p=1,q;q=arguments[p];p++)l.extend(q);var r=l.extendConstructor_?function(a){this.basisObjectId=g.id++;var b,c;for(c in a)b=this[c],
this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=g.id++;this.init.apply(this,arguments);this.postInit()};n.constructor=r;for(var t in n)n[t]===k&&(n[t]=r);O(r,l);return r}function f(b){var e=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype,E(e)));b.prototype&&(b=b.prototype);for(var g in b){var h=b[g],k=e[g];"className"==g||"extendConstructor_"==g?this[g]=h:e[g]=k&&k.__extend__?k.__extend__(h):h}l&&b[g="toString"]!==
c&&(e[g]=b[g]);return this}var g={id:1},h=1,k={},l=function(){for(var a in{toString:1})return!1;return!0}(),m=O(e,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)v.call(this,a)&&(this[a]=null);this.destroy=A}}}),n=function(a,b){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=new c;b(c,a);return c}}.__extend__(a||{})},p=function(a){return n(a,
O,"extensibleProperty")};return O(m,{SELF:k,create:e,isClass:a,customExtendProperty:n,extensibleProperty:p,nestedExtendProperty:function(a){return n(a,function(a,b){for(var c in b)if(v.call(b,c)){var e=a[c],f=b[c];a[c]=f?e&&e.__extend__?e.__extend__(f):p(f):null}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var e={__extend__:c};if(b){if(b.__extend__)return b;for(var f in b)v.call(b,f)&&b[f]&&(e[f]=a)}return e};return c(b||{})}})}(),Y=oa(null,{className:"basis.Token",
value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c,e){a.attach(b,c,e)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b,c){this.handler={fn:a,context:b,destroy:c||null,handler:this.handler}},detach:function(a,b){for(var c=this,e;e=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=A;c.destroy=c.destroy&&A;
e.handler=c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new da(this.get()),this.attach(a.set,a));return a},as:function(a){var b=new Y,c=function(b){this.set(a.call(this,b))};"function"!=typeof a&&(a=h(a));c.call(b,this.get());this.attach(c,b,b.destroy);b.attach(A,this,function(){this.detach(c,b)});return b},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),
this.deferredToken=null);this.detach=this.attach=A;for(var a=this;a=a.handler;)a.destroy&&a.destroy.call(a.context);this.value=this.handler=null}}),na=V.schedule(function(a){a.apply()}),da=Y.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,na.add(this))},deferred:function(){return this}}),aa={},pa={},f={},e={},m=1;(function(){var a="undefined"!=typeof Fa?Fa:null;if(a)for(var b in a)f[Q.resolve(b)]=a[b]})();var q=function(a,b){var c=a.match(/^([a-zA-Z0-9\_\-]+):/);
if(c){var e=c[1];0==e in ta&&(ta[e]=Q.baseURI+e+"/");a=ta[e]+Q.normalize("./"+a.substr(c[0].length))}else a=Q.resolve(b,a);return a},C=function(b,c){if(c||!v.call(f,b)){var e="";if(r)try{e=a.basisjsReadFile?a.basisjsReadFile(b):require("fs").readFileSync(b,"utf-8")}catch(g){}else{var h=new n.XMLHttpRequest;h.open("GET",b,!1);h.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());h.setRequestHeader("X-Basis-Resource",1);h.send("");200<=h.status&&400>h.status&&(e=h.responseText)}f[b]=e}return f[b]},
sa=function(a,b){var c=Q.extname(a),e=u.extensions[c],g=1<arguments.length,h=!1,k=!1;g&&(a+="#virtual");var l=function(){if(h)return b;var c=g?b:C(a);e?k||(k=!0,b=e(c,a)):b=c;h=!0;J(l);l.apply();return b};O(l,O(new Y,{url:a,type:c,virtual:g,fetch:function(){return l()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return h},update:function(c){if(!h||g||c!=f[a])g||(f[a]=c),e?(!k&&g&&(b=c),k&&!e.permanent&&(b=e(c,a,b),J(l),l.apply())):(b=c,h=!0,J(l),l.apply())},reload:function(){if(!g){var b=
f[a],c=C(a,!0);c!=b&&(h=!1,l.update(c))}},get:function(c){return g&&c?e?void 0:b:c?C(a):l()},ready:function(a,b){if(h&&(a.call(b,l()),e&&e.permanent))return;l.attach(a,b);return l}}));aa[a]=l;return pa[a]=l},u=function(a,b){var c=b?b+"\x00"+a:a,e=pa[c];e||(e=q(a,b,"basis.resource('{url}')"),e=aa[e]||sa(e),pa[c]=e);return e};O(u,{resolveURI:q,isResource:function(a){return a?aa[a.url]===a:!1},isResolved:function(a){return(a=u.get(a))?a.isResolved():!1},exists:function(a){return v.call(aa,q(a,null,"basis.resource.exists('{url}')"))},
get:function(a){a=q(a,null,"basis.resource.get('{url}')");return u.exists(a)?u(a):null},getFiles:function(a){return a?ca(f):ca(aa).filter(function(a){return!aa[a].virtual})},virtual:function(a,b,c){return sa((c?c+":":Q.normalize("/"==Q.baseURI?"":Q.baseURI)+"/")+"virtual-resource"+m++ +"."+a,b)},extensions:{".js":O(function(a,b){var c=ia[b];if(!c){var e=!0,c=(Q.dirname(b)+"/"+Q.basename(b,Q.extname(b))).replace(/^\/\//,"/"),f;for(f in ta){var g=ta[f]+f+"/";if(c.substr(0,g.length)==g){e=!1;c=c.substr(ta[f].length);
break}}c=c.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,".");e&&(c="implicit."+c)}f=l(c);f.inited||(f.inited=!0,f.exports=ka({path:f.path,exports:f.exports},b,a).exports,f.exports&&f.exports.constructor===Object&&N.implicitExt&&T(f,f.exports));return f.exports},{permanent:!0}),".css":function(a,b,c){c||(c=new Ba(b));c.updateCssText(a);return c},".json":function(a){if("object"==typeof a)return a;var b;try{a=String(a),b=Ca.json.parse(a)}catch(c){}return b||null}}});var ka=function(a,b,c){var e=
Q.dirname(b),f=c;a.exports||(a.exports={});"function"!=typeof f&&(f=F(b,"exports module basis global __filename __dirname resource require asset".split(" "),c));"function"==typeof f&&f.call(a.exports,a.exports,a,Ca,n,b,e,function(a){return u(a,e)},function(a){return xa(a,e)},function(a){return q(a,e,"asset('{url}')")});return a},ea={},X={},ia={},ta={};B(N.modules,function(a,b){ta[a]=b.path+"/";X[a]=b.filename;ia[b.filename]=a});(function(a){if(a="undefined"!=typeof Da?Da:null)for(var b in a){var c=
Q.resolve(b),e=a[b];ia[c]=e;X[e]=c}})();var Z=oa(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(a){O(this.exports,a);return T(this,a)}}),xa=function(a,b){/[^a-z0-9_\.]/i.test(a)||".js"==Q.extname(a)?/[\?#]/.test(a)||(a=q(a,b,"basis.require('{url}')")):a=w(a);return u(a).fetch()};T(Function.prototype,{bind:function(a){var b=this,c=y(arguments,1);return c.length?function(){return b.apply(a,
c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});T(Array,{isArray:function(a){return"[object Array]"===c.call(a)}});T(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,e=this.length;c<e;c++)c in this&&a.call(b,this[c],c,this)},
every:function(a,b){for(var c=0,e=this.length;c<e;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=0,e=this.length;c<e;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],e=0,f=this.length;e<f;e++)e in this&&a.call(b,this[e],e,this)&&c.push(this[e]);return c},map:function(a,b){for(var c=[],e=0,f=this.length;e<f;e++)e in this&&(c[e]=a.call(b,this[e],e,this));return c},reduce:function(a,b){var c=this.length,e=arguments.length;
if(0==c&&1==e)throw new TypeError;var f,g=0;1<e&&(f=b,g=1);for(e=0;e<c;e++)e in this&&(f=g++?a.call(null,f,this[e],e,this):this[e]);return f}});var va={from:y,create:D,flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return va.flatten(D(parseInt(b,10)||0,a))},search:function(a,b,c,e){a.lastSearchIndex=-1;c=h(c||x);e=parseInt(e,10)||0;for(var f=a.length;e<f;e++)if(c(a[e])===b)return a[a.lastSearchIndex=e]},lastSearch:function(a,b,c,e){a.lastSearchIndex=-1;c=h(c||x);var f=a.length;
e=isNaN(e)||null==e?f:parseInt(e,10);for(f=e>f?f:e;0<f--;)if(c(a[f])===b)return a[a.lastSearchIndex=f]},add:function(a,b){return-1==a.indexOf(b)&&!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(){return va.sort.apply(this,arguments)},sort:function(a,b,c,e){b=h(b);e=e?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return e*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(a){return this[a.i]},
a)}};if(![1,2].splice(1).length){var Aa=Array.prototype.splice;Array.prototype.splice=function(){var a=y(arguments);2>a.length&&(a[1]=this.length);return Aa.apply(this,a)}}var qa=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,ba=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,K={};T(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});
T(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var ja={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw c;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(qa,"\\$1")},format:function(a,b){var c=y(arguments,1);"object"==typeof b&&
O(c,b);return a.replace(ba,function(a,b,e,f,g){a=b in c?c[b]:g?"":a;return e&&!isNaN(a)?(a=Number(a),"."==e?a.toFixed(f):ha.lead(a,f)):a})},formatter:function(a){a=String(a);if(v.call(K,a))return K[a];var b=function(b){return ja.format(a,b)};return K[a]=b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},
isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}};if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var S=String.prototype.split;String.prototype.split=function(a,b){if(!a||0==a instanceof RegExp||""==a.source)return S.call(this,a,b);var c=[],e=0,f;for(a.global||(a=new RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));f=a.exec(this);)f[0]=this.substring(e,f.index),c.push.apply(c,f),e=a.lastIndex;c.push(this.substr(e));return c}}if("2"!=
"12".substr(-1)){var ra=String.prototype.substr;String.prototype.substr=function(a,b){return ra.call(this,0>a?Math.max(0,this.length+a):a,b)}}var ha={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,function(e,f){return!f+(a.length-f)%(b||3)?e:(c||" ")+e})})},format:function(a,
b,c,e,f,g){a=a.toFixed(b);if(c||g)a=a.replace(/(\d+)(\.?)/,function(a,b,e){return(c?Ca.number.group(Number(b),3,c):b)+(e?g||e:"")});e&&(a=a.replace(/^-?/,"$&"+(e||"")));return a+(f||"")}};T(Date,{now:function(){return Number(new Date)}});var wa=function(){function a(){var b;g&&(g=P(g));for(1<f.length&&(g=G(a));b=f.shift();)b[0].call(b[1]);g=P(g);V.process()}function b(){e++||a()}function c(){try{p.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,1)}}var e=!p||"complete"==p.readyState,f=
[],g;if(!e)if(p.addEventListener)p.addEventListener("DOMContentLoaded",b,!1),n.addEventListener("load",b,!1);else{p.attachEvent("onreadystatechange",b);n.attachEvent("onload",b);try{!n.frameElement&&p.documentElement.doScroll&&c()}catch(h){}}return function(b,c){f.length||!e||g||(g=G(a));f.push([b,c])}}(),ya=function(){return"addEventListener"in n?function(a,b){n.addEventListener("unload",function(c){a.call(b||null,c||n.event)},!1)}:"attachEvent"in n?function(a,b){n.attachEvent("onunload",function(c){a.call(b||
null,c||n.event)})}:A}(),ua=function(){function a(b){if(p&&!g[b]&&(g[b]=p[b]||p.getElementsByTagName(b)[0],g[b])){var c=h[b];delete h[b];for(var e=0,f;f=c[e];e++)f[0].call(f[1],g[b])}return g[b]}function b(){var e=this[0],f=this[1],g=this[2];c(f);var k=a(e);k?(!0===g&&(g=k.firstChild),g&&g.parentNode===k||(g=null),k.insertBefore(f,g)):h[e].push([b,[e,f,g]])}function c(a){for(var b in h){var e=va.search(h[b],a,function(a){return a[1]&&a[1][1]});e&&va.remove(h[b],e)}a&&a.parentNode&&1==a.parentNode.nodeType&&
a.parentNode.removeChild(a)}function e(){f&&a("head")&&a("body")&&(f=clearInterval(f))}var f,g={},h={head:[],body:[]};!p||a("head")&&a("body")||(f=setInterval(e,5),wa(e));return{head:{ready:function(a,b){h.head?h.head.push([a,b]):a.call(b,g.head)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){h.body?h.body.push([a,b]):a.call(b,g.body)},add:function(a,c){b.call(["body",a,c])}},remove:c}}();k=function(){var a=[];if(ya===A)return{add:A,remove:A};ya(function(){b.globalDestroy=!0;
b.add=A;b.remove=A;for(var c;c=a.pop();)if("function"==typeof c.destroy)try{c.destroy()}catch(e){}else for(var f in c)c[f]=null;a=[]});var b={add:function(b){null!=b&&a.push(b)},remove:function(b){va.remove(a,b)}};return b}();var Ba=function(){function a(b){g.setAttribute("href",b);ua.head.add(g,!0)}function b(){g.setAttribute("href",M.href);ua.remove(g)}function c(){a(this.baseURI);this.element||(this.element=p.createElement("style"),e||this.element.appendChild(p.createTextNode("")));ua.head.add(this.element);
this.syncCssText();b()}var e;try{e=!p.createElement("style").appendChild(p.createTextNode(""))}catch(f){e=!0}var g=p&&p.createElement("base");return oa(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(a){this.url=a;this.baseURI=Q.dirname(a)+"/"},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&this.element&&(a(this.baseURI),this.syncCssText(),b()))},syncCssText:e?function(){this.element.styleSheet.cssText=this.cssText}:function(){this.element.firstChild.nodeValue=
this.cssText},startUse:function(){this.inUse||ua.head.ready(c,this);this.inUse+=1},stopUse:function(){this.inUse&&(--this.inUse,!this.inUse&&this.element&&ua.remove(this.element))},destroy:function(){this.element&&ua.remove(this.element);this.cssText=this.element=null}})}(),Ca=l("basis").extend({version:"1.4.1",NODE_ENV:r,config:N,createSandbox:function(a){return U(n,ma,T({noConflict:!0},a))},dev:(new Z("basis.dev")).extend(H).extend({warnPropertyAccess:b}),resolveNSFilename:w,patch:function(a,b){a=
/[^a-z0-9_\.]/i.test(a)||".js"==Q.extname(a)?q(a,null,"basis.patch('{url}')"):w(a);e[a]?e[a].push(b):e[a]=[b];var c=u.get(a);c&&c.isResolved()&&b(c.get(),c.url)},namespace:l,require:xa,resource:u,asset:function(a){return q(a,null,"basis.asset('{url}')")},setImmediate:G,clearImmediate:P,nextTick:function(){G.apply(null,arguments)},asap:V,FACTORY:I,PROXY:{},Class:oa,Token:Y,DeferredToken:da,codeFrame:la,ready:wa,teardown:ya,cleaner:k,genUID:z,getter:h,console:H,path:Q,doc:ua,object:{extend:O,complete:T,
keys:ca,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:E,splice:function(a,b){var c={};if(!b)return O(c,a);for(var e=0,f;f=b[e++];)f in a&&(c[f]=a[f],delete a[f]);return c},merge:function(){for(var a={},b=0;b<arguments.length;b++)O(a,arguments[b]);return a},iterate:B},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===
this},$isNotSame:function(a){return a!==this},$self:x,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:A,getter:h,nullGetter:t,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},factory:function(a){"function"!=typeof a&&(a=h(a));var b=function(b){return a(b)};b.factory=I;return b},isFactory:function(a){return"function"===typeof a&&a.factory===I},lazyInit:function(a,b){var c=0,e,f;return e=function(){c++||
(e.inited=!0,e.data=f=a.apply(b||this,arguments));return f}},lazyInitAndRun:function(a,b,c){var e=0,f,g;return f=function(){e++||(f.inited=!0,f.data=g=a.call(c||this));b.apply(g,arguments);return g}},runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}},publicCallback:function(a,b){var c="basisjsCallback"+z();n[c]=b?a:function(){try{delete n[c]}catch(b){n[c]=void 0}a.apply(this,arguments)};return c}},array:O(y,va),string:ja,number:ha,bool:{invert:function(a){return!a}},
json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return ja.toObject(a,!0)}}});N.autoload&&!r&&N.autoload.forEach(function(a){xa(a)});r&&exports&&(exports.basis=Ca);return Ca})(this)}).call(this)