(function(){var sa={"0.js":"library","1.js":"basis.ui","2.js":"basis.l10n","3.js":"basis.event","4.js":"basis.data","5.js":"basis.dom.wrapper","6.js":"basis.template","7.js":"basis.template.html","8.js":"basis.dom.event","9.js":"basis.template.htmlfgen","a.js":"basis.dragdrop","b.js":"basis.layout","c.js":"basis.dom.computedStyle","d.js":"basis.data.dataset","e.js":"basis.data.value","f.js":"basis.data.index","g.js":"basis.data.object","h.js":"basis.entity","i.js":"basis.net.jsonp","j.js":"basis.net",
"k.js":"basis.net.service","l.js":"basis.net.ajax","m.js":"basis.ua","n.js":"basis.net.action","o.js":"basis.router","p.js":"basis.app"},ta,ra={"d.js":function(k,J,a,l,y,H,I,S){function C(a,f){var b={},P;a&&a.length&&(P=b.inserted=a);f&&f.length&&(P=b.deleted=f);if(P)return b}function w(b,f){return function P(f){if(!f)return null;if(f.__extend__)return f;"string"==typeof f||Array.isArray(f)||(f="object"==typeof f?a.object.keys(f):null);return h(a.event.createHandler(f,b),{__extend__:P})}(f)}function E(a,
f,b,P){return new v(h({keyGetter:f,itemClass:b,create:function(f,a){var b=v.prototype.create.call(this,f,a);b.setDataset(new P({ruleValue:f}));return b}},a))}function s(a,f){if(!a.length)return 0;var b=f.value,P=f.object.basisObjectId,c,e,x,d,n=0,g=a.length-1;do if(x=n+g>>1,d=a[x],c=d.value,b<c)g=x-1;else if(b>c)n=x+1;else if(e=d.object.basisObjectId,P<e)g=x-1;else if(P>e)n=x+1;else return x;while(n<=g);return x+(c==b?e<P:c<b)}function t(a,f){return+(a.value>f.value)||-(a.value<f.value)||a.object.basisObjectId-
f.object.basisObjectId}a.require("./3.js");a.require("./4.js");H=this.path;I=a.Class;var h=a.object.extend,g=a.object.values,d=a.getter,p=a.fn.$self,D=a.fn.$true,A=a.fn.$false,F=a.array.from,M=a.event.create,B=a.data.SUBSCRIPTION,N=a.data.Object,v=a.data.KeyObjectMap,c=a.data.AbstractDataset,b=a.data.Dataset;S=a.data.DatasetWrapper;B.add("SOURCE",{sourceChanged:function(a,f){f&&B.unlink("source",a,f);a.source&&B.link("source",a,a.source)},sourcesChanged:function(a,f){var b;if(b=f.inserted)for(var P=
0;b[P];P++)B.link("source",a,b[P]);if(b=f.deleted)for(P=0;b[P];P++)B.unlink("source",a,b[P])}},function(a,f){for(var b=f.sources||(f.source?[f.source]:[]),P=0,c;c=b[P++];)a("source",f,c)});B.addProperty("minuend");B.addProperty("subtrahend");var z=I(c,{className:H+".Merge",subscribeTo:B.SOURCE,emit_sourcesChanged:M("sourcesChanged","delta"),sources:null,rule:function(a,f){return 0<a},listen:{source:{itemsChanged:function(a,f){var b=this.members_,c={},d,e;if(f.inserted)for(var x=0;d=f.inserted[x];x++)e=
d.basisObjectId,b[e]?b[e].count++:b[e]={count:1,object:d},c[e]=b[e];if(f.deleted)for(x=0;d=f.deleted[x];x++)e=d.basisObjectId,c[e]=b[e],b[e].count--;this.applyRule(c)},destroy:function(a){this.removeSource(a)}}},init:function(){c.prototype.init.call(this);var a=this.sources;this.sources=[];a&&a.forEach(this.addSource,this)},setRule:function(a){"function"!=typeof a&&(a=z.UNION);this.rule!==a&&(this.rule=a,this.applyRule())},applyRule:function(a){var f=this.members_,b=this.rule,c=this.sources.length,
d=[],e=[],x,n;a||(a=f);for(var g in a)a=f[g],x=c&&a.count&&b(a.count,c),x!=!!this.items_[g]&&(x?d:e).push(a.object),0==a.count&&delete f[g];(n=C(d,e))&&this.emit_itemsChanged(n);return n},addSource:function(b){if(b instanceof c&&a.array.add(this.sources,b)){this.listen.source&&b.addHandler(this.listen.source,this);var f=this.members_,d;for(d in b.items_)f[d]?f[d].count++:f[d]={count:1,object:b.items_[d]};this.applyRule();this.emit_sourcesChanged({inserted:[b]});return!0}},removeSource:function(b){if(a.array.remove(this.sources,
b)){this.listen.source&&b.removeHandler(this.listen.source,this);var f=this.members_,c;for(c in b.items_)f[c].count--;this.applyRule();this.emit_sourcesChanged({deleted:[b]});return!0}},setSources:function(b){for(var f=F(this.sources),d=0,P;P=b[d];d++)P instanceof c&&(a.array.remove(f,P)||this.addSource(P));f.forEach(this.removeSource,this)},clear:function(){F(this.sources).forEach(this.removeSource,this)},destroy:function(){c.prototype.destroy.call(this);this.sources=null}});z.UNION=z.prototype.rule;
z.INTERSECTION=function(a,f){return a==f};z.DIFFERENCE=function(a,f){return 1==a};z.MORE_THAN_ONE_INCLUDE=function(a,f){return 1==f||1<a};z.AT_LEAST_ONE_EXCLUDE=function(a,f){return 1==f||a<f};var n=function(a){return!this.has(a)};k=I(c,{className:H+".Subtract",subscribeTo:B.MINUEND+B.SUBTRAHEND,minuend:null,emit_minuendChanged:M("minuendChanged","oldMinuend"),subtrahend:null,emit_subtrahendChanged:M("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,f){if(this.subtrahend){var b=
C(f.inserted&&f.inserted.filter(n,this.subtrahend),f.deleted&&f.deleted.filter(this.has,this));b&&this.emit_itemsChanged(b)}},destroy:function(){this.setOperands(null,this.subtrahend)}},subtrahend:{itemsChanged:function(a,f){if(this.minuend){var b=C(f.deleted&&f.deleted.filter(n,this),f.inserted&&f.inserted.filter(this.has,this));b&&this.emit_itemsChanged(b)}},destroy:function(){this.setOperands(this.minuend,null)}}},init:function(){c.prototype.init.call(this);var a=this.minuend,f=this.subtrahend;
this.subtrahend=this.minuend=null;(a||f)&&this.setOperands(a,f)},setOperands:function(a,f){var b,d=!1;!1==a instanceof c&&(a=null);!1==f instanceof c&&(f=null);var n=this.minuend,e=this.subtrahend;if(n!==a){d=!0;this.minuend=a;var x=this.listen.minuend;x&&(n&&n.removeHandler(x,this),a&&a.addHandler(x,this));this.emit_minuendChanged(n)}if(e!==f){d=!0;this.subtrahend=f;if(x=this.listen.subtrahend)e&&e.removeHandler(x,this),f&&f.addHandler(x,this);this.emit_subtrahendChanged(e)}if(!d)return!1;if(a&&
f){var d=[],n=[],g;for(g in this.items_)a.items_[g]&&!f.items_[g]||d.push(this.items_[g]);for(g in a.items_)this.items_[g]||f.items_[g]||n.push(a.items_[g]);(b=C(n,d))&&this.emit_itemsChanged(b)}else this.itemCount&&this.emit_itemsChanged(b={deleted:this.getItems()});return b},setMinuend:function(a){return this.setOperands(a,this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuend,a)},clear:function(){this.setOperands()}});var R=I(c,{className:H+".SourceDataset",subscribeTo:B.SOURCE,
source:null,emit_sourceChanged:M("sourceChanged","oldSource"),sourceAdapter_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceAdapter_||this.setSource()}}},init:function(){this.sourceMap_={};c.prototype.init.call(this);var a=this.source;a&&(this.source=null,this.setSource(a))},setSource:function(b){b=a.data.resolveDataset(this,this.setSource,b,"sourceAdapter_");if(this.source!==b){var f=this.source,c=this.listen.source;this.source=b;if(c){var d=c.itemsChanged;f&&(f.removeHandler(c,
this),d&&d.call(this,f,{deleted:f.getItems()}));b&&(b.addHandler(c,this),d&&d.call(this,b,{inserted:b.getItems()}))}this.emit_sourceChanged(f)}},clear:function(){this.setSource()},destroy:function(){c.prototype.destroy.call(this);this.sourceMap_=null}}),L=I(R,{className:H+".MapFilter",map:p,filter:A,rule:d(D),ruleEvents:w(function(a){var f=this.map?this.map(a):object;if(!1==f instanceof N||this.filter(f))f=null;var b=this.sourceMap_[a.basisObjectId],c=b.member;if(c!==f){var d=this.members_,e,x,g;
b.member=f;c&&(b=c.basisObjectId,this.removeMemberRef&&this.removeMemberRef(c,a),0==--d[b]&&(delete d[b],g=[c]));f&&(c=f.basisObjectId,this.addMemberRef&&this.addMemberRef(f,a),d[c]?d[c]++:(d[c]=1,x=[f]));(e=C(x,g))&&this.emit_itemsChanged(e)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,f){var c=this.sourceMap_,d=this.members_,g=[],e=[],x,n,h,z=this.ruleEvents;b.setAccumulateState(!0);if(f.inserted)for(var v=0;x=f.inserted[v];v++){h=this.map?this.map(x):
x;if(!1==h instanceof N||this.filter(h))h=null;z&&x.addHandler(z,this);c[x.basisObjectId]={sourceObject:x,member:h};h&&(n=h.basisObjectId,d[n]?d[n]++:(d[n]=1,g.push(h)),this.addMemberRef&&this.addMemberRef(h,x))}if(f.deleted)for(v=0;x=f.deleted[v];v++)n=x.basisObjectId,h=c[n].member,z&&x.removeHandler(z,this),delete c[n],h&&(n=h.basisObjectId,0==--d[n]&&(delete d[n],e.push(h)),this.removeMemberRef&&this.removeMemberRef(h,x));b.setAccumulateState(!1);(f=C(g,e))&&this.emit_itemsChanged(f)}}},setMap:function(a){"function"!=
typeof a&&(a=p);if(this.map!==a)return this.map=a,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=A);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){"function"!=typeof a&&(a=D);if(this.rule!==a)return this.rule=a,this.applyRule()},applyRule:function(){var a=this.sourceMap_,f=this.members_,b,c,d,e,x,n=[],g=[],h,z;for(z in a){x=a[z];e=x.sourceObject;b=x.member;c=this.map?this.map(e):e;if(!1==c instanceof N||this.filter(c))c=null;b!=c&&(x.member=c,b&&(d=
b.basisObjectId,this.removeMemberRef&&this.removeMemberRef(b,e),f[d]--),c&&(b=c.basisObjectId,this.addMemberRef&&this.addMemberRef(c,e),b in f?f[b]++:(f[b]=1,n.push(c))))}for(d in this.items_)0==f[d]&&(delete f[d],g.push(this.items_[d]));(h=C(n,g))&&this.emit_itemsChanged(h);return h}});l=I(L,{className:H+".Subset",filter:function(a){return!this.rule(a)}});y=I(L,{className:H+".Split",subsetClass:c,subsetWrapperClass:S,keyMap:null,map:function(a){return this.keyMap.resolve(a)},setRule:function(a){"function"!=
typeof a&&(a=D);if(this.rule!==a)return this.rule=a,this.keyMap.keyGetter=a,this.applyRule()},addMemberRef:function(a,f){a.dataset.emit_itemsChanged({inserted:[f]})},removeMemberRef:function(a,f){a.dataset.emit_itemsChanged({deleted:[f]})},init:function(){this.keyMap&&!1!=this.keyMap instanceof v||(this.keyMap=E(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));L.prototype.init.call(this)},getSubset:function(a,f){return this.keyMap.get(a,f)},destroy:function(){L.prototype.destroy.call(this);
this.keyMap.destroy();this.keyMap=null}});M=I(R,{className:H+".Slice",rule:d(D),ruleEvents:w(function(a){var f=this.sourceMap_[a.basisObjectId];a=this.rule(a);var b=this.index_;if(a!==f.value){var c=s(b,f),d=b[c-1],e=b[c+1];f.value=a;if(d&&(d.value>a||d.value==a&&d.object.basisObjectId>f.object.basisObjectId)||e&&(e.value<a||e.value==a&&e.object.basisObjectId<f.object.basisObjectId))b.splice(c,1),b.splice(s(b,f),0,f),this.applyRule()}},"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,
f){var b=this.sourceMap_,c=this.index_,d=this.ruleEvents,e=!1,n=!1,g,h=f.inserted,z=f.deleted;if(z){z.length>c.length-z.length&&(e=!0,n=z.length!=c.length,c.length=0);for(var v=0,p;p=z[v];v++)e||(g=b[p.basisObjectId],c.splice(s(c,g),1)),delete b[p.basisObjectId],d&&p.removeHandler(d,this);if(n)for(var K in b)g=b[K],c.splice(s(c,g),0,g)}if(h){n=!c.length;for(v=0;p=h[v];v++)g={object:p,value:this.rule(p)},b[p.basisObjectId]=g,n?c.push(g):c.splice(s(c,g),0,g),d&&p.addHandler(d,this);n&&c.sort(t)}this.applyRule()}}},
emit_rangeChanged:M("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];R.prototype.init.call(this)},setRange:function(a,f){var b=this.offset,c=this.limit,d=!1;if(b!=a||c!=f)this.offset=a,this.limit=f,d=this.applyRule(),this.emit_rangeChanged(b,c);return d},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},setRule:function(a,f){a=d(a);this.orderDesc=!!f;if(this.rule!=a){for(var b=this.index_,c=0;c<b.length;c++)b[c].value=
a(b[c].object);this.rule=a;b.sort(t)}return this.applyRule()},applyRule:function(){var b=this.offset,f=b+this.limit;this.orderDesc&&(b=this.index_.length-f,f=b+this.limit);for(var c=a.object.slice(this.members_),b=this.index_.slice(Math.max(0,b),Math.max(0,f)),f=[],d,n=0,e;e=b[n];n++){var x=e.object.basisObjectId;c[x]?delete c[x]:(f.push(e.object),this.members_[x]=e.object)}for(x in c)delete this.members_[x];(d=C(f,g(c)))&&this.emit_itemsChanged(d);return d},destroy:function(){R.prototype.destroy.call(this);
this.index_=null}});H=I(R,{className:H+".Cloud",subsetClass:c,subsetWrapperClass:S,rule:d(A),ruleEvents:w(function(a){var f=this.sourceMap_,b=this.members_,c=a.basisObjectId,d=f[c].list,f=f[c].list={},c=this.rule(a),e,n=[],g=[],h;if(Array.isArray(c))for(var z=0;z<c.length;z++)(h=this.keyMap.get(c[z],!0))&&!h.has(a)&&(v=h.basisObjectId,f[v]=h,d[v]||(h.dataset.emit_itemsChanged({inserted:[a]}),b[v]?b[v]++:(n.push(h),b[v]=1)));for(var v in d)f[v]||(h=d[v],h.dataset.emit_itemsChanged({deleted:[a]}),--b[v]||
(delete b[v],g.push(h)));(e=C(n,g))&&this.emit_itemsChanged(e)},"update"),keyMap:null,map:p,listen:{source:{itemsChanged:function(a,f){var c=this.sourceMap_,d=this.members_,n=this.ruleEvents,e,g,h,z=[],v=[];b.setAccumulateState(!0);if(e=f.inserted)for(var p=0,t;t=e[p];p++){var K=this.rule(t),B={object:t,list:{}};c[t.basisObjectId]=B;if(Array.isArray(K))for(var M=0,fa={};M<K.length;M++)(g=this.keyMap.get(K[M],!0))&&!fa[g.basisObjectId]&&(h=g.basisObjectId,fa[h]=!0,B.list[h]=g,g.dataset.emit_itemsChanged({inserted:[t]}),
d[h]?d[h]++:(z.push(g),d[h]=1));n&&t.addHandler(n,this)}if(e=f.deleted)for(p=0;t=e[p];p++){g=t.basisObjectId;K=c[g].list;delete c[g];for(h in K)g=K[h],g.dataset.emit_itemsChanged({deleted:[t]}),--d[h]||(delete d[h],v.push(g));n&&t.removeHandler(n,this)}b.setAccumulateState(!1);(f=C(z,v))&&this.emit_itemsChanged(f)}}},init:function(){this.keyMap&&!1!=this.keyMap instanceof v||(this.keyMap=E(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));R.prototype.init.call(this)},getSubset:function(a,
f){return this.keyMap.get(a,f)},destroy:function(){R.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});J.exports={createRuleEvents:w,Merge:z,Subtract:k,SourceDataset:R,MapFilter:L,Subset:l,Split:y,Slice:M,Cloud:H}},"0.js":function(k,J,a,l,y,H,I,S){a.require("./1.js");a.require("./a.js");a.require("./d.js");a.require("./e.js");a.require("./f.js");a.require("./g.js");a.require("./h.js");a.require("./i.js");a.require("./k.js");a.require("./n.js");a.require("./o.js");a.require("./p.js");
l.basis=a},"2.js":function(k,J,a,l,y,H,I,S){function C(a){var b=[],c;for(c in a)d.call(a,c)&&b.push(c);return b}function w(a,b,c,g){var e=a.cultureValues[b];g=g?g+".":"";for(var n in c)if(d.call(c,n)){var h=g+n,z=c[n];(e[h]=z)&&("object"==typeof z||Array.isArray(z))&&w(a,b,z,h)}}function E(f){var b;if("string"==typeof f){var c=a.path.extname(f);".l10n"!=c&&(f=a.path.dirname(f)+"/"+a.path.basename(f,c)+".l10n");f=a.resource(f)}a.resource.isResource(f)&&(b=B[f.url]);return b||new v(f)}function s(a,
c){a&&!z[a]&&(z[a]=new W(a,c));return z[a||b]}function t(f){if(f&&b!=f&&-1!=c.indexOf(f)){b=f;for(var d=0,g;g=M[d];d++)g.syncValues();a.Token.prototype.set.call(s,f)}}function h(f){"string"==typeof f&&(f=f.trim().split(" "));if(f.length){var d={},g,h;n={};for(var e=0,x;g=f[e];e++)g=g.split("/"),2<g.length&&(g=g.slice(0,2)),x=g[0],h||(h=x),d[x]=s(x),n[x]=g;for(x in n)n[x]=a.array.flatten(n[x].map(function(a){return n[a]})).concat(h).filter(function(a,f,b){return!f||-1==b.lastIndexOf(a,f-1)});c=a.object.keys(d);
!1==b in d&&t(h)}}a.require("./3.js");k=this.path;l=a.Class;var g=a.event.Emitter,d=Object.prototype.hasOwnProperty;a.resource.extensions[".l10n"]=function(f,b){return E(b).update(a.resource.extensions[".json"](f,b))};var p=[],D={},A=l(a.Token,{className:k+".ComputeToken",init:function(f,b){b.computeTokens[this.basisObjectId]=this;this.token=b;this.get=b.computeGetMethod;a.Token.prototype.init.call(this,f)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];
this.token=null;a.Token.prototype.destroy.call(this)}}),F=l(a.Token,{className:k+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(f,b,c,d){a.Token.prototype.init.call(this,d);this.index=p.push(this)-1;this.name=b;this.dictionary=f;this.computeTokens={};c?this.setType(c):this.apply()},toString:function(){return this.get()},computeGetMethod:function(){},apply:function(){var f={},c=this.computeTokens,d="plural"==this.type?function(){return f[z[b].plural(this.value)]}:
function(){return f[this.value]};this.computeGetMethod=d;if("plural"==this.type&&Array.isArray(this.value)||"default"==this.type&&"object"==typeof this.value)f=a.object.slice(this.value,C(this.value));for(var g in c){var e=c[g],n=e.get(),h=d.call(e);e.get=d;n!==h&&e.apply()}a.Token.prototype.apply.call(this)},setType:function(f){"plural"==f||a.l10n.enableMarkup&&"markup"==f||(f="default");this.type!=f&&(this.type=f,this.apply())},compute:function(f,b){1==arguments.length&&(b=f,f="");b=a.getter(b);
f=String(f).trim().split(/\s+|\s*,\s*/).sort();var c=f.concat(this.basisObjectId,b.basisGetterId_).join("_");if(D[c])return D[c];for(var d=this,e={},n=function(a){this.set(b(a))},h={destroy:function(a){delete e[a.basisObjectId];this.destroy()}},z=0,v;v=f[z];z++)"destroy"!=v&&(h[v]=n);return D[c]=function(a){if(!1==a instanceof g)throw 3;var f=a.basisObjectId,c=e[f];c||(c=e[f]=new A(b(a),d),a.addHandler(h,c));return c}},computeToken:function(a){return new A(a,this)},token:function(a){"plural"==this.type&&
(a=z[b].plural(a));if(this.dictionary)return this.dictionary.token(this.name+"."+a)},destroy:function(){for(var f in this.computeTokens)this.computeTokens[f].destroy();this.value=this.computeTokens=null;a.Token.prototype.destroy.call(this)}}),M=[],B={},N=new a.Token,v=l(null,{className:k+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(f){this.tokens={};this.types={};this.cultureValues={};this.index=M.push(this)-1;a.resource.isResource(f)?(this.resource=
f,B[f.url]||(B[f.url]=this,N.set(f.url)),f.fetch()):this.update(f||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]={},w(this,b,a[b]));this.types=a._meta&&a._meta.type||{};for(var c in this.tokens)this.tokens[c].setType(this.types[c]);this.syncValues();return this},syncValues:function(){for(var a in this.tokens)this.tokens[a].set(this.getValue(a))},getValue:function(a){for(var c=n[b]||[],d=0,g;g=c[d];d++)if((g=this.cultureValues[g])&&a in
g)return g[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new F(this,a,this.types[a],this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;a.array.remove(M,this);this.resource&&(delete B[this.resource.url],this.resource=null)}}),c=[],b=null,z={},n={},R={},L=[[1,function(a){return 0}],[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==
a?0:1}],[2,function(a){return 0==a||1==a?0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==
a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:
2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){R[a]=this},L[b])});var W=a.Class(null,{className:k+".Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;z[a]||(z[a]=this);this.pluralForm=b||R[a]||R[a.split("-")[0]]||L[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});a.object.extend(s,new a.Token);s.set=t;h("en-US");t("en-US");J.exports={ComputeToken:A,Token:F,token:function(b){if("#"==b.charAt(0))return p[parseInt(b.substr(1),36)];if(b=b.match(/^(.+?)@(.+)$/))return E(a.path.resolve(b[2])).token(b[1])},
Dictionary:v,dictionary:E,getDictionaries:function(){return M.slice(0)},addCreateDictionaryHandler:N.attach.bind(N),removeCreateDictionaryHandler:N.detach.bind(N),Culture:W,culture:s,getCulture:function(){return b},setCulture:t,getCultureList:function(){return c.slice(0)},setCultureList:h,pluralForms:L,onCultureChange:function(a,c,d){s.attach(a,c);d&&a.call(c,b)}}},"3.js":function(k,J,a,l,y,H,I,S){function C(a){var h=E[a];h||(h=function(){for(var g=this,d,h;g=g.handler;){h=g.callbacks[a];if("function"==
typeof h){if(!d){d=[this];for(var k=0;k<arguments.length;k++)d.push(arguments[k])}h.apply(g.context||this,d)}h=g.callbacks["*"];if("function"==typeof h){if(!d)for(d=[this],k=0;k<arguments.length;k++)d.push(arguments[k]);h.call(g.context||this,{sender:this,type:a,args:d})}}},E[a]=h);return h}k=a.Class;var w={},E={},s=function(){};k=k(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:C("destroy"),listen:k.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&
(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(a,h){this.handler={callbacks:a,context:h||this,handler:this.handler}},removeHandler:function(a,h){var g=this,d;for(h=h||this;d=g,g=g.handler;)if(g.callbacks===a&&g.context===h){g.callbacks=w;d.handler=g.handler;break}},destroy:function(){this.destroy=s;this.emit_destroy();this.handler=null}});J.exports={create:C,createHandler:function(a,h){var g={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var g=
{events:a},d=0,p;p=a[d];d++)"destroy"!=p&&(g[p]=h)}return g},events:E,Emitter:k}},"4.js":function(k,J,a,l,y,H,I,S){function C(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}function w(a){var c=R[a];if(!c)for(var e=[],d={},G=1,c=R[a]={actions:e,handler:d};a;){if(a&1){var Z=b[G];e.push(Z.action);for(var f in Z.handler)d[f]=d[f]?C(d[f],Z.handler[f]):Z.handler[f]}G<<=1;a>>=1}return c}function E(a,b){for(;b&&b!==a&&b!==b.delegate;)b=b.delegate;return b===a}function s(a,b,c){var e=
a.delegate;e&&(a.root=e.root,a.target=e.target,a.data=e.data,a.state=e.state);if(a.root!==b){if(e=a.listen.root)b&&b!==a&&b.removeHandler(e,a),a.root&&a.root!==a&&a.root.addHandler(e,a);a.emit_rootChanged(b)}if(a.target!==c){if(e=a.listen.target)c&&c!==a&&c.removeHandler(e,a),a.target&&a.target!==a&&a.target.addHandler(e,a);a.emit_targetChanged(c)}for(a=a.delegates_;a;)a.delegate&&s(a.delegate,b,c),a=a.next}function t(a,b){var c={},e;a&&a.length&&(e=c.inserted=a);b&&b.length&&(e=c.deleted=b);if(e)return c}
function h(a,b){if(a&&a.itemCount){if(b&&b.itemCount){var c=[],e=[],G;for(G in a.items_){var Z=a.items_[G];!1==Z.basisObjectId in b.items_&&e.push(Z)}for(G in b.items_)Z=b.items_[G],!1==Z.basisObjectId in a.items_&&c.push(Z);return t(c,e)}if(a.itemCount)return{deleted:a.getItems()}}else if(b&&b.itemCount)return{inserted:b.getItems()}}function g(b,c,d,f){var G=b[f]||null,Z=null;"function"==typeof d&&(d=d.call(b,b));d instanceof ea&&(Z=new K(b,c,d,$),d=d.dataset);d instanceof a.Token&&(d=e.from(d));
d instanceof e&&(Z=new K(b,c,d,ja),d=g(Z,Z.proxy,d.value,"adapter_"));!1==d instanceof aa&&(d=null);f&&G!==Z&&(G&&(G.source.removeHandler(G.handler,G),G.adapter_&&g(G,null,null,"adapter_")),Z&&Z.source.addHandler(Z.handler,Z),b[f]=Z);return d}function d(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function p(a){a&&a.constructor===Object||(a={value:a});return new X({data:a})}a.require("./3.js");k=this.path;l=a.Class;var D=a.cleaner,A=a.object.values;I=a.fn.$self;var F=a.event.Emitter;
y=a.event.create;var M=a.event.events,B={},N=[],v={},c={priority:[],values:{},add:function(a,b){var e=a.toLowerCase();c[a]=e;v[e]=a;this.values[e]=a;b=b?this.priority.indexOf(b):-1;-1==b?this.priority.push(e):this.priority.splice(b,0,e)},getList:function(){return A(v)}};c.add("READY");c.add("DEPRECATED");c.add("UNDEFINED");c.add("ERROR");c.add("PROCESSING");var b={},z=1,n={NONE:0,ALL:0,link:function(a,b,c){a+=b.basisObjectId;var e=c.subscribers_;e||(e=c.subscribers_={});e[a]||(e[a]=b,1==(c.subscriberCount+=
1)&&c.emit_subscribersChanged(1))},unlink:function(a,b,c){a+=b.basisObjectId;(b=c.subscribers_)&&b[a]&&(delete b[a],0==(c.subscriberCount-=1)&&(c.emit_subscribersChanged(-1),c.subscribers_=null))},add:function(a,c,e){b[z]={handler:c,action:e};n[a]=z;n.ALL|=z;z<<=1},addProperty:function(a,b){var c={};c[b||a+"Changed"]=function(b,G){G&&n.unlink(a,b,G);b[a]&&n.link(a,b,b[a])};this.add(a.toUpperCase(),c,function(b,G){G[a]&&b(a,G,G[a])})}},R={};n.addProperty("delegate");n.addProperty("target");n.addProperty("dataset");
var L=l(F,{className:k+".AbstractData",state:c.UNDEFINED,emit_stateChanged:y("stateChanged","oldState"),active:!1,emit_activeChanged:y("activeChanged"),subscribeTo:n.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:y("subscribersChanged","delta"),syncEvents:l.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){F.prototype.init.call(this);this.active&&this.addHandler(w(this.subscribeTo).handler);
var a=this.syncAction;a&&(this.syncAction=null,this.setSyncAction(a))},setState:function(a,b){var c=String(a);if(!v[c])throw 4;if(this.state!=c||this.state.data!=b){var e=this.state;this.state=Object(c);this.state.data=b;this.emit_stateChanged(e);return!0}return!1},deprecate:function(){this.state!=c.PROCESSING&&this.setState(c.DEPRECATED)},setActive:function(a){a=!!a;if(this.active!=a){this.active=a;this.emit_activeChanged();if(a){a=w(this.subscribeTo);for(var b=0,c;c=a.actions[b];b++)c(n.link,this);
this.addHandler(a.handler)}else{a=w(this.subscribeTo);for(b=0;c=a.actions[b++];)c(n.unlink,this);this.removeHandler(a.handler)}return!0}return!1},setSubscription:function(a){var c=this.subscribeTo,e=a&n.ALL;if(a=c^e){this.subscribeTo=e;if(this.active){var d=w(c),e=w(e);this.removeHandler(d.handler);this.addHandler(e.handler);for(d=1;a;)a&1&&(e=b[d],c&d?e.action(n.unlink,this):e.action(n.link,this)),d<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==
c.UNDEFINED||this.state==c.DEPRECATED)},setSyncAction:function(a){var b=this.syncAction;"function"!=typeof a&&(a=null);(this.syncAction=a)?(b||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):b&&this.removeHandler(this.syncEvents)},destroy:function(){F.prototype.destroy.call(this);if(this.active)for(var a=w(this.subscribeTo),b=0,e;e=a.actions[b];b++)e(n.unlink,this);this.state=c.UNDEFINED}}),W={},f={},Y=function(a){this.set(this.fn(a))},P={destroy:function(a){this.value.unlink(a,
this.fn)}},T={destroy:function(a){this.set(null)}},e=l(L,{className:k+".Value",emit_change:y("change","oldValue")&&function(a){M.change.call(this,a);for(var b=this;b=b.links_;)b.fn.call(b.context,this.value,a)},value:null,initValue:null,proxy:null,locked:!1,lockedValue_:null,links_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,b,c){a.link(c,b,!0)},detach:function(a,b,c){a.unlink(c,b)},get:function(a){return a.value}},init:function(){L.prototype.init.call(this);this.proxy&&(this.value=
this.proxy(this.value));this.setNullOnEmitterDestroy&&this.value instanceof F&&this.value.addHandler(T,this);this.initValue=this.value},set:function(a){var b=this.value;a=this.proxy?this.proxy(a):a;var c=a!==b;c&&(this.setNullOnEmitterDestroy&&(b instanceof F&&b.removeHandler(T,this),a instanceof F&&a.addHandler(T,this)),this.value=a,this.locked||this.emit_change(b));return c},reset:function(){this.set(this.initValue)},lock:function(){this.locked||(this.locked=!0,this.lockedValue_=this.value)},unlock:function(){if(this.locked){var a=
this.lockedValue_;this.lockedValue_=null;this.locked=!1;this.value!==a&&this.emit_change(a)}},compute:function(b,c){c||(c=b,b=null);var e=this,d=a.event.createHandler(b,function(a){this.set(c(a,e.value))}),G=d.events.concat(String(c),this.basisObjectId).join("_"),Z=W[G];if(!Z){var f={};d.destroy=function(a){delete f[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in f){var b=f[a];b.token.set(c(b.object,this.value))}},destroy:function(){for(var a in f){var b=f[a];b.object.removeHandler(d,
b.token);b.token.destroy()}e=f=null}});Z=W[G]=function(b){var G=b.basisObjectId,r=f[G],m=c(b,e.value);r?r.token.set(m):(r=new a.Token(m),b.addHandler(d,r),r=f[G]={token:r,object:b});return r.token};Z.deferred=function(){return function(a){return Z(a).deferred()}}}return Z},as:function(b,c){if(this.links_)for(var e=this;e=e.links_;)if(e.context instanceof a.Token&&e.context.fn==String(b))return c?e.context.deferred():e.context;e=new a.Token;e.fn=b;this.link(e,Y);return c?e.deferred():e},deferred:function(a){return this.as(a,
!0)},link:function(a,b,c){if("function"!=typeof b){var e=String(b);(b=f[e])||(b=f[e]=function(a){this[e]=a})}this.links_={value:this,context:a,fn:b,links_:this.links_};a instanceof F&&a.addHandler(P,this.links_);c||b.call(a,this.value);return a},unlink:function(b,c){for(var e=this,d;d=e,e=e.links_;)e.context!==b||c&&e.fn!==c||(e.fn=a.fn.$undef,d.links_=e.links_,e.context instanceof F&&e.context.removeHandler(P,e))},destroy:function(){L.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof
F&&this.value.removeHandler(T,this);for(var a=this;a=a.links_;)a.context instanceof F&&a.context.removeHandler(P,a);this.links_=this.lockedValue_=this.value=this.initValue=this.proxy=null}}),x={};e.from=function(b,c,d){var f;if(!b)return null;if(b instanceof F){d||(d=c,c=null);c=a.event.createHandler(c,function(a){this.set(d(a))});var G=c.events.concat(String(d),b.basisObjectId).join("_");f=x[G];f||(d=a.getter(d),f=x[G]=new e({value:d(b)}),c.destroy=function(a){delete x[G];this.destroy()},b.addHandler(c,
f))}f||(G=b.basisObjectId,c=b.bindingBridge,G&&c&&(f=x[G],f||(f=x[G]=new e({value:c.get(b)}),c.attach(b,f.set,f))));if(!f)throw 5;return f};e.factory=function(a,b){return function(c){return e.from(c,a,b)}};var X=l(L,{className:k+".Object",subscribeTo:n.DELEGATE+n.TARGET,data:null,emit_update:y("update","delta")&&function(a){var b=this.delegates_;for(M.update.call(this,a);b;)b.delegate&&b.delegate.emit_update(a),b=b.next},emit_stateChanged:function(a){var b=this.delegates_;for(L.prototype.emit_stateChanged.call(this,
a);b;)b.delegate&&(b.delegate.state=this.state,b.delegate.emit_stateChanged(a)),b=b.next},delegate:null,delegates_:null,emit_delegateChanged:y("delegateChanged","oldDelegate"),target:null,emit_targetChanged:y("targetChanged","oldTarget"),root:null,emit_rootChanged:y("rootChanged","oldRoot"),init:function(){this.root=this;L.prototype.init.call(this);var a=this.delegate;a?(this.target=this.delegate=null,this.data=a.data,this.state=a.state,this.setDelegate(a)):(this.data||(this.data={}),null!==this.target&&
(this.target=this))},setDelegate:function(a){if(a&&a instanceof X){if(a.delegate&&E(this,a))return!1}else a=null;if(this.delegate!==a){var b=this.state,c=this.data,e=this.delegate,G=this.target,d=this.root,f={},g=!1,n=this.listen.delegate;if(e){n&&e.removeHandler(n,this);for(var r=e.delegates_,m=e;r;){if(r.delegate===this){r.delegate=null;m===e?e.delegates_=r.next:m.next=r.next;break}m=r;r=r.next}}if(a){this.delegate=a;a.delegates_={delegate:this,next:a.delegates_};for(var q in a.data)!1===q in c&&
(g=!0,f[q]=void 0);for(q in c)c[q]!==a.data[q]&&(g=!0,f[q]=c[q]);n&&a.addHandler(n,this)}else for(q in this.target=this.delegate=null,this.root=this,this.data={},c)this.data[q]=c[q];s(this,d,G);g&&this.emit_update(f);b===this.state||String(b)==this.state&&b.data===this.state.data||this.emit_stateChanged(b);this.emit_delegateChanged(e);return!0}return!1},setState:function(a,b){return this.delegate?this.root.setState(a,b):L.prototype.setState.call(this,a,b)},update:function(a){if(this.delegate)return this.root.update(a);
if(a){var b={},c=!1,e;for(e in a)this.data[e]!==a[e]&&(c=!0,b[e]=this.data[e],this.data[e]=a[e]);if(c)return this.emit_update(b),b}return!1},destroy:function(){L.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.data=B;this.target=this.root=null}});H=l(X,{className:k+".Slot"});var ca={destroy:function(){delete this.map[this.itemId]}};I=l(null,{className:k+".KeyObjectMap",itemClass:X,keyGetter:I,map_:null,
extendConstructor_:!0,init:function(){this.map_={};D.add(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a,b){var c={};a instanceof X?c.delegate=a:c.data={id:a,title:a};return new this.itemClass(c)},get:function(a,b){var c=a instanceof X?a.basisObjectId:a,e=this.map_[c];!e&&b&&(e=this.map_[c]=this.create(a,b),e.addHandler(ca,{map:this.map_,itemId:c}));return e},destroy:function(){D.remove(this);for(var a=A(this.map_),b=0,c;c=a[b++];)c.destroy()}});var ea=l(X,{className:k+
".DatasetWrapper",subscribeTo:X.prototype.subscribeTo+n.DATASET,listen:{dataset:{itemsChanged:function(a,b){this.itemCount=a.itemCount;this.emit_itemsChanged(b)},destroy:function(){this.setDataset()}}},dataset:null,datasetAdapter_:null,emit_datasetChanged:y("datasetChanged","oldDataset"),emit_itemsChanged:y("itemsChanged","delta"),init:function(){X.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=g(this,this.setDataset,a,"datasetAdapter_");
if(this.dataset!==a){var b=this.listen.dataset,c=this.dataset,e;b&&(c&&c.removeHandler(b,this),a&&a.addHandler(b,this));this.itemCount=a?a.itemCount:0;(e=h(c,a))&&this.emit_itemsChanged(e);this.dataset=a;this.emit_datasetChanged(c)}},has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},
destroy:function(){(this.dataset||this.datasetAdapter_)&&this.setDataset();X.prototype.destroy.call(this)}}),aa=l(L,{className:k+".AbstractDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:y("itemsChanged","delta")&&function(a){var b,c=0,e=0,G;if(b=a.inserted)for(;G=b[c];)this.items_[G.basisObjectId]=G,c++;if(b=a.deleted)for(;G=b[e];)delete this.items_[G.basisObjectId],e++;this.itemCount+=c-e;this.cache_=c==this.itemCount?a.inserted:null;M.itemsChanged.call(this,a)},init:function(){L.prototype.init.call(this);
this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},getItems:function(){this.cache_||(this.cache_=A(this.items_));return this.cache_},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var b=[];if(a)for(var c in this.items_)if(b.push(this.items_[c])>=a)break;return b},forEach:function(a){for(var b=this.getItems(),c=0;c<b.length;c++)a(b[c])},clear:function(){},destroy:function(){this.clear();L.prototype.destroy.call(this);
this.cache_=N;this.itemCount=0;this.items_=this.members_=null}}),U=l(aa,{className:k+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){aa.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var b=this.members_,c=this.listen.item,e=[],G;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var f=a[d];if(f instanceof X){var g=f.basisObjectId;b[g]||(b[g]=f,c&&f.addHandler(c,this),e.push(f))}}e.length&&this.emit_itemsChanged(G=
{inserted:e});return G},remove:function(a){var b=this.members_,c=this.listen.item,e=[],G;a&&!Array.isArray(a)&&(a=[a]);for(var d=0;d<a.length;d++){var f=a[d];if(f instanceof X){var g=f.basisObjectId;b[g]&&(c&&f.removeHandler(c,this),delete b[g],e.push(f))}}e.length&&this.emit_itemsChanged(G={deleted:e});return G},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var b=this.members_,c=this.listen.item,e={},G=[],d=[],f,g,n,r=0;r<a.length;r++)f=a[r],f instanceof
X&&(g=f.basisObjectId,e[g]=f,b[g]||(b[g]=f,c&&f.addHandler(c,this),d.push(f)));for(g in b)e[g]||(f=b[g],c&&f.removeHandler(c,this),delete b[g],G.push(f));(n=t(d,G))&&this.emit_itemsChanged(n);return n},sync:function(a){a=this.set(a)||{};var b=a.deleted;U.setAccumulateState(!0);if(b)for(var c=0,e;e=b[c];c++)e.destroy();U.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),b=this.listen.item,c;if(a.length){if(b)for(c=0;c<a.length;c++)a[c].removeHandler(b,this);this.emit_itemsChanged(c=
{deleted:a});this.members_={}}return c}}),K=function(a,b,c,e){this.context=a;this.fn=b;this.source=c;this.handler=e};K.prototype.adapter_=null;K.prototype.proxy=function(){this.fn.call(this.context,this.source)};var $={datasetChanged:function(a){this.fn.call(this.context,a)},destroy:function(){this.fn.call(this.context,null)}},ja={change:function(a){this.fn.call(this.context,a)},destroy:function(){this.fn.call(this.context,null)}};U.setAccumulateState=function(){function b(){var a=n;n={};for(var c in a){var m=
a[c];G.call(m.dataset,m)}}function c(a){var b=this.basisObjectId,m=a.inserted,q=a.deleted,e=n[b];if(m&&q)e&&(delete n[b],G.call(e.dataset,e)),G.call(this,a);else{if(e){var d=e[m?"inserted":"deleted"];if(d){d.push.apply(d,m||q);return}G.call(e.dataset,e)}n[b]=a;a.dataset=this}}function e(){g=null;f&&(f=0,d.emit_itemsChanged=G,b())}var d=aa.prototype,G=d.emit_itemsChanged,f=0,g,n={};return function(n){n?(0==f&&(d.emit_itemsChanged=c,g||(g=a.setImmediate(e))),f++):(f-=0<f,0==f&&(d.emit_itemsChanged=
G,b()))}}();J.exports={STATE:c,SUBSCRIPTION:n,AbstractData:L,Value:e,Object:X,Slot:H,KeyObjectMap:I,AbstractDataset:aa,Dataset:U,DatasetWrapper:ea,DatasetAdapter:K,isConnected:E,getDatasetDelta:h,resolveDataset:g,wrapData:d,wrapObject:p,wrap:function(a,b){var c=b?p:d;return Array.isArray(a)?a.map(c):c(a)}}},"5.js":function(k,J,a,l,y,H,I,S){function C(){}function w(){}function E(){}function s(a){var b=a.constructor.prototype;a.setDelegate=b.setDelegate;a.destroy=b.destroy}function t(a){return a.sortingValue||
0}function h(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function g(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function d(a){return a.childNodes.sort(a.sortingDesc?g:h)}function p(a,b,c,e){if(!a.length)return 0;e=!!e;var d,r,m=0,q=a.length-1;do if(d=m+q>>1,r=c(a[d]),e?b>r:b<r)q=d-1;else if(e?b<r:b>r)m=d+1;else return b==r?d:0;while(m<=q);return d+(r<b^e)}function D(a,b,c,e,d){if(b!==c){var r=a,m=[];e&&(a.contextSelection=c,a.selected&&m.push(a));for(;r;){if((e=
!r.selection||d&&r===a?r.firstChild:null)&&e.contextSelection!==b)throw 6;for(;!e;){if(r===a){m.length&&(b&&b.remove(m),c&&c.add(m));return}e=r.nextSibling;e||(r=r.parentNode)}r=e;r.selected&&m.push(r);r.contextSelection=c}}}function A(a,b){a.contextDisabled!=b&&(a.contextDisabled=b,a.disabled||(b?a.emit_disable():a.emit_enable()))}function F(b){if(!b)return null;if(b.isSatelliteConfig||b instanceof U)return b;v.isClass(b)&&(b={instanceOf:b});if(b&&b.constructor===Object){var c=!1,e={isSatelliteConfig:!0},
d,f;for(f in b)switch(f){case "instance":b[f]instanceof U&&(e[f]=b[f]);break;case "instanceOf":v.isClass(b[f])&&b[f].isSubclassOf(U)&&(d=b[f]);break;case "existsIf":case "delegate":case "dataSource":c=!0;e[f]=R(b[f]);break;case "config":e[f]=b[f]}e.instance||(e.instanceOf=d||U);if(c&&(c="events"in b?b.events:"update","hook"in b&&!1=="events"in b&&(c=a.object.keys(b.hook)),Array.isArray(c)&&(c=c.join(" ")),"string"==typeof c))for(b={},c=c.split(/\s+/),d=0;f=c[d];d++)b[f]=ea,e.handler=b;return e}return null}
function M(a,b){for(var c in b)a[c]=F(b[c])}function B(a,b){var c=b.length-1;a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[c]||null;for(var e=c;c=b[e];e--)c.nextSibling=b[e+1]||null,c.previousSibling=b[e-1]||null,a.insertBefore(c,c.nextSibling)}function N(a,b){var c;if("function"==typeof a.childFactory&&(c=a.childFactory(b),c instanceof a.childClass))return c;if(!c)throw 9;throw 10;}a.require("./3.js");a.require("./4.js");k=this.path;var v=a.Class,c=a.object.complete,b=a.array,z=a.array.remove,
n=a.fn.$undef,R=a.getter,L=a.fn.nullGetter;l=a.event.create;var W=a.event.events;y=a.data.SUBSCRIPTION;var f=a.data.STATE,Y=a.data.Object,P=a.data.AbstractDataset,T=a.data.Dataset,e={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},x={};y.addProperty("owner");y.addProperty("dataSource");var X=v.customExtendProperty({},function(a,b){M(a,b)}),ca=v.customExtendProperty({},M),ea=function(a){var b=this.name,c=this.config,e=!c.existsIf||c.existsIf(a),d=a.satellite[b];e?d?(c.delegate&&d.setDelegate(c.delegate(a)),
c.dataSource&&d.setDataSource(c.dataSource(a))):((d=c.instance)?(c.delegate&&d.setDelegate(c.delegate(a)),c.dataSource&&d.setDataSource(c.dataSource(a))):(e=("function"==typeof c.config?c.config(a):c.config)||{},e.owner=a,c.delegate&&(e.autoDelegate=!1,e.delegate=c.delegate(a)),c.dataSource&&(e.dataSource=c.dataSource(a)),d=new c.instanceOf(e),d.destroy=E,a.listen&&a.listen.satellite&&d.addHandler(a.listen&&a.listen.satellite,a)),a.satellite.__auto__[b].instance=d,a.setSatellite(b,d,!0)):d&&(c.instance&&
(c.delegate&&d.setDelegate(),c.dataSource&&d.setDataSource()),a.satellite.__auto__[b].instance=null,a.setSatellite(b,null,!0))},aa={destroy:function(){this.owner.setSatellite(this.name,null)}},U=v(Y,{className:k+".AbstractNode",subscribeTo:Y.prototype.subscribeTo+y.DATASOURCE,isSyncRequired:function(){return this.state==f.UNDEFINED||this.state==f.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){Y.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),
a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:e.NONE,name:null,childNodes:null,emit_childNodesModified:l("childNodesModified","delta")&&function(a){W.childNodesModified.call(this,a);var b=this.listen.childNode,c;if(b){if(c=a.inserted)for(var e=0,d;d=c[e];e++)d.addHandler(b,this);if(c=a.deleted)for(e=0;d=c[e];e++)d.removeHandler(b,this)}},childNodesState:f.UNDEFINED,emit_childNodesStateChanged:l("childNodesStateChanged",
"oldState"),childClass:U,dataSource:null,emit_dataSourceChanged:l("dataSourceChanged","oldDataSource"),dataSourceAdapter_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:L,sortingDesc:!1,emit_sortingChanged:l("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:l("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satelliteConfig:X,satellite:ca,
ownerSatelliteName:null,emit_satelliteChanged:l("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:l("ownerChanged","oldOwner"),init:function(){Y.prototype.init.call(this);var b=this.childNodes,c=this.dataSource;b&&(this.childNodes=null);c&&(this.dataSource=null);var e=this.grouping;e&&(this.grouping=null,this.setGrouping(e));this.childClass&&(this.childNodes=[],c?this.setDataSource(c):b&&this.setChildNodes(b));b=this.satellite;this.satelliteConfig!==X&&(b=a.object.merge(b,this.satelliteConfig));
if(b!==ca){this.satellite=ca;for(var d in b)b[d]&&"object"==typeof b[d]&&this.setSatellite(d,b[d])}if(d=this.owner)this.owner=null,this.setOwner(d)},setChildNodesState:function(a,b){var c=String(a),e=this.childNodesState;if(!f.values[c])throw 7;if(e!=c||e.data!=b)this.childNodesState=Object(c),this.childNodesState.data=b,this.emit_childNodesStateChanged(e)},appendChild:function(a){},insertBefore:function(a,b){},removeChild:function(a){},replaceChild:function(a,b){},clear:function(a){},setChildNodes:function(a){},
setGrouping:function(a,b){},setSorting:function(a,b){},setDataSource:function(a){},setOwner:function(a){a&&!1!=a instanceof U||(a=null);if(a&&this.parentNode)throw 8;var b=this.owner;if(b!==a){var c=this.listen.owner;if(b){if(this.ownerSatelliteName&&b.satellite.__auto__&&this.ownerSatelliteName in b.satellite.__auto__)return;c&&b.removeHandler(c,this);this.ownerSatelliteName&&(this.owner=null,b.setSatellite(this.ownerSatelliteName,null))}a&&c&&a.addHandler(c,this);this.owner=a;this.emit_ownerChanged(b);
this.autoDelegate!=e.OWNER&&this.autoDelegate!==e.ANY||this.setDelegate(a)}},setSatellite:function(a,b,c){var e=this.satellite[a]||null,d=this.satellite.__auto__,r=d&&d[a],m=c&&r;if(m)b=r.instance,r.config.instance&&b&&delete r.config.instance.setOwner;else{if((b=F(b))&&b.owner&&d&&b.ownerSatelliteName&&d[b.ownerSatelliteName])return;r&&(delete d[a],r.config.instance&&r.config.instance.removeHandler(aa,r),r.config.handler&&this.removeHandler(r.config.handler,r))}if(e!==b){c=this.listen.satellite;
var q;e&&(delete this.satellite[a],e.ownerSatelliteName=null,r&&e.destroy===E?q=e:(c&&e.removeHandler(c,this),e.setOwner(null)),m&&!b&&r.config.instance&&(r.config.instance.setOwner=w));if(b){if(!1==b instanceof U){r={owner:this,name:a,config:b,instance:null};b.handler&&this.addHandler(b.handler,r);b.instance&&(b.instance.addHandler(aa,r),b.instance.setOwner=w);d||(this.satellite===ca&&(this.satellite={}),d=this.satellite.__auto__={});d[a]=r;ea.call(r,this);!r.instance&&e&&this.emit_satelliteChanged(a,
e);q&&(delete q.destroy,q.destroy());return}if(b.owner!==this){r&&r.config.delegate?(d=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),b.autoDelegate=d):b.setOwner(this);if(b.owner!==this)return;c&&b.addHandler(c,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==ca&&(this.satellite={});this.satellite[a]=b;b.ownerSatelliteName=a}this.emit_satelliteChanged(a,e);q&&(delete q.destroy,q.destroy())}},getChildNodesDataset:function(){return x[this.basisObjectId]||
new V({sourceNode:this})},destroy:function(){Y.prototype.destroy.call(this);this.dataSource||this.dataSourceAdapter_?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==ca){var b=a.__auto__;delete a.__auto__;for(var c in b)b[c].config.instance&&!b[c].instance&&b[c].config.instance.destroy();for(c in a)b=a[c],b.owner=null,b.ownerSatelliteName=
null,b.destroy===E&&delete b.destroy,b.destroy();this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=this.parentNode=this.childNodes=null}}),K=v(U,{className:k+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];U.prototype.init.call(this)},insert:function(a,b){var c=this.nodes,e=b?c.indexOf(b):-1;-1==e?(c.push(a),this.last=a):c.splice(e,0,a);this.first=c[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},
remove:function(a){var b=this.nodes;z(b,a)&&(this.first=b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,b=a.length;0<b--;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){U.prototype.destroy.call(this);this.last=this.first=this.nodes=
null}}),$={childClass:U,childFactory:null,listen:{dataSource:{itemsChanged:function(c,e){var d={},f=[];if(e.deleted)if(d.deleted=f,this.childNodes.length==e.deleted.length){for(var f=b(this.childNodes),g=0,r;r=f[g];g++)s(r);g=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=g;this.dataSourceMap_={}}else for(g=0;r=e.deleted[g];g++){r=r.basisObjectId;var m=this.dataSourceMap_[r];s(m);delete this.dataSourceMap_[r];this.removeChild(m);f.push(m)}if(e.inserted)for(d.inserted=[],g=0;r=
e.inserted[g];g++){var q=m=N(this,{delegate:r});q.setDelegate=a.fn.$undef;q.destroy=C;this.dataSourceMap_[r.basisObjectId]=m;d.inserted.push(m);this.firstChild&&this.insertBefore(m)}this.firstChild?this.emit_childNodesModified(d):this.setChildNodes(d.inserted);if(this.destroyDataSourceMember&&f.length)for(g=0;r=f[g];g++)r.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(a){this.dataSourceAdapter_||this.setDataSource()}}},getChild:function(b,c){return a.array.search(this.childNodes,
b,c)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,b){if(!this.childClass)throw 11;if(a.firstChild)for(var c=this;c=c.parentNode;)if(c===a)throw 12;var d=a&&a instanceof this.childClass;if(this.dataSource){if(!d||!a.delegate||this.dataSourceMap_[a.delegate.basisObjectId]!==a)throw 13;}else if(this.dataSourceAdapter_)throw 14;d||(a=N(this,a instanceof Y?{delegate:a}:a));if(a.owner)throw 15;var d=a.parentNode===
this,f=this.childNodes,r=this.grouping,m=a.groupNode,q=null,u=this.sorting,g,n=!1,Q,c=-1,h,K;d&&(h=a.nextSibling,K=a.previousSibling);u!==L&&(b=null,g=this.sortingDesc,Q=u(a)||0,d&&(Q===a.sortingValue?n=!0:(!h||(g?h.sortingValue<=Q:h.sortingValue>=Q))&&(!K||(g?K.sortingValue>=Q:K.sortingValue<=Q))&&(a.sortingValue=Q,n=!0)));if(r){q=r.getGroupNode(a,!0);r=q.nodes;if(m===q&&(n||u===L&&h===b))return a;u!==L?m===q&&n?c=h&&h.groupNode===q?r.indexOf(h):r.length:(c=p(r,Q,t,g),a.sortingValue=Q):c=b&&b.groupNode===
q?r.indexOf(b):r.length;if(c<r.length)b=r[c];else if(q.last)b=q.last.nextSibling;else for(c=q,b=null;(c=c.nextSibling)&&!(b=c.first););if(a===b||d&&h===b)return m!==q&&(m&&m.remove(a),q.insert(a,b)),a;c=-1}else if(u!==L){if(n)return a;c=p(f,Q,t,g);b=f[c];a.sortingValue=Q;if(a===b||d&&h===b)return a}else{if(b&&b.parentNode!==this)throw 16;if(d){if(h===b)return a;if(a===b)throw 17;}}d?(h?(h.previousSibling=K,a.nextSibling=null):this.lastChild=K,K?(K.nextSibling=h,a.previousSibling=null):this.firstChild=
h,-1==c?z(f,a):(g=f.indexOf(a),f.splice(g,1),c-=g<c),m&&(m.remove(a),m=null)):a.parentNode&&a.parentNode.removeChild(a);m!=q&&q.insert(a,b);if(b){-1==c&&(c=f.indexOf(b));if(-1==c)throw 18;a.nextSibling=b;f.splice(c,0,a)}else c=f.length,f.push(a),b={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=b.previousSibling;0==c?this.firstChild=a:b.previousSibling.nextSibling=a;b.previousSibling=a;d||(D(a,a.contextSelection,this.selection||this.contextSelection,!0),A(a,this.disabled||
this.contextDisabled),(a.underMatch_||this.matchFunction)&&a.match&&a.match(this.matchFunction),a.autoDelegate!=e.PARENT&&a.autoDelegate!==e.ANY||a.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[a]}),a.listen.parentNode&&this.addHandler(a.listen.parentNode,a));return a},removeChild:function(a){if(!a||a.parentNode!==this)throw 19;if(!1==a instanceof this.childClass)throw 20;if(this.dataSource){if(this.dataSource.has(a.delegate))throw 21;}else if(this.dataSourceAdapter_)throw 22;
var b=this.childNodes.indexOf(a);if(-1==b)throw 23;this.childNodes.splice(b,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);D(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);this.dataSource||this.emit_childNodesModified({deleted:[a]});
a.autoDelegate!=e.PARENT&&a.autoDelegate!==e.ANY||a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw 24;if(this.dataSourceAdapter_)throw 25;if(null==b||b.parentNode!==this)throw 26;this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource&&this.dataSource.itemCount)throw 27;if(this.firstChild){a&&D(this,this.selection||this.contextSelection,null,!1,!0);var b=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:b});
for(var c=b.length;0<c--;){var d=b[c];d.listen.parentNode&&d.parentNode.removeHandler(d.listen.parentNode,d);d.parentNode=null;d.groupNode=null;a?(d.nextSibling=null,d.previousSibling=null,d.autoDelegate!=e.PARENT&&d.autoDelegate!==e.ANY||d.setDelegate()):d.destroy()}if(this.grouping)for(b=this.grouping.childNodes,c=b.length-1;a=b[c];c--)a.clear()}},setChildNodes:function(a,b){this.dataSource||this.dataSourceAdapter_||this.clear(b);if(a&&(!1=="length"in a&&(a=[a]),a.length)){var c=this.emit_childNodesModified;
this.emit_childNodesModified=n;for(var e=0,d=a.length;e<d;e++)this.insertBefore(a[e]);this.emit_childNodesModified=c;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(b){if(!this.childClass)throw 28;b=a.data.resolveDataset(this,this.setDataSource,b,"dataSourceAdapter_");if(this.dataSource!==b){var c=this.dataSource,e=this.listen.dataSource;c&&(this.dataSource=this.dataSourceMap_=null,e&&c.removeHandler(e,this));if(this.firstChild){if(c)for(var d=0,g;g=this.childNodes[d];d++)s(g);
this.clear()}(this.dataSource=b)?(this.dataSourceMap_={},this.setChildNodesState(b.state,b.state.data),e&&(b.addHandler(e,this),b.itemCount&&e.itemsChanged&&e.itemsChanged.call(this,b,{inserted:b.getItems()}))):this.setChildNodesState(f.UNDEFINED);this.emit_dataSourceChanged(c)}},setGrouping:function(a,b){if("function"==typeof a||"string"==typeof a)a={rule:a};!1==a instanceof fa&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var c=this.grouping,e;if(c){this.grouping=
null;if(!a&&this.firstChild){e=this.sorting!==L?d(this):this.childNodes;c.nullGroup.clear();for(var f=c.childNodes.slice(0),r=0;r<f.length;r++)f[r].clear();B(this,e)}c.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){e=this.sorting!==L?d(this):this.childNodes;for(r=0;f=e[r];r++)f.groupNode=this.grouping.getGroupNode(f,!0);for(r=0;f=e[r];r++)f.groupNode.nodes.push(f);e.length=0;for(r=this.grouping.nullGroup;r;r=r.nextSibling)f=r.nodes,r.first=f[0]||null,r.last=f[f.length-1]||null,
e.push.apply(e,f),r.emit_childNodesModified({inserted:f});B(this,e)}this.emit_groupingChanged(c)}},setSorting:function(a,b){a=R(a);b=!!b;if(this.sorting!==a||this.sortingDesc!=!!b){var c=this.sorting,e=this.sortingDesc;this.sorting=a;this.sortingDesc=!!b;if(a!==L&&this.firstChild){var f=[],r;for(r=this.firstChild;r;r=r.nextSibling)r.sortingValue=a(r)||0;if(this.grouping)for(var m=this.grouping.nullGroup;m;m=m.nextSibling)r=m.nodes=d({childNodes:m.nodes,sortingDesc:this.sortingDesc}),m.first=r[0]||
null,m.last=r[r.length-1]||null,f.push.apply(f,r);else f=d(this);B(this,f)}this.emit_sortingChanged(c,e)}},setMatchFunction:function(a){if(this.matchFunction!=a){var b=this.matchFunction;this.matchFunction=a;for(var c=this.lastChild;c;c=c.previousSibling)c.match(a);this.emit_matchFunctionChanged(b)}}},ja=v(U,$,{className:k+".Node",emit_enable:l("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)A(a,!1);W.enable.call(this)},emit_disable:l("disable")&&function(){for(var a=this.firstChild;a;a=
a.nextSibling)A(a,!0);W.disable.call(this)},emit_satelliteChanged:function(a,b){U.prototype.emit_satelliteChanged.call(this,a,b);this.satellite[a]instanceof ja&&A(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:l("select"),emit_unselect:l("unselect"),emit_match:l("match"),emit_unmatch:l("unmatch"),emit_matchFunctionChanged:l("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,contextDisabled:!1,
listen:{owner:{enable:function(){A(this,!1)},disable:function(){A(this,!0)}}},init:function(){this.selection&&(!1==this.selection instanceof P&&(this.selection=new ka(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this));U.prototype.init.call(this);this.disabled&&this.emit_disable();this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(a){if(this.selection!==a)return D(this,this.selection||this.contextSelection,a||this.contextSelection,!1,
!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},select:function(a){var b=this.selected,c=this.contextSelection;c?a?b?c.remove([this]):c.add([this]):this.selectable&&c.set([this]):!b&&this.selectable&&(this.selected=!0,this.emit_select());return this.selected!=b},unselect:function(){var a=this.selected;if(a){var b=this.contextSelection;b?b.remove([this]):(this.selected=
!1,this.emit_unselect())}return this.selected!=a},setSelected:function(a,b){return a?this.select(b):this.unselect()},enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.contextDisabled||this.emit_enable());return this.disabled!=a},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.contextDisabled||this.emit_disable());return this.disabled!=a},setDisabled:function(a){return a?this.disable():this.enable()},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=
typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect();this.contextSelection=null;this.selection&&this.setSelection();U.prototype.destroy.call(this)}}),fa=v(U,$,{className:k+".GroupingNode",emit_childNodesModified:function(a){W.childNodesModified.call(this,a);this.nullGroup.nextSibling=this.firstChild;var c;if(c=a.inserted){a=0;for(var e;e=c[a++];)e.groupId_=
e.delegate?e.delegate.basisObjectId:e.data.id,this.map_[e.groupId_]=e;if(this.dataSource&&this.nullGroup.first)for(c=this.owner,e=b(this.nullGroup.nodes),a=e.length;0<a--;)c.insertBefore(e[a],e[a].nextSibling)}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);W.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,
rule:L,childClass:K,childFactory:function(a){return new this.childClass(c({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new K;"groupGetter"in this&&(this.rule=R(this.groupGetter));U.prototype.init.call(this)},getGroupNode:function(a,b){var c=this.rule(a),e=c instanceof Y,d=this.map_[e?c.basisObjectId:c];this.dataSource&&(b=!1);!d&&b&&(d=this.appendChild(e?c:{data:{id:c,title:c}}));return d||this.nullGroup},setDataSource:function(a){var c=
this.dataSource;$.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==c)for(var c=b(a.childNodes),e=c.length-1;0<=e;e--)a.insertBefore(c[e],c[e+1])},insertBefore:function(a,b){a=$.insertBefore.call(this,a,b);var c=a.first;if(c){for(var e=c.parentNode,d=a.last,f,m,q,u=null,g=a;(g=g.nextSibling)&&!(u=g.first););q=u?u.previousSibling:e.lastChild;f=c.previousSibling;m=d.nextSibling;if(m!==u){var n=e.childNodes,g=a.nodes,h=g.length;f&&(f.nextSibling=m);m&&(m.previousSibling=f);q&&(q.nextSibling=
c);u&&(u.previousSibling=d);c.previousSibling=q;d.nextSibling=u;var d=n.indexOf(c),z=u?n.indexOf(u):n.length;z>d&&(z-=h);n.splice(d,h);n.splice.apply(n,[z,0].concat(g));q&&f||(e.firstChild=n[0]);u&&m||(e.lastChild=n[n.length-1]);if(c instanceof K)for(c=h;0<c--;)e.insertBefore(g[c],u),u=g[c]}}return a},removeChild:function(a){if(a=$.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var b=0,c;c=a.nodes[b];b++)c.parentNode.insertBefore(c)}return a},clear:function(a){var b=[],c=this.getGroupNode,
e=this.nullGroup;this.getGroupNode=function(){return e};for(var d=this.firstChild;d;d=d.nextSibling)b.push.apply(b,d.nodes);for(var d=0,f;f=b[d];d++)f.parentNode.insertBefore(f);this.getGroupNode=c;$.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;U.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});U.prototype.groupingClass=fa;var ha={childNodesModified:function(a,b){var c=this.members_,e={},d,f=0,m=0,q=b.inserted,u=b.deleted;
if(q&&q.length)for(e.inserted=q;d=q[f];)c[d.basisObjectId]=d,f++;if(u&&u.length)for(e.deleted=u;d=u[m];)delete c[d.basisObjectId],m++;(f||m)&&this.emit_itemsChanged(e)},destroy:function(){this.destroy()}},V=v(P,{className:k+".ChildNodesDataset",sourceNode:null,init:function(){P.prototype.init.call(this);var a=this.sourceNode;x[a.basisObjectId]=this;a.firstChild&&ha.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(ha,this)},destroy:function(){this.sourceNode.removeHandler(ha,this);
delete x[this.sourceNode.basisObjectId];P.prototype.destroy.call(this)}}),ka=v(T,{className:k+".Selection",multiple:!1,emit_itemsChanged:function(a){T.prototype.emit_itemsChanged.call(this,a);if(a.inserted)for(var b=0,c;c=a.inserted[b];b++)c.selected||(c.selected=!0,c.emit_select());if(a.deleted)for(b=0;c=a.deleted[b];b++)c.selected&&(c.selected=!1,c.emit_unselect())},add:function(a){if(!this.multiple){if(this.itemCount)return this.set(a);a=[a[0]]}for(var b=[],c=0,e;e=a[c];c++)e.contextSelection==
this&&e.selectable&&b.push(e);return T.prototype.add.call(this,b)},set:function(a){for(var b=[],c=0,e;e=a[c];c++)e.contextSelection==this&&e.selectable&&b.push(e);this.multiple||b.splice(1);return T.prototype.set.call(this,b)}});J.exports={DELEGATE:e,AbstractNode:U,Node:ja,GroupingNode:fa,PartitionNode:K,ChildNodesDataset:V,Selection:ka,nullSelection:new P}},"6.js":function(k,J,a,l,y,H,I,S){function C(b){"string"==typeof b&&(b=a.l10n.token(b));if(!b)return null;var c=b.basisObjectId,e=r[c];e||(e=
r[c]=new O(new m(b)));return e}function w(b){u[B.extname(b)]&&a.resource(b)().startUse()}function E(b){u[B.extname(b)]&&a.resource(b)().stopUse()}function s(){this.destroyBuilder&&g.call(this);for(var a=0,b;b=this.attaches_[a];a++)b.handler.call(b.context)}function t(a){for(var b=[],c=0;c<a.length;c++)b.push(Array.isArray(a[c])?t(a[c]):a[c]);return b}function h(b,c,m,e){var d=b,f;"function"==typeof d&&(c="baseURI"in b?b.baseURI:c,f="url"in b?b.url:f,d=d());d instanceof a.Token&&(c="baseURI"in b?b.baseURI:
c,f="url"in b?b.url:f,d=d.get());Array.isArray(d)?(m&&(d=t(d)),d={tokens:d}):"object"==typeof d&&Array.isArray(d.tokens)||(d=String(d));"string"==typeof d&&(d=q(d,c,e,f));return d}function g(){var a=h(this.source,this.baseURI),b=this.destroyBuilder,c=this.builder(a.tokens,this),m=this.deps_;if(m){this.deps_=null;for(var e=0,d;d=m[e];e++)d.bindingBridge.detach(d,g,this)}if(a.deps&&a.deps.length)for(this.deps_=m=a.deps,e=0;d=m[e];e++)d.bindingBridge.attach(d,g,this);this.createInstance=c.createInstance;
this.clearInstance=c.destroyInstance;this.getBinding=function(){return{names:c.keys}};this.destroyBuilder=c.destroy;if(a=a.resources&&0<a.resources.length?a.resources:null)for(e=0;m=a[e];e++)w(m);if(this.resources)for(e=0;m=this.resources[e];e++)E(m);this.resources=a;b&&b(!0)}function d(a){return function(){var b;b=(b=document.getElementById(a))&&"SCRIPT"==b.tagName?"text/basis-template"==b.type?b.textContent||b.text:"":"";return b}}function p(){var b=a.array(arguments).join("."),c=ma[b];c||(c=new da("",
b),ma[b]=c);return c}function D(a,b){for(var c=[],m={},e=[],d=0;d<b.length;d++)m[b[d]]||(m[b[d]]=!0,e.push(b[d]));c.source=e.join("/");m={base:!0};for(e=0;e<b.length;e++)d=b[e]||"base",d==a||m[d]||(F(d),m[d]=!0,c.push(d),b.splice.apply(b,[e+1,0].concat(ba[d].fallback)));c.unshift(a);"base"!=a&&c.push("base");c.value=c.join("/");return c}function A(a,b){for(var c=ba[a].sourcesList,m=0,e;e=c[m];m++)if(e.hasOwnProperty(b))return e[b];return""}function F(b){b||(b="base");if(ba[b])return ba[b].theme;if(!/^([a-z0-9\_\-]+)$/.test(b))throw 31;
var c={},m=[c],e=new pa;ba[b]={theme:e,sources:c,sourcesList:m,fallback:[]};var d=function(a,m){!1==a in c&&(c[a]=m,-1!=ba[ia].fallback.indexOf(b)&&p(a).set());return p(a)};a.object.extend(e,{name:b,fallback:function(a){if(e!==ua&&0<arguments.length){var c="string"==typeof a?a.split("/"):[],m={},c=D(b,c);if(ba[b].fallback.source!=c.source){ba[b].fallback.source=c.source;for(var d in ba){var q=ba[d].fallback,c=D(d,(q.source||"").split("/"));if(c.value!=q.value){m[d]=!0;ba[d].fallback=c;q=ba[d].sourcesList;
q.length=c.length;for(var f=0;f<q.length;f++)q[f]=ba[c[f]].sources}}}for(d in m)if(-1!=ba[ia].fallback.indexOf(d)){c=void 0;for(c in ma)p(c).set();break}}c=ba[b].fallback.slice(1);c.source=ba[b].fallback.source;return c},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var c=a,m=b,q={},f;for(f in m)m.hasOwnProperty(f)&&(q[f]=d(c+"."+f,m[f]));return q}return 1==arguments.length?p(a):d(a,b)}if("object"==typeof a){m=a;for(c in m)m.hasOwnProperty(c)&&d(c,
m[c]);return e}},apply:function(){if(b!=ia){ia=b;for(var a in ma)p(a).set();a=0;for(var c;c=ga[a];a++)c.fn.call(c.context,b)}return e},getSource:function(a,m){return m?A(b,a):c[a]},drop:function(a){c.hasOwnProperty(a)&&(delete c[a],-1!=ba[ia].fallback.indexOf(b)&&p(a).set())}});ba[b].fallback=D(b,[]);m.push(ba.base.sources);return e}a.require("./2.js");k=this.path;l=a.Class;var M=a.cleaner,B=a.path,N=a.array.search,v=a.array.add,c=a.array.remove,b=[],z={},n=1,R=2,L=4,W=6,f=3,Y=8,P=0,T=1,e=2,x=3,X=
4,ca=/^event-(.+)$/,ea={4:"class",5:"style"},aa={"class":L,style:5},U={2:X,4:X-1,5:X-1,6:2},K=4,$=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,ja=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,fa=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,ha=/(.|[\r\n])*?--\x3e/g,V=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,ka=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,G=/"((?:(\\")|[^"])*?)"\s*/g,Z=/^/g,la={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g},
na=/\\"/g,oa=function(a){var b=[],c=[],m={childs:b},e,d,q,r=!1,u=0,g,O=$,h=0,Q;for(a=a.trim();h<a.length||O!=$;)if(e=O.lastIndex=h,(Q=O.exec(a))&&Q.index===h){h=O.lastIndex;switch(O){case $:g=e+Q[1].length;u!=g&&(e=u==e?Q[1]:a.substring(u,g),(d=e.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&m.childs.push({type:f,len:e.length,value:d}));u=g;Q[3]?m.childs.push({type:f,refs:["l10n:"+Q[3]],value:"{l10n:"+Q[3]+"}"}):"{"==Q[2]?(q=h-1,m.childs.push(d={type:f}),O=ka):Q[4]?"/"==Q[4]?(d=null,O=V):(m.childs.push(d=
{type:Y}),Q[5]?(q=h-Q[5].length,O=ka):(q=h,O=ha)):Q[2]&&(r=!0,c.push(m),m.childs.push(d={type:n,attrs:[],childs:[]}),m=d,O=ja);break;case V:Q[1]!==(m.prefix?m.prefix+":":"")+m.name?m.childs.push({type:f,value:"</"+Q[0]}):m=c.pop();O=$;break;case ja:case fa:if(":"==Q[2]){d.prefix?O=Z:d.prefix=Q[1];break}Q[1]&&(d.name=Q[1],d.type==R&&m.attrs.push(d));if("{"==Q[2]){O=d.type==n?ka:Z;break}if(Q[3]){r=!1;if("/>"==Q[3])m=c.pop();else if("b"==m.prefix&&m.name in la){O=la[m.name];break}O=$;break}if("="==Q[2]){O=
G;break}d={type:R};O=fa;break;case ha:d.value=a.substring(q,h-3);O=$;break;case ka:d.refs?d.refs.push(Q[1]):d.refs=[Q[1]];"|"!=Q[2]&&(d.type==f?(h-=Q[2].length-1,d.value=a.substring(q,h),O=$):d.type==Y?O=ha:d.type==R&&"="==a[h]?(h++,O=G):(d={type:R},O=fa));break;case G:d.value=Q[1].replace(na,'"');d={type:R};O=fa;break;case la.text:m.childs.push({type:f,value:Q[1]});m=c.pop();O=$;break;default:throw 29;}O==$&&(u=h)}else if(O==ka&&d&&d.type==Y)O=ha;else{r&&(m=c.pop());d&&m.childs.pop();if(d=m.childs.pop())d.type!=
f||d.refs?m.childs.push(d):u-="len"in d?d.len:d.value.length;r=!1;O=$}u!=h&&m.childs.push({type:f,value:a.substring(u,h)});b.templateTokens=!0;return b},r={},m=a.Token.subclass({className:k+".L10nProxyToken",token:null,url:"",init:function(a){this.url=a.dictionary.resource.url+":"+a.name;this.token=a;this.set();a.attach(this.set,this)},set:function(){return a.Token.prototype.set.call(this,"markup"==this.token.type?'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+
'">'+String(this.token.value)+"</span>":"")},destroy:function(){a.Token.prototype.destroy.call(this);this.token=null}}),q=function(){function m(a){return(a.prefix?a.prefix+":":"")+a.name}function d(a,b){A[b]||("#"==b.charAt(0)?A[b]=String.fromCharCode("x"==b.charAt(1)||"X"==b.charAt(1)?parseInt(b.substr(2),16):b.substr(1)):D&&(D.innerHTML=a,A[b]=D.firstChild?D.firstChild.nodeValue:a));return A[b]||a}function q(a){return(a=a.refs)&&a.length?a:0}function r(a,b){function c(a){for(var b,m=[],e=[],q={},
f=0;f<a.length;f++)f%2?(b=a[f],q[b]||(q[b]=m.length,m.push(b)),e.push(q[b])):a[f]&&e.push(a[f].replace($,d));return[m,e]}var m=0,e,q;if(b)switch(a){case "class":if(e=b.match(k)){for(var f=[],m=[],u=0,g;g=e[u];u++)(q=g.match(ba))?m.push([q[1]||"",q[2]]):f.push(g);b=f.join(" ")}break;case "style":f=[];m=[];if(e=b.match(ia))for(u=0;g=e[u];u++)q=g.match(ma),g=q[1],b=q[2].trim(),q=b.split(l),1<q.length?(q=c(q),q.push(g),m.push(q)):f.push(g+": "+b.replace($,d));(b=f.join("; "))&&(b+=";");break;default:e=
b.split(s),1<e.length?m=c(e):b=b.replace($,d)}m&&!m.length&&(m=0);return{binding:m,value:b,type:aa[a]||2}}function u(a,b,c){a=a.attrs;for(var e=[],d,f=0,O;O=a[f];f++)if("b"==O.prefix)switch(O.name){case "ref":for(O=(O.value||"").trim().split(/\s+/),d=0;d<O.length;d++)g(b,O[d])}else if(d=O.name.match(ca))e.push(d[1]==O.value?[W,d[1]]:[W,d[1],O.value]);else{d=r(O.name,O.value);var Q=[d.type,d.binding,q(O)];2==d.type&&Q.push(m(O));!d.value||c&&d.binding&&2==d.type||Q.push(d.value);e.push(Q)}return e.length?
e:0}function g(a,b){a[e]||(a[e]=[]);v(a[e],b);"element"!=b&&(a[T]=1==a[e].length?b:0)}function O(a,b){var c=a[e].indexOf(b);if(-1!=c){var m=a[T]&&"number"==typeof a[T];a[e].splice(c,1);m&&c==a[T]-1&&(a[T]=b);a[e].length?m&&(a[T]-=c<a[T]-1):a[e]=0}}function Q(a){var b={};if(a.attrs)for(var c=0,e;e=a.attrs[c];c++)b[m(e)]=e.value;return b}function qa(a,b){for(var c=0;c<b.length;c++)v(a,b[c])}function z(e,da,k){function ba(a,b,m){var e=Q(a);b&&(e.name=b);if(e.name&&M.test(e.name)){var d=G[e.ref||"element"];
if(d&&d.token[P]==n){b=d.token;var q=(a=e.name.match(ca))?W:aa[e.name]||R,f=U[q]||X,u=b&&N(b,e.name,function(a){return a[P]==W?"event-"+a[1]:ea[a[P]]||a[x]},K);u||"remove"==m||(a?u=[q,a[1]]:(u=[q,0,0,q==R?e.name:""],q==R&&u.push("")),b||(b=[],d.token.push(b)),b.push(u));d="class"==e.name||"style"==e.name;switch(m){case "set":if(u[P]==W){e.value==a[1]?u.length=2:u[f]=e.value;break}m=r(e.name,e.value);u[T]=m.binding;k.optimizeSize&&u[T]&&!d?u.length=f:u[f]=m.value||"";if(d&&!u[T]&&!u[f]){c(b,u);break}break;
case "append":m=r(e.name,e.value);if(!a)if(m.binding)if(q=u[T])switch(e.name){case "style":for(var g={},e=0,O;O=q[e];e++)g[O[2]]=e;for(e=0;O=m.binding[e];e++)O[2]in g?q[g[O[2]]]=O:q.push(O);break;case "class":q.push.apply(q,m.binding);break;default:for(m.binding[0].forEach(function(a){v(this,a)},q[0]),e=0;e<m.binding[1].length;e++)g=m.binding[1][e],"number"==typeof g&&(g=q[0].indexOf(m.binding[0][g])),q[1].push(g)}else u[T]=m.binding,d||u[T][1].unshift(u[f]);else!d&&u[T]&&u[T][1].push(e.value);m.value&&
(u[f]=(u[f]||"")+(u[f]&&(a||d)?" ":"")+m.value);if(d&&!u[T]&&!u[f]){c(b,u);break}break;case "remove":u&&c(b,u)}}}}for(var ia=[],ma=0,l,s;l=e[ma];ma++){var L=q(l),A=L&&1==L.length?L[0]:0;switch(l.type){case n:if("b"==l.prefix){var D=Q(l);switch(l.name){case "resource":case "style":D.src&&da.resources.push(B.resolve(da.baseURI+D.src));break;case "l10n":D.src&&(da.dictURI=B.resolve(da.baseURI,D.src));break;case "define":if("name"in D&&!da.defines[D.name])switch(D.type){case "bool":da.defines[D.name]=
["true"==D["default"]?1:0];break;case "enum":l=D.values?D.values.trim().split(" "):[],da.defines[D.name]=[l.indexOf(D["default"])+1,l]}break;case "text":l=l.childs[0];e[ma--]=a.object.extend(l,{refs:(D.ref||"").trim().split(/\s+/),value:"notrim"in D?l.value:l.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case "include":if(A=D.src){A=(L=/^#\d+$/.test(A))?A.substr(1):A;A=L?b[A]:/^[a-z0-9\.]+$/i.test(A)&&!/\.tmpl$/.test(A)?p(A):a.resource(B.resolve(da.baseURI+A));if(!A)continue;if(-1==V.indexOf(A)){v(da.deps,
A);V.push(A);L?(A.source.bindingBridge&&v(da.deps,A.source),L=h(A.source,A.baseURI,!0,k)):L=h(A,A.url?B.dirname(A.url)+"/":"",!0,k);V.pop();L.resources&&!1=="no-style"in D&&qa(da.resources,L.resources);L.deps&&qa(da.deps,L.deps);var G=t(L.tokens),A=(l.childs||[]).slice();D["class"]&&A.push({type:n,prefix:"b",name:"append-class",attrs:[{type:R,name:"value",value:D["class"]}]});D.id&&A.push({type:n,prefix:"b",name:"set-attr",attrs:[{type:R,name:"name",value:"id"},{type:R,name:"value",value:D.id}]});
D.ref&&G.element&&D.ref.trim().split(/\s+/).map(function(a){g(G.element.token,a)});for(var D=0,F;F=A[D];D++)if(F.type==n&&"b"==F.prefix)switch(F.name){case "replace":case "remove":case "before":case "after":l="replace"==F.name||"remove"==F.name;var w=Q(F),ga="ref"in w||!l?w.ref:"element";if(ga=ga&&G[ga])w=ga.owner.indexOf(ga.token),-1!=w&&(l=[w+("after"==F.name),l],"remove"!=F.name&&(l=l.concat(z(F.childs,da,k)||[])),ga.owner.splice.apply(ga.owner,l));break;case "prepend":case "append":w=Q(F);(l=
(ga=(ga="ref"in w?w.ref:"element")&&G[ga])&&ga.token)&&l[P]==n&&(w=z(F.childs,da,k)||[],"prepend"==F.name?l.splice.apply(l,[K,0].concat(w)):l.push.apply(l,w));break;case "attr":case "set-attr":ba(F,!1,"set");break;case "append-attr":ba(F,!1,"append");break;case "remove-attr":ba(F,!1,"remove");break;case "class":case "append-class":ba(F,"class","append");break;case "set-class":ba(F,"class","set");break;case "remove-class":ba(F,"class","remove");break;case "add-ref":w=Q(F);(l=(ga=(ga="ref"in w?w.ref:
"element")&&G[ga])&&ga.token)&&w.name&&g(l,w.name);break;case "remove-ref":w=Q(F),(l=(ga=(ga="ref"in w?w.ref:"element")&&G[ga])&&ga.token)&&O(l,w.name||w.ref)}else L.tokens.push.apply(L.tokens,z([F],da,k)||[]);G.element&&O(G.element.token,"element");ia.push.apply(ia,L.tokens)}}}continue}s=[1,A,L,m(l)];s.push.apply(s,u(l,s,k.optimizeSize)||[]);s.push.apply(s,z(l.childs,da,k)||[]);break;case f:L&&2==L.length&&N(L,"element")&&(A=L[+!L.lastSearchIndex]);if(A&&(D=pa(A,da.dictURI).split(/[:@\{]/),"l10n"==
D[0]&&3==D.length))if(D[2]){if(D=D.slice(1).join("@"),D=a.l10n.token(D),F=C(D),da.l10nResolved=!0,F&&"markup"==D.type){e[ma--]=oa('<b:include src="#'+F.templateId+'"/>')[0];continue}}else c(L,A),0==L.length&&(L=null),A=0,l.value=l.value.replace(/\}$/,"@undefined}");s=[3,A,L];L&&l.value=="{"+L.join("|")+"}"||s.push(l.value.replace($,d));break;case Y:if(k.optimizeSize&&!A&&!L)continue;s=[8,A,L];k.optimizeSize||L&&l.value=="{"+L.join("|")+"}"||s.push(l.value.replace($,d))}for(;0===s[s.length-1];)s.pop();
ia.push(s)}return ia.length?ia:0}function pa(a,b){if("string"!=typeof a)return a;var c=a.split(":");2==c.length&&"l10n"==c[0]&&-1==c[1].indexOf("@")&&(c[1]=c[1]+"@"+b);return c.join(":")}function t(a,b,c,m){c||(c={});m=m||0;for(var d;d=a[m];m++)if(d[P]!=W){var q=d[e];if(q)for(var u=q.length-1,r;r=q[u];u--)-1!=r.indexOf(":")?O(d,r):(c[r]&&O(c[r].token,r),d[T]==r&&(d[T]=u+1),c[r]={owner:a,token:d});switch(d[P]){case f:d[T]=pa(d[T],b);break;case R:if(d[T])for(d=d[T][0],u=0;u<d.length;u++)d[u]=pa(d[u],
b);break;case n:t(d,b,c,K)}}return c}function da(a,b,c,m){var e=0;m=m||0;for(var d;d=a[m];m++)if(d[P]==n&&(e+=da(d,b,c,K)),d[P]==L||d[P]==R&&"class"==d[x]){var q=d[T],f=X-(d[P]==L);if(q){for(var u=(d[f]||"").trim().split(" "),r=0,g;g=q[r];r++)if(!(2<g.length)){var O=g[1].split(":").pop(),Q=b.defines[O];Q?(g.push.apply(g,Q),Q.used=!0,Q[0]&&(1==Q.length?v(u,g[0]+O):v(u,g[0]+Q[1][Q[0]-1]))):e++}d[f]=u.join(" ");c.optimizeSize&&!d[f]&&(d.length=f)}}return e}var M=/^[a-z_][a-z0-9_\-]*$/i,k=/(\S+)/g,ba=
/^([a-z_][a-z0-9_\-]*)?\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,ia=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,ma=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,l=/\{([a-z_][a-z0-9_]*)\}/i,s=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,$=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,A=a.NODE_ENV?node_require("./template/htmlentity.json"):{},D=a.NODE_ENV?null:document.createElement("div"),V=[];return function(b,c,m,e){m=m||{};var d=[],q=
{sourceUrl:e,baseURI:c||"",tokens:null,resources:[],deps:[],defines:{},unpredictable:!0,warns:d};q.dictURI=e?a.path.resolve(e):c||"";q.dictURI&&(c=a.path.extname(q.dictURI))&&".l10n"!=c&&(q.dictURI=q.dictURI.substr(0,q.dictURI.length-c.length)+".l10n");b.templateTokens?b.warns&&d.push.apply(d,b.warns):b=oa(String(b));q.tokens=z(b,q,m);q.tokens||(q.tokens=[[3,0,0,""]]);g(q.tokens[0],"element");t(q.tokens,q.dictURI);q.unpredictable=!!da(q.tokens,q,m);delete q.defines;delete q.l10nResolved;d.length||
(q.warns=!1);return q}}(),u={".css":!0},O=l(null,{className:k+".Template",__extend__:function(a){return a instanceof O?a:a instanceof qa?new Q(a):new O(a)},source:"",baseURI:"",init:function(a){if(4096==b.length)throw 30;this.attaches_=[];this.setSource(a||"");this.templateId=b.push(this)-1},bindingBridge:{attach:function(a,b,c){for(var m=0,e;e=a.attaches_[m];m++)if(e.handler==b&&e.context==c)return;a.attaches_.push({handler:b,context:c})},detach:function(a,b,c){for(var m=0,e;e=a.attaches_[m];m++)if(e.handler==
b&&e.context==c){a.attaches_.splice(m,1);break}},get:function(){}},createInstance:function(a,b,c,m,e){g.call(this);return this.createInstance(a,b,c,m,e)},clearInstance:function(a){},getBinding:function(a){g.call(this);return this.getBinding(a)},setSource:function(b){var m=this.source;if(m!=b){if("string"==typeof b){var e=b.match(/^([a-z]+):/);if(e){var q=e[1];b=b.substr(e[0].length);switch(q){case "file":b=a.resource(b);break;case "id":b=d(b);break;case "tokens":b=a.string.toObject(b);b.isDecl=!0;
break;case "path":b=p(b)}}}if(m&&m.bindingBridge){if(e=m.url&&z[m.url])c(e,this),e.length||delete z[m.url];this.baseURI="";this.source.bindingBridge.detach(m,s,this)}b&&b.bindingBridge&&(b.url&&(this.baseURI=B.dirname(b.url)+"/",z[b.url]||(z[b.url]=[]),v(z[b.url],this)),b.bindingBridge.attach(b,s,this));this.source=b;s.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder();this.source=this.resources=this.getBinding=this.createInstance=this.attaches_=null}}),qa=function(b){a.object.extend(this,
b)},Q=a.Class(null,{className:k+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:O,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,c;c=a[b];b++)this.ruleEvents[c]=!0}M.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-1);return this.templates_[b]},destroy:function(){this.ruleRet_=
this.templates_=this.rule=null}}),pa=l(null,{className:k+".Theme",get:p}),da=l(a.Token,{className:k+".SourceWrapper",path:"",url:"",baseURI:"",init:function(b,c){this.path=c;a.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=A(ia,this.path);this.value!=a&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,da.prototype.apply,this),this.url=(this.value=
a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in a?a.baseURI:B.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,da.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);a.Token.prototype.destroy.call(this)}}),ba={},ma={},ua=F(),ia="base",ga=[];M.add({destroy:function(){for(var a in ma)ma[a].destroy();
ma=ba=null;a=0;for(var c;c=b[a];a++)c.destroy();b=null}});J.exports={DECLARATION_VERSION:2,TYPE_ELEMENT:n,TYPE_ATTRIBUTE:R,TYPE_ATTRIBUTE_CLASS:L,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:W,TYPE_TEXT:f,TYPE_COMMENT:Y,TOKEN_TYPE:P,TOKEN_BINDINGS:T,TOKEN_REFS:e,ATTR_NAME:x,ATTR_VALUE:X,ATTR_NAME_BY_TYPE:ea,ELEMENT_NAME:3,ELEMENT_ATTRS:K,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:m,TemplateSwitchConfig:qa,TemplateSwitcher:Q,Template:O,SourceWrapper:da,switcher:function(b,c){var m=
a.array(arguments);c=m.pop();return new qa({rule:c,events:m.join(" ").trim().split(/\s+/)})},tokenize:oa,getDeclFromSource:h,makeDeclaration:q,getL10nTemplate:C,Theme:pa,theme:F,getThemeList:function(){return a.object.keys(ba)},currentTheme:function(){return ba[ia].theme},setTheme:function(a){return F(a).apply()},onThemeChange:function(a,b,c){ga.push({fn:a,context:b});c&&a.call(b,ia)},define:ua.define,get:p,getPathList:function(){return a.object.keys(ma)}}},"7.js":function(k,J,a,l,y,H,I,S){function C(b){b=
a.template.getL10nTemplate(b);var c=b.templateId,e=$[c];e||(e=$[c]=new fa(b.source));return e}function w(a){return function(b){if("click"!=b.type||3!=b.which){for(var c=T[b.type]||"mouseenter"!=b.type&&"mouseleave"!=b.type,e=b.sender,d;e;){d=e.getAttribute&&e.getAttribute(a);if(!c||"string"==typeof d)break;e=e.parentNode}if("string"==typeof d){var f=e,c=f,g,r;T[b.type]&&(g=b.relatedTarget)&&(f===g||f.contains(g))&&(f=null);for(;f;){g=f.basisTemplateId;if("number"==typeof g&&(r=E(g)))break;f=f.parentNode}if(r&&
r.action)for(d=d.trim().split(/\s+/),b.actionTarget=c,c=0;f=d[c++];)r.action.call(r.context,f,b)}if(b.type in P)P[b.type](b,e)}}}function E(a){var b=f[a&4095];return b&&b.instances[a>>12]}a.require("./8.js");a.require("./2.js");a.require("./6.js");a.require("./9.js");k=this.path;var s=l.document,t=a.dom.event,h=a.string.camelize,g=a.l10n.token,d=a.template.htmlfgen.getFunctions,p=a.template.TemplateSwitchConfig;y=a.template.TemplateSwitcher;H=a.template.Template;var D=a.template.TYPE_ELEMENT,A=a.template.TYPE_ATTRIBUTE,
F=a.template.TYPE_TEXT,M=a.template.TYPE_COMMENT,B=a.template.TOKEN_TYPE,N=a.template.TOKEN_BINDINGS,v=a.template.TOKEN_REFS,c=a.template.ATTR_NAME,b=a.template.ATTR_VALUE,z=a.template.ATTR_NAME_BY_TYPE,n=a.template.ELEMENT_NAME,R=a.template.TEXT_VALUE,L=a.template.COMMENT_VALUE,W={},f={},Y={svg:"http://www.w3.org/2000/svg"},P={},T={},e="onmouseenter"in s.documentElement,x=!s.addEventListener&&"__basisTemplate"+parseInt(1E9*Math.random());x&&(l[x]=function(a,b){t.fireEvent(s,a);b.returnValue=!0;var c=
W[a];c&&c(new t.Event(b))});var X=function(){var a=s.createElement("div");a.appendChild(s.createTextNode("a"));a.appendChild(s.createTextNode("a"));return 1==a.cloneNode(!0).childNodes.length}(),ca=function(){var a=s.createElement("div");a.setAttribute("class","a");return!a.className}(),ea=function(){var a=s.createElement("div");a.setAttribute("style","position:absolute");return"absolute"!=a.style.position}(),aa;a:{try{aa=s.documentElement.style.color="x";break a}catch(U){}aa=void 0}var K=!!aa;"undefined"==
typeof Node||Node.prototype.contains||(Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)});var $={},ja=function(a,d){function f(a,b){g(b);T[a]=!0;P[b]=function(b){b=new t.Event(b);b.type=a;W[a](b)};P[a]=function(b,c){if(c=c&&c.parentNode)b=new t.Event(b),b.type=a,b.sender=c,W[a](b)}}function g(a){if(!W[a]&&(W[a]=w("event-"+a),!x)){if(!e&&"mouseenter"==a)return f(a,"mouseover");if(!e&&"mouseleave"==a)return f(a,"mouseout");for(var b=0,c=t.browserEvents(a),m;m=c[b];b++)t.addGlobalHandler(m,
W[a])}}function h(a,b){g(a);x&&p.setAttribute("on"+a,x+'("'+a+'",event)');p.setAttribute("event-"+a,b)}function K(a,b){ca&&"class"==a&&(a="className");if(ea&&"style"==a)return p.style.cssText=b;p.setAttribute(a,b)}for(var p=d||s.createDocumentFragment(),r=d?4:0,m;m=a[r];r++)switch(m[B]){case D:var q=m[n],u=q.split(/:/),q=1<u.length?s.createElementNS(Y[u[0]],q):s.createElement(q);ja(m,q);p.appendChild(q);break;case A:var q=m[c],u=m[b],O=q.replace(/^event-/,"");O!=q?h(O,u):("class"!=q&&"style"!=q?!m[N]:
u)&&K(q,u||"");break;case 4:case 5:(u=m[b-1])&&K(z[m[B]],u);break;case 6:h(m[1],m[2]||m[1]);break;case M:p.appendChild(s.createComment(m[L]||(m[v]?"{"+m[v].join("|")+"}":"")));break;case F:X&&r&&a[r-1][B]==F&&p.appendChild(s.createComment("")),p.appendChild(s.createTextNode(m[R]||(m[v]?"{"+m[v].join("|")+"}":"")||(m[N]?"{"+m[N]+"}":"")))}return p};aa=function(){function b(){this.set(this.name,this.value)}function c(e,m,d){var f=m&&m.bindingBridge,g=this.attaches&&this.attaches[e],h=null;if(f||g)if(f){if(g&&
m===g.value)h=m&&"markup"==m.type?g.tmpl:null;else{g&&(g.tmpl&&(g.tmpl.element.toString=null,C(g.value).clearInstance(g.tmpl)),g.value.bindingBridge.detach(g.value,b,g));if("markup"==m.type&&m instanceof a.l10n.Token){var Q=C(m),n=this.context,z=this.bindings,K=this.bindingInterface,h=Q.createInstance(n,null,function ia(){h=x.tmpl=Q.createInstance(n,null,ia,z,K);h.element.toString=function(){return m.value};b.call(x)},z,K);h.element.toString=function(){return m.value}}this.attaches||(this.attaches=
new d);var x=this.attaches[e]={name:e,value:m,tmpl:h,set:this.tmpl.set};f.attach(m,b,x)}if(h)return h.element;m=f.get(m)}else g&&(g.tmpl&&(g.tmpl.element.toString=null,C(g.value).clearInstance(g.tmpl)),g.value.bindingBridge.detach(g.value,b,g),this.attaches[e]=null);return m}function e(a,b){return function(c){for(var e=0,d;d=a[e];e++)this(d,b[d](c))}}var n=/\s+/,z="function"==typeof Node&&s instanceof Node?function(a,b,c){a=c&&c instanceof Node?c:a;a!==b&&b.parentNode.replaceChild(a,b);return a}:
function(a,b,c){c=c&&"object"==typeof c?c:a;if(c!==b)try{b.parentNode.replaceChild(c,b)}catch(e){c=a,b!==c&&b.parentNode.replaceChild(c,b)}return c},x=function(a,b,c,e){c!==e&&(e?a.setAttribute(b,e):a.removeAttribute(b));return e},v={bind_textNode:function(a,b,c){b=z(a,b,c);b===a&&(a.nodeValue=c);return b},bind_node:z,bind_element:function(a,b,c){b=z(a,b,c);b===a&&"string"==typeof c&&(a.innerHTML=c);return b},bind_comment:z,bind_attr:x,bind_attrClass:l.DOMTokenList&&s&&s.documentElement.classList instanceof
l.DOMTokenList?function(b,c,e,d,f){var g=e?d+e:"";g!=c&&(c&&b.classList.remove(c),g&&(b.classList.add(g),f&&(b.classList.add(g+"-anim"),a.nextTick(function(){b.classList.remove(g+"-anim")}))));return g}:function(b,c,e,d,f){var g=e?d+e:"";if(g!=c){e=b.className;var h="string"!=typeof e;h&&(e=e.baseVal);e=e.split(n);c&&a.array.remove(e,c);g&&(e.push(g),f&&(a.array.add(e,g+"-anim"),a.nextTick(function(){var c=(h?b.className.baseVal:b.className).split(n);a.array.remove(c,g+"-anim");h?b.className.baseVal=
c.join(" "):b.className=c.join(" ")})));h?b.className.baseVal=e.join(" "):b.className=e.join(" ")}return g},bind_attrStyle:K?function(a,b,c,e){c!==e&&(a.style[h(b)]=e);return e}:function(a,b,c,e){if(c!==e)try{a.style[h(b)]=e}catch(d){}return e},resolve:c,l10nToken:g,createBindingFunction:function(a){var b={};return function(c,d,f,g){if(!c)return{};var h="bindingId"in c?c.bindingId:null,n=b[h];if(!n){for(var n=[],z={},K={},x=0,v;v=a[x];x++){var p=c[v],l=p&&p.getter;if(l&&(z[v]=l,n.push(v),p.events))for(var p=
String(p.events).trim().split(/\s+|\s*,\s*/),l=0,k;k=p[l];l++)K[k]?K[k].push(v):K[k]=[v]}c=e(n,z);for(var t in K)K[t]=e(K[t],z);n={names:n,sync:c,handler:t?K:null};h&&(b[h]=n)}d&&f&&n.sync.call(f,d);if(g)return n.handler&&g.attach(d,n.handler,f),n.handler}}};return function(a){var b=d(a,!0,this.source.url,a.source_,!X),e,u={},h={},n=[],Q=0,z=ja(a),K=function(){return z.cloneNode(!0)},p=this.templateId;f[p]={template:this,instances:u};if(b.createL10nSync){var l=b.createL10nSync(z,h,x,X);a=0;for(var k;k=
b.l10nKeys[a];a++)l(k,g(k).value);if(b.l10nKeys)for(a=0;k=b.l10nKeys[a];a++)k={path:k,token:g(k),handler:function(a){l(this.path,a);for(var b in u)u[b].tmpl.set(this.path,a)}},k.token.attach(k.handler,k),n.push(k),k=null}e=b.createInstance(p,u,K,v,h,X);return{createInstance:function(a,b,c,m,d){var f=Q++;a=e(f,a,b,c,m,d);u[f]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var b=u[a];if(b){b.handler&&b.bindingInterface.detach(b.context,b.handler,b.tmpl.set);for(var e in b.attaches)c.call(b,
e,null);delete u[a]}},keys:b.keys,destroy:function(a){for(var e=0,d;d=n[e];e++)d.token.detach(d.handler,d);for(var q in u)if(e=u[q],a&&e.rebuild&&e.rebuild.call(e.context),!a||q in u)for(q in e.handler&&e.bindingInterface.detach(e.context,e.handler,e.tmpl.set),e.attaches)c.call(q,null);f[p]&&f[p].instances===u&&delete f[p];u=l=n=h=z=K=b=null}}}}();var fa=H.subclass({className:k+".Template",__extend__:function(a){return a instanceof fa?a:a instanceof p?new ha(a):new fa(a)},builder:aa}),ha=y.subclass({className:k+
".TemplateSwitcher",templateClass:fa});J.exports={Template:fa,TemplateSwitcher:ha};a.template.extend({buildHtml:ja,resolveTemplateById:function(a){return(a=f[a&4095])&&a.template},resolveObjectById:function(a){return(a=E(a))&&a.context},resolveTmplById:function(a){return(a=E(a))&&a.tmpl}})},"8.js":function(k,J,a,l,y,H,I,S){function C(a){return a instanceof X?a.event_:a||l.event}function w(a){return"string"==typeof a?R.getElementById(a):a}function E(a){a=a.target||a.srcElement||R;return 3==a.nodeType?
a.parentNode:a}function s(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function t(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function h(a,b){(b=w(b))?c(b,a,h):(t(a),s(a))}function g(a){return a.keyCode||a.which||0}function d(a){return a.charCode||a.keyCode||0}function p(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function D(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==R.compatMode?
R.documentElement.scrollLeft:R.body.scrollLeft):0}function A(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==R.compatMode?R.documentElement.scrollTop:R.body.scrollTop):0}function F(a){var b=0;"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b&&b/Math.abs(b)}function M(a){var b=W(ca[a.type]),c=ea[a.type],e=new X(a);if(c)c.handler.call(c.thisObject,e),h(a);else if(b)for(a=b.length;0<a--;)c=b[a],c.handler.call(c.thisObject,
e)}function B(a){var b=ea[a];b&&(v(a,b.handler,b.thisObject),delete ea[a])}function N(a,b,e){var d=ca[a];if(d){a=0;for(var f;f=d[a];a++)if(f.handler===b&&f.thisObject===e)return}else aa?c(R,a,L):R.addEventListener(a,M,!0),d=ca[a]=[];d.push({handler:b,thisObject:e})}function v(a,c,e){var d=ca[a];if(d)for(var f=0,g;g=d[f];f++)if(g.handler===c&&g.thisObject===e){d.splice(f,1);d.length||(delete ca[a],aa?b(R,a,L):R.removeEventListener(a,M,!0));break}}function c(a,b,c,e){a=w(a);if(!a)throw 32;if("function"!=
typeof c)throw 33;a[Y]||(a[Y]={});var d={handler:c,thisObject:e},g=a[Y],h=g[b];if(h){for(a=0;g=h[a];a++)if(g.handler===c&&g.thisObject===e)return;h.push(d)}else h=g[b]=[d],h.fireEvent=function(a){a=C(a);if(aa&&a&&ca[b]&&"undefined"==typeof a.returnValue){M(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var c=0;a=new X(a);for(var e;e=h[c++];)e.handler.call(e.thisObject,a)},f?a.addEventListener(b,h.fireEvent,!1):a.attachEvent("on"+b,h.fireEvent)}function b(a,
b,c,e){a=w(a);var d=a[Y];if(d&&(d=d[b]))for(var f=0,g;g=d[f];f++)if(g.handler===c&&g.thisObject===e){d.splice(f,1);d.length||z(a,b);break}}function z(a,b){a=w(a);var c=a[Y];if(c)if("string"!=typeof b)for(b in c)z(a,b);else{var e=c[b];e&&(a.removeEventListener?a.removeEventListener(b,e.fireEvent,!1):a.detachEvent("on"+b,e.fireEvent),delete c[b])}}function n(a){return function(b,c){return a(C(b),c)}}var R=l.document,L=a.fn.$null,W=a.array.from,f=!!R.addEventListener,Y="__basisEvents";k={BACKSPACE:8,
TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var P={VALUE:1,BIT:1},T={VALUE:2,BIT:4},e={VALUE:3,BIT:2},x={mousewheel:["mousewheel","DOMMouseScroll"]},X=a.Class(null,{className:this.path+".Event",KEY:k,init:function(b){b=C(b);for(var c in b)"function"!=typeof b[c]&&!1==c in this&&(this[c]=b[c]);
a.object.extend(this,{event_:b,sender:E(b),key:g(b),charCode:d(b),mouseLeft:p(b,P),mouseMiddle:p(b,T),mouseRight:p(b,e),mouseX:D(b),mouseY:A(b),wheelDelta:F(b)})},stopBubble:function(){s(this.event_)},stopPropagation:function(){s(this.event_)},preventDefault:function(){t(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),ca={},ea={},aa=!f,U={};J.exports={W3CSUPPORT:f,browserEvents:function(a){return x[a]||[a]},getEventInfo:function(a,b){b||(b="div");var c=b+"-"+a;if(U[c])return U[c];
var e=!1,d=!1;if(!f){var g="on"+a,h=R.createElement("div"),n=h.appendChild(R.createElement(b));h[g]=function(){d=!0};try{n.fireEvent(g),e=!0}catch(z){}}return U[c]={supported:e,bubble:d}},KEY:k,MOUSE_LEFT:P,MOUSE_RIGHT:e,MOUSE_MIDDLE:T,Event:X,sender:n(E),cancelBubble:n(s),cancelDefault:n(t),kill:n(h),key:n(g),charCode:n(d),mouseButton:n(p),mouseX:n(D),mouseY:n(A),wheelDelta:n(F),addGlobalHandler:N,removeGlobalHandler:v,captureEvent:function(a,b,c){ea[a]&&B(a);N(a,b,c);ea[a]={handler:b,thisObject:c}},
releaseEvent:B,addHandler:c,addHandlers:function(a,b,e){a=w(a);for(var d in b)c(a,d,b[d],e)},removeHandler:b,clearHandlers:z,fireEvent:function(a,b,c){a=w(a);(a=a[Y])&&a[b]&&a[b].fireEvent(c)},onUnload:function(a,b){c(l,"unload",a,b)},wrap:C}},"9.js":function(k,J,a,l,y,H,I,S){function C(a,c){return new Function(a,c)}a.require("./6.js");var w=a.template.TYPE_ELEMENT,E=a.template.TYPE_ATTRIBUTE,s=a.template.TYPE_TEXT,t=a.template.TYPE_COMMENT,h=a.template.TOKEN_TYPE,g=a.template.TOKEN_BINDINGS,d=a.template.TOKEN_REFS,
p=a.template.ATTR_NAME,D=a.template.ATTR_NAME_BY_TYPE,A=a.template.ELEMENT_NAME,F=a.template.ELEMENT_ATTRS,M={},B=function(){function a(b,c){for(var d=0,e;e=b[d];d++)-1==e.indexOf(":")&&l.push(e+":"+c)}function c(a){var b=n.length,b=z[b]||"r"+b;n.push(b+"="+a);return b}function b(z,l,M){for(var e,x,R,N,C=0,E=0,U=0,K;K=z[C];C++,E++,N=!1){C?z[C+1]?(K[h]==z[C-1][h]&&K[h]==s&&U++,e=l+".childNodes["+(M?E:E+(U?" + "+U+" * TEXT_BUG":""))+"]"):e=l+".lastChild":e=l+".firstChild";if(x=K[d])N=!0,e=c(e),a(x,
e);K[g]&&(K[g]&&"number"==typeof K[g]&&(K[g]=K[d][K[g]-1]),N||(N=!0,e=c(e)),k.push([K[h],e,K[g]]));if(K[h]==w){R=-1;l==f&&B.push(e+".basisTemplateId");N||(e=c(e),R=n.length);for(var $=[],H=[],J=F,y;y=K[J];J++)y[h]==w||y[h]==s||y[h]==t?H.push(y):$.push(y);for(var J=0,V;V=$[J];J++)if(6!=V[h]){y=D[V[h]]||V[p];if(x=V[d])N=!0,a(x,c(e+'.getAttributeNode("'+y+'")'));if(x=V[g])switch(N=!0,y){case "class":V=0;for(var I;I=x[V];V++)I=[2,e,I[1],y,I[0]].concat(I.slice(2)),k.push(I);break;case "style":for(V=0;I=
x[V];V++)for(var G=0,S;S=I[0][G];G++)k.push([2,e,S,y,I[0],I[1],I[2]]);break;default:for(V=0;S=x[0][V];V++)k.push([2,e,S,y,x[0],x[1],K[A]])}}H.length&&b(H,e,M);N||R!=n.length||n.pop()}}}var z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n,l,k,B,f;return function(a,c,d){n=[];l=[];k=[];B=[];f=c||"_";b(a,f,d);return{path:n,ref:l,binding:k,markedElementList:B}}}(),N=function(){function d(a,b,g){var f=[],h=a[5];a=a[4];for(var n,z,e=0;e<h.length;e++)if("string"==typeof h[e])f.push('"'+
h[e].replace(/"/g,'\\"')+'"');else if(n=a[h[e]],z=n.indexOf(":"),-1==z)f.push("l10n"==b?'"{'+n+'}"':"bool"==b?"(__"+n+'||"")':"__"+n);else{var x=null,v=n.substr(z+1).replace(c,function(a,b){x=b;return""});x?f.push(g[n.substr(z+1)]):f.push('__l10n["'+v+'"]')}1==f.length&&f.push('""');return f.join("+")}var c=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,b={disabled:"*",checked:["input"],value:["input","textarea"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},
g={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0},h={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(l){function k(b){C[b]=!0;f.push(B+"="+b+"("+a.array(arguments,1)+");")}for(var t={},f,B,A=[],M=[],e,x,D=[],F={},N=1,C={resolve:!0},U,K=0,y;y=l[K];K++){var J=y[0],H=y[1],I=y[2];if(-1==["set","templateId_"].indexOf(I)){var V=I.split(":");(U="anim"==V[0])&&(I=V[1]);f=t[I];B="_"+K;e="__"+I;if("l10n"==V[0]&&V[1]){var V=V[1],S=null,G=V.replace(c,function(a,b){S=b;return""});
if(S){!1==V in F&&(e="$l10n_"+N++,F[V]=e,D.push('set("'+e+'",'+e+")"),A.push(e+'=tools.l10nToken("'+G+'").computeToken()'),f=t[S],f||(f=t[S]=[],A.push("__"+S)),f.push(e+".set(__"+S+");"));I=F[V];B="_"+K;e="__"+I;f=t[I];f||(f=t[I]=[],A.push(e));J==s?(A.push(B+"="+H),k(h[J],H,B,"value")):(e='"'+y[p]+'"',A.push(B),k("bind_attr",H,e,B,d(y,!1,F)));continue}x||(x={});t[G]||(t[G]=[],x[G]=[]);f=t[G];f.l10n=!0;if(J==s){x[G].push(H+".nodeValue=value;");f.push(H+'.nodeValue=__l10n["'+G+'"]'+(S?"[__"+S+"]":"")+
";");continue}else x[G].push("bind_attr("+[H,'"'+y[p]+'"',"NaN",d(y,"l10n",F)]+");")}f||(f=t[I]=[],A.push(e));if(J!=E)if(f.nodeBind)switch(J){case w:k(h[J],H,H,"value!==null?String(value):null");break;case s:f.push(H+".nodeValue=value;")}else A.push(B+"="+H),k(h[J],H,B,"value"),f.nodeBind=B;else switch(e=y[p],e){case "class":e="";V="value";J=y[4];V=y.length;if(6<=V)if(6==V||"string"==typeof y[6])6==V?(V='value?"'+I+'":""',y[5]&&(e=J+I)):(J="",V='value?"'+y[6]+'":""',y[5]&&(e=y[6]));else{if(!y[6].length)continue;
7==V?(V=y[6].map(function(a){return'value=="'+a+'"'}).join("||")+'?value:""',y[5]&&(e=J+y[6][y[5]-1])):(J="",V=y[6].map(function(a,b){return'value=="'+a+'"?"'+this[b]+'"'},y[7]).join(":")+':""',y[5]&&(e=y[7][y[5]-1]))}else V='typeof value=="string"||typeof value=="number"?value:(value?"'+I+'":"")';A.push(B+'="'+e+'"');k("bind_attrClass",H,B,V,'"'+J+'"',U);break;case "style":A.push(B+'=""');k("bind_attrStyle",H,'"'+y[6]+'"',B,d(y,!1,F));break;default:U=b[e],A.push(B+"="+d(y,"l10n",F)),k("bind_attr",
H,'"'+e+'"',B,U&&g[e]?d(y,"bool",F)+'?"'+e+'":""':d(y,!1,F)),!U||"*"!=U&&-1==U.indexOf(y[6].toLowerCase())||f.push("if("+H+"."+e+"!="+B+")"+H+"."+e+"="+(g[e]?"!!"+B:B)+";")}}}M.push(';function set(bindName,value){if(typeof bindName!="string")');for(I in t)t[I].nodeBind&&M.push("if(bindName==="+t[I].nodeBind+')bindName="'+I+'";else ');M.push("return;");M.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(I in t)M.push('case"'+I+'":'+(t[I].l10n?t[I].join(""):"if(__"+
I+"!==value){__"+I+"=value;"+t[I].join("")+"}")+"break;");M.push("}}");l=[];for(var Z in C)l.push(Z+"=tools."+Z);return{keys:a.object.keys(t).filter(function(a){return-1==a.indexOf("@")}),tools:l,vars:A,set:M.join(""),l10n:x,l10nCompute:D}}}();J.exports={getFunctions:function(d,c,b,g,h){if(c=M[b&&a.path.relative(b)])return c;d=B(d,"_",h);h=N(d.binding);c=d.markedElementList.join("=");b={keys:h.keys,l10nKeys:a.object.keys(h.l10n)};if(h.l10n){g=[];for(var p in h.l10n)g.push('case"'+p+'":if(value==null)value="{'+
p+'}";__l10n[token]=value;'+h.l10n[p].join("")+"break;");b.createL10nSync=C(["_","__l10n","bind_attr","TEXT_BUG"],"var "+d.path+";return function(token, value){switch(token){"+g.join("")+"}}")}b.createInstance=C("tid map build tools __l10n TEXT_BUG".split(" "),"var getBindings=tools.createBindingFunction(["+h.keys.map(function(a){return'"'+a+'"'})+"]),"+(h.tools.length?h.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+h.keys.map(function(a){return a+":null"})+"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=build(),"+
d.path.concat(h.vars)+",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[d.ref,"templateId_:id","set:set"]+"}}"+(c?";if(obj||onAction)"+c+"=(id<<12)|tid":"")+h.set+";instance.handler=bindings?getBindings(bindings,obj,set,bindingInterface):null;"+h.l10nCompute+";return instance}");return b}}},"a.js":function(k,J,a,l,y,H,I,S){function C(a){return"string"==typeof a?t.getElementById(a):a}function w(a){if(!N){var c=
F(a.sender);a.mouseX<c.left||a.mouseX>c.right||a.mouseY<c.top||a.mouseY>c.bottom||(N=this,v={initX:a.mouseX,initY:a.mouseY,deltaX:0,deltaY:0},d("mousemove",E),d("mouseup",s),d("mousedown",s),M&&d("selectstart",g.kill),a.preventDefault(),this.prepareDrag(v,a))}}function E(a){N.axisX&&(v.deltaX=N.axisXproxy(a.mouseX-v.initX));N.axisY&&(v.deltaY=N.axisYproxy(a.mouseY-v.initY));!B&&N.startRule(v.deltaX,v.deltaY)&&(B=!0,N.emit_start(v,a));B&&N.emit_drag(v,a)}function s(a){p("mousemove",E);p("mouseup",
s);p("mousedown",s);M&&p("selectstart",g.kill);var c=N,d=v;v=N=null;B&&(B=!1,c.emit_over(d,a));a.die()}a.require("./3.js");a.require("./8.js");a.require("./b.js");k=this.path;var t=l.document,h=a.cleaner,g=a.dom.event,d=g.addGlobalHandler,p=g.removeGlobalHandler,D=a.event.Emitter;l=a.event.create;var A=a.layout.getBoundingRect,F=a.layout.getViewportRect,M=g.getEventInfo("selectstart").supported,B,N,v,c=D.subclass({className:k+".DragDropElement",containerGetter:a.getter("element"),element:null,trigger:null,
baseElement:null,fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:!0,axisY:!0,axisXproxy:a.fn.$self,axisYproxy:a.fn.$self,startRule:a.fn.$true,prepareDrag:function(){},emit_start:l("start"),emit_drag:l("drag"),emit_over:l("over"),init:function(){D.prototype.init.call(this);var a=this.element,c=this.trigger;this.trigger=this.element=null;this.setElement(a,c);this.setBase(this.baseElement);h.add(this)},setElement:function(a,c){this.element=C(a);c=C(c)||this.element;this.trigger!==c&&(this.trigger&&
g.removeHandler(this.trigger,"mousedown",w,this),(this.trigger=c)&&g.addHandler(this.trigger,"mousedown",w,this))},setBase:function(a){this.baseElement=C(a)},getBase:function(){return this.baseElement||("CSS1Compat"==t.compatMode?t.documentElement:t.body)},isDragging:function(){return N===this},start:function(a){this.isDragging()||w.call(this,a)},stop:function(){this.isDragging()&&s()},destroy:function(){this.stop();h.remove(this);D.prototype.destroy.call(this);this.setElement();this.setBase()}});
a=c.subclass({className:k+".MoveableElement",emit_start:function(a,d){var g=this.containerGetter(this,a.initX,a.initY);g&&(a.element=g,a.box=A(g),a.viewport=F(this.getBase()));c.prototype.emit_start.call(this,a,d)},emit_drag:function(a,d){if(a.element){if(this.axisX){var g=a.box.left+a.deltaX;this.fixLeft&&0>g?g=0:this.fixRight&&g+a.box.width>a.viewport.width&&(g=a.viewport.width-a.box.width);a.element.style.left=g+"px"}this.axisY&&(g=a.box.top+a.deltaY,this.fixTop&&0>g?g=0:this.fixBottom&&g+a.box.height>
a.viewport.height&&(g=a.viewport.height-a.box.height),a.element.style.top=g+"px");c.prototype.emit_drag.call(this,a,d)}}});J.exports={DragDropElement:c,MoveableElement:a}},"b.js":function(k,J,a,l,y,H,I,S){function C(){var a=0,g=0;if("CSS1Compat"==E.compatMode)a=l.pageYOffset||s.scrollTop,g=l.pageXOffset||s.scrollLeft;else{var d=E.body;element!==d&&(a=d.scrollTop-d.clientTop,g=d.scrollLeft-d.clientLeft)}return{x:g,y:a}}function w(a){var g=0,d=0;a&&a.getBoundingClientRect&&(a=a.getBoundingClientRect(),
g=C(),d=a.top+g.y,g=a.left+g.x);return{top:d,left:g}}a.require("./c.js");var E=l.document,s=E.documentElement,t=a.dom.computedStyle.get;J.exports={getOffsetParent:function(a){for(a=a.offsetParent||s;a&&a!==s&&"static"==t(a,"position");)a=a.offsetParent;return a||s},getTopLeftPoint:w,getBoundingRect:function(a,g){var d=0,p=0,l=0,k=0;if(a&&a.getBoundingClientRect){var k=a.getBoundingClientRect(),t;g&&g.getBoundingClientRect?(d=g.getBoundingClientRect(),t={x:-d.left,y:-d.top}):t=C();d=k.top+t.y;p=k.left+
t.x;l=k.right+t.x;k=k.bottom+t.y}return{top:d,left:p,right:l,bottom:k,width:l-p,height:k-d}},getViewportRect:function(a){var g=w(a),d=g.top,g=g.left,p=a.clientWidth,k=a.clientHeight,d=d+(a.clientTop+(l.pageYOffset||s.scrollTop)),g=g+(a.clientLeft+(l.pageXOffset||s.scrollLeft));return{top:d,left:g,bottom:d+k,right:g+p,width:p,height:k}}}},"c.js":function(k,J,a,l,y,H,I,S){var C=l.document;if("getComputedStyle"in l){var w={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},E=a.fn.runOnce(function(){var h=
C.createElement("div");h.setAttribute("style","position:absolute;top:auto!important");a.doc.body.add(h);"auto"==l.getComputedStyle(h).top&&(w={});a.doc.remove(h)});k=function(a,g){var d=l.getComputedStyle(a);if(d){g in w&&E();if(w[g]&&"static"!=d.position){var p=a.style.display;a.style.display="none";d=d.getPropertyValue(g);a.style.display=p}else d=d.getPropertyValue(g);return d}}}else{var s=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,t=/\dpx$/i;k=function(h,g){var d=h.currentStyle;if(d){var d=d["float"==g?"styleFloat":
a.string.camelize(g)],p=(d||"").match(s);if(p&&p[2]&&"px"!=p[2])if(t.test(d))d=parseInt(d,10)+"px";else{var p=h.style,k=h.runtimeStyle,l=p.left,F=k.left;k.left=h.currentStyle.left;p.left=d||0;d=p.pixelLeft;p.left=l;k.left=F;d+="px"}return d}}}J.exports={get:k}},"1.js":function(k,J,a,l,y,H,I,S){function C(a){if(a=a.nodes)for(var c=a.length-1,d;d=a[c];c--)d.parentNode.insertBefore(d,d.nextSibling)}a.require("./2.js");a.require("./4.js");a.require("./5.js");a.require("./6.js");a.require("./7.js");k=
this.path;var w=l.document;l=a.Class;var E=a.event.create,s=a.template.html.Template,t=a.template.TemplateSwitcher;y=a.dom.wrapper.Node;S=a.dom.wrapper.PartitionNode;var h=a.dom.wrapper.GroupingNode,g=1,d=function(){var a={},c=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(c,d){a[c]||(a[c]=d)},process:function(d,g){var h,k=g.match(c);k&&(h=a[k[1]],g=k[2]||d);return h?h(g):g}}}();d.add("data",function(a){return{events:"update",getter:"data."+a}});d.add("satellite",function(a){return{events:"satelliteChanged",
getter:function(c){return c.satellite[a]?c.satellite[a].element:null}}});var p=l.customExtendProperty({state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},
function(b,h){b.bindingId=g++;for(var n in h){var k=null,p=h[n];c&&p instanceof c||a.resource.isResource(p)?k={events:"satelliteChanged",getter:function(a,b){var d="function"==typeof b?b:null,g=function(h){g=!1;if(d){b=d();if(!1==b instanceof c)return;d=null}h.setSatellite(a,b)};return function(b){g&&g(b);return d||(b.satellite[a]?b.satellite[a].element:null)}}(n,p)}:p&&("string"==typeof p?p=d.process(n,p):p.bindingBridge&&(p=a.fn.$const(p)),k="object"!=typeof p?{getter:"function"==typeof p?p:a.getter(p)}:
Array.isArray(p)?{events:p[0],getter:a.getter(p[1])}:{events:p.events,getter:a.getter(p.getter)});b[n]=k}}),D={attach:function(a,c,d){a.addHandler(c,d)},detach:function(a,c,d){a.removeHandler(c,d)}},A=l.extensibleProperty({select:function(a){this.isDisabled()||(this.contextSelection&&this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),F={"*":function(a){var c=this.templateSwitcher_;c&&c.ruleEvents&&c.ruleEvents[a.type]&&this.setTemplate(c.resolve(this))}},M=new s("<div/>"),
B=[],N;H=function(b){return{template:M,emit_templateChanged:E("templateChanged"),templateSwitcher_:null,binding:p,action:A,tmpl:null,element:null,childNodesElement:null,emit_update:function(a){this.templateUpdate(this.tmpl,"update",a);b.emit_update.call(this,a)},init:function(){this.element=this.childNodesElement=B.pop()||w.createDocumentFragment();b.init.call(this)},postInit:function(){b.postInit.call(this);var a=this.template;if(a){var c=this.element;this.template=null;this.setTemplate(a);B.push(c);
this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,D);b.childNodesHere&&(b.childNodesElement=b.childNodesHere.parentNode,b.childNodesElement.insertPoint=b.childNodesHere);this.tmpl=b;this.element=b.element;this.childNodesElement=b.childNodesElement||b.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=w.createDocumentFragment());
if(this.grouping){this.grouping.syncDomRefs();for(var c=this;c.grouping;)c=c.grouping;for(var d=c.lastChild;d;d=d.previousSibling)d instanceof v?c.insertBefore(d,d.nextSibling):C(d);C(c.nullGroup)}else for(c=this.lastChild;c;c=c.previousSibling)this.insertBefore(c,c.nextSibling);this instanceof v&&C(this);this.content&&(b.content||b.element).appendChild(this.content.nodeType?this.content:w.createTextNode(this.content));this.templateUpdate(this.tmpl);a&&a!==this.element&&11!=a.nodeType&&(b=a&&a.parentNode)&&
(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,this.element),this.element.parentNode!==b&&b.replaceChild(this.element,a));this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,c;a instanceof t&&(c=a,a=c.resolve(this));!1==a instanceof s&&(a=null);a&&(c&&(this.templateSwitcher_=c,b||this.addHandler(F,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(F,this)),this.template!==a&&(this.template=a,this.templateSync()))},updateBind:function(a){var b=
this.binding[a];(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var c=this.action[a];c&&c.call(this,b)},templateUpdate:function(a,b,c){},focus:function(b){var c=this.tmpl?this.tmpl.focus||this.element:null;c&&(N&&(N=a.clearImmediate(N)),N=a.setImmediate(function(){try{c.focus(),b&&c.select()}catch(a){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,c=this.element;this.templateSwitcher_&&
(this.templateSwitcher_=null,this.removeHandler(F,this));a.clearInstance(this.tmpl);b.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=c&&c.parentNode)&&1==a.nodeType&&a.removeChild(c)}}};I=function(a){return{insertBefore:function(c,d){c=a.insertBefore.call(this,c,d);var g=(c.groupNode||this).childNodesElement||this.childNodesElement,h=c.nextSibling,p=c.element,h=(h&&h.element.parentNode==g?h.element:null)||g.insertPoint||null;p.parentNode===g&&p.nextSibling===h||g.insertBefore(p,
h);return c},removeChild:function(c){a.removeChild.call(this,c);var d=c.element,g=d.parentNode;g&&g.removeChild(d);return c},clear:function(c){if(c)for(var d=this.firstChild;d;){var g=d.element,h=g.parentNode;h&&h.removeChild(g);d=d.nextSibling}a.clear.call(this,c)},setChildNodes:function(c,d){var g=w.createDocumentFragment(),h=this.grouping||this,p=h.childNodesElement;h.childNodesElement=g;a.setChildNodes.call(this,c,d);p.insertBefore(g,p.insertPoint||null);h.childNodesElement=p}}};var v=l(S,H,{className:k+
".PartitionNode",binding:{title:"data:"}});S=l(h,I,{className:k+".GroupingNode",childClass:v,groupingClass:l.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();h.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=w.createDocumentFragment();h.prototype.init.call(this)},syncDomRefs:function(){var a=this,c=this.owner,d=null;c&&(d=c.tmpl&&c.tmpl.groupsElement||c.childNodesElement);do a.element=a.childNodesElement=d;while(a=
a.grouping)},destroy:function(){h.prototype.destroy.call(this);this.childNodesElement=this.element=null}});var c=l(y,H,I,{className:k+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},disabled:{events:"disable enable",getter:function(a){return a.disabled||a.contextDisabled}},enabled:{events:"disable enable",getter:function(a){return!(a.disabled||a.contextDisabled)}}},childClass:l.SELF,
childFactory:function(a){return new this.childClass(a)},groupingClass:S});k=c.subclass({className:k+".ShadowNodeList",emit_ownerChanged:function(a){c.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:k+
".ShadowNode",getElement:function(a){return a.element},templateSync:function(){c.prototype.templateSync.call(this);var a=this.getElement(this.delegate);a&&(a.basisTemplateId=this.delegate.element.basisTemplateId,this.element=a)},listen:{delegate:{templateChanged:function(){var a=this.element,c=a.parentNode,d=this.getElement(this.delegate);d&&(d.basisTemplateId=this.delegate.element.basisTemplateId);this.element=d||this.tmpl.element;c&&c.replaceChild(this.element,a)}}}}});J.exports={BINDING_PRESET:d,
Node:c,PartitionNode:v,GroupingNode:S,ShadowNodeList:k,ShadowNode:k.prototype.childClass}},"e.js":function(k,J,a,l,y,H,I,S){a.require("./3.js");a.require("./4.js");l=this.path;var C=a.cleaner,w=a.data.AbstractData,E=a.data.Value,s=a.data.STATE;k=E.subclass({className:l+".Property",extendConstructor_:!1,init:function(a,d,h){this.value=a;this.handler=d;this.proxy=h;E.prototype.init.call(this)}});var t={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},
destroy:function(a){this.remove(a)}},h=E.subclass({className:l+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:s.priority,stateChanged_:!0,timer_:!1,init:function(){E.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var g=0,d=arguments.length;g<
d;g++){var h=arguments[g];if(h instanceof w)a.array.add(this.objects,h)&&h.addHandler(t,this);else throw 34;}this.fire(!0,!0)},remove:function(g){a.array.remove(this.objects,g)&&g.removeHandler(t,this);this.fire(!0,!0)},clear:function(){for(var a=0,d;d=this.objects[a];a++)d.removeHandler(t,this);this.objects.length=0;this.fire(!0,!0)},fire:function(g,d){this.locked||(this.valueChanged_=this.valueChanged_||!!g,this.stateChanged_=this.stateChanged_||!!d,this.timer_||!this.valueChanged_&&!this.stateChanged_||
(this.timer_=a.setImmediate(this.update.bind(this))))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var g=this.valueChanged_,d=this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;this.timer_=a.clearImmediate(this.timer_);if(!C.globalDestroy&&(g&&this.set(this.calculateValue()),d))if(g=this.objects.length){for(var d=-2,h,k=0;k<g;k++){var l=this.objects[k],t=this.statePriority.indexOf(String(l.state));t>d&&(h=l,d=t)}h&&this.setState(h.state,h.state.data)}else this.setState(s.UNDEFINED)},
destroy:function(){this.lock();this.clear();this.timer_&&a.clearImmediate(this.timer_);E.prototype.destroy.call(this)}});l=k.subclass({className:l+".Expression",init:function(g,d){E.prototype.init.call(this);g=a.array(arguments);d=g.pop();"function"!=typeof d&&(d=a.fn.$undef);1==g.length&&g[0].link(this,function(a){this.set(d.call(this,a))});if(1<g.length){var p=new h({objects:g,calculateOnInit:!0,calculateValue:function(){return d.apply(this,g.map(function(a){return a.value}))}});p.link(this,this.set);
this.addHandler({destroy:function(){C.globalDestroy||p.destroy()}})}}});J.exports={Property:k,ObjectSet:h,Expression:l}},"f.js":function(k,J,a,l,y,H,I,S){function C(a,b){if(!a.length)return 0;var c,d,f=0,g=a.length-1;do if(c=f+g>>1,d=a[c]||0,b<d)g=c-1;else if(b>d)f=c+1;else return b==d?c:0;while(f<=g);return c+(d<b)}function w(){}function E(a,b,c){var d=a.indexCache_;a.lock();if(b)for(var f=0,g;g=b[f++];){var h=a.normalize(a.valueGetter(g));d[g.basisObjectId]=h;a.add_(h)}if(c)for(f=0;g=c[f++];)b=
g.basisObjectId,a.remove_(d[b]),delete d[b];a.unlock()}function s(a,b){if(!1==b instanceof w)throw 37;var c=a.basisObjectId,d=Y[c];d||(d=Y[c]={},a.addHandler(f),f.itemsChanged.call(a,a,{inserted:a.getItems()}));var c=b.indexId,g=d[c];if(!g){b=N[c];if(!b)throw 38;g=new b.indexClass;g.addHandler(v,a);d[c]=g;E(g,a.getItems())}return g}function t(a,b){var c=Y[a.basisObjectId];if(c&&c[b.indexId]){delete c[b.indexId];b.removeHandler(v,a);for(var d in c)return;a.removeHandler(f);delete Y[a.basisObjectId]}}
function h(){return"calc-index-preset-"+a.number.lead(T++,8)}a.require("./4.js");a.require("./d.js");a.require("./e.js");var g=this.path,d=a.Class,p=a.data.KeyObjectMap,D=a.data.AbstractDataset,A=a.data.DatasetWrapper,F=a.data.Value,M=a.data.dataset.MapFilter,B=d(F,{className:g+".Index",autoDestroy:!0,indexCache_:null,valueGetter:a.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};F.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,
b){},normalize:function(a){return Number(a)||0},destroy:function(){F.prototype.destroy.call(this);this.indexCache_=null}});k=d(B,{className:g+".Sum",add_:function(a){this.value+=a},remove_:function(a){this.value-=a},update_:function(a,b){this.set(this.value-b+a)}});l=d(B,{className:g+".Count",valueGetter:a.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,b){this.set(this.value-!!b+!!a)}});y=d(B,{className:g+".Avg",sum_:0,
count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=a;this.value=(this.count_-=1)?this.sum_/this.count_:0},update_:function(a,b){this.sum_+=a-b;this.set(this.sum_/this.count_)}});H=d(B,{className:g+".VectorIndex",itemGetter:a.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];B.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(C(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},
remove_:function(a){null!==a&&(this.vector_.splice(C(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},update_:function(a,b){null!==b&&this.vector_.splice(C(this.vector_,b),1);null!==a&&this.vector_.splice(C(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){B.prototype.destroy.call(this);this.vector_=null}});I=d(H,{className:g+".Min",vectorGetter:function(a){return a[0]}});S=d(H,
{className:g+".Max",vectorGetter:function(a){return a[a.length-1]}});var N={},v={destroy:function(a){t(this,a)}},c=function(b,c){return function(f,g,h){var p;if(f instanceof D||f instanceof A)p=f,f=g,g=h;g||(g=f,f="");g=g||c;if(!d.isClass(b)||!b.isSubclassOf(B))throw 35;g=a.getter(g);f=f||"update";if("string"!=typeof f)throw 36;f=f.trim().split(" ").sort();h=[b.basisClassId_,g.basisGetterId_,f].join("_");var n=N[h];if(n)g=n.owner;else{for(var k={},n=0;n<f.length;n++)k[f[n]]=!0;n=new w;N[h]={owner:n,
indexClass:b.subclass({indexId:h,updateEvents:k,valueGetter:g})};n.indexId=h;g=n}return p?s(p,g):g}},b=c(l,a.fn.$true),z=c(k),n=c(y),R=c(I),L=c(S),W={"*":function(a){var b,c,d=a.type,f=a.sender,g=f.basisObjectId,h=Y[this.basisObjectId],n;for(n in h)c=h[n],c.updateEvents[d]&&(a=c.indexCache_[g],b=c.normalize(c.valueGetter(f)),b!==a&&(c.update_(b,a),c.indexCache_[g]=b))}},f={itemsChanged:function(a,b){var c;if(c=b.inserted)for(var d=c.length;0<d--;)c[d].addHandler(W,this);if(c=b.deleted)for(d=c.length;0<
d--;)c[d].removeHandler(W,this);c=Y[this.basisObjectId];for(var f in c)E(c[f],b.inserted,b.deleted)},destroy:function(){var a=Y[this.basisObjectId],b;for(b in a)t(this,a[b])}},Y={},P=d(null,{className:g+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:a.fn.$null}),T=1,g=d(M,{className:g+".IndexMap",calcs:null,indexes:null,indexes_:null,indexesBind_:null,timer_:void 0,indexUpdated:null,indexValues:null,memberSourceMap:null,keyMap:null,map:function(a){return this.keyMap.get(a,!0)},addMemberRef:function(a,
b){this.memberSourceMap[a.basisObjectId]=b.basisObjectId;this.listen.member&&a.addHandler(this.listen.member,this);this.sourceMap_[b.basisObjectId].updated=!0;0<a.subscriberCount&&this.calcMember(a)},removeMemberRef:function(a,b){delete this.memberSourceMap[a.basisObjectId];this.listen.member&&a.removeHandler(this.listen.member,this)},emit_sourceChanged:function(a){M.prototype.emit_sourceChanged.call(this,a);for(var b in this.indexes_){var c=this.indexes_[b];a&&(this.removeIndex(b),t(a,this.indexes[b]));
this.source&&this.addIndex(b,s(this.source,c))}},listen:{index:{change:function(a){var b=this.indexMap;b.indexValues[this.key]=a.value;b.indexUpdated=!0;b.recalcRequest()}},member:{subscribersChanged:function(a,b){0<a.subscriberCount&&this.calcMember(a)}}},ruleEvents:a.data.dataset.createRuleEvents(function(a,b){M.prototype.ruleEvents.update.call(this,a,b);this.sourceMap_[a.basisObjectId].updated=!0;this.recalcRequest()},"update"),init:function(){this.recalc=this.recalc.bind(this);this.indexUpdated=
!1;this.indexesBind_={};this.memberSourceMap={};var b=this.indexes;this.indexes={};this.indexes_={};this.indexValues={};var c=this.calcs;this.calcs={};this.keyMap&&!1!=this.keyMap instanceof p||(this.keyMap=new p(a.object.complete({create:function(a,b){return new this.itemClass(b)}},this.keyMap)));M.prototype.init.call(this);a.object.iterate(b,this.addIndex,this);a.object.iterate(c,this.addCalc,this)},addIndex:function(a,b){if(!this.indexes[a]){if(b instanceof w){if(this.indexes_[a])return;this.indexes_[a]=
b;b=this.source?s(this.source,b):null}if(b instanceof B){this.indexValues[a]=b.value;this.indexes[a]=b;this.indexesBind_[a]={key:a,indexMap:this};var c=this.listen.index;c&&(b.addHandler(c,this.indexesBind_[a]),c.change&&c.change.call(this.indexesBind_[a],b,b.value))}}},removeIndex:function(a){if(this.indexes_[a]||this.indexes[a])this.indexes[a]&&this.listen.index&&this.indexes[a].removeHandler(this.listen.index,this.indexesBind_[a]),delete this.indexValues[a],delete this.indexesBind_[a],delete this.indexes[a],
delete this.indexes_[a]},addCalc:function(a,b){if(b instanceof P){this.calcs[a]=b.calc;for(var c in b.indexes)this.addIndex(c,b.indexes[c])}else this.calcs[a]=b;this.recalcRequest()},removeCalc:function(a){var b=this.calcs[a];if(b&&b.preset instanceof P){var b=b.preset.indexes,c;for(c in b)this.removeIndex(c,b[c])}delete this.calcs[a]},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},recalcRequest:function(){this.timer_||
(this.timer_=a.setImmediate(this.recalc))},recalc:function(){for(var b in this.items_)this.calcMember(this.items_[b]);this.indexUpdated=!1;this.timer_=a.clearImmediate(this.timer_)},calcMember:function(a){var b=this.sourceMap_[this.memberSourceMap[a.basisObjectId]];if(a.subscriberCount&&(b.updated||this.indexUpdated)){b.updated=!1;var c={},d,f,g,h;for(h in this.calcs)d=this.calcs[h](b.sourceObject.data,this.indexValues,b.sourceObject),f=a.data[h],a.data[h]===d||"number"==typeof d&&"number"==typeof f&&
isNaN(d)&&isNaN(f)||(c[h]=d,g=!0);g&&a.update(c)}},getMember:function(a){return this.keyMap.get(a,!0)},destroy:function(){this.timer_=clearTimeout(this.timer_);this.indexesBind_=this.memberSourceMap=this.indexUpdated=this.calcs=null;this.keyMap.destroy();this.keyMap=null;for(var a in this.indexes)this.removeIndex(a);M.prototype.destroy.call(this)}});J.exports={IndexConstructor:w,createIndexConstructor:c,getDatasetIndex:s,removeDatasetIndex:t,Index:B,Count:l,Sum:k,Avg:y,VectorIndex:H,Min:I,Max:S,count:b,
sum:z,avg:n,max:L,min:R,CalcIndexPreset:P,percentOfRange:function(b,c){var d="min_"+h(),f="max_"+h(),g={};g[d]=R(b,c);g[f]=L(b,c);c=a.getter(c||b);var n=function(a,b,e){return(c(e)-b[d])/(b[f]-b[d])};return n.preset=new P({indexes:g,calc:n})},percentOfMax:function(b,c){var d="max_"+h(),f={};f[d]=L(b,c);c=a.getter(c||b);var g=function(a,b,e){return c(e)/b[d]};return g.preset=new P({indexes:f,calc:g})},percentOfSum:function(b,c){var d="sum_"+h(),f={};f[d]=z(c,b);b=a.getter(b||c);var g=function(a,c,
f){return b(f)/c[d]};return g.preset=new P({indexes:f,calc:g})},IndexMap:g}},"g.js":function(k,J,a,l,y,H,I,S){function C(a,h){return new Function("data","return {"+a.map(function(a,d){var p=a.replace(/"/g,'\\"'),k=(h&&h[d]||a).replace(/"/g,'\\"');return'"'+p+'": data["'+k+'"]'})+"}")}a.require("./4.js");var w=a.data.Object,E={update:function(a,h){var g={};if(this.name==this.host.fields.defaultSource)for(var d in h)!1==d in this.host.fields.sourceField&&(g[d]=a.data[d]);else for(d in h)this.host.fields.sourceField[d]==
this.name&&(g[d]=a.data[d]);for(d in g)return this.host.update(g)},destroy:function(){this.host.setSource(this.name,null)}},s=function(a){var h={},g={defaultSource:!1,sourceField:{},sources:{},__extend__:s};a["*"]&&(g.defaultSource=a["*"]);for(var d in a){var p=a[d];p!=g.defaultSource&&(h[p]||(h[p]=[]),h[p].push(d),g.sourceField[d]=p)}for(p in h)g.sources[p]=C(h[p]);g.defaultSource&&(g.sources[g.defaultSource]=function(a){var d={},h;for(h in a)!1==h in g.sourceField&&(d[h]=a[h]);return d});return g};
k=w.subclass({className:this.path+".Merge",emit_sourceChanged:a.event.create("sourceChanged","name","oldSource"),fields:s({"*":"-"}),sources:null,sourcesContext_:null,delta_:null,init:function(){var a=this.data,h=this.sources;this.data={};this.delegate=null;w.prototype.init.call(this);for(var g in a)"-"==(this.fields.sourceField[g]||this.fields.defaultSource)&&(this.data[g]=a[g]);this.sources={};this.sourcesContext_={};h&&this.setSources(h)},update:function(a){if(this.delta_)for(var h in a){var g=
this.fields.sourceField[h]||this.fields.defaultSource;g&&(a=this.sources[g].data[h],a!==this.data[h]&&(!1==h in this.delta_?this.delta_[h]=this.data[h]:this.delta_[h]===a&&delete this.delta_[h],this.data[h]=a))}else{var d,p={};this.delta_=p;for(h in a)if(g=this.fields.sourceField[h]||this.fields.defaultSource)"-"==g?(p[h]=this.data[h],this.data[h]=a[h]):this.sources[g]&&(this.sources[g].data[h]!==a[h]?(d||(d={}),!1==g in d&&(d[g]={}),d[g][h]=a[h]):this.data[h]!==a[h]&&(p[h]=this.data[h],this.data[h]=
a[h]));if(d)for(h in d)this.sources[h].update(d[h]);this.delta_=null;for(h in p)return this.emit_update(p),p;return!1}},setDelegate:function(){},setSource:function(a,h){var g=this.sources[a];if(!1!=a in this.fields.sources&&(!1==h instanceof w&&(h=null),g!==h)){g&&g.removeHandler(E,this.sourcesContext_[a]);if(this.sources[a]=h)!1==a in this.sourcesContext_&&(this.sourcesContext_[a]={host:this,name:a}),h.addHandler(E,this.sourcesContext_[a]),this.update(this.fields.sources[a](h.data));this.emit_sourceChanged(a,
g)}},setSources:function(a){a||(a={});for(var h in this.fields.sources)this.setSource(h,a[h])},destroy:function(){this.setSources();this.sourcesContext_=this.sources=null;w.prototype.destroy.call(this)}});J.exports={Merge:k}},"h.js":function(k,J,a,l,y,H,I,S){function C(a){ea[a]=ea[a]||0;return a+ea[a]++}function w(a,b){var c=U[a];if(c){for(var d=0,e;e=c[d];d++)e[0][e[1]]=b;delete U[a]}aa[a]=b}function E(a,b,c){if(aa[a])return aa[a];var d=U[a];d||(d=U[a]=[]);d.push([b,c]);return function(b,c){var d=
aa[a];if(d)return d(b,c)}}function s(){var a=z(arguments),b=a.pop(),c=a[0],d=a[1],e=a[2],f;if("function"!=typeof b)throw 40;switch(a.length){case 0:f=function(){return b()};break;case 1:f=function(a,d,e){return c in a?b(d[c]):e};break;case 2:f=function(a,e,f){return c in a||d in a?b(e[c],e[d]):f};break;case 3:f=function(a,f,g){return c in a||d in a||e in a?b(f[c],f[d],f[e]):g};break;default:f=function(c,d,e){for(var f=!1,g=[],q=0,h;h=a[q];q++)f=f||h in c,g.push(d[h]);return f?b.apply(null,g):e}}f.args=
a;return f.calc=f}function t(){return s.apply(null,z(arguments).concat(function(){for(var a=[],b=arguments.length;0<b--;){if(null==arguments[b])return null;a.push(arguments[b])}return a.join("-")}))}function h(a,b){var c=["has"],d=[N],e=[],f;for(f in a)if(N.call(a,f)){var g="v"+e.length,h="f"+e.length,n=a[f];c.push(g,h);d.push(n,b[f]);e.push('"'+f+'":has.call(data,"'+f+'")?'+h+'(data["'+f+'"],'+g+"):"+g+("function"==typeof n?"(data)":""))}e=e.sort().join(",");(f=G[e])||(f=G[e]=new Function(c,"return function(data){return {"+
e+"};};"));return f.apply(null,d)}function g(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;return b}function d(c,d,f){c.aliases[d]=d;f="string"==typeof f||Array.isArray(f)||"function"==typeof f&&f.calc!==f?{type:f}:a.object.slice(f);if("type"in f){"string"==typeof f.type&&(f.type=E(f.type,c.fields,d));if(Array.isArray(f.type)){var h=f.type.slice();1==h.length?(f.type=a.fn.$const(h[0]),f.defValue=h[0]):
(f.type=function(a,b){return-1!=h.indexOf(a)?a:b},f.defValue=-1!=h.indexOf(f.defValue)?f.defValue:h[0])}f.type===Array&&(f.type=g);"function"!=typeof f.type&&(f.type=b)}var O=f.type||b;-1!=[e,x,X,ca].indexOf(O)&&(f.id=!0);f.id&&(c.index||(c.index=new K(String)),c.idFields[d]=!0,c.idField||c.compositeKey?(c.idField=null,c.compositeKey=t.apply(null,v(c.idFields))):c.idField=d);f.calc?(D(c,d,f.calc),c.fields[d]=Z):c.fields[d]=O;c.defaults[d]="defValue"in f?f.defValue:O();ka[d]||(ka[d]={destroy:function(){this.set(d,
null)}})}function p(a,b,c){!1!=c in a.fields&&(b in a.aliases||(a.aliases[b]=c))}function D(b,c,d){b.calcs||(b.calcs=[]);var e=b.calcs,f=b.deps,g=d.args||[],h={args:g,wrapper:d},n=b.calcs.length,p=0;if(g)for(var k=0,l;l=e[k];k++)-1!=g.indexOf(l.key)&&(p=k+1);if(c){h.key=c;for(k=0;l=e[k];k++)if(-1!=l.args.indexOf(c)){n=k;break}if(p>n)return;b.idField&&c==b.idField&&(b.compositeKey=d);f[c]=g.reduce(function(b,c){for(var d=f[c]||[c],e=0;e<d.length;e++)a.array.add(b,d[e]);return b},[]);for(var v in f)b=
f[v].indexOf(c),-1!=b&&Array.prototype.splice.apply(f[v],[b,1].concat(f[c]))}else n=p;e.splice(Math.min(n,p),0,h)}function A(a){return function(b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]}}function F(a){return function(b,c){return this.set(a,b,c)}}a.require("./3.js");a.require("./4.js");a.require("./d.js");var M=this.path,B=a.Class,N=Object.prototype.hasOwnProperty,v=a.object.keys,c=a.object.extend,b=a.fn.$self,z=a.array.from,n=a.event.Emitter;k=a.event.create;var R=
a.data.Object,L=a.data.Slot,W=a.data.Dataset;H=a.data.dataset.Subset;var f=a.data.dataset.Split,Y={},P=[],T={string:!0,number:!0},e=function(a){return isNaN(a)?null:Number(a)},x=function(a){return isNaN(a)?null:Number(a)},X=function(a){return isNaN(a)?null:parseInt(a,10)},ca=function(a){return null==a?null:String(a)},ea={},aa={},U={},K=B(null,{className:M+".Index",items:null,fn:String,init:function(a){this.items={};"function"==typeof a&&(this.fn=a)},calcWrapper:function(a,b){var c=this.fn(a,b);if(c!==
b&&N.call(this.items,c))throw 39;return c},get:function(a,b){var c=N.call(this.items,a)&&this.items[a];if(c&&(!b||c.entityType===b))return c},add:function(a,b){var c=N.call(this.items,a)&&this.items[a];if(b&&(!c||c===b))return this.items[a]=b,!0},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=null}});I=function(a,b){return function(c){return a.prototype[b].call(this,c&&c.map(this.wrapper))}};l=function(a,b){return function(){this.name||(this.name=
C(b));a.prototype.init.call(this)}};y=function(b){return function(b){var c=a.object.slice(this.items_),d=[];if(b){W.setAccumulateState(!0);for(var e=0;e<b.length;e++){var f=this.wrapper(b[e]);f&&(c[f.basisObjectId]=!1)}W.setAccumulateState(!1)}for(var g in this.items_)!1==g in c&&d.push(this.items_[g]);W.setAccumulateState(!0);for(g in c)c[g]&&c[g].destroy();W.setAccumulateState(!1);return d.length?d:null}};var $=B(W,{className:M+".EntitySet",name:null,wrapper:b,init:l(W,"EntitySet"),sync:y(W),set:I(W,
"set"),add:I(W,"add"),remove:I(W,"remove"),destroy:function(){W.prototype.destroy.call(this);this.wrapper=null}}),ja=B($,{className:M+".ReadOnlyEntitySet",set:a.fn.$false,add:a.fn.$false,remove:a.fn.$false,clear:a.fn.$false});H=B(H,{className:M+".EntityCollection",name:null,init:l(H,"EntityCollection"),sync:y(H)});l=B(f,{className:M+".EntityGrouping",name:null,subsetClass:ja,init:l(f,"EntityGrouping"),sync:y(f),getSubset:function(a,b){var c=f.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=
this.wrapper);return c}});var fa=function(a,d){if(this instanceof fa){a||(a=b);if(!d||aa[d])d=C("UntitledEntitySetType");var e=new ha({entitySetClass:{wrapper:a}}),f=e.entitySetClass,g=function(a,b){return null!=a?(!1==b instanceof $&&(b=e.createEntitySet()),b.set(a instanceof W?a.getItems():z(a)),b):null};"string"==typeof a&&(f.prototype.wrapper=E(a,f.prototype,"wrapper"));w(d,g);c(g,{type:e,typeName:d,toString:function(){return this.typeName+"()"},entitySetType:e,extend:function(){return f.extend.apply(f,
arguments)},extendClass:function(){f.extend.apply(f,arguments);return g},reader:function(a){if(Array.isArray(a)){var b=f.prototype.wrapper;return a.map(b.reader||b)}return a},extendReader:function(a){var b=g.reader;g.reader=function(c){Array.isArray(c)&&a(c);return b(c)}}});return g}},ha=B(null,{className:M+".EntitySetConstructor",entitySetClass:$,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),V=function(a){if(this instanceof V){var b;b=a.singleton?function(a){var b=
d.get();b?a&&b.update(a):b=new e(a||{});return b}:function(a,b){if(null!=a){if(a===b||a.entityType===d)return a;var c,f=d.idField;if(T[typeof a]){if(!f)return;if(b=d.index.get(a,d))return b;c=a;a={};a[f]=c}else d.compositeKey?c=d.compositeKey(a,a):f&&(c=a[f]),null!=c&&(b=d.index.get(c,d));b&&b.entityType===d?b.update(a):b=new e(a);return b}};var d=new la(a||{},b),e=d.entityClass;w(d.name,b);c(b,{all:d.all,type:d,typeName:d.name,entityType:d,toString:function(){return this.typeName+"()"},reader:function(a){return d.reader(a)},
get:function(a){return d.get(a)},getSlot:function(a,b){return d.getSlot(a,b)},extend:function(){return e.extend.apply(e,arguments)},extendClass:function(){return e.extend.apply(e,arguments)},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&"object"==typeof b&&a(b);return c(b)}}});return b}},ka={},G={},Z=function(a,b){return b},la=B(null,{className:M+".EntityType",wrapper:null,all:null,fields:null,idFields:null,defaults:null,aliases:null,slots:null,singleton:!1,index:null,entityClass:null,
init:function(b,c){this.name=b.name;if(!this.name||aa[this.name])this.name=C("UntitledEntityType");this.fields={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var e=b.index;e&&e instanceof K&&(this.index=e);this.wrapper=c;if(!1=="all"in b||b.all||b.singleton)this.all=new ja(a.object.complete({wrapper:c},b.all));if(this.singleton=!!b.singleton){var f;this.get=function(){return f};this.all.addHandler({itemsChanged:function(a,b){f=b.inserted?b.inserted[0]:null}},this)}for(var g in b.fields)d(this,
g,b.fields[g]);for(g in b.aliases)p(this,g,b.aliases[g]);b.constrains&&b.constrains.forEach(function(a){D(this,null,a)},this);e={};for(g in this.defaults)e[g]=void 0;this.entityClass=oa(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:c,typeName:this.name,state:b.state||this.entityClass.prototype.state,generateData:h(this.defaults,this.fields),initDelta:e});for(var n in this.fields)this.entityClass.prototype["get_"+n]=A(n),this.fields[n]!==Z&&(this.entityClass.prototype["set_"+
n]=F(n));P.push(this)},reader:function(a){var b={};if(T[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=this.aliases[c];if(d){var e=this.fields[d].reader;b[d]=e?e(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(null!=a)return this.index.get(a,this)},getId:function(a){if((this.idField||this.compositeKey)&&null!=a){if(T[typeof a])return a;if(a&&a.entityType===this)return a.__id__;a instanceof R&&(a=a.data);return this.compositeKey?this.compositeKey(a,a):
a[this.idField]}},getSlot:function(a){var b=this.getId(a);if(null!=b){var c=N.call(this.slots,b)&&this.slots[b];c||(T[typeof a]&&(c={},this.idField&&!this.compositeKey&&(c[this.idField]=a),a=c),c=this.slots[b]=new L({delegate:this.get(b)||null,data:a}));return c}}}),na=B(R,{className:M+".BaseEntity",target:!0,setDelegate:function(){},modified:null,emit_rollbackUpdate:k("rollbackUpdate")}),oa=function(b,c,d,e){function f(a,c,d){var e=b.calcs,m=a.data,g=!1,q=a.__id__,u;try{if(e)for(var n=0,p;p=e[n];n++){var k=
p.key,O=m[k],l=p.wrapper(c,m,O);k&&l!==O&&(m[k]=l,c[k]=O,g=!0)}u=b.compositeKey?b.compositeKey(c,m,q):b.idField&&b.idField in c?m[b.idField]:q;u!==q&&b.index.calcWrapper(u,q)}catch(v){g=!1;u=q;for(k in c)a.data[k]=c[k];if(d&&!a.modified)for(k in d){a.modified=d;break}}u!==q&&(a.__id__=u,h(a,q,u));return g}function h(a,c,d){var f=b.index;null!=c&&(f.remove(c,a),N.call(e,c)&&e[c].setDelegate());null!=d&&(f.add(d,a),N.call(e,d)&&e[d].setDelegate(a))}return B(na,{className:M+".Entity",extendConstructor_:!1,
fieldHandlers_:null,init:function(a){this.delegate=null;this.data=this.generateData(a);na.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof n&&(a.addHandler(ka[b],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);f(this,this.initDelta);c&&c.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this.__id__},get:function(a,b){return b&&
this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(a,c,e,m){var h=d[a];if(!h)return!1;var u,k=this.modified;h===g&&k&&a in k&&(c=g(c,k[a]));c=h(c,this.data[a]);h=this.data[a];if(c===h||c&&h&&c.constructor===Date&&h.constructor===Date&&+c===+h)!e&&k&&a in k&&(u={rollback:{key:a,value:k[a]}},delete k[a],v(k).length||(this.modified=null));else a:{u={};if(!b.idFields[a])if(e)k||(this.modified=k={}),!1===a in k?(u.rollback={key:a,value:void 0},k[a]=h):k[a]===c&&(u.rollback={key:a,
value:c},delete k[a],v(k).length||(this.modified=null));else if(k&&a in k)if(k[a]!==c){u.rollback={key:a,value:k[a]};k[a]=c;break a}else return!1;this.data[a]=c;this.fieldHandlers_&&this.fieldHandlers_[a]&&(h.removeHandler(ka[a],this),this.fieldHandlers_[a]=!1);c&&c!==this&&c instanceof n&&(c.addHandler(ka[a],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[a]=!0);u.key=a;u.value=h;u.delta={};u.delta[a]=h}if(!m&&u){a=u.key;e=u.delta||{};var p;u.rollback&&(p={},p[u.rollback.key]=
u.rollback.value);f(this,e,p)&&(a=!0);a&&(this.emit_update(e),u.delta=e);p&&this.emit_rollbackUpdate(p)}return u||!1},update:function(a,b){var c=!1,d={};if(a){var e,m={},g,h;for(h in a)if(g=this.set(h,a[h],b,!0))g.key&&(c=!0,d[g.key]=g.value),g.rollback&&(e=!0,m[g.rollback.key]=g.rollback.value);f(this,d,m)&&(c=!0);c&&this.emit_update(d);e&&this.emit_rollbackUpdate(m)}return c?d:!1},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;
for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(c){var d=this.modified;d&&c&&(Array.isArray(c)||(c=[c]),d=a.object.slice(d,c.reduce(function(a,c){return a.concat(b.deps[c]||c)},[])));this.update(d,!0)},destroy:function(){if(this.fieldHandlers_){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(ka[a],this);this.fieldHandlers_=null}null!=
this.__id__&&h(this,this.__id__,null);R.prototype.destroy.call(this);c&&c.emit_itemsChanged({deleted:[this]});this.data=Y;this.modified=null}})};J.exports={isEntity:function(a){return a&&a instanceof na},createType:function(b,c){var d=b||{};"string"==typeof b?d={name:d,fields:c||{}}:c&&(d=a.object.merge(d,{fields:c}));return new V(d)},createSetType:function(a,b){return 1<arguments.length?new fa(b,a):new fa(a)},validate:function(){for(var b in U)a.dev.warn(M+": type `"+b+"` is not defined, but used by "+
U[b].length+" type(s)")},getTypeByName:function(a){return aa[a]},get:function(a,b){var c=aa[a];if(c)return c.get(b)},NumericId:e,NumberId:x,IntId:X,StringId:ca,Index:K,CalculateField:s,calc:s,EntityType:V,Entity:oa,BaseEntity:na,EntitySetType:fa,EntitySet:$,ReadOnlyEntitySet:ja,Collection:H,Grouping:l}},"i.js":function(k,J,a,l,y,H,I,S){function C(){var a="basisjsJsonpCallback"+parseInt(1E11*Math.random());l[a]=function(c){B[a]=c};return a}function w(a){var c=B[a];delete B[a];return c}function E(a,
c){var b,d;b=!1;"number"!=typeof a&&(a=(b=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?M:F);if(a!=this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);if(a==M){this.clearTimeout();this.script.onload=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;c?(this.emit_abort(),b=this.stateOnAbort):(this.processResponse(),this.isSuccessful()&&!b?(b=A.READY,this.emit_success(this.getResponseData())):
(b=A.ERROR,d=this.getResponseError(),this.emit_failure(d)));this.emit_complete(this);var g=this.callback;w(g);delete l[g];this.callback=void 0}else b=A.PROCESSING;this.setState(b,d)}}a.require("./j.js");a.require("./4.js");k=this.path;var s=l.document,t=l.encodeURIComponent,h=a.object.extend,g=a.object.slice,d=a.object.merge;y=a.net.createRequestEvent;var p=a.net.AbstractRequest,D=a.net.AbstractTransport,A=a.data.STATE,F=3,M=4,B={};H=p.subclass({className:k+".Request",timeout:3E4,timer_:null,emit_readyStateChanged:y("readyStateChanged"),
isIdle:function(){return!!this.script},isSuccessful:function(){return 200==this.data.status},processResponse:function(){this.callback in B&&this.update({contentType:"application/javascript",data:w(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:a.fn.$true,prepareRequestData:function(a){var c=[],b=a.url;a=g(a);this.callback=C();for(var d in a.params){var h=a.params[d];null!=h&&null!=h.toString()&&c.push(t(d)+
"="+t(h.toString()))}c.push(t(a.callbackParam)+"="+t(this.callback));c=c.join("&");a.routerParams&&(b=b.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,c){return c in a.routerParams?a.routerParams[c]:b}));c&&(b+=(-1==b.indexOf("?")?"?":"&")+c);a.requestUrl=b;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!s)throw 41;var c=s.head||s.getElementByName("head")[0]||s.documentElement,b=s.createElement("script");this.update({data:void 0,status:"",
error:""});this.script=b;b.async=!0;b.src=a.requestUrl;b.charset=a.encoding;b.onload=b.onerror=b.onreadystatechange=E.bind(this);this.prevReadyState_=-1;this.emit_start();E.call(this,0);this.setTimeout(this.timeout);c.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),E.call(this,M,!0))},setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&
(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();p.prototype.destroy.call(this)}});var N=D.subclass({className:k+".Transport",requestClass:H,emit_readyStateChanged:y("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",init:function(){D.prototype.init.call(this);this.params=g(this.params)},setParam:function(a,c){this.params[a]=
c},setParams:function(a){this.clearParams();for(var c in a)this.setParam(c,a[c])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var c=a.url||this.url;if(!c)throw 42;h(a,{url:c,encoding:a.encoding||this.encoding,params:d(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||this.callbackParam,influence:a.influence});return a}});J.exports={Request:H,Transport:N,request:function(d,
c,b){"string"==typeof d&&(d={url:d});var g=new N(d);g.addHandler({success:c&&function(a,b,d){c(d)},failure:b&&function(a,c,d){b(d)},complete:function(){a.nextTick(function(){g.destroy()})}});g.request()}}},"j.js":function(k,J,a,l,y,H,I,S){function C(a){var d=t(a);return function(){d.apply(D,arguments);this.service&&d.apply(this.service,arguments);d.apply(this,arguments)}}function w(a){var d=t(a);return function(){var g=[this].concat(E(arguments));d.apply(D,g);this.transport&&this.transport["emit_"+
a].apply(this.transport,g);d.apply(this,arguments)}}a.require("./3.js");a.require("./4.js");l=this.path;var E=a.array.from,s=a.object.slice,t=a.event.create,h=a.data.STATE,g=a.data.Object,d=a.event.Emitter,p=[],D=new d({abort:function(){for(var a=E(p),d=0;d<a.length;d++)a[d].abort();return a},handler:{start:function(d){a.array.add(p,d.transport)},complete:function(d){a.array.remove(p,d.transport)}}});k=g.subclass({className:l+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,
stateOnAbort:h.UNDEFINED,emit_start:w("start"),emit_timeout:w("timeout"),emit_abort:w("abort"),emit_success:w("success"),emit_failure:w("failure"),emit_complete:w("complete"),emit_stateChanged:function(a){g.prototype.emit_stateChanged.call(this,a);if(this.influence)for(a=0;a<this.influence.length;a++)this.influence[a].setState(this.state,this.state.data)},init:function(){g.prototype.init.call(this);this.influence=[]},setInfluence:function(a){this.influence=E(a)},clearInfluence:function(){this.influence=
null},doRequest:a.fn.$undef,getResponseData:a.fn.$undef,destroy:function(){g.prototype.destroy.call(this);this.requestData=this.initData=null;this.clearInfluence()}});l=d.subclass({className:l+".AbstractTransport",requestClass:k,requests:null,poolLimit:null,poolHashGetter:a.fn.$true,emit_start:C("start"),emit_timeout:C("timeout"),emit_abort:C("abort"),emit_success:C("success"),emit_failure:C("failure"),emit_complete:C("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=
[];d.prototype.init.call(this);this.addHandler(A,this);this.poolLimit&&this.addHandler(F,this)},getRequestByHash:function(a){var d=this.requests[a];if(!d){for(var g in this.requests)if(this.requests[g].isIdle()&&-1!=!this.requestQueue.indexOf(this.requests[g])){d=this.requests[g];delete this.requests[g];break}d||(d=new this.requestClass({transport:this}));this.requests[a]=d}return d},prepare:a.fn.$true,prepareRequestData:a.fn.$self,request:function(a){if(this.prepare()){a=s(a);var d=this.poolHashGetter(this.prepareRequestData(a)),
d=this.getRequestByHash(d,!0);d.initData&&d.abort();d.initData=a;d.requestData=a;d.setInfluence(a.influence||this.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?(this.requestQueue.push(d),d.setState(h.PROCESSING)):d.doRequest();return d}},abort:function(){for(var a=0,d;d=this.inprogressRequests[a];a++)d.abort();for(a=0;d=this.requestQueue[a];a++)d.setState(h.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),
this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var a=0,d;d=this.stoppedRequests[a];a++)d.transport.request(d.initData);this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var a in this.requests)this.requests[a].destroy();this.requests={};this.stoppedRequests=this.requestQueue=this.inprogressRequests=null;d.prototype.destroy.call(this)}});var A={start:function(d,g){a.array.add(this.inprogressRequests,g)},complete:function(d,g){a.array.remove(this.inprogressRequests,
g)}},F={complete:function(){var d=this.requestQueue.shift();d&&a.nextTick(function(){d.doRequest()})}};J.exports={createTransportEvent:C,createRequestEvent:w,transportDispatcher:D,AbstractRequest:k,AbstractTransport:l}},"k.js":function(k,J,a,l,y,H,I,S){a.require("./3.js");a.require("./l.js");a.require("./n.js");k=a.event.create;var C=a.net.action.create,w=a.event.Emitter,E={start:function(k,l){a.array.add(this.inprogressTransports,l.transport)},complete:function(k,l){a.array.remove(this.inprogressTransports,
l.transport)}};k=w.subclass({className:this.path+".Service",inprogressTransports:null,transportClass:a.net.ajax.Transport,emit_sessionOpen:k("sessionOpen"),emit_sessionClose:k("sessionClose"),emit_sessionFreeze:k("sessionFreeze"),emit_sessionUnfreeze:k("sessionUnfreeze"),isSecure:!1,prepare:a.fn.$true,signature:a.fn.$undef,isSessionExpiredError:a.fn.$false,init:function(){w.prototype.init.call(this);this.inprogressTransports=[];var a=this.transportClass;this.transportClass=a.subclass({service:this,
needSignature:this.isSecure,emit_failure:function(k,h){a.prototype.emit_failure.call(this,k,h);this.needSignature&&this.service.isSessionExpiredError(k)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(k){if(this.service.prepare(this,k)&&(!this.needSignature||this.service.sign(this)))return a.prototype.request.call(this,k)}});this.addHandler(E)},sign:function(a){if(this.sessionKey)return this.signature(a,this.sessionData),!0},openSession:function(a,
k){this.sessionKey=a;this.sessionData=k;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(a){return a.needSignature});for(var a=0,k;k=this.inprogressTransports[a];a++)k.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports)for(var a=0,k;k=this.stoppedTransports[a];a++)k.resume();
this.emit_sessionUnfreeze()},createTransport:function(a){return new this.transportClass(a)},createAction:function(k){return C(a.object.complete({service:this},k))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=null;w.prototype.destroy.call(this)}});J.exports={Service:k}},"l.js":function(k,J,a,l,y,H,I,S){function C(c,b){var d={};M.test(b.method)?t&&!1!=b.postBody instanceof t||(d["Content-Type"]=b.contentType+(b.encoding?";charset="+b.encoding:
"")):E.test("ie")&&(d["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");a.object.iterate(h(d,b.headers),function(a,b){null!=b&&"function"!=typeof b&&this.setRequestHeader(a,b)},c)}function w(c){var b=this.xhr,d;b&&("number"!=typeof c&&(c=b.readyState),c!=this.prevReadyState_&&(this.prevReadyState_=c,this.emit_readyStateChanged(c),c==A?(this.clearTimeout(),b.onreadystatechange=a.fn.$undef,(c=0==b.status)||b.responseType||(c="unknown"==typeof b.responseText||!b.responseText&&!b.getAllResponseHeaders()),
c?(this.emit_abort(),b=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(b=F.READY,this.emit_success(this.getResponseData())):(b=F.ERROR,d=this.getResponseError(),!d&&this.data.error&&(d=this.data.error),this.emit_failure(d))),this.emit_complete(this)):b=F.PROCESSING,this.setState(b,d)))}a.require("./m.js");a.require("./j.js");a.require("./4.js");k=this.path;var E=a.ua,s=l.encodeURIComponent,t=l.FormData,h=a.object.extend,g=a.object.slice,d=a.object.merge;y=a.net.createTransportEvent;
H=a.net.createRequestEvent;var p=a.net.AbstractRequest,D=a.net.AbstractTransport,A=4,F=a.data.STATE,M=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,B="native",N=function(){if("XMLHttpRequest"in l)return function(){return new XMLHttpRequest};var a=l.ActiveXObject;if(a)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;B=b[d];d++)try{if(new a(B))return function(){return new a(B)}}catch(g){}throw 43;}();H=p.subclass({className:k+".Request",requestStartTime:0,timeout:3E4,
timer_:null,debug:!1,emit_readyStateChanged:H("readyStateChanged"),init:function(){p.prototype.init.call(this);this.xhr=N()},isIdle:function(){return this.xhr.readyState==A||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var c=this.xhr;if(!c.responseType&&("json"==this.responseType||/^application\/json/i.test(this.data.contentType))){var b;
a:{try{b=a.json.parse(c.responseText);break a}catch(d){}b=void 0}return b}return"response"in c?c.response:c.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){return{code:"SERVER_ERROR",msg:this.responseType?this.xhr.response||this.xhr.statusText||"Error":this.xhr.responseText}},prepare:a.fn.$true,prepareRequestData:function(a){var b=[],d=a.url;a=g(a);for(var h in a.params){var k=a.params[h];null!=k&&null!=k.toString()&&b.push(s(h)+"="+s(k.toString()))}b=
b.join("&");!a.postBody&&M.test(a.method)&&(a.postBody=b||"",b="");a.routerParams&&(d=d.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,d){return d in a.routerParams?a.routerParams[d]:b}));b&&(d+=(-1==d.indexOf("?")?"?":"&")+b);a.requestUrl=d;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",status:""});E.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=N());this.emit_start();var b=this.xhr;this.prevReadyState_=-1;b.onreadystatechange=
w.bind(this);a.asynchronous||w.call(this,0);b.open(a.method,a.requestUrl,a.asynchronous);if(a.responseType&&a.asynchronous&&"responseType"in b)try{b.responseType=a.responseType}catch(d){}this.responseType=a.responseType||"";C(b,a);this.setTimeout(this.timeout);var g=a.postBody;if(M.test(a.method)&&E.test("ie9-"))if("object"==typeof g&&"undefined"!=typeof g.documentElement&&"string"==typeof g.xml)g=g.xml;else if("string"==typeof g)g=g.replace(/\r/g,"");else if(null==g||""==g)g="[No data]";b.send(g);
return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=A&&0!=this.xhr.readyState&&w.call(this,A))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",
message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();this.xhr=null;p.prototype.destroy.call(this)}});var v=D.subclass({className:k+".Transport",requestClass:H,emit_readyStateChanged:y("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:a.Class.extensibleProperty(),responseType:"",params:null,init:function(){D.prototype.init.call(this);this.params=g(this.params)},setParam:function(a,
b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(c){if(!c.url&&!this.url)throw 44;h(c,{headers:d(this.requestHeaders,c.headers),params:d(this.params,c.params)});a.object.complete(c,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,postBody:this.postBody,
responseType:this.responseType});return c}});J.exports={Request:H,Transport:v,request:function(c,b,d){"string"==typeof c&&(c={url:c,asynchronous:!(!b&&!d)});var g=new v(c);g.addHandler({success:b&&function(a,c,d){b(d)},failure:d&&function(a,b,c){d(c)},complete:function(){a.nextTick(function(){g.destroy()})}});c=g.request();if(!c.requestData.asynchronous)return c.getResponseData()}}},"m.js":function(k,J,a,l,y,H,I,S){function C(a){var g=1E6;a=String(a).split(".");for(var h=0,k=0;4>h&&h<a.length;h++,
g/=100)k+=a[h]*g;return k}function w(a){a=a.toLowerCase();if(a in t)return t[a];var g=a.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(g){t[a]=!1;var h=g[1].toLowerCase(),k=C(g[3]),g=g[4]||"=";if(h=s[h])return t[a]=!k||"="==g&&h==k||"+"==g&&h>=k||"-"==g&&h<k}return!1}var E=l.document;k=l.navigator&&l.navigator.userAgent||"";l=l.opera;var s={},t={};S="unknown";y={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir",
"air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var h in y)if(!("MSIE"==h&&l||"Safari"==h&&/chrome/i.test(k)||"AppleWebKit"==h&&/iphone/i.test(k))&&k.match(RegExp(h+".(\\d+(\\.\\d+)*)","i"))){H=y[h];S=l&&"function"==typeof l.version?l.version():RegExp.$1;I=C(S);S=H[0]+" "+S;for(var g=0;g<H.length;g++)s[H[g].toLowerCase()]=I}J.exports={prettyName:S,is:w,
test:function(){return a.array(arguments).some(w)},cookies:{set:function(a,g,h,k,l){E.cookie=a+"="+(null==g?"":escape(g))+";path="+(k||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(h?";expires="+(new Date(Date.now()+1E3*h)).toGMTString():"")+(l?";domain="+l:"")},get:function(a){return(a=E.cookie.match(RegExp("(^|;)\\s*"+a+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(a[2])},remove:function(a,g,h){E.cookie=a+"=;expires="+(new Date(0)).toGMTString()+";path="+(g||(0==location.pathname.indexOf("/")?
"":"/")+location.pathname)+(h?";domain="+h:"")}}}},"n.js":function(k,J,a,l,y,H,I,S){a.require("./4.js");a.require("./l.js");var C=a.data.STATE.UNDEFINED,w=a.data.STATE.READY,E=a.data.STATE.PROCESSING,s=a.data.STATE.ERROR,t=function(){},h={start:function(a,g){var h=g.requestData.origin;this.start.call(g.requestData.origin);h.state!=E&&h.setState(E)},success:function(a,g,h){a=g.requestData.origin;this.success.call(a,h);a.state==E&&a.setState(w)},failure:function(a,g,h){a=g.requestData.origin;this.failure.call(a,
h);a.state==E&&a.setState(s,h)},abort:function(a,g){var h=g.requestData.origin;this.abort.call(h);h.state==E&&h.setState(C)},complete:function(a,g){this.complete.call(g.requestData.origin)}},g={start:t,success:t,failure:t,abort:t,complete:t};J.exports={create:function(d){d=a.object.extend({prepare:t,request:t},d);var k=a.object.splice(d,["prepare","request"]),l=a.object.merge(g,a.object.splice(d,["start","success","failure","abort","complete"])),A=a.fn.lazyInit(function(){var g=d.transport?d.transport:
d.service?d.service.createTransport(d):d.createTransport?d.createTransport(d):new a.net.ajax.Transport(d);g.addHandler(h,l);return g});return function(){this.state!=E&&(k.prepare.apply(this,arguments),this.request=A().request(a.object.complete({origin:this},k.request.apply(this,arguments))))}}}},"o.js":function(k,J,a,l,y,H,I,S){function C(d){function g(d,k){for(var l="",c,b=d;b<h.length;b++)switch(c=h.charAt(b),c){case k:return{result:l,offset:b};case "\\":l+="\\"+h.charAt(++b);break;case "|":l+=
")"!=k?"\\|":"|";break;case "(":(c=g(b+1,")"))?(b=c.offset,l+="(?:"+c.result+")?"):l+="\\(";break;case ":":(c=h.substr(b+1).match(/^\w+/))?(b+=c[0].length,l+="([^/]+)"):l+=":";break;case "*":(c=h.substr(b+1).match(/^\w+/))?(b+=c[0].length,l+="(.*?)"):l+="\\*";break;default:l+=a.string.forRegExp(c)}return k?null:l}var h=String(d||"");return RegExp("^"+g(0)+"$","i")}function w(){var a=E.hash.substr(1)||"";if(a!=p){var d=[],k=[];p=a;for(var l in h){var s=h[l],v=a.match(s.regexp);v?(g[l]||d.push(s),g[l]=
v):g[l]&&(k.push(s),delete g[l])}for(a=0;s=k[a];a++)for(var s=t(s.callbacks),c=0;v=s[c];c++)v.callback.leave&&v.callback.leave.call(v.context);for(a=0;s=d[a];a++)for(s=t(s.callbacks),c=0;v=s[c];c++)v.callback.enter&&v.callback.enter.call(v.context);for(l in g)for(s=h[l],d=t(g[l],1),s=t(s.callbacks),a=0;v=s[a];a++)v.callback.match&&v.callback.match.apply(v.context,d)}}a.require("./8.js");a.namespace(String(this.path));var E=l.location;k=l.document.documentMode;var s="onhashchange"in l&&(void 0===k||
7<k),t=a.array.from,h={},g={},d=!1,p,D;J.exports={debug:!1,add:function(a,d,k){var l=h[a];if(!l&&(l=h[a]={source:a,callbacks:[],regexp:"[object RegExp]"!=Object.prototype.toString.call(a)?C(a):a},"string"==typeof p)){var s=p.match(l.regexp);s&&(g[a]=s)}d={cb_:d,context:k,callback:"function"!=typeof d?d||{}:{match:d}};l.callbacks.push(d);a in g&&(d.callback.enter&&d.callback.enter.call(k),d.callback.match&&d.callback.match.apply(k,t(g[a],1)))},remove:function(a,d,k){var l=h[a];if(l)for(var p=0,s;s=
l.callbacks[p];p++)if(s.cb_===d&&s.context===k){l.callbacks.splice(p,1);l.callbacks.length||(delete h[a],delete g[a]);break}},stop:function(){d&&(s?a.dom.event.removeHandler(l,"hashchange",w):clearInterval(D),d=!1)},start:function(){d||(s?a.dom.event.addHandler(l,"hashchange",w):D=setInterval(w,50),d=!0,w())},checkUrl:w,navigate:function(a,g){g?E.replace(E.pathname+"#"+a):E.hash=a;d&&w()}}},"p.js":function(k,J,a,l,y,H,I,S){function C(a){w.title=a}var w=l.document||{title:"unknown"},E=w.title,s=a.fn.$undef,
t,h;k=a.fn.lazyInit(function(g){var d=[],k=!1,l={inited:!1,setTitle:function(d){d!=E&&(E instanceof a.Token&&E.detach(C),d instanceof a.Token?(d.attach(C),C(d.get())):C(d),E=d)},setElement:function(a){a="string"==typeof a?w.getElementById(a):a;h!=a&&(h?h.parentNode.replaceChild(a,h):(h=a,t||(t={type:"append",node:w.body}),(a="string"==typeof t.node?w.getElementById(t.node):t.node)&&("append"==t.type?a.appendChild(h):a.parentNode.replaceChild(h,a))))},ready:function(a,g){k?a.call(g,l):d.push({fn:a,
context:g})}},A;for(A in g){var y=g[A];switch(A){case "title":l.setTitle(y);break;case "container":t={type:"append",node:y};break;case "replace":t={type:"replace",node:y};break;case "element":h=y;break;case "init":s="function"==typeof y?y:s}}a.ready(function(){var a=h,g=s.call(l);g&&(a=g.element?g.element:g);h=null;l.setElement(a);k=!0;for(l.inited=!0;a=d.shift();)a.fn.call(a.context,l)});return l});J.exports={create:k}}};(function(k){function J(a,b){for(var c in b)a[c]=b[c];return a}function a(a,
b){for(var c in b)!1==c in a&&(a[c]=b[c]);return a}function l(a){var b=[],c;for(c in a)b.push(c);return b}function y(a,b){var c={};if(!b)return J(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e]);return c}function H(){return g(arguments).reduce(J,{})}function I(a,b,c){var d=[],e;for(e in a)d.push(b.call(c,e,a[e]));return d}function S(a){return a}function C(){}function w(a){var b=Y[a.url];if(b)for(var c=0;c<b.length;c++)b[c](a.get(),a.url)}function E(a,b,c){try{return new Function(b,c)}catch(d){M.error("Compilation error at "+
a+("line"in d?":"+(d.line-1):"")+": "+d)}}function s(a){var b=a.split(".")[0],d=a.replace(/\./g,"/")+".js";!1==a in X&&(!1==b in ea&&(ea[b]=c.baseURI),b==a&&(ca[ea[b]+d]=b),X[a]=ea[b]+d);return X[a]}function t(a){a=a.split(".");var c;c=a[0];var d=x[c];d||(d=x[c]=new aa(c),d.namespaces_={},d.namespaces_[c]=d,b.noConflict||(k[c]=d));"library"!=c||ta||(ta=x[c]);for(var d=c=d,e=1,f;f=a[e];e++){if(!d[f]){var g=a.slice(0,e+1).join(".");d[f]=new aa(g);c.namespaces_[g]=d[f]}d=d[f]}return x[a.join(".")]=d}
function h(a,c){if(b.extProto)for(var d in c)a.prototype[d]=function(a,b){return function(){var b=[this];Array.prototype.push.apply(b,arguments);return c[a].apply(c,b)}}(d,a.name||a.toString().match(/^\s*function\s*(\w*)\s*\(/)[1])}function g(a,b){if(null!=a){var c=a.length;if("undefined"==typeof c||"[object Function]"==D.call(a))return[a];b||(b=0);if(0<c-b){for(var d=[],e=0,f=b;f<c;)d[e++]=a[f++];return d}}return[]}function d(a,b,c){for(var d=[],e="function"==typeof b,f=0;f<a;f++)d[f]=e?b.call(c,
f,d):b;return d}var p=k.document,D=Object.prototype.toString,A=function(){function a(b){if(c.test(b)){var d=b.split("."),e=d[0],f=d[1],g=d[2];switch(d.length){case 1:b=function(a){return null!=a?a[e]:a};break;case 2:b=function(a){return null!=a?a[e][f]:a};break;case 3:b=function(a){return null!=a?a[e][f][g]:a};break;default:b=function(a){if(null!=a){a=a[e][f][g];for(var b=3,c;c=d[b];b++)a=a[c]}return a}}return b}return new Function("object","return object != null ? object."+b+" : object")}var b=1,
c=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,d=[],e={},f={};return function(c,g){var h,k,u;if(!c||c===F)return F;"function"==typeof c?(u=c.basisGetterId_)?h=d[Math.abs(u)-1]:(h=function(a){return c(a)},h.base=c,h.__extend__=A,u=d.push(h),c.basisGetterId_=-u,h.basisGetterId_=u):(h=e[c])?u=h.basisGetterId_:(h=a(c),h.base=c,h.__extend__=A,u=d.push(h),h.basisGetterId_=u,e[c]=h);k=null!=g&&typeof g;if(!k)return h;var l=f[u],n;if("string"==k)n=k+g;else if("function"==k)n=g.basisModId_;else if("object"!=
k)return h;if(n&&l&&l[n])return l[n];"function"==typeof h.base&&(h=h.base);switch(k){case "string":k=function(a){return ha.format(g,h(a))};break;case "function":n||(n=k+b++,g.basisModId_=n);k=function(a){return g(h(a))};break;default:k=function(a){return g[h(a)]}}k.base=h.base||h;k.__extend__=A;n&&(l||(l={},f[u]=l),l[n]=k,k.mod=g,k.basisGetterId_=d.push(k));return k}}(),F=J(function(){},{__extend__:A}),M=function(){var a={log:C,info:C,warn:C,error:C};"undefined"!=typeof console&&I(a,function(b){a[b]=
"bind"in Function.prototype&&"function"==typeof console[b]?Function.prototype.bind.call(console[b],console):function(){Function.prototype.apply.call(console[b],console,arguments)}});return a}(),B=k.setImmediate||k.msSetImmediate,N=k.clearImmediate||k.msSetImmediate;B&&(B=B.bind(k));N&&(N=N.bind(k));B||function(){var a=function(){var a={},c=1;B=function(){a[++c]={fn:arguments[0],args:g(arguments,1)};b(c);return c};N=function(b){delete a[b]};return function(b){var c=a[b];if(c)try{"function"==typeof c.fn?
c.fn.apply(void 0,c.args):(k.execScript||function(a){k.eval.call(k,a)})(String(c.fn))}finally{delete a[b]}}}(),b=function(b){setTimeout(function(){a(b)},0)};if(k.process&&"function"==typeof process.nextTick)b=function(b){process.nextTick(function(){a(b)})};else if(k.MessageChannel)b=function(b){var c=new k.MessageChannel;c.port1.onmessage=function(){a(b)};c.port2.postMessage("")};else{var c=k.postMessage&&!k.importScripts;if(c){var d=k.onmessage;k.onmessage=function(){c=!1};k.postMessage("","*");
k.onmessage=d}if(c)d=function(b){b&&b.source==k&&(b=String(b.data).split("basisjs.setImmediate")[1])&&a(b)},k.addEventListener?k.addEventListener("message",d,!0):k.attachEvent("onmessage",d),b=function(a){k.postMessage("basisjs.setImmediate"+a,"*")};else if(p&&"onreadystatechange"in p.createElement("script"))var e=b,b=function pa(c){"undefined"!=typeof la&&(b=e,la.head.ready(function(){b=function(b){var c=p.createElement("script");c.onreadystatechange=function(){a(b);c.onreadystatechange=null;la.remove(c);
c=null};la.head.add(c)}}));b===pa?e(c):b(c)}}}();var v="object"==typeof process&&"[object process]"==D.call(process),c=function(){var a=/^([^\/]+:|\/)/,b=/^[a-zA-Z0-9\-]+:\/?/,c=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,d=/[\?#].*$/,e={},f="",h;v?(f=require("path").resolve(".").replace(/\\/g,"/"),h=f.replace(/^[^\/]*/,""),f=f.replace(/\/.*/,"")):(h=location.pathname.replace(/[^\/]+$/,""),f=location.protocol+"//"+location.host);return e={baseURI:h,origin:f,normalize:function(a){a=(a||"").replace(b,"/").replace(c,
"/").replace(d,"");for(var e=[],f=a.split("/"),g=0;g<f.length;g++)".."==f[g]?(1<e.length||e[0])&&e.pop():!f[g]&&g||"."==f[g]||e.push(f[g]);return e.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=e.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==a[0]?"/":".")},extname:function(a){return(a=e.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?a[1]:""},basename:function(a,b){var c=e.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==e.extname(c)&&(c=c.substring(0,c.length-b.length));return c},
resolve:function(b,c){for(var d=g(arguments).reverse(),f=[],k=!1,q=0;!k&&q<d.length;q++)"string"==typeof d[q]&&(f.unshift(d[q]),k=a.test(d[q]));k||f.unshift("/"==h?"":h);return e.normalize(f.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=h);a=e.normalize(a);b=e.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;if("/"==b[0]&&"/"!=a[0])return b;for(var c=a.replace(/^\/$/,"").split(/\//),d=b.replace(/^\/$/,"").split(/\//),f=[],g=0;d[g]==c[g]&&"string"==typeof c[g];)g++;for(c=c.length-g;0<
c;c--)f.push("..");return f.concat(d.slice(g).filter(Boolean)).join("/")}}}(),b={path:{basis:""},noConflict:!0,autoload:"./0.js"},z=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;return c===a}function c(k,n){var p=f++;"function"!=typeof k&&(k=l);var r=function(){};r.prototype=k.prototype;for(var r=new r,p={basisClassId_:p,superClass_:k,extendConstructor_:!!k.extendConstructor_,isSubclassOf:b,subclass:function(){return c.apply(null,
[v].concat(g(arguments)))},extend:d,__extend__:function(b){return b&&b!==h&&("object"==typeof b||"function"==typeof b&&!a(b))?l.create.call(null,v,b):b},prototype:r},s=1,t;t=arguments[s];s++)p.extend(t);var v=p.extendConstructor_?function(a){this.basisObjectId=e.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=e.id++;this.init.apply(this,arguments);this.postInit()};r.constructor=v;for(var w in r)r[w]===h&&
(r[w]=v);J(v,p);return v}function d(b){var c=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype));b.prototype&&(b=b.prototype);for(var e in b){var f=b[e],g=c[e];"className"==e||"extendConstructor_"==e?this[e]=f:c[e]=g&&g.__extend__?g.__extend__(f):f}k&&b[e="toString"]!==D&&(c[e]=b[e]);return this}var e={id:1},f=1,h={},k=function(){for(var a in{toString:1})return!1;return!0}(),l=J(c,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},
postInit:function(){},destroy:function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.destroy=C}}}),n=function(a,b,c){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=new c;b(c,a);return c}}.__extend__(a||{})},p=function(a){return n(a,J,"extensibleProperty")};return J(l,{SELF:h,create:c,isClass:a,customExtendProperty:n,extensibleProperty:p,nestedExtendProperty:function(a){return n(a,function(a,b){for(var c in b){var d=a[c];a[c]=
d&&d.__extend__?d.__extend__(b[c]):p(b[c])}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var d={__extend__:c};if(b){if(b.__extend__)return b;for(var e in b)b[e]&&(d[e]=a)}return d};return c(b||{})}})}(),n=z(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c){a.attach(b,c)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},
set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b){this.handler={fn:a,context:b,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=C;d.handler=c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new L(this.value),this.attach(a.set,a));return a},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),
this.deferredToken=null);this.value=this.handler=null;this.detach=this.attach=C}}),R=function(){function a(){var d=b;b={};c=null;for(var e in d)d[e].apply()}var b={},c;return function(d){d.basisObjectId in b||(b[d.basisObjectId]=d,c||B(a))}}(),L=n.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,R(this))},deferred:function(){return this}}),W={},f={},Y={};(function(){var a="undefined"!=typeof ra?ra:null;if(a){for(var b in a)f[c.resolve(b)]=a[b];ra=null}})();var P=
function(a,b){if(b||!f.hasOwnProperty(a)){var c="";if(v)try{c=require("fs").readFileSync(a,"utf-8")}catch(d){}else{var e=new XMLHttpRequest;e.open("GET",a,!1);e.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());e.setRequestHeader("X-Basis-Resource",1);e.send("");200<=e.status&&400>e.status&&(c=e.responseText)}f[a]=c}return f[a]},T=function(a){a=c.resolve(a);if(!W[a]){var b=T.extensions[c.extname(a)],d=!1,e=!1,g,h=function(){if(d)return g;var c=P(a);b?e||(e=!0,g=b(c,a)):g=c;d=!0;w(h);
h.apply();return g};J(h,J(new n,{url:a,fetch:function(){return h()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return d},update:function(c){c=String(c);d&&c==f[a]||(f[a]=c,b?e&&!b.permanent&&(g=b(c,a),w(h),h.apply()):(g=c,d=!0,w(h),h.apply()))},reload:function(){var b=f[a],c=P(a,!0);c!=b&&(d=!1,h.update(c))},get:function(b){return b?P(a):h()},ready:function(a,c){if(d&&(a.call(c,h()),b&&b.permanent))return;h.attach(a,c);return h}}));W[a]=h}return W[a]};J(T,{isResource:function(a){return a?
W[a.url]===a:!1},isResolved:function(a){return(a=T.get(a))?a.isResolved():!1},exists:function(a){return W.hasOwnProperty(c.resolve(a))},get:function(a){a=c.resolve(a);return T.exists(a)?T(a):null},getFiles:function(a){return l(a?f:W).map(c.relative)},extensions:{".js":J(function(d,f){var g=ca[f];if(!g){var h=!0,g=c.dirname(f)+"/"+c.basename(f,c.extname(f)),k;for(k in b.path){var l=b.path[k]+k+"/";if(f.substr(0,l.length)==l){h=!1;g=g.substr(b.path[k].length);break}}g=g.replace(/\./g,"_").replace(/^\//g,
"").replace(/\//g,".");h&&(g="implicit."+g)}x[g]||(k=t(g),k.exports=e({path:k.path,exports:k.exports},f,d).exports,k.exports&&k.exports.constructor===Object&&a(k,k.exports));return x[g].exports},{permanent:!0}),".css":function(a,b){var c=oa.resources[b];c?c.updateCssText(a):c=new oa(b);return c},".json":function(a,b){if("object"==typeof a)return a;var c;try{a=String(a),c=r.json.parse(a)}catch(d){}return c||null}}});var e=function(a,b,d){var e=c.dirname(b)+"/",f=d;a.exports||(a.exports={});"function"!=
typeof f&&(f=E(b,"exports module basis global __filename __dirname resource require".split(" "),'"use strict";\n'+d));"function"==typeof f&&f.call(a.exports,a.exports,a,r,k,b,e,function(a){return T(c.resolve(e,a))},function(a,b){return U(a,b||e)});return a},x={},X={},ca={},ea=y(b.path);(function(a){if(a="undefined"!=typeof sa?sa:null)for(var b in a){var d=c.resolve(b),e=a[b];ca[d]=e;X[e]=d}})();var aa=z(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},
toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(b){J(this.exports,b);return a(this,b)}}),U=function(){if(v){var b=module.constructor.prototype;return function(d,e){if(/[^a-z0-9_\.]/i.test(d)&&".js"!=c.extname(d))return d=c.resolve(e,d),require(d);var f=b._compile,g=t(d);b._compile=function(a,b){this.basis=r;a='var node_require = require;\nvar basis = module.basis;\nvar resource = function(filename){ return basis.resource(__dirname + "/" + filename) };\nvar require = function(filename, baseURI){ return basis.require(filename, baseURI || __dirname) };\n'+
a;f.call(J(this,g),a,b)};var h=require(__dirname+"/"+d.replace(/\./g,"/"));(g.exports=h)&&h.constructor===Object&&a(g,h);b._compile=f;return h}}return function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==c.extname(a)?c.resolve(b,a):s(a);return T(a).fetch()}}();a(Function.prototype,{bind:function(a){var b=this,c=g(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});a(Array,{isArray:function(a){return"[object Array]"===D.call(a)}});
a(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=
0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw 1;var e,f=0;1<d&&(e=b,f=1);for(d=0;d<c;d++)d in this&&(e=f++?a.call(null,e,this[d],d,this):this[d]);return e}});
var K={flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return K.flatten(d(parseInt(b,10)||0,a))},search:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||S);d=parseInt(d,10)||0;for(var e=a.length;d<e;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||S);var e=a.length;d=isNaN(d)||null==d?e:parseInt(d,10);for(e=d>e?e:d;0<e--;)if(c(a[e])===b)return a[a.lastSearchIndex=e]},add:function(a,b){return-1==a.indexOf(b)&&!!a.push(b)},
remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(a,b,c,d){b=A(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(b){return a[b.i]},a)}};h(Array,K);if(![1,2].splice(1).length){var $=Array.prototype.splice;Array.prototype.splice=function(){var a=g(arguments);2>a.length&&(a[1]=this.length);return $.apply(this,a)}}var ja=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,
fa=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;a(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});a(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var ha=
{toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw 2;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(ja,"\\$1")},format:function(a,b){var c=g(arguments,1);"object"==typeof b&&J(c,b);return a.replace(fa,function(a,b,d,e,f){a=b in c?c[b]:f?"":a;return d&&!isNaN(a)?(a=Number(a),"."==d?a.toFixed(e):G.lead(a,e)):a})},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}};h(String,ha);if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var V=String.prototype.split;String.prototype.split=function(a,b){if(!a||!1==a instanceof RegExp||""==a.source)return V.apply(this,arguments);var c=[],d=0,e;for(a.global||(a=RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=a.exec(this);)e[0]=
this.substring(d,e.index),c.push.apply(c,e),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var ka=String.prototype.substr;String.prototype.substr=function(a,b){return ka.call(this,0>a?Math.max(0,this.length+a):a,b)}}var G={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,
function(d,e){return!e+(a.length-e)%(b||3)?d:(c||" ")+d})})},format:function(a,b,c,d,e,f){a=a.toFixed(b);if(c||f)a=a.replace(/(\d+)(\.?)/,function(a,b,d){return(c?r.number.group(Number(b),3,c):b)+(d?f||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(e||"")}};h(Number,G);a(Date,{now:function(){return Number(new Date)}});var Z=function(){function a(){if("complete"==p.readyState&&p.body&&!c++)for(;d;)d.callback.call(d.context),d=d.next}function b(){try{p.documentElement.doScroll("left"),a()}catch(c){setTimeout(b,
1)}}var c=!p||"complete"==p.readyState&&!!p.body,d;if(!c)if(p.addEventListener)p.addEventListener("DOMContentLoaded",a,!1),k.addEventListener("load",a,!1);else{p.attachEvent("onreadystatechange",a);k.attachEvent("onload",a);try{!k.frameElement&&p.documentElement.doScroll&&b()}catch(e){}}return function(a,b){c?a.call(b):d={callback:a,context:b,next:d}}}(),la=function(){function a(b){if(p&&!f[b]&&(f[b]=p[b]||p.getElementsByTagName(b)[0],f[b])){var c=g[b];delete g[b];for(var d=0,e;e=c[d];d++)e[0].call(e[1],
f[b])}return f[b]}function b(){var d=this[0],e=this[1],f=this[2];c(e);var h=a(d);h?(!0===f&&(f=h.firstChild),f&&f.parentNode===h||(f=null),h.insertBefore(e,f)):g[d].push([b,[d,e,f]])}function c(a){for(var b in g){var d=K.search(g[b],a,function(a){return a[1]&&a[1][1]});d&&K.remove(g[b],d)}a&&a.parentNode&&1==a.parentNode.nodeType&&a.parentNode.removeChild(a)}function d(){e&&a("head")&&a("body")&&(e=clearInterval(e))}var e,f={},g={head:[],body:[]};!p||a("head")&&a("body")||(e=setInterval(d,5),Z(d));
return{head:{ready:function(a,b){g.head?g.head.push([a,b]):a.call(b,f.head)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){g.body?g.body.push([a,b]):a.call(b,f.body)},add:function(a,c){b.call(["body",a,c])}},remove:c}}(),na=function(){function a(d){c.globalDestroy=!0;c.add=C;for(c.remove=C;d=b.pop();)if("function"==typeof d.destroy)try{d.destroy()}catch(e){}else for(var f in d)d[f]=null;b.length=0}var b=[];if("attachEvent"in k)k.attachEvent("onunload",a);else if("addEventListener"in
k)k.addEventListener("unload",a,!1);else return{add:C,remove:C};var c={add:function(a){null!=a&&b.push(a)},remove:function(a){K.remove(b,a)}};return c}(),oa=function(){function a(b){k.setAttribute("href",b);la.head.add(k,!0)}function b(){k.setAttribute("href",location.href);la.remove(k)}function d(){a(this.baseURI);this.element||(this.element=p.createElement("style"),g||(this.textNode=this.element.appendChild(p.createTextNode(""))));la.head.add(this.element);this.syncCssText();b()}var e={},f=!0,g;
try{g=!p.createElement("style").appendChild(p.createTextNode(""))}catch(h){g=!0}na.add({destroy:function(){f=!1;for(var a in e)e[a].destroy();e=null}});var k=p&&p.createElement("base"),l=z(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:"",resource:null,element:null,textNode:null,init:function(a){this.url=c.resolve(a);this.baseURI=c.dirname(a)+"/";e[a]=this},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&this.element&&(a(this.baseURI),this.syncCssText(),
b()))},syncCssText:function(){this.textNode?this.textNode.nodeValue=this.cssText:this.element.styleSheet.cssText=this.cssText},startUse:function(){if(!this.inUse){if(!this.resource){var a=T(this.url);this.resource=a;this.cssText=a.get(!0)}la.head.ready(d,this)}this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&la.remove(this.element))},destroy:function(){this.element&&f&&la.remove(this.element);this.cssText=this.resource=this.textNode=this.element=null}});l.resources=
e;return l}(),r=t("basis").extend({version:"1.2.1",NODE_ENV:v,config:b,platformFeature:{},resolveNSFilename:s,patch:function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==c.extname(a)?c.resolve(a):s(a);Y[a]?Y[a].push(b):Y[a]=[b];var d=T.get(a);d&&d.isResolved()&&b(d.get(),d.url)},namespace:t,require:U,resource:T,asset:function(a){return a},setImmediate:B,clearImmediate:N,nextTick:function(){B.apply(null,arguments)},Class:z,Token:n,DeferredToken:L,getter:A,ready:Z,cleaner:na,console:M,path:c,doc:la,object:{extend:J,
complete:a,keys:l,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:y,splice:function(a,b){var c={};if(!b)return J(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e],delete a[e]);return c},merge:H,iterate:I},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==this},$self:S,$const:function(a){return function(){return a}},
$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:C,getter:A,nullGetter:F,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},lazyInit:function(a,b){var c=0,d,e;return d=function(){c++||(d.inited=!0,d.data=e=a.apply(b||this,arguments));return e}},lazyInitAndRun:function(a,b,c){var d=0,e,f;return e=function(){d++||(e.inited=!0,e.data=f=a.call(c||this));b.apply(f,arguments);return f}},runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||
this,arguments)}}},array:J(g,H(K,{from:g,create:d})),string:H(ha,{isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}}),number:G,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return ha.toObject(a,!0)}}});t("basis.dev").extend(M);b.autoload&&U(b.autoload)})(this)}).call(this)