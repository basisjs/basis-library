(function(){"use strict";var e,t={"0.js":"library","1.js":"basis.ui","2.js":"basis.event","3.js":"basis.template.html","4.js":"basis.l10n","5.js":"basis.template.htmlfgen","6.js":"basis.template.const","7.js":"basis.template.namespace","8.js":"basis.template","9.js":"basis.template.declaration","a.js":"basis.template.store","b.js":"basis.template.theme","c.js":"basis.template.buildDom","d.js":"basis.dom.event","e.js":"basis.dom.wrapper","f.js":"basis.data","g.js":"basis.data.state","h.js":"basis.data.subscription","i.js":"basis.data.resolve","j.js":"basis.dragdrop","k.js":"basis.dom.computedStyle","l.js":"basis.layout","m.js":"basis.data.dataset","n.js":"basis.data.value","o.js":"basis.data.index","p.js":"basis.data.object","q.js":"basis.entity","r.js":"basis.type","s.js":"basis.net.jsonp","t.js":"basis.net","u.js":"basis.net.service","v.js":"basis.net.ajax","w.js":"basis.ua","x.js":"basis.net.action","y.js":"basis.promise","z.js":"basis.router","10.js":"basis.app"},n={"1l.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./2.js").create,c=n.require("./f.js").resolveDataset,h=n.require("./f.js").ReadOnlyDataset,d=n.require("./1h.js"),f=n.require("./h.js"),p=n.require("./f.js").Dataset;f.addProperty("minuend"),f.addProperty("subtrahend");var m=function(e){return!this.has(e)},v={itemsChanged:function(e,t){if(this.subtrahend){p.flushChanges(this);var n=d(t.inserted&&t.inserted.filter(m,this.subtrahend),t.deleted&&t.deleted.filter(this.has,this));n&&this.emit_itemsChanged(n)}},destroy:function(){this.minuendRA_||this.setMinuend(null)}},g={itemsChanged:function(e,t){if(this.minuend){p.flushChanges(this);var n=d(t.deleted&&t.deleted.filter(this.minuend.has,this.minuend),t.inserted&&t.inserted.filter(this.has,this));n&&this.emit_itemsChanged(n)}},destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}};t.exports=h.subclass({className:"basis.data.dataset.Subtract",propertyDescriptors:{minuend:"minuendChanged",subtrahend:"subtrahendChanged"},active:n.PROXY,subscribeTo:f.MINUEND+f.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:u("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,emit_subtrahendChanged:u("subtrahendChanged","oldSubtrahend"),listen:{minuend:v,subtrahend:g},init:function(){h.prototype.init.call(this);var e=this.minuend,t=this.subtrahend;this.minuend=null,this.subtrahend=null,(e||t)&&this.setOperands(e,t)},setOperands:function(e,t){var n,i=!1,r=this.minuend,s=this.subtrahend;if(e=c(this,this.setMinuend,e,"minuendRA_"),t=c(this,this.setSubtrahend,t,"subtrahendRA_"),r!==e&&(i=!0,this.minuend=e,(a=this.listen.minuend)&&(r&&r.removeHandler(a,this),e&&e.addHandler(a,this)),this.emit_minuendChanged(r)),s!==t){i=!0,this.subtrahend=t;var a=this.listen.subtrahend;a&&(s&&s.removeHandler(a,this),t&&t.addHandler(a,this)),this.emit_subtrahendChanged(s)}if(!i)return!1;if(e&&t){var o=[],l=[];for(var u in this.items_)e.items_[u]&&!t.items_[u]||o.push(this.items_[u]);for(var u in e.items_)this.items_[u]||t.items_[u]||l.push(e.items_[u]);(n=d(l,o))&&this.emit_itemsChanged(n)}else this.itemCount&&this.emit_itemsChanged(n={deleted:this.getItems()});return n},setMinuend:function(e){return this.setOperands(e,this.subtrahendRA_?this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(e){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,e)},destroy:function(){this.setOperands(),h.prototype.destroy.call(this)}})},"0.js":function(e,t,n,i,r,s,a,o,l){n.require("./1.js"),n.require("./j.js"),n.require("./m.js"),n.require("./n.js"),n.require("./o.js"),n.require("./p.js"),n.require("./q.js"),n.require("./s.js"),n.require("./u.js"),n.require("./x.js"),n.require("./z.js"),n.require("./10.js"),i.basis=n},"2.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=d[e];return t||(t=function(){for(var t,n,i=this;i=i.handler;){if("function"==typeof(n=i.callbacks[e])){if(!t){t=[this];for(r=0;r<arguments.length;r++)t.push(arguments[r])}n.apply(i.context||this,t)}if("function"==typeof(n=i.callbacks["*"])){if(!t){t=[this];for(var r=0;r<arguments.length;r++)t.push(arguments[r])}n.call(i.context||this,{sender:this,type:e,args:t})}}},d[e]=t),t}var c=n.Class,h={},d={},f=function(){},p=function(){},m=c(null,{className:"basis.event.Emitter",extendConstructor_:!0,propertyDescriptors:c.customExtendProperty({basisObjectId:!0,propertyDescriptors:!1,handler:!1,listen:!1},function(e,t){for(var n in t){var i=t[n];!0===i||"<static>"==i?i={isStatic:!0}:!1===i?i={isPrivate:!0}:"string"==typeof i&&(i={events:i}),e[n]=i}}),handler:null,emit_destroy:u("destroy"),listen:c.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(e,t){t=t||this,this.handler={callbacks:e,context:t,handler:this.handler}},removeHandler:function(e,t){if(this.destroy!==p){var n,i=this;for(t=t||this;n=i,i=i.handler;)if(i.callbacks===e&&i.context===t)return i.callbacks=h,void(n.handler=i.handler)}},destroy:function(){this.destroy=f,this.emit_destroy(),this.handler=null,this.destroy=p}});t.exports={create:u,createHandler:function(e,t){var n={events:[]};if(e){n={events:e=String(e).trim().split(/\s+|\s*,\s*/).sort()};for(var i,r=0;i=e[r];r++)"destroy"!=i&&(n[i]=t)}return n},events:d,Emitter:m}},"3.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t,n=e.getDictionary(),i=e.getName(),r=i+"@"+n.id,s=j[r];if(!s){var a=n.token(i);(s=j[r]=a.as(function(e){return"markup"==a.getType()?("string"==typeof e&&m(a)&&(e=e.replace(/\{#\}/g,"{__templateContext}")),e!=this.value&&t&&(t.detach(a,a.apply),t=null),e&&"path:"==String(e).substr(0,5)&&(t=E(e.substr(5))).attach(a,a.apply),t?t.bindingBridge.get(t):e):this.value})).id="{l10n:"+r+"}",s.url=n.getValueSource(i)+":"+i}return s}function c(e){if("string"==typeof e&&(e=v(e)),!e)return null;var t=u(e),n=t.id,i=S[n];return i||(i=S[n]=new R(t)),i}var h=i.document,d=i.Node,f=n.string.camelize,p=n.require("./4.js").isMarkupToken,m=n.require("./4.js").isTokenHasPlaceholder,v=n.require("./4.js").token,g=n.require("./5.js").getFunctions,y=n.require("./8.js"),b=y.TemplateSwitchConfig,_=y.TemplateSwitcher,T=y.Template,E=y.get,N=n.require("./c.js"),x=n.require("./6.js").CLONE_NORMALIZATION_TEXT_BUG,C=!!function(){try{return h.documentElement.style.color="x"}catch(e){}}(),S={},j={},I=function(){function e(e){for(var t=e.startMarker,n=e.endMarker,i=t.nextSibling;i&&i!==n;){var r=i;i=i.nextSibling,e.appendChild(r)}return n.parentNode.removeChild(n),e.startMarker=null,e.endMarker=null,t}function t(e,t,i,r){var s=i||"";if(s!=t){var a,o=e.className,l="string"!=typeof o;l&&(o=o.baseVal),a=o.split(u),t&&n.array.remove(a,t),s&&(a.push(s),r&&(n.array.add(a,s+"-anim"),n.nextTick(function(){var t=(l?e.className.baseVal:e.className).split(u);n.array.remove(t,s+"-anim"),l?e.className.baseVal=t.join(" "):e.className=t.join(" ")}))),l?e.className.baseVal=a.join(" "):e.className=a.join(" ")}return s}function r(){this.set(this.name,this.value)}function s(e,t,n){var i=t&&t.bindingBridge,s=this.attaches&&this.attaches[e],a=null;if(i||s)if(i){var o;if(p(t)&&(o=c(t)),s&&s.value===t&&s.template===o)a=t&&p(t)?s.tmpl:null;else{if(s&&(s.tmpl&&s.template.clearInstance(s.tmpl),s.value.bindingBridge.detach(s.value,r,s)),o){var l=this.context,u=this.bindings,h=this.action,d=this.bindingInterface;(a=o.createInstance(l,h,function e(){(a=f.tmpl=o.createInstance(l,h,e,u,d)).parent=a.element.parentNode||a.element,r.call(f)},u,d)).parent=a.element.parentNode||a.element}this.attaches||(this.attaches=new n);var f=this.attaches[e]={name:e,value:t,template:o,tmpl:a,set:this.tmpl.set};i.attach(t,r,f)}if(a)return a.set("__templateContext",t.value),a.parent;t=i.get(t)}else s&&(s.tmpl&&s.template.clearInstance(s.tmpl),s.value.bindingBridge.detach(s.value,r,s),this.attaches[e]=null);return t}function a(e,t){var n=e[0],i=e[1],r=t[n],s=t[i];switch(e.length){case 1:return function(e){this(n,r(e))};case 2:return function(e){this(n,r(e)),this(i,s(e))};default:var a=e.map(function(e){return t[e]});return function(t){for(var n=0;n<e.length;n++)this(e[n],a[n](t))}}}function o(e,t){for(var n in e)e[n]=a(e[n],t);return n?e:null}function l(e){var t={};return function(n,i){var r=n.bindings;if(!r)return{};var s="bindingId"in r?r.bindingId:null,l=t[s];if(!l){for(var u,c=[],h={},d={},f=0;u=e[f];f++){var p=r[u],m=p&&p.getter;if(m&&(h[u]=m,c.push(u),p.events))for(var v,g=String(p.events).trim().split(/\s+|\s*,\s*/),y=0;v=g[y];y++)d[v]?d[v].push(u):d[v]=[u]}l={names:c,sync:a(c,h),handler:o(d,h)},s&&(t[s]=l)}return i&&l.sync.call(i,n.context),n.bindingInterface?(l.handler&&n.bindingInterface.attach(n.context,l.handler,i),l.handler):void 0}}var u=/\s+/,m=i.DOMTokenList&&h&&h.documentElement.classList instanceof i.DOMTokenList,y=function(){try{return h instanceof d}catch(e){}}()||!1?function(t,n,i,r){var s=!r&&i&&i instanceof d?i:t;return s!==n&&(11!==s.nodeType||s.startMarker||(s.startMarker=h.createTextNode(""),s.endMarker=h.createTextNode(""),s.insertBefore(s.startMarker,s.firstChild),s.appendChild(s.endMarker)),11===n.nodeType&&n.startMarker&&(n=e(n)),n.parentNode.replaceChild(s,n)),s}:function(e,t,n,i){var r=!i&&n&&"object"==typeof n?n:e;if(r!==t)try{t.parentNode.replaceChild(r,t)}catch(n){t!==(r=e)&&t.parentNode.replaceChild(r,t)}return r},b=function(e,t,n,i){return n!==i&&(i?e.setAttribute(t,i):e.removeAttribute(t)),i},_={bind_textNode:function(e,t,n,i){var r=y(e,t,n,i);return r===e&&(e.nodeValue=String(n)),r},bind_node:y,bind_element:function(e,t,n,i){var r=y(e,t,n,i);return r===e&&"string"==typeof n&&(e.innerHTML=n),r},bind_comment:y,bind_attr:b,bind_attrNS:function(e,t,n,i,r){return i!==r&&(r?e.setAttributeNS(t,n,r):e.removeAttributeNS(t,n)),r},bind_attrClass:m?function(e,i,r,s){if(!e.classList)return t(e,i,r,s);var a=r||"";return a!=i&&(i&&e.classList.remove(i),a&&(e.classList.add(a),s&&(e.classList.add(a+"-anim"),n.nextTick(function(){e.classList.remove(a+"-anim")})))),a}:t,bind_attrStyle:C?function(e,t,n,i){return n!==i&&(e.style[f(t)]=i),i}:function(e,t,n,i){if(n!==i)try{e.style[f(t)]=i}catch(e){}return i},resolve:s,l10nToken:v};return function(e,t){var i,r,a=g(e,!0,this.source.url,e.source_,!x),o=a.createL10nSync,u={},c=[],h=[],d=0,f={cloneNode:function(){if(1==d)return N(e);if(f=N(e),o){r=a.createL10nSync(f,u,b,x);for(var t,n=0;t=c[n];n++)r(t.path,u[t.path])}return f.cloneNode(!0)}};if(o){var m=function(e){for(var t,n=0;t=c[n];n++)e(t.path,u[t.path])},y=function(e){var i=p(this.token);i?n.array.add(h,this):n.array.remove(h,this),u[this.path]=i?void 0:null==e?"{"+this.path+"}":e,r&&r(this.path,u[this.path]);for(var s in t)t[s].tmpl.set(this.path,i?this.token:e)};c=a.l10nKeys.map(function(e){var t=v(e),n={path:e,token:t,handler:y};return t.attach(y,n),p(t)?h.push(n):u[e]=null==t.value?"{"+e+"}":t.value,n})}return i=a.createInstanceFactory(this.templateId,function(){return f.cloneNode(!0)},_,u,h,l(a.keys),x),{createInstance:function(e,n,r,s,a){var o=d++,l={context:e,action:n,rebuild:r,handler:null,bindings:s,bindingInterface:a,attaches:null,compute:null,tmpl:null};return i(o,l,o?null:m),t[o]=l,l.tmpl},destroyInstance:function(e){var n=e.templateId_,i=t[n];if(i){if(i.handler&&i.bindingInterface.detach(i.context,i.handler,i.tmpl.set),i.compute){for(var r=0;r<i.compute.length;r++)i.compute[r].destroy();i.compute=null}for(var a in i.attaches)s.call(i,a,null);delete t[n]}},destroy:function(e){for(var n,i=0;n=c[i];i++)n.token.detach(n.handler,n);for(var o in t){var l=t[o];if(e&&l.rebuild&&l.rebuild.call(l.context),!e||o in t){l.handler&&l.bindingInterface.detach(l.context,l.handler,l.tmpl.set);for(var o in l.attaches)s.call(o,null)}}a=null,f=null,u=null,c=null,r=null,t=null}}}}(),R=T.subclass({className:"basis.template.html.Template",__extend__:function(e){return e instanceof R?e:e instanceof b?new A(e):new R(e)},builder:I}),A=_.subclass({className:"basis.template.html.TemplateSwitcher",templateClass:R});t.exports={Template:R,TemplateSwitcher:A}},"4.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){return e=S(e,t)}function c(e){return u(o(e).get(!0),e)||{}}function h(e,t){function n(){B[e].update(d(c(e),t))}return{url:t,activate:function(){o(t).attach(n)},deactivate:function(){o(t).detach(n)}}}function d(e,t){function n(e){return e&&"[object Object]"==Object.prototype.toString.call(e)}function i(e,r,s,a){s&&(s+=".");for(var o in r)n(r[o])?e[o]=i(n(e[o])?e[o]:{},r[o],s+o,a):(a[s+o]=t,e[o]=r[o]);return e}var r,s=c(t);for(var a in s)"_meta"!=a&&"_locationMap"!=a?(j.call(e,a)?e[a]._meta||(e[a]._meta={}):e[a]={_meta:{source:{}}},r={},e[a]._meta.source={},i(e[a],s[a],"",r),e[a]._meta.source=r):(n(e[a])||(e[a]={}),i(e[a],s[a],"",{}));return e}function f(e){return!!e&&(e instanceof L||e instanceof P)}function p(e,t,i){var r=t?t+".":"",s=i.types[t]||"default";for(var a in e)if((""!=t||"_meta"!=a)&&-1==a.indexOf(".")&&j.call(e,a)){var o=r+a,l=i.types[o]||q[s]||"default",u=e[a],c=l in w||s in w;i.values[o]={placeholder:c,processName:c?M:n.fn.$self,source:i.source[o]||i.dictionary.id,culture:i.culture,name:o,types:i.types,value:u},o in i.types==0&&(i.types[o]=l),u&&("object"==typeof u||Array.isArray(u))&&p(u,o,i)}return i.values}function m(e){var t=e._meta&&e._meta.type||{},n={};for(var i in t)t[i]in O&&(n[i]=t[i]);return n}function v(e){return e._meta&&e._meta.source||{}}function g(e,t){var i;if("string"==typeof e){var r=e,s=n.path.extname(r);".l10n"!=s&&(r=r.replace(new RegExp(s+"([#?]|$)"),".l10n$1")),e=n.resource(r)}return n.resource.isResource(e)&&(i=B[e.url]),i||new V(e,t)}function y(e){return g(e)}function b(e,t){return e&&!z[e]&&(z[e]=new K(e,t)),z[e||Y]}function _(e){if(e&&Y!=e){if(-1==F.indexOf(e))return;Y=e;for(var t,n=0;t=U[n];n++)t.syncValues();I.call(b,e)}}function T(e){if("string"==typeof e&&(e=e.trim().split(" ")),e.length){var t,i,r={};G={};for(var s,a=0;s=e[a];a++)(t=s.split("/")).length>2&&(t=[t[0],t[1]]),o=t[0],i||(i=o),r[o]=b(o),G[o]=t;for(var o in G)G[o]=n.array.flatten(G[o].map(function(e){return G[e]})).concat(i).filter(function(e,t,n){return!t||-1==n.lastIndexOf(e,t-1)});F=n.object.keys(r),Y in r==0&&_(i)}}var E=n.object.extend,N=n.object.complete,x=n.Class,C=n.require("./2.js").Emitter,S=n.resource.extensions[".json"],j=Object.prototype.hasOwnProperty,I=n.Token.prototype.set;n.resource.extensions[".l10n"]=function(e,t){return e=u(e,t),R[t]&&d(e,R[t].url),g(t,!0).update(e)};var R=function(){var e,t=n.config.l10n||{},i=t&&t.patch,r={};if(t.patch={},i){if("string"==typeof i)try{e=n.path.dirname(n.resource.resolveURI(i)),i=n.resource(i).fetch()}catch(e){}for(var s in i){var a=n.resource.resolveURI(s,e),o=n.resource.resolveURI(i[s],e);r[a]=h(a,o)}}return r}(),A=[],k={},D={placeholder:!1,processName:n.fn.$self,value:void 0,types:{}},O={default:!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},w={plural:!0,"plural-markup":!0},q={default:"default",plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},M=function(e){return this.culture.plural(e)},P=x(n.Token,{className:"basis.l10n.ComputeToken",token:null,init:function(e){this.token.computeTokens[this.basisObjectId]=this,n.Token.prototype.init.call(this,e)},toString:function(){return this.get()},get:function(){var e=this.token.dictionary.getValue(this.getName());return this.token.descriptor.placeholder&&(e=String(e).replace(/\{#\}/g,this.value)),e},getName:function(){return this.token.name+"."+this.token.descriptor.processName(this.value)},getType:function(){return this.token.descriptor.types[this.getName()]||"default"},getDictionary:function(){return this.token.getDictionary()},destroy:function(){delete this.token.computeTokens[this.basisObjectId],n.Token.prototype.destroy.call(this)}}),L=x(n.Token,{className:"basis.l10n.Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(e,t,i){n.Token.prototype.init.call(this,i.value),this.index=A.push(this)-1,this.name=t,this.dictionary=e,this.descriptor=i,this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var e in this.computeTokens)this.computeTokens[e].apply();n.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.descriptor.types[this.name]||"default"},setType:function(){},compute:function(e,t){1==arguments.length&&(t=e,e=""),t=n.getter(t),e=String(e).trim().split(/\s+|\s*,\s*/).sort();var i=this.basisObjectId,r=e.concat(i,t[n.getter.ID]).join("_");if(k[r])return k[r];for(var s,a=this,o={},l={destroy:function(e){delete o[e.basisObjectId],this.destroy()}},u=0;s=e[u];u++)"destroy"!=s&&(l[s]=function(e){I.call(this,t(e))});return k[r]=function(e){if(e instanceof C==0)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";var n=e.basisObjectId,i=o[n];return i||(i=o[n]=a.computeToken(t(e)),e.addHandler(l,i)),i}},computeToken:function(e){var t=this.computeTokenClass;return t||(t=this.computeTokenClass=P.subclass({token:this})),new t(e)},token:function(e){return this.getType()in w?this.computeToken(e):this.dictionary?this.dictionary.token(this.name+"."+e):void 0},getDictionary:function(){return this.dictionary},destroy:function(){for(var e in this.computeTokens)this.computeTokens[e].destroy();this.descriptor=null,this.computeTokenClass=null,this.computeTokens=null,this.value=null,this.dictionary=null,A[this.index]=null,n.Token.prototype.destroy.call(this)}}),U=[],B={},H=new n.Token,V=x(null,{className:"basis.l10n.Dictionary",cultureValues:null,tokens:null,index:NaN,resource:null,id:null,init:function(e,t){if(this.tokens={},this.cultureValues={},this.index=U.push(this)-1,n.resource.isResource(e)){var i=e,r=i.url;this.id=r,this.resource=i,B[r]||(B[r]=this,H.set(r),R[r]&&R[r].activate()),t||i.fetch()}else this.id="dictionary"+this.index,this.update(e||{})},update:function(e){e||(e={}),this.cultureValues={};var t=m(e);for(var n in e)/^_|_$/.test(n)||(this.cultureValues[n]=p(e[n],"",{dictionary:this,culture:b(n),source:v(e[n]),types:N(m(e[n]),t),values:{}}));return this.syncValues(),this},syncValues:function(){for(var e in this.tokens){var t=this.tokens[e],n=this.getDescriptor(e)||D,i=t.getType();t.descriptor=n,t.value!==n.value?I.call(t,n.value):t.getType()!=i&&t.apply()}},getCultureDescriptor:function(e,t){return this.cultureValues[e]&&this.cultureValues[e][t]},getDescriptor:function(e){for(var t,n=G[Y]||[],i=0;t=n[i];i++){var r=this.getCultureDescriptor(t,e);if(r)return r}},getCultureValue:function(e,t){var n=this.getCultureDescriptor(e,t);if(n)return n.value},getValue:function(e){var t=this.getDescriptor(e);if(t)return t.value},getValueSource:function(e){var t=this.getDescriptor(e);return t?t.source:this.id},token:function(e){var t=this.tokens[e];if(!t){var n=this.getDescriptor(e)||D;t=this.tokens[e]=new L(this,e,n)}return t},destroy:function(){if(this.tokens=null,this.cultureValues=null,n.array.remove(U,this),this.resource){var e=this.resource.url;R[e]&&R[e].deactivate(),delete B[e],this.resource=null}}}),F=[],Y=null,z={},G={},$={},X=[[1,function(){return 0}],[2,function(e){return 1==e||e%10==1?0:1}],[2,function(e){return 0==e?0:1}],[2,function(e){return 1==e?0:1}],[2,function(e){return 0==e||1==e?0:1}],[2,function(e){return e%10!=1||e%100==11?1:0}],[3,function(e){return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:0!=e?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return 0==e?0:1==e?1:2}],[3,function(e){return 1==e?0:0==e||e%100>0&&e%100<20?1:2}],[3,function(e){return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return 1==e?0:e>=2&&e<=4?1:2}],[4,function(e){return 1==e?0:2==e?1:8!=e&&11!=e?2:3}],[4,function(e){return 1==e?0:2==e?1:3==e?2:3}],[4,function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0}],[4,function(e){return 1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3}],[4,function(e){return 1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3}],[5,function(e){return 1==e?0:2==e?1:e<7?2:e<11?3:4}],[6,function(e){return 0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5}]];["ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh","mk","jv","af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo","ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh","is","csb","lv","lt","be bs hr ru sr uk","mnk","ro","pl","cs sk","cy","kw","sl","mt","gd","ga","ar"].forEach(function(e,t){e.split(" ").forEach(function(e){$[e]=this},X[t])});var K=n.Class(null,{className:"basis.l10n.Culture",name:"",pluralForm:null,init:function(e,t){this.name=e,z[e]||(z[e]=this),this.pluralForm=t||$[e]||$[e.split("-")[0]]||X[0]},plural:function(e){return Number(this.pluralForm[1](Math.abs(parseInt(e,10))))}});E(b,new n.Token),b.set=_,T("en-US"),_("en-US"),t.exports={ComputeToken:P,Token:L,token:function(e){if("#"==e.charAt(0))return A[parseInt(e.substr(1),36)];var t=e.match(/^(.+?)@(.+)$/);return t?y(n.path.resolve(t[2])).token(t[1]):void 0},isToken:f,isPluralToken:function(e){return f(e)&&e.getType()in w},isMarkupToken:function(e){return f(e)&&"markup"==e.getType()},isTokenHasPlaceholder:function(e){return f(e)&&e.descriptor.placeholder},Dictionary:V,dictionary:y,getDictionaries:function(){return U.slice(0)},addCreateDictionaryHandler:H.attach.bind(H),removeCreateDictionaryHandler:H.detach.bind(H),Culture:K,culture:b,getCulture:function(){return Y},setCulture:_,getCultureList:function(){return F.slice(0)},setCultureList:T,pluralForms:X,onCultureChange:function(e,t,n){b.attach(e,t),n&&e.call(t,Y)}}},"5.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){for(var n=[],i=0;i<e.length;i++)if(i<t)n.push(e[i]);else{var r=e[i];switch(r[N]){case m:n.push(u(r,R));break;case E:n.push.apply(n,u(r,A).slice(A));break;default:n.push(r)}}return n}function c(e,t){return new Function(e,t)}var h=Object.prototype.hasOwnProperty,d=n.require("./6.js"),f=n.require("./7.js"),p=d.MARKER,m=d.TYPE_ELEMENT,v=d.TYPE_ATTRIBUTE,g=d.TYPE_ATTRIBUTE_CLASS,y=d.TYPE_ATTRIBUTE_STYLE,b=d.TYPE_ATTRIBUTE_EVENT,_=d.TYPE_TEXT,T=d.TYPE_COMMENT,E=d.TYPE_CONTENT,N=d.TOKEN_TYPE,x=d.TOKEN_BINDINGS,C=d.TOKEN_REFS,S=d.ATTR_NAME,j=d.ATTR_NAME_BY_TYPE,I=d.ELEMENT_NAME,R=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,A=d.CONTENT_CHILDREN,k=d.CLASS_BINDING_ENUM,D=d.CLASS_BINDING_BOOL,O=d.CLASS_BINDING_INVERT,w={},q=function(){try{return i.document.createTextNode("").x=1,!0}catch(e){return!1}}(),M=function(){function e(e,t){for(var n,i=0;n=e[i];i++)-1==n.indexOf(":")&&s.push(n+":"+t)}function t(e){var t=r.length,n=c[t]||"r"+t;return r.push(n+"="+e),n}function n(e){a.push(e)}function i(s,a,c){for(var h,d,f,v,E,A,k=0,D=0,O=0;A=s[k];k++,D++,v=!1)if(k?s[k+1]?(A[N]==s[k-1][N]&&A[N]==_&&O++,h=a+".childNodes["+(c?D:D+(O?" + "+O+" * TEXT_BUG":""))+"]"):h=a+".lastChild":h=a+".firstChild",(d=A[C])&&(v=!0,e(d,h=t(h))),A[x]&&(A[x]&&"number"==typeof A[x]&&(A[x]=A[C][A[x]-1]),v||(v=!0,h=t(h)),n([A[N],h,A[x],!!d&&-1!=d.indexOf("element")])),a!=l||!q&&A[N]!=m||o.push(h+"."+p),A[N]==m){f=-1,v||(h=t(h),f=r.length);for(var w,M=[],P=[],L=R;w=A[L];L++)w[N]==m||w[N]==_||w[N]==T?P.push(w):M.push(w);for(var U,L=0;U=M[L];L++){var B=U[N];if(B!=b){var H=j[B]||U[S];if((d=U[C])&&(v=!0,e(d,t(h+'.getAttributeNode("'+H+'")'))),E=U[x])switch(v=!0,B){case g:for(var V,F=0;V=E[F];F++)n([2,h,V[1],H,V[0]].concat(-1==V[2]?[]:V.slice(2)));break;case y:for(var Y,F=0;Y=E[F];F++){u++;for(var z=0;G=Y[0][z];z++)n([2,h,G,H,Y[0],Y[1],Y[2],Y[3],u])}break;default:u++;for(var G,F=0;G=E[0][F];F++)n([2,h,G,H,E[0],E[1],A[I],u])}}}P.length&&i(P,h,c),v||f!=r.length||r.pop()}}var r,s,a,o,l,u,c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return function(e,t,n){return r=[],s=[],a=[],o=[],l=t||"_",u=0,i(e,l,n),{path:r,ref:s,binding:a,markedElementList:o}}}(),P=function(){function e(e){return'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}function t(t,n,r){for(var s,a,o=[],l=[],u=t[5],c=t[4],h=0;h<u.length;h++)if("string"==typeof u[h])o.push(e(u[h]));else if(s=c[u[h]],-1==(a=s.indexOf(":")))o.push("l10n"==n?'"{'+s+'}"':"bool"==n?"(__"+s+'||"")':"__"+s),n||l.push("__"+s+"!==UNSET&&__"+s+"!==undefined");else{var d=null,f=s.substr(a+1).replace(i,function(e,t){return d=t,""});if(d){if(!1===r)return!1;o.push(r[s.substr(a+1)]),n||l.push(r[s.substr(a+1)]+"!==undefined")}else o.push('l10n["'+f+'"]')}return 1==o.length&&o.push('""'),o=o.join("+"),!n&&l.length&&(o=l.join("&&")+"?("+o+'):""'),o}var i=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,r={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},s={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},a={show:'"none"',visible:'"hidden"'},o={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},l={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(u){function c(e){w[e]=!0,d.push(p+"="+e+"("+n.array(arguments,1)+");")}for(var d,p,g,y,b,T={},E=0,N=[],x=[],C=[],j=[],I={},R=0,A={},w={},q=0;V=u[q];q++){if("l10n"==(F=(B=V[2]).split(":"))[0]&&F[1]){var M=null,P=(G=F[1]).replace(i,function(e,t){return M=t,""});if(M){C.push(V),G in I==0&&(g="$l10n_"+R++,I[G]=g,j.push(g),N.push(g+'=tools.l10nToken("'+P+'").computeToken()'),(d=T[M])||(d=T[M]=[],N.push("__"+M+"=UNSET")),d.push(g+".set(__"+M+");"));continue}}x.push(V)}for(q=0;V=C[q];q++){var L=V[0],U=V[1],B=V[2],H=V[3];if(B=I[G=B.split(":")[1]],p="_"+E++,g="__"+B,(d=T[B])||(d=T[B]=[],N.push(g)),L==_)N.push(p+"="+U),c(l[L],U,p,"value",H);else{ie=t(V,!1,I);A[b=V[7]]||(N.push(p),A[b]=p),p=A[b],c("bind_attr",U,$='"'+V[S]+'"',p,ie)}}for(var V,q=0;V=x[q];q++){var L=V[0],U=V[1],B=V[2],H=V[3];if(-1==["get","set","templateId_"].indexOf(B)){var F=B.split(":"),Y="anim"==F[0],z="l10n"==F[0];if(Y&&(B=F[1]),d=h.call(T,B)?T[B]:null,p="_"+E++,g="__"+B,z&&F[1]){var G=F[1],M=null,P=G;if(y||(y={}),T[P]||(T[P]=[],T[P].l10n="$l10n_"+R++,N.push("__"+T[P].l10n+'=l10n["'+P+'"]'),y[P]=[]),d=T[P],L==_){y[P].push(U+".nodeValue=value;"),d.nodeBind?d.push(U+".nodeValue=value;"):(N.push(p+"="+U),c(l[L],U,p,"value",H),d.nodeBind=p);continue}!1!==(ie=t(V,"l10n",!1))&&y[P].push("bind_attr("+[U,'"'+V[S]+'"',"NaN",ie]+");")}if(d||(d=T[B]=[],N.push(g+"=UNSET")),L!=v)if(d.nodeBind)switch(L){case m:c(l[L],U,U,"value!==null?String(value):null");break;case _:d.push(U+".nodeValue=value;")}else N.push(p+"="+U),c(l[L],U,p,"value",H),d.nodeBind=p;else{var $=V[S];switch($){case"role-marker":N.push(p+'=""'),c("bind_attr",U,'"'+$+'"',p,"value?value"+(V[5][1]?"+"+e(V[5][1]):"")+':""');break;case"class":var X="",K="value",W=V[5],Z=V[7];switch(W){case D:case O:var J=[V[6]],Q=V[4],ee=Array.isArray(Q)?Q:J.map(function(e){return Q+e});K=(W==O?"!":"")+'value?"'+ee[0]+'":""',Z&&(X=ee[Z-1]);break;case k:var J=V[8],Q=V[4],ee=Array.isArray(Q)?Q:J.map(function(e){return Q+e});K=J.map(function(e,t){return'value=="'+e+'"?"'+ee[t]+'"'}).join(":")+':""',Z&&(X=ee[Z-1]);break;default:K='typeof value=="string"||typeof value=="number"?"'+(Q=V[4])+'"+value:(value?"'+Q+B+'":"")'}N.push(p+'="'+X+'"'),c("bind_attrClass",U,p,K,Y);break;case"style":ie=t(V,"style",I);A[b=V[8]]||(A[b]=p,N.push(p+"="+(a[V[7]]||'""'))),V[7]&&(ie=ie.replace(/\+""$/,"")+(o[V[7]]||"")),p=A[b],c("bind_attrStyle",U,'"'+V[6]+'"',p,ie);break;default:var te=r[$],ne=V[6].toLowerCase(),ie=te&&s[$]?t(V,"bool",I)+'?"'+$+'":""':t(V,!1,I);if(b=V[7],A[b]||(N.push(p+"=UNSET"),A[b]=p),p=A[b],"tabindex"==$)c("bind_attr",U,'"'+$+'"',p,ie+"==-1?"+(-1==["input","button","textarea"].indexOf(ne)?'""':"-1")+":"+ie);else{var re=f.getNamespace($);re?c("bind_attrNS",U,'"'+re+'"','"'+$+'"',p,ie):c("bind_attr",U,'"'+$+'"',p,ie)}!te||"*"!=te&&-1==te.indexOf(ne)||d.push("if("+U+"."+$+"!="+p+")"+U+"."+$+"="+(s[$]?"!!"+p:p)+";")}}}}var se=n.object.keys(T),ae="";if(se.length){w.resolve=!0,ae=[";function set(bindName,value){",'if(typeof bindName!="string")'];for(var B in T)T[B].nodeBind&&ae.push("if(bindName==="+T[B].nodeBind+')bindName="'+B+'";else ');ae.push("return;","value=resolve.call(instance,bindName,value,Attaches);","switch(bindName){");for(var B in T){var oe=T[B].l10n||B;ae.push('case"'+B+'":',"if(__"+oe+"!==value)","{","__"+oe+"=value;",T[B].join(""),"}","break;")}ae=ae.join("")+"}}"}var le=[];for(var ue in w)le.push(ue+"=tools."+ue);return{allKeys:se,keys:se.filter(function(e){return-1==e.indexOf("@")}),tools:le,vars:N,set:ae,l10n:y,l10nCompute:j}}}();t.exports={getFunctions:function(e,t,i,r,s){var a=w[i&&n.path.relative(i)];if(a)return a;e=u(e,0);var o=M(e,"_",s),l=P(o.binding),h=o.markedElementList.join("="),d={keys:l.keys,l10nKeys:n.object.keys(l.l10n)};if(1==e.length&&(o.path[0]="a=_"),l.l10n){var f=[];for(var p in l.l10n)f.push('case"'+p+'":'+l.l10n[p].join("")+"break;");d.createL10nSync=c(["_","l10n","bind_attr","TEXT_BUG"],"var "+o.path+";return function(path, value){switch(path){"+f.join("")+"}}")}return d.createInstanceFactory=c(["tid","createDOM","tools","l10nMap","l10nMarkup","getBindings","TEXT_BUG"],"var UNSET={valueOf:function(){}},"+(l.tools.length?l.tools+",":"")+(l.set?"Attaches=function(){};Attaches.prototype={"+l.keys.map(function(e){return e+":null"})+"};":"set=function(){};")+"return function createTmpl_(id,instance,initL10n){var _=createDOM(),"+(l.l10n?"l10n=initL10n?{}:l10nMap,":"")+o.path.concat(l.vars)+(l.l10nCompute.length?";instance.compute=["+l.l10nCompute+"]":"")+";instance.tmpl={"+[o.ref,"templateId_:id","set:set"]+"}"+(h?";if(instance.context||instance.onAction)"+h+"=(id<<12)|tid":"")+l.set+(l.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+(l.set?";if(instance.bindings)instance.handler=getBindings(instance,set)":"")+";"+l.l10nCompute.map(function(e){return'set("'+e+'",'+e+")"})+"}"),d}}},"6.js":function(e,t,n,i,r,s,a,o,l){var u="basisTemplateId_"+n.genUID(),c={class:4,style:5},h={2:4,4:3,5:3,6:2},d=i.document,f=!d||function(){var e=d.createElement("div");return e.appendChild(d.createTextNode("a")),e.appendChild(d.createTextNode("a")),1==e.cloneNode(!0).childNodes.length}();t.exports={MARKER:u,TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TYPE_CONTENT:9,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:{4:"class",5:"style"},ATTR_TYPE_BY_NAME:c,ATTR_VALUE_INDEX:h,ELEMENT_NAME:3,ELEMENT_ATTRIBUTES_AND_CHILDREN:4,TEXT_VALUE:3,COMMENT_VALUE:3,CONTENT_CHILDREN:2,CONTENT_PRIORITY:1,CLASS_BINDING_ENUM:1,CLASS_BINDING_BOOL:2,CLASS_BINDING_INVERT:3,CLASS_BINDING_EQUAL:4,CLASS_BINDING_NOTEQUAL:5,CLONE_NORMALIZATION_TEXT_BUG:f}},"7.js":function(e,t,n,i,r,s,a,o,l){var u={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.exports={namespaceURI:u,getNamespace:function(e,t){if(e){var n=e.indexOf(":");if(-1!=n){var i=e.substr(0,n);return u[i]||t&&t.lookupNamespaceURI(i)}}}}},"8.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=C[e];if(!t){var i=d.getElementById(e),r="";i&&"SCRIPT"==i.tagName&&"text/basis-template"==i.type&&(r=i.textContent||i.text),t=C[e]=n.resource.virtual("tmpl",r||"")}return t}function c(){this.destroyBuilder&&h.call(this);for(var e=this;e=e.attaches_;)e.handler.call(e.context)}function h(){var e=y(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),t=this.destroyBuilder,i={},r=this.builder(e.tokens,i);this.createInstance=r.createInstance,this.clearInstance=r.destroyInstance,this.destroyBuilder=r.destroy,T.add(this.templateId,this,i);var s=e.deps,a=this.deps_;if(this.deps_=s,a)for(l=0;o=a[l];l++)o.bindingBridge.detach(o,c,this);if(s)for(var o,l=0;o=s[l];l++)o.bindingBridge.attach(o,c,this);var u=e.resources,h=this.resources;if(this.resources=u,u)for(l=0;d=u[l];l++)"function"==typeof(f=n.resource(d.url).fetch()).startUse&&f.startUse();if(h)for(var d,l=0;d=h[l];l++){var f=n.resource(d.url).fetch();"function"==typeof f.stopUse&&f.stopUse()}t&&t(!0)}var d=i.document,f=n.Class,p=n.cleaner,m=n.path,v=n.require("./6.js"),g=n.require("./9.js").VERSION,y=n.require("./9.js").getDeclFromSource,b=n.require("./9.js").makeDeclaration,_=n.require("./9.js").setIsolatePrefixGenerator,T=n.require("./a.js"),E=n.require("./b.js"),N=E.get,x=[],C={},S=f(null,{className:"basis.template.Template",__extend__:function(e){return e instanceof S?e:e instanceof j?new I(e):new S(e)},source:"",baseURI:"",url:"",attaches_:null,init:function(e){if(4096==x.length)throw"Too many templates (maximum 4096)";this.setSource(e||""),this.templateId=x.push(this)-1},bindingBridge:{attach:function(e,t,n){e.attaches_={handler:t,context:n,attaches_:e.attaches_}},detach:function(e,t,n){for(var i,r=e;i=r,r=r.attaches_;)if(r.handler===t&&r.context===n)return void(i.attaches_=r.attaches_)},get:function(e){var t=e.source;return t&&t.bindingBridge?t.bindingBridge.get(t):t}},createInstance:function(e,t,n,i,r){return h.call(this),this.createInstance(e,t,n,i,r)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(e){var t=this.source;if(t!=e){if("string"==typeof e){var n=e.match(/^([a-z]+):/);if(n)switch(e=e.substr(n[0].length),n[1]){case"id":e=u(e);break;case"path":e=N(e)}}t&&t.bindingBridge&&(this.url="",this.baseURI="",t.bindingBridge.detach(t,c,this)),e&&e.bindingBridge&&(e.url&&(this.url=e.url,this.baseURI=m.dirname(e.url)+"/"),e.bindingBridge.attach(e,c,this)),this.source=e,c.call(this)}},destroy:function(){this.destroyBuilder&&(T.remove(this.templateId),this.destroyBuilder()),this.attaches_=null,this.createInstance=null,this.resources=null,this.source=null}}),j=function(e){n.object.extend(this,e)},I=n.Class(null,{className:"basis.template.TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:S,ruleEvents:null,rule:String,init:function(e){this.ruleRet_=[],this.templates_=[],this.rule=e.rule;var t=e.events;if(t&&t.length){this.ruleEvents={};for(var n,i=0;n=t[i];i++)this.ruleEvents[n]=!0}p.add(this)},resolve:function(e){var t=this.rule(e),n=this.ruleRet_.indexOf(t);return-1==n&&(this.ruleRet_.push(t),n=this.templates_.push(new this.templateClass(t))-1),this.templates_[n]},destroy:function(){this.rule=null,this.templates_=null,this.ruleRet_=null}});p.add({destroy:function(){for(var e,t=0;e=x[t];t++)e.destroy();x=null}}),t.exports={DECLARATION_VERSION:g,TYPE_ELEMENT:v.TYPE_ELEMENT,TYPE_ATTRIBUTE:v.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:v.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:v.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:v.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:v.TYPE_TEXT,TYPE_COMMENT:v.TYPE_COMMENT,TYPE_CONTENT:v.TYPE_CONTENT,TOKEN_TYPE:v.TOKEN_TYPE,TOKEN_BINDINGS:v.TOKEN_BINDINGS,TOKEN_REFS:v.TOKEN_REFS,ATTR_NAME:v.ATTR_NAME,ATTR_VALUE:v.ATTR_VALUE,ATTR_NAME_BY_TYPE:v.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:v.CLASS_BINDING_ENUM,CLASS_BINDING_BOOL:v.CLASS_BINDING_BOOL,CLASS_BINDING_INVERT:v.CLASS_BINDING_INVERT,ELEMENT_NAME:v.ELEMENT_NAME,ELEMENT_ATTRS:v.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:v.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:v.TEXT_VALUE,COMMENT_VALUE:v.COMMENT_VALUE,CONTENT_CHILDREN:v.CONTENT_CHILDREN,CONTENT_PRIORITY:v.CONTENT_PRIORITY,TemplateSwitchConfig:j,TemplateSwitcher:I,Template:S,switcher:function(e,t){return t||(t=e,e=null),"string"==typeof e&&(e=e.split(/\s+/)),new j({rule:t,events:e})},getDeclFromSource:y,makeDeclaration:b,resolveResource:function(e,t){return/^#\d+$/.test(e)?x[e.substr(1)]:/^id:/.test(e)?u(e.substr(3)):/^[a-z0-9\.]+$/i.test(e)&&!/\.tmpl$/.test(e)?N(e):n.resource(n.resource.resolveURI(e,t,'<b:include src="{url}"/>'))},setIsolatePrefixGenerator:_,resolveTemplateInfoByNode:function(e){for(;e;){if(e[v.MARKER])return T.resolveInfoById(e[v.MARKER]);e=e.parentNode}return null},resolveInfoById:T.resolveInfoById,resolveTemplateById:T.resolveTemplateById,resolveObjectById:T.resolveObjectById,resolveTmplById:T.resolveTmplById,SourceWrapper:E.SourceWrapper,Theme:E.Theme,theme:E.theme,getThemeList:E.getThemeList,currentTheme:E.currentTheme,setTheme:E.setTheme,onThemeChange:E.onThemeChange,define:E.define,get:E.get,getPathList:E.getPathList}},"9.js":function(e,t,n,i,r,s,a,o,l){function u(e){for(var t=[],n=0;n<e.length;n++)t.push(Array.isArray(e[n])?u(e[n]):e[n]);return t}function c(e,t,i,r){var s,a=e;return e.bindingBridge&&(t="baseURI"in e?e.baseURI:"url"in e?n.path.dirname(e.url):t,s="url"in e?e.url:s,a=e.bindingBridge.get(e)),Array.isArray(a)?(i&&(a=u(a)),a={tokens:a}):!a||"object"==typeof a&&Array.isArray(a.tokens)||(a=String(a)),a&&"string"!=typeof a||(a=K(a,t,r,s,e)),a}var h=Object.prototype.hasOwnProperty,d=n.array.search,f=n.array.add,p=n.require("./11.js"),m=n.require("./12.js"),v=n.require("./6.js"),g=n.require("./13.js"),y=n.require("./14.js"),b=n.require("./16.js"),_=n.require("./17.js"),T=n.require("./15.js").walk,E=v.TYPE_ELEMENT,N=v.TYPE_ATTRIBUTE,x=v.TYPE_ATTRIBUTE_CLASS,C=v.TYPE_TEXT,S=v.TYPE_COMMENT,j=v.TYPE_CONTENT,I=v.TOKEN_TYPE,R=v.TOKEN_BINDINGS,A=v.TOKEN_REFS,k=v.ATTR_VALUE_INDEX,D=v.ELEMENT_ATTRIBUTES_AND_CHILDREN,O=v.TEXT_VALUE,w=v.CONTENT_PRIORITY,q=v.CONTENT_CHILDREN,M=g.resourceHash,P=g.getTokenName,L=g.bindingList,U=y.refList,B=y.addTokenRef,H=y.normalizeRefs,V=_.applyAttrs,F=b.styleNamespaceIsolate,Y=b.isolateTokens,z={content:n.require("./18.js"),define:n.require("./19.js"),include:n.require("./1a.js"),isolate:n.require("./1b.js"),l10n:n.require("./1c.js"),style:n.require("./1d.js"),svg:n.require("./1e.js"),text:n.require("./1f.js")},G=function(){},$=function(){},X=function(){return n.genUID()+"__"},K=function(){function e(t,n,i){for(var r,s,a=[],o=0;r=t[o];o++){var l=U(r),u=L(r);switch(r.type){case E:if("b"==r.prefix){if(!z.hasOwnProperty(r.name))continue;z[r.name](n,i,r,a);continue}s=[1,u,l,P(r)],V(n,i,s,r.attrs),s.push.apply(s,e(r.children,n,i));break;case C:l&&2==l.length&&d(l,"element")&&(u=l[+!l.lastSearchIndex]),s=[3,u,l],l&&r.value=="{"+l.join("|")+"}"||s.push(r.value);break;case S:if(i.optimizeSize&&!u&&!l)continue;s=[8,u,l],i.optimizeSize||l&&r.value=="{"+l.join("|")+"}"||s.push(r.value);break;default:continue}a.push(s)}return a}function t(e,t,n){if("string"==typeof e){var i=e.split(":"),r=i[1];if(r&&"l10n"==i[0]){if(2==i.length&&-1==r.indexOf("@")){if(!t)return!1;e="l10n:"+(r=r+"@"+t)}f(n,r)}}return e}function i(e,n,r){T(e,function(e,s){var a=s[R];switch(e){case E:i(s,n,r,D);break;case C:if(a){var o=t(a,r.dictURI,n.l10n);s[R]=o||0,!1===o&&(s[O]="{"+a+"}")}break;case N:if(a)for(var l=a[0],u=l.length-1;u>=0;u--)if(!1===(o=t(l[u],r.dictURI,n.l10n))){for(var c=a[1],d=0;d<c.length;d++)"number"==typeof c[d]&&(c[d]==u?c[d]="{"+l[u]+"}":c[d]>u&&(c[d]=c[d]-1));l.splice(u,1),l.length||(s[R]=0)}else l[u]=o;break;case x:if(a){for(var f,d=0;f=a[d];d++)if(!(f.length>2)){var p=f[1].split(":"),m=p.pop(),v=p.pop()||"";if(h.call(r.defines,m)){var g=r.defines[m];f[1]=(v?v+":":"")+g[0],f.push.apply(f,g.slice(1))}else f.push(0)}if(r.optimizeSize){var y=k[e];s[y]||(s.length=y)}}}})}function r(e){function t(e,n){for(var i=n;i<e.length;i++){var r,s=e[i],a=s[I];if(a==E||a==C)return s;if(a==S&&(s[A]||s[R]))return s;if(a==j&&(r=t(s,q)))return r}return null}return t(e,0)}var s=[],a={};return function t(o,l,u,h,d){if(u=n.object.slice(u),u.Template=G,u.genIsolateMarker=X,u.resolveResource=$,u.getDeclFromSource=c,u.makeDeclaration=t,u.process=e,u.includeStack=s,u.includeOptions=u.includeOptions||{},u.templates={},u.defines={},u.dictURI=h?n.path.resolve(h):l||"",u.dictURI){var f=n.path.extname(u.dictURI);f&&".l10n"!=f&&(u.dictURI=u.dictURI.substr(0,u.dictURI.length-f.length)+".l10n")}var v={sourceUrl:h,baseURI:l||"",tokens:null,includes:[],deps:[],templates:{},isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:[]};o||(o=""),Array.isArray(o)||(o=p(String(o||""),{loc:!!u.loc,range:!!u.range})),s.push(!0!==d&&d||{}),v.tokens=e(o,v,u),s.pop(),v.tokens.push([j,0]);var g=H(v.tokens),y=r(v.tokens),b=g[":content"];if(b.node[w]>1&&(b.node[w]=1),b.overrided.forEach(function(e){var t=e.parent.indexOf(e.node);-1!=t&&e.parent.splice.apply(e.parent,[t,1].concat(e.node.slice(q)))}),y||(y=[C,0,0],v.tokens.unshift(y)),g.element||B(y,"element"),i(v.tokens,v,u),0==s.length){if(Y(v.tokens,v.isolate||"",v,u),v.isolate)for(var _,T=0;_=v.resources[T];T++)"style"==_.type&&_.isolate!==F&&(_.isolate=v.isolate+_.isolate);v.resources=v.resources.filter(function(e,t,i){return e.url&&!n.array.search(i,M(e),M,t+1)}).map(function(e){if("style"!=e.type)return{type:e.type,url:e.url};var t,i=e.url,r=e.isolate,s=r===F;if(s&&(r=F[i],i in a))return{type:"style",url:a[i].url};if(!r)return{type:"style",url:i};var o=n.resource.virtual("css","").ready(function(e){e.url=i+"?isolate-prefix="+r,e.baseURI=n.path.dirname(i)+"/",e.map=t,l()}),l=n.resource(i).ready(function(e){var n=m(e&&e.cssText||"",r,!0);t=n.map,o.update(n.css)});return s&&(a[i]=o),{type:"style",url:o.url}})}return v.warns.length||(v.warns=!1),v}}();n.resource("./8.js").ready(function(e){$=e.resolveResource,G=e.Template}),t.exports={VERSION:3,makeDeclaration:K,walk:T,getDeclFromSource:c,setIsolatePrefixGenerator:function(e){X=e}}},"11.js":function(e,t,n,i,r,s,a,o,l){function u(e){for(var t,n=[],i=[],r={},s=0;s<e.length;s++)s%2?(r[t=e[s]]||(r[t]=n.length,n.push(t)),i.push(r[t])):e[s]&&i.push(M(e[s]));return[n,i]}function c(e,t,n){var i,r,s=e.value,a=0;if(s)switch(t){case"class":var o,l=e.valueRange.start_,c=/(\s*)(\S+)/g,h=[],d=[];for(a=[];y=c.exec(s);){var f=y[2],m={value:f,binding:!1,range:{start_:l+=y[1].length,end_:l+=f.length}};n(m),(r=f.match(k))?((o=[r[1]||"",r[2]]).info_=m,m.binding=!0,a.push(o)):h.push(f),d.push(m)}s=h.join(" "),e.map_=d;break;case"style":var v=[];if(a=[],i=s.match(D))for(var y,b=0;y=i[b];b++){var _=(r=y.match(O))[1],T=(s=r[2].trim()).split(w);if(T.length>1){var E=u(T);E.push(_),a.push(E)}else v.push(_+": "+M(s))}(s=v.join("; "))&&(s+=";");break;default:(i=s.split(A)).length>1?a=u(i):s=M(s)}a&&!a.length&&(a=0),e.binding=a,e.value=s,e.type=g[t]||p}function h(e,t,n){function i(e){return(e.prefix?e.prefix+":":"")+e.name}function r(e){return e.attrs.reduce(function(e,t){return e[i(t)]=t.value,e},{})}function s(e){return{line:u[e],column:h[e]}}function a(e){return{start:s(e.start_),end:s(e.end_)}}function o(e){t.loc&&(e.loc=a(e.range),e.valueRange&&(e.valueLoc=a(e.valueRange))),t.range?(e.range=[e.range.start_,e.range.end_],e.valueRange&&(e.valueRange=[e.valueRange.start_,e.valueRange.end_])):(delete e.range,delete e.valueRange)}function l(e){for(var t,n,i=0;t=e[i++];n=t){if(t.type==f){for(var s,a=r(t),u=0;s=t.attrs[u++];){var h=s.name;if("b"==t.prefix&&"value"==s.name){var d=t.name.match(q);d&&(h="class"==d[1]?"class":a.name)}c(s,h,o),o(s)}l(t.children)}t.type==m&&(t.value=M(t.value),t.refs||!n||n.type!=m||n.refs||(n.value+=t.value,n.end_=t.end_,e.splice(--i,1))),t.type==v&&(t.value=M(t.value)),o(t)}}var u,h;t.loc&&function(){var e=1,t=0;u=new Array(n.length),h=new Array(n.length);for(var i=0;i<n.length+1;i++)u[i]=e,h[i]=t,"\n"===n[i]?(e++,t=0):t++}(),l(e)}var d=n.require("./6.js"),f=d.TYPE_ELEMENT,p=d.TYPE_ATTRIBUTE,m=d.TYPE_TEXT,v=d.TYPE_COMMENT,g=d.ATTR_TYPE_BY_NAME,y="Invalid or unsupported syntax",b=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,_=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/gi,T=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/gi,E=/(.|[\r\n])*?-->/g,N=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/gi,x=/([a-z_][a-z0-9_]*)(\||\}\s*)/gi,C=/"((?:(\\")|[^"])*?)"\s*/g,S=/\\"/g,j=/^/g,I=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,R={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},A=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,k=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,D=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,O=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,w=/\{([a-z_][a-z0-9_]*)\}/i,q=/^(?:|append-|set-|remove-)(class|attr)$/,M=function(){function e(e,n){return t[n]||("#"==n.charAt(0)?t[n]=String.fromCharCode("x"==n.charAt(1)||"X"==n.charAt(1)?parseInt(n.substr(2),16):n.substr(1)):r&&(r.innerHTML=e,t[n]=r.firstChild?r.firstChild.nodeValue:e)),t[n]||e}var t={},r=n.NODE_ENV?null:i.document.createElement("div"),s=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;return function(t){return String(t).replace(s,e)}}();t.exports=function(e,t){var n,i,r,s,a,o=[],l=[],u={children:o},c=!1,d=b,g=0,A=0;for(t&&!1===t.trim||(g=A=e.match(/^\s*/)[0].length,e=e.trimRight());g<e.length||d!=b;)if(d.lastIndex=g,s=g,(a=d.exec(e))&&a.index===g){switch(g=d.lastIndex,d){case b:if(i=s+a[1].length,A!=i){var k=A==s?a[1]:e.substring(A,i);(k=k.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&u.children.push({type:m,value:k,range:{start_:A,end_:i}})}A=i,a[3]?u.children.push({type:m,refs:["l10n:"+a[3]],value:"{l10n:"+a[3]+"}",range:{start_:i,end_:g}}):"{"==a[2]?(r=g-1,u.children.push(n={type:m,range:{start_:i,end_:i}}),d=x):a[4]?"/"==a[4]?(n=null,d=N):(u.children.push(n={type:v,range:{start_:i,end_:i}}),a[5]?(r=g-a[5].length,d=x):(r=g,d=E)):a[2]&&(c=!0,l.push(u),u.children.push(n={type:f,attrs:[],children:[],range:{start_:i,end_:i}}),u=n,d=_);break;case N:a[1]!==(u.prefix?u.prefix+":":"")+u.name?u.children.push({type:m,value:"</"+a[0],range:{start_:s-2,end_:s+a[0].length}}):(u.range.end_=s+a[0].length,u=l.pop()),d=b;break;case _:case T:if(":"==a[2]){n.prefix?d=j:n.prefix=a[1];break}if(a[1]&&(n.name=a[1],n.range.end_=s+a[1].length,n.type==p&&u.attrs.push(n)),"{"==a[2]){d=n.type==f?x:j;break}if(a[3]){if(c=!1,u.range.end_=g,"/>"==a[3]||!u.prefix&&I.test(u.name))u=l.pop();else if("b"==u.prefix&&u.name in R){d=R[u.name];break}d=b;break}if("="==a[2]){d=C;break}n={type:p,range:{start_:g,end_:g}},d=T;break;case E:n.value=e.substring(r,g-3),n.range.end_=g,d=b;break;case x:n.refs?n.refs.push(a[1]):n.refs=[a[1]],"|"!=a[2]&&(n.type==m?(g-=a[2].length-1,n.value=e.substring(r,g),n.range.end_=g,d=b):n.type==v?d=E:n.type==p&&"="==e[g]?(g++,d=C):(n={type:p,range:{start_:g,end_:g}},d=T));break;case C:n.value=a[1].replace(S,'"'),n.range.end_=g,n.valueRange={start_:s+1,end_:s+1+a[1].length},n={type:p,range:{start_:g,end_:g}},d=T;break;case R.text:case R.style:u.children.push({type:m,value:a[1],range:{start_:s,end_:s+a[1].length}}),u=l.pop(),d=b;break;default:throw y}d==b&&(A=g)}else{if(d==x&&n&&n.type==v){d=E;continue}c&&(u=l.pop()),n&&u.children.pop(),(n=u.children.pop())&&(n.type!=m||n.refs?u.children.push(n):A-=n.value.length),c=!1,d=b}return A!=g&&u.children.push({type:m,value:e.substring(A,g),range:{start_:A,end_:g}}),h(o,t||{},e),o.templateTokens=!0,o}},"12.js":function(e,t,n,i,r,s,a,o,l){function u(){return n.genUID()+"__"}var c=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,h=8,d=/^(media|supports|document)\b/i,f=8,p=/^(not|has|matches|nth-child|nth-last-child)\(/i,m=15;t.exports=function(e,t,n){function i(t,n){var i=e.indexOf(t,n);S=-1!==i?i+t.length-1:N.length}function r(){var e=N[S];if('"'===e||"'"===e){for(S++;S<x&&N[S]!==e;S++)"\\"===N[S]&&S++;return!0}}function s(){var e=N[S];if("("===e)return i(")",S+1),!0;if("["===e){for(S++;S<x&&"]"!==N[S];S++)r();return!0}}function a(){if("/"===N[S]&&"*"===N[S+1])return i("*/",S+2),!0}function o(){for(;S<x&&")"!=N[S];S++)if(a()||s()||l()||y())continue}function l(){if(":"===N[S]){var t=e.substr(S+1,m).match(p);return t&&(S+=t[0].length+1,o()),!0}}function v(){if("@"===N[S]){var t=e.substr(S+1,f).match(d);return t&&(S+=t[0].length,_=!0),!0}}function g(){if("{"===N[S]){if(_)return S++,void b(!0);for(S++;S<x&&"}"!==N[S];S++)a()||r()||s();return!0}}function y(){if("."===N[S])return e.substr(S+1,h).match(c)&&(T[++S+E.length/2*t.length-1]=S,E.push(e.substring(C,S),t),C=S),!0}function b(e){for(_=!1;S<x;S++)if(!(a()||v()||l()||s()||r()||y())){if(e&&"}"==N[S])return;g()}}var _,T={},E=[],N=e.split(""),x=N.length,C=0,S=0;return t||(t=u()),b(!1),E=E.join("")+e.substring(C),n?{css:E,map:T,prefix:t}:E}},"13.js":function(e,t,n,i,r,s,a,o,l){function u(e){return(e.prefix?e.prefix+":":"")+e.name}function c(e,t){if(t)return(e.sourceUrl||"")+":"+t.start.line+":"+(t.start.column+1)}var h=n.array.add;t.exports={resourceHash:function(e){return[e.type,e.url,e.isolate].join(";")},addUnique:function(e,t){for(var n=0;n<t.length;n++)h(e,t[n])},getTokenName:u,bindingList:function(e){var t=e.refs;return t&&t.length?t[0]:0},getTokenAttrValues:function(e){var t={};if(e.attrs)for(var n,i=0;n=e.attrs[i];i++)t[u(n)]=n.value;return t},getTokenAttrs:function(e){var t={};if(e.attrs)for(var n,i=0;n=e.attrs[i];i++)t[u(n)]=n;return t},parseOptionsValue:function(e){for(var t={},n=(e||"").trim().split(/\s*,\s*/),i=0;i<n.length;i++){var r=n[i].split(/\s*:\s*/);if(2!=r.length)return{};t[r[0]]=r[1]}return t},getLocation:c,addTemplateWarn:function(e,t,n,i){i&&t.loc&&((n=Object(n)).loc="string"==typeof i?i:c(e,i)),e.warns.push(n)},addTokenLocation:function(e,t,n,i){t.loc&&i&&i.loc&&!n.loc&&(n.loc=c(e,i.loc))}}},"14.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){var n=e[g].indexOf(t);if(-1!=n){var i=e[v]&&"number"==typeof e[v];e[g].splice(n,1),i&&n==e[v]-1&&(e[v]=t,i=!1),e[g].length?i&&(e[v]-=n<e[v]-1):e[g]=0}}var c=n.array.add,h=n.require("./15.js").walk,d=n.require("./6.js"),f=d.TYPE_ATTRIBUTE_EVENT,p=d.TYPE_CONTENT,m=d.CONTENT_PRIORITY,v=d.TOKEN_BINDINGS,g=d.TOKEN_REFS;t.exports={refList:function(e){var t=e.refs;return t&&t.length?t:0},addTokenRef:function(e,t){e[g]||(e[g]=[]),c(e[g],t),"element"==t||e[v]||(e[v]=1==e[g].length?t:0)},removeTokenRef:u,normalizeRefs:function(e){var t={};return h(e,function(e,n,i){if(e===p){var r=t[":content"];r?n[m]>=r.node[m]?(r.overrided.push({parent:r.parent,node:r.node}),r.parent=i,r.node=n):r.overrided.push({parent:i,node:n}):t[":content"]={parent:i,node:n,overrided:[]}}else if(e!==f){var s=n[g];if(!s)return;for(var a,o=s.length-1;a=s[o];o--)-1==a.indexOf(":")?(t[a]&&u(t[a].node,a),n[v]==a&&(n[v]=o+1),t[a]={parent:i,node:n}):u(n,a)}}),t}}},"15.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./6.js"),c=u.TYPE_ELEMENT,h=u.TYPE_CONTENT,d=u.TOKEN_TYPE,f=u.ELEMENT_ATTRIBUTES_AND_CHILDREN,p=u.CONTENT_CHILDREN;t.exports={walk:function(e,t){function n(e,i){for(var r,s=i;r=e[s];s++){var a=r[d];switch(t(a,r,e),a){case c:n(r,f);break;case h:n(r,p)}}}n(e,0)}}},"16.js":function(e,t,n,i,r,s,a,o,l){var u=Object.prototype.hasOwnProperty,c=n.require("./15.js").walk,h=n.require("./6.js"),d=h.TYPE_ATTRIBUTE_CLASS,f=h.TOKEN_BINDINGS,p=h.ATTR_VALUE_INDEX,m={};t.exports={styleNamespaceIsolate:m,adoptStyles:function(e,t,n){for(var i,r=0;i=e[r];r++)"style"==i.type&&(i.isolate!==m&&(i.isolate=t+i.isolate),i.includeToken||(i.includeToken=n))},addStyle:function(e,t,i,r,s){var a=t.children[0],o=i?n.resource.resolveURI(i,e.baseURI,'<b:style src="{url}"/>'):n.resource.virtual("css",a?a.value:"",e.sourceUrl).url;return e.resources.push({type:"style",url:o,isolate:r,token:t,includeToken:null,inline:!i&&(a||!0),namespace:s}),o},applyStyleNamespaces:function(e,t){function n(e){return e.indexOf(":")<=0?e:t.prefix+e}c(e,function(e,t){if(e===d){var i=t[f],r=p[e];if(t[r]&&(t[r]=t[r].replace(/\S+/g,n)),i)for(var s,a=0;s=i[a];a++)s[0]=n(s[0])}})},isolateTokens:function(e,t,n){function i(e){if(-1==e.indexOf(":"))return t+e;if(!n)return e;var i=e.split(":");if(!i[0])return i[1];var r=!!u.call(n.styleNSPrefix,i[0])&&n.styleNSPrefix[i[0]];return!!r&&r.prefix+i[1]}c(e,function(e,t){if(e===d){var n=t[f],r=p[e];if(t[r]&&(t[r]=t[r].split(/\s+/).map(function(e){return i(e,t.valueLocMap&&t.valueLocMap[e])}).filter(Boolean).join(" ")),n){for(var s,a,o,l=0;s=n[l];l++)!1===(a=i(s[0],(s[0],s[1]),s.loc))?(o=!0,n[l]=null):s[0]=a;o&&(n=n.filter(Boolean),t[f]=n.length?n:0)}}})}}},"17.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){for(var n,i="number"==typeof e[0]?O:0;n=e[i];i++)if((n[k]==x?"event-"+n[1]:j[n[k]]||n[S])==t)return n}function c(e,t){var n=e[D];if(n)for(var i,r=0;i=n[r];r++)if(i[2]==t)return i}function h(e,t,n,i,r,s,a){var o=u(n,"style");o||(o=[C,0,0],n.push(o));var l=i.binding,h=o[D],d=!1,f=i.name==s,p=o[3];h&&m(h,c(o,r)),l&&l[0].length==l[1].length?(l=l.concat(r,i.name),d=f,h?h.push(l):o[D]=[l]):d=!(f^""===i.value),p&&(p=p.replace(new RegExp(r+"\\s*:\\s*[^;]+(;|$)"),"")),d&&(p=(p?p+" ":"")+a),o[3]=p}function d(e,t,n,i){"show"!=i.name&&"hide"!=i.name||h(e,t,n,i,"display","show","display: none;"),"visible"!=i.name&&"hidden"!=i.name||h(e,t,n,i,"visibility","visible","visibility: hidden;")}function f(e,t,n,i){if(n[k]===E&&!/[\/\(\)]/.test(i)){var r=[N,[["$role"],[0,i?"/"+i:""]],0,"role-marker"];n.push(r)}}var p=n.array.add,m=n.array.remove,v=n.require("./14.js").addTokenRef,g=n.require("./6.js"),y=n.require("./13.js"),b=y.getTokenName,_=y.getTokenAttrValues,T=y.getTokenAttrs,E=g.TYPE_ELEMENT,N=g.TYPE_ATTRIBUTE,x=g.TYPE_ATTRIBUTE_EVENT,C=g.TYPE_ATTRIBUTE_STYLE,S=g.ATTR_NAME,j=g.ATTR_NAME_BY_TYPE,I=g.ATTR_TYPE_BY_NAME,R=g.ATTR_VALUE_INDEX,A=g.ATTR_VALUE,k=g.TOKEN_TYPE,D=g.TOKEN_BINDINGS,O=g.ELEMENT_ATTRIBUTES_AND_CHILDREN,w=/^[a-z_][a-z0-9_\-:]*$/i,q=/^event-(.+)$/;t.exports={getAttrByName:u,applyShowHideAttribute:d,addRoleAttribute:f,applyAttrs:function(e,t,n,i){for(var r,s,a,o,l,u=0;l=i[u];u++)if("b"!=l.prefix)(o=l.name.match(q))?a=o[1]==l.value?[x,o[1]]:[x,o[1],l.value]:(a=[l.type,l.binding,0],l.type==N&&a.push(b(l)),!l.value||t.optimizeSize&&l.binding&&l.type==N||a.push(l.value)),n.push(a);else switch(l.name){case"ref":for(var c=(l.value||"").trim().split(/\s+/),h=0;h<c.length;h++)v(n,c[h]);break;case"show":case"hide":r=l;break;case"visible":case"hidden":s=l;break;case"role":f(e,t,n,l.value||"",l)}return r&&d(e,t,n,r),s&&d(e,t,n,s),n},modifyAttr:function(e,t,i,r,s,a,o){var l=_(s),h=T(s);if(a&&(l.name=a),l.name&&w.test(l.name)&&r&&r[k]==E){var d=r,f=l.name.match(q),v="class"==l.name||"style"==l.name,g=f?x:I[l.name]||N,y=R[g]||A,b=d&&u(d,l.name);switch(b&&"set"==o&&(m(d,b),b=null),b||"set"!=o&&"append"!=o||(o="set",f?b=[g,f[1]]:(b=[g,0,0,g==N?l.name:""],g==N&&b.push("")),d||(d=[],r.push(d)),d.push(b)),o){case"set":if(b[k]==x)return void(l.value==f[1]?b.length=2:b[y]=l.value);if(H=h.value||{},b[D]=H.binding||0,t.optimizeSize&&b[D]&&!v?b.length=y:b[y]=H.value||"",v&&!b[D]&&!b[y])return void m(d,b);break;case"append":var C=(H=h.value||{}).value||"",S=H.binding;if(!f)if(S){var j=b[D];if(j)switch(l.name){case"style":for(var O,M=0;O=S[M];M++)m(j,c(b,O[2])),j.push(O);break;case"class":j.push.apply(j,S);break;default:for(S[0].forEach(function(e){p(this,e)},j[0]),M=0;M<S[1].length;M++){var P=S[1][M];"number"==typeof P&&(P=j[0].indexOf(S[0][P])),j[1].push(P)}}else b[D]=S,v||b[D][1].unshift(b[y])}else!v&&b[D]&&b[D][1].push(l.value);if(C)if(f||"class"==l.name){var L=(b[y]||"").trim(),U=C.trim();for(L=L?L.split(/\s+/):[],U=U?U.split(/\s+/):[],M=0;M<U.length;M++){var B=U[M];n.array.remove(L,B),L.push(B)}b[y]=L.join(" ")}else b[y]=(b[y]||"")+(b[y]&&v?" ":"")+C;!v||b[D]||b[y]||m(d,b);break;case"remove-class":if(b){var H=h.value||{},V=(b[y]||"").split(" "),F=(H.value||"").split(" "),Y=b[D];if(H.binding&&Y){for(var z,M=0;z=H.binding[M];M++)for(var G,$=Y.length-1;G=Y[$];$--){var X=G[0],K=G[3]||G[1];X===z[0]&&K===z[1]&&Y.splice($,1)}Y.length||(b[D]=0)}for(M=0;M<F.length;M++)m(V,F[M]);b[y]=V.join(" "),Y.length||V.length||m(d,b)}break;case"remove":b&&m(d,b)}}}}},"18.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./6.js").TYPE_CONTENT;t.exports=function(e,t,n,i){var r=[u,2];n.children&&r.push.apply(r,t.process(n.children,e,t)),i.push(r)}},"19.js":function(e,t,n,i,r,s,a,o,l){var u=Object.prototype.hasOwnProperty,c=n.require("./6.js"),h=n.require("./13.js").getTokenAttrValues,d=c.CLASS_BINDING_BOOL,f=c.CLASS_BINDING_INVERT,p=c.CLASS_BINDING_ENUM;t.exports=function(e,t,n){var i=h(n);if("name"in i&&"type"in i&&!u.call(t.defines,i.name)){var r,s,a=i.from||i.name,o=i.name,l=!1;switch(i.type){case"bool":l=[a,d,o,"true"==i.default?1:0];break;case"invert":l=[a,f,o,i.default&&"true"!=i.default?0:1];break;case"enum":if("values"in i==0)break;if(!(s=(i.values||"").trim()))break;r=(s=s.split(/\s+/)).indexOf(i.default),l=[a,p,o,r+1,s]}l&&(t.defines[o]=l)}}},"1a.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){m(e,function(e,n){n.includeToken||(n.includeToken=t)})}function c(e,t){m(e,function(e,n){if(e===B&&"role-marker"==n[U]){var i=n[L][1],r=i[1];i[1]="/"+t+r}})}function h(e){if(Array.isArray(e))return e.map(h);if(e&&e.constructor===Object){var t={};for(var n in e)t[n]=h(e[n]);return t}return e}function d(e,t){return{type:H,prefix:"b",name:e.instruction,attrs:n.object.iterate(e.attrs||{},function(e,t){return{type:B,name:e,value:t}}).concat(n.object.complete({name:e.valueTo},t))}}var f=n.array.remove,p=n.array.add,m=n.require("./15.js").walk,v=n.require("./13.js"),g=v.addUnique,y=v.getTokenAttrValues,b=v.getTokenAttrs,_=v.parseOptionsValue,T=n.require("./14.js"),E=T.normalizeRefs,N=T.addTokenRef,x=T.removeTokenRef,C=n.require("./16.js"),S=C.styleNamespaceIsolate,j=C.adoptStyles,I=C.addStyle,R=C.isolateTokens,A=C.applyStyleNamespaces,k=n.require("./17.js"),D=k.getAttrByName,O=k.addRoleAttribute,w=k.applyShowHideAttribute,q=k.modifyAttr,M=n.require("./6.js"),P=M.TOKEN_TYPE,L=M.TOKEN_BINDINGS,U=M.ATTR_NAME,B=M.TYPE_ATTRIBUTE,H=M.TYPE_ELEMENT,V=M.ELEMENT_ATTRIBUTES_AND_CHILDREN,F=M.CONTENT_CHILDREN,Y=["include","content"],z={class:{instruction:"append-class",valueTo:"value"},id:{instruction:"set-attr",valueTo:"value",attrs:{name:"id"}},ref:{instruction:"add-ref",valueTo:"name"},show:{instruction:"show",valueTo:"expr"},hide:{instruction:"hide",valueTo:"expr"},visible:{instruction:"visible",valueTo:"expr"},hidden:{instruction:"hidden",valueTo:"expr"}};t.exports=function(e,t,i,r){var s=y(i),a=b(i),o=t.includeStack,l=s.src;if(l){var m;if(/^#[^\d]/.test(l)?(m=e.templates[l.substr(1)])&&(m=t.makeDeclaration(h(m.tokens),m.baseURI,m.options,m.sourceUrl)):m=t.resolveResource(l,e.baseURI),m&&-1===o.indexOf(m)){var v=a.isolate?a.isolate.value||t.genIsolateMarker():"",T=s.options?_(s.options):null,C=t.getDeclFromSource(m,"",!0,n.object.merge(t,{includeOptions:T}));if(u(C.tokens,i),e.includes.push({token:i,resource:m,nested:C.includes}),m.bindingBridge&&p(e.deps,m),C.deps&&g(e.deps,C.deps),C.warns&&e.warns.push.apply(e.warns,C.warns),C.resources){var k=C.resources;"no-style"in s?k=k.filter(function(e){return"style"!=e.type}):j(k,v,i),e.resources.unshift.apply(e.resources,k)}var M={prefix:t.genIsolateMarker()};A(C.tokens,M);for(var L in C.styleNSPrefix)e.styleNSPrefix[M.prefix+L]=n.object.merge(C.styleNSPrefix[L],{});v&&R(C.tokens,v);var U=!1,B=[],G=E(C.tokens);for(var $ in a)if(z.hasOwnProperty($))B.push(d(z[$],a[$]));else if("role"===$){var X=a.role.value;if(X&&!/[\/\(\)]/.test(X)){c(C.tokens,X,a.role)}}B=B.concat(i.children);for(var K,W=0;K=B[W];W++)if(K.type==H&&"b"==K.prefix&&-1===Y.indexOf(K.name)){var Z=y(K),J="ref"in Z?Z.ref:"element",Q=":"===J.charAt(0),ee=(de=J&&G[J])&&de.node;switch(K.name){case"style":var te=!0;if((Z=y(K)).options){var ne=_(Z.options);for(var ie in ne)te=te&&ne[ie]==T[ie]}if(te){var re=Z[Z.namespace?"namespace":"ns"],se=re?S:v,ae=I(e,K,Z.src,se,re);re&&(ae in S==0&&(S[ae]=t.genIsolateMarker()),e.styleNSPrefix[M.prefix+re]={name:re,prefix:S[ae]})}break;case"replace":case"remove":case"before":case"after":var oe="replace"==K.name||"remove"==K.name;if((de=(J="ref"in(Z=y(K))||!oe?Z.ref:"element")&&G[J])&&-1!=(me=(pe=de.parent).indexOf(de.node))){var le=[me+("after"==K.name),oe];"remove"!=K.name&&(le=le.concat(t.process(K.children,e,t))),pe.splice.apply(pe,le)}break;case"prepend":case"append":if(ee&&ee[P]==H){var ue=t.process(K.children,e,t);"prepend"==K.name?ee.splice.apply(ee,[V,0].concat(ue)):ee.push.apply(ee,ue)}break;case"show":case"hide":case"visible":case"hidden":if(ee&&ee[P]==H){if(!b(K).expr)break;w(e,t,ee,n.object.complete({name:K.name},b(K).expr))}break;case"attr":case"set-attr":q(e,t,i,ee,K,!1,"set");break;case"append-attr":q(e,t,i,ee,K,!1,"append");break;case"remove-attr":q(e,t,i,ee,K,!1,"remove");break;case"class":case"append-class":q(e,t,i,ee,K,"class","append");break;case"set-class":q(e,t,i,ee,K,"class","set");break;case"remove-class":var ce=b(K).value;ce&&(ce.value=ce.value.split(/\s+/).map(function(e){return e.indexOf(":")>0?M.prefix+e:e}).join(" "),ce.binding&&ce.binding.forEach(function(e){e[0].indexOf(":")>0&&(e[0]=M.prefix+e[0])}),ce.map_&&ce.map_.forEach(function(e){e.value.indexOf(":")>0&&(e.value=M.prefix+e.value)})),q(e,t,i,ee,K,"class","remove-class");break;case"add-ref":he=(Z.name||"").trim();if(!ee)break;if(Q)break;if(!/^[a-z_][a-z0-9_]*$/i.test(he))break;N(ee,he);break;case"remove-ref":var he=(Z.name||"").trim(),Q=":"===(J="ref"in Z?Z.ref:he||"element").charAt(0);if(!(ee=(de=J&&G[J])&&de.node))break;if(Q)break;if(!/^[a-z_][a-z0-9_]*$/i.test(he))break;x(ee,he||J);break;case"role":case"set-role":if(!(ie=Z.name)&&"value"in Z&&(ie=Z.value),!ee)break;f(ee,D(ee,"role-marker")),O(e,t,ee,ie||"",K);break;case"remove-role":if(!ee)break;f(ee,D(ee,"role-marker"))}}else{var de=G[":content"],fe=t.process([K],e,t);if(de){var pe=de.parent,me=pe.indexOf(de.node);U||(U=!0,de.node.splice(F)),de.node.push.apply(de.node,fe)}else C.tokens.push.apply(C.tokens,fe)}G.element&&x(G.element.node,"element"),r.push.apply(r,C.tokens)}}}},"1b.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./13.js").getTokenAttrValues;t.exports=function(e,t,n){e.isolate||(e.isolate=u(n).prefix||t.isolate||t.genIsolateMarker())}},"1c.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./13.js").getTokenAttrValues;t.exports=function(e,t,i){var r=u(i);r.src&&(t.dictURI=n.resource.resolveURI(r.src,e.baseURI,"<b:"+i.name+' src="{url}"/>'))}},"1d.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./13.js"),c=n.require("./16.js"),h=c.styleNamespaceIsolate,d=c.addStyle,f=u.parseOptionsValue,p=u.getTokenAttrValues;t.exports=function(e,t,n){var i=!0,r=p(n);if(r.options){var s=f(r.options);for(var a in s)i=i&&s[a]==t.includeOptions[a]}if(i){var o=r[r.namespace?"namespace":"ns"],l=o?h:"",u=d(e,n,r.src,l,o);if(o){if(u in h==0&&(h[u]=t.genIsolateMarker()),o in e.styleNSPrefix)return;e.styleNSPrefix[o]={name:o,prefix:h[u]}}}}},"1e.js":function(e,t,n,i,r,s,a,o,l){var u=n.array.add,c=n.require("./13.js"),h=c.getTokenName,d=c.getTokenAttrs,f=c.bindingList,p=n.require("./14.js").refList,m=n.require("./17.js").applyAttrs,v=n.require("./6.js").TYPE_ELEMENT;t.exports=function(e,t,i,r){var s=d(i),a=[],o=[v,0,0,"svg:use"],l=[v,f(i),p(i),"svg:svg",o];for(var c in s){var g=s[c];switch(h(g)){case"src":if(!g.value)continue;var y=n.resource.resolveURI(g.value,e.baseURI,"<b:"+i.name+' src="{url}"/>');u(e.deps,n.resource.buildCloak(y)),e.resources.push({type:"svg",url:y});break;case"use":m(e,t,o,[n.object.merge(g,{prefix:"xlink",name:"href"})]);break;default:a.push(g)}}r.push(m(e,t,l,a))}},"1f.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./13.js").getTokenAttrValues;t.exports=function(e,t,i,r){var s=u(i),a=(s.ref||"").trim(),o=i.children[0]||{type:3,value:""};o=n.object.merge(o,{refs:a?a.split(/\s+/):[],value:"notrim"in s?o.value:(o.value||"").replace(/^ *(\r\n?|\n)( *$)?|(\r\n?|\n) *$/g,"")}),r.push.apply(r,t.process([o],e,t))}},"a.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=e>>12,n=c[4095&e];return n&&n.instances[t]}var c={};t.exports={add:function(e,t,n){c[e]={template:t,instances:n}},remove:function(e){delete c[e]},resolveInfoById:function(e){var t=e>>12,n=c[4095&e],i=n&&n.instances[t];if(i)return{id:e,template:n.template,context:i.context,tmpl:i.tmpl}},resolveTemplateById:function(e){var t=c[4095&e];return t&&t.template},resolveObjectById:function(e){var t=u(e);return t&&t.context},resolveTmplById:function(e){var t=u(e);return t&&t.tmpl},resolveActionById:function(e){var t=u(e);return t&&{context:t.context,action:t.action}}}},"b.js":function(e,t,n,i,r,s,a,o,l){function u(){var e=n.array(arguments).join("."),t=_[e];return t||(t=new x("",e),_[e]=t),t}function c(e){for(var t={},n=[],i=0;i<e.length;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function h(e,t){var n=[];n.source=c(t).join("/");for(var i={base:!0},r=0;r<t.length;r++){var s=t[r]||"base";s==e||i[s]||(i[s]=!0,n.push(s),v(s),t.splice.apply(t,[r+1,0].concat(b[s].fallback)))}return n.unshift(e),"base"!=e&&n.push("base"),n.value=n.join("/"),n}function d(e,t){for(var n,i=b[e].sourcesList,r=0;n=i[r];r++)if(n.hasOwnProperty(t))return n[t];return""}function f(e){return-1!=b[E].fallback.indexOf(e)}function p(e){u(e).set()}function m(){for(var e in _)p(e)}function v(e){if(e||(e="base"),b[e])return b[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw"Bad name for theme - "+e;var t={},i=[t],r=new N;b[e]={theme:r,sources:t,sourcesList:i,fallback:[]};var s=function(n,i){return n in t==0&&(t[n]=i,f(e)&&p(n)),u(n)};return n.object.extend(r,{name:e,fallback:function(t){if(r!==y&&arguments.length>0){var n="string"==typeof t?t.split("/"):[],i={};if(n=h(e,n),b[e].fallback.source!=n.source){b[e].fallback.source=n.source;for(var s in b){var a=b[s].fallback;if((n=h(s,(a.source||"").split("/"))).value!=a.value){i[s]=!0,b[s].fallback=n;var o=b[s].sourcesList;o.length=n.length;for(var l=0;l<o.length;l++)o[l]=b[n[l]].sources}}}for(var s in i)if(f(s)){m();break}}var u=b[e].fallback.slice(1);return u.source=b[e].fallback.source,u},define:function(e,t){if("function"==typeof e&&(e=e()),"string"==typeof e){if("object"==typeof t){var n=e,i=t,a={};for(var o in i)i.hasOwnProperty(o)&&(a[o]=s(n+"."+o,i[o]));return a}return 1==arguments.length?u(e):s(e,t)}if("object"==typeof e){i=e;for(var l in i)i.hasOwnProperty(l)&&s(l,i[l]);return r}},apply:function(){if(e!=E){E=e,m(),n.Token.prototype.set.call(v,E);for(var t,i=0;t=T[i];i++)t.fn.call(t.context,e)}return r},getSource:function(n,i){return i?d(e,n):t[n]},drop:function(n){t.hasOwnProperty(n)&&(delete t[n],f(e)&&p(n))}}),b[e].fallback=h(e,[]),i.push(b.base.sources),r}function g(e){return v(e).apply()}var y,b={},_={},T=[],E="base",N=n.Class(null,{className:"basis.template.theme.Theme",get:u}),x=n.Class(n.Token,{className:"basis.template.theme.SourceWrapper",path:"",url:"",baseURI:"",init:function(e,t){this.path=t,n.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var e=d(E,this.path);this.value!=e&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,x.prototype.apply,this),this.value=e,this.url=e&&e.url||"",this.baseURI=("object"==typeof e||"function"==typeof e)&&"baseURI"in e?e.baseURI:n.path.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,x.prototype.apply,this),this.apply())},destroy:function(){this.url=null,this.baseURI=null,this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this),n.Token.prototype.destroy.call(this)}});n.object.extend(v,new n.Token(E)),v.set=g,n.cleaner.add({destroy:function(){for(var e in _)_[e].destroy();b=null,_=null}}),y=v(),t.exports={SourceWrapper:x,Theme:N,theme:v,getThemeList:function(){return n.object.keys(b)},currentTheme:function(){return b[E].theme},setTheme:g,onThemeChange:function(e,t,n){T.push({fn:e,context:t}),n&&e.call(t,E)},define:y.define,get:u,getPathList:function(){return n.object.keys(_)}}},"c.js":function(e,t,n,i,r,s,a,o,l){function u(e){return function(t){if("click"!=t.type||3!=t.which){for(var n,i=K[t.type]||"mouseenter"!=t.type&&"mouseleave"!=t.type,r=t.path.slice(0,t.path.length-1),s=r.shift();s&&(n=s.getAttribute&&s.getAttribute(e),i&&"string"!=typeof n);)s=r.shift();if("string"==typeof n){var a,o,l=s,u=l;if(K[t.type]){var c=t.relatedTarget;c&&(l===c||p(l,c))&&(l=null)}for(;l&&("number"!=typeof(a=l[T])||!(o=y(a)));)l=r.shift();for(var h,d=n.trim().split(/\s+/),f=o&&o.action,m=0;h=d[m++];)switch(h){case"prevent-default":t.preventDefault();break;case"stop-propagation":t.stopPropagation();break;case"log-event":break;default:f&&(t.actionTarget=u,f.call(o.context,h,t))}}t.type in X&&X[t.type](t,s)}}}function c(e,t){h(t),K[e]=!0,X[t]=function(t){(t=new g.Event(t)).type=e,$[e](t)},X[e]=function(t,n){n&&n.parentNode&&((t=new g.Event(t)).type=e,t.sender=n.parentNode,$[e](t))}}function h(e){if(!v.call($,e)&&($[e]=u("event-"+e),!G)){if(!z){if("mouseenter"==e)return c(e,"mouseover");if("mouseleave"==e)return c(e,"mouseout")}for(var t,n=0,i=g.browserEvents(e);t=i[n];n++)g.addGlobalHandler(t,$[e])}}function d(e,t,n){h(t),W&&-1!=Z.indexOf(t)&&e.setAttribute("style","cursor:pointer;"+(e.getAttribute("style")||"")),G&&e.setAttribute("on"+t,G+'("'+t+'",event)'),e.setAttribute("event-"+t,n)}function f(e,t,n){if(J&&"class"==t&&(t="className"),Q&&"style"==t)return e.style.cssText=n;var i=_.getNamespace(t,e);i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}var p,m=i.Node,v=Object.prototype.hasOwnProperty,g=n.require("./d.js"),y=n.require("./a.js").resolveActionById,b=n.require("./6.js"),_=n.require("./7.js"),T=b.MARKER,E=b.CLONE_NORMALIZATION_TEXT_BUG,N=b.TYPE_ELEMENT,x=b.TYPE_ATTRIBUTE,C=b.TYPE_ATTRIBUTE_CLASS,S=b.TYPE_ATTRIBUTE_STYLE,j=b.TYPE_ATTRIBUTE_EVENT,I=b.TYPE_TEXT,R=b.TYPE_COMMENT,A=b.TYPE_CONTENT,k=b.TOKEN_TYPE,D=b.TOKEN_BINDINGS,O=b.TOKEN_REFS,w=b.ATTR_NAME,q=b.ATTR_VALUE,M=b.ATTR_VALUE_INDEX,P=b.ELEMENT_NAME,L=b.ELEMENT_ATTRIBUTES_AND_CHILDREN,U=b.CONTENT_CHILDREN,B=b.TEXT_VALUE,H=b.COMMENT_VALUE,V=b.CLASS_BINDING_ENUM,F=b.CLASS_BINDING_BOOL,Y=b.CLASS_BINDING_INVERT,z="onmouseenter"in document.documentElement,G=!1,$={},X={},K={},W="ontouchstart"in document.documentElement,Z=["mouseover","mouseup","mousedown","mousemove","click","dblclick"];p=m&&!m.prototype.contains?function(e,t){return 16&e.compareDocumentPosition(t)}:function(e,t){return e.contains(t)},document.addEventListener||(G=n.publicCallback(function(e,t){g.fireEvent(document,e),t.returnValue=!0;var n=$[e];n&&n(new g.Event(t))},!0));var J=function(){var e=document.createElement("div");return e.setAttribute("class","a"),!e.className}(),Q=function(){var e=document.createElement("div");return e.setAttribute("style","position:absolute"),"absolute"!=e.style.position}(),ee=function(e,t,n){for(var i,r=t;i=e[r];r++){var s=i[k];switch(s){case N:var a=i[P],o=_.getNamespace(a),l=o?document.createElementNS(o,a):document.createElement(a);ee(i,L,l),n.appendChild(l);break;case A:ee(i,U,n);break;case x:i[D]||f(n,i[w],i[q]||"");break;case C:if(m=(m=i[M[s]])?[m]:[],i[D])for(var u,c=0;u=i[D][c];c++){var h=u[4];if(h){var p=u[0];if(Array.isArray(p))m.push(p[h-1]);else switch(u[2]){case F:case Y:m.push(p+u[3]);break;case V:m.push(p+u[5][h-1])}}}m.length&&f(n,"class",m.join(" "));break;case S:var m=i[M[s]];m&&f(n,"style",(n.getAttribute("style")||"")+m);break;case j:d(n,i[1],i[2]||i[1]);break;case R:n.appendChild(document.createComment(i[H]||(i[O]?"{"+i[O].join("|")+"}":"")));break;case I:E&&r&&e[r-1][k]==I&&n.appendChild(document.createComment("")),n.appendChild(document.createTextNode(i[B]||(i[O]?"{"+i[O].join("|")+"}":"")||(i[D]?"{"+i[D]+"}":"")))}}return n};t.exports=function(e){var t=ee(e,0,document.createDocumentFragment());return 1===t.childNodes.length&&(t=t.removeChild(t.firstChild)),t}},"d.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=[];do{t.push(e)}while(e=e.parentNode);return t.push(i),t}function c(e){return e instanceof W?e.event_:e||i.event}function h(e){return"string"==typeof e?M.getElementById(e):e}function d(e){var t=e.target||e.srcElement||M;return 3==t.nodeType?t.parentNode:t}function f(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function p(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function m(e,t){(t=h(t))?A(t,e,m):(p(e),f(e))}function v(e){return e.keyCode||e.which||0}function g(e){return e.charCode||e.keyCode||0}function y(e,t){return"number"==typeof e.which?e.which==t.VALUE:!!(e.button&t.BIT)}function b(e){return"pageX"in e?e.pageX:"clientX"in e?e.clientX+("CSS1Compat"==M.compatMode?M.documentElement.scrollLeft:M.body.scrollLeft):0}function _(e){return"pageY"in e?e.pageY:"clientY"in e?e.clientY+("CSS1Compat"==M.compatMode?M.documentElement.scrollTop:M.body.scrollTop):0}function T(e){if(e.changedTouches)return e.changedTouches[0].pageX}function E(e){if(e.changedTouches)return e.changedTouches[0].pageY}function N(e){var t=0;return"deltaY"in e?t=-e.deltaY:"wheelDelta"in e?t=e.wheelDelta:"DOMMouseScroll"==e.type&&(t=-e.detail),t&&t/Math.abs(t)}function x(e){ee&&e!==w&&(w=e,n.codeFrame.start())}function C(e){ee&&e!==q&&(q=e,n.codeFrame.finish())}function S(e){var t=U(Z[e.type]),n=J[e.type],i=new W(e);if(x(e),n)n.handler.call(n.thisObject,i);else if(t)for(var r=t.length;r-- >0;){var s=t[r];s.handler.call(s.thisObject,i)}C(e)}function j(e){var t=J[e];t&&(R(e,t.handler,t.thisObject),delete J[e])}function I(e,t,n){var i=Z[e];if(i){for(var r,s=0;r=i[s];s++)if(r.handler===t&&r.thisObject===n)return}else Q?A(M,e,L):M.addEventListener(e,S,!0),i=Z[e]=[];i.push({handler:t,thisObject:n})}function R(e,t,n){var i=Z[e];if(i)for(var r,s=0;r=i[s];s++)if(r.handler===t&&r.thisObject===n)return i.splice(s,1),void(i.length||(delete Z[e],Q?k(M,e,L):M.removeEventListener(e,S,!0)))}function A(e,t,n,r){if(!(e=h(e)))throw"basis.event.addHandler: can't attach event listener to undefined";if("function"!=typeof n)throw"basis.event.addHandler: handler is not a function";var s=e===i?B:e[H];s||(s=e[H]={});var a=s[t],o={handler:n,thisObject:r};if(a){for(var l,u=0;l=a[u];u++)if(l.handler===n&&l.thisObject===r)return;a.push(o)}else(a=s[t]=[o]).fireEvent=function(e){if(e=c(e),Q&&e&&Z[t]&&void 0===e.returnValue){if(S(e),!0===e.cancelBubble)return;void 0===e.returnValue&&(e.returnValue=!0)}x(e);for(var n,i=0,r=new W(e);n=a[i++];)n.handler.call(n.thisObject,r);C(e)},V?e.addEventListener(t,a.fireEvent,!1):e.attachEvent("on"+t,a.fireEvent)}function k(e,t,n,r){var s=(e=h(e))===i?B:e[H];if(s){var a=s[t];if(a)for(var o,l=0;o=a[l];l++)if(o.handler===n&&o.thisObject===r)return a.splice(l,1),void(a.length||D(e,t))}}function D(e,t){var n=(e=h(e))===i?B:e[H];if(n)if("string"!=typeof t)for(t in n)D(e,t);else{var r=n[t];r&&(e.removeEventListener?e.removeEventListener(t,r.fireEvent,!1):e.detachEvent("on"+t,r.fireEvent),delete n[t])}}function O(e){return function(t,n){return e(c(t),n)}}var w,q,M=i.document,P=n.object.extend,L=n.fn.$null,U=n.array.from,B={},H="basisEvents_"+n.genUID(),V=!!M.addEventListener,F={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},Y={VALUE:1,BIT:1},z={VALUE:2,BIT:4},G={VALUE:3,BIT:2},$={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},X=["returnValue","keyLocation","layerX","layerY","webkitMovementX","webkitMovementY","keyIdentifier"],K={keydown:0,keypress:0,keyup:0,click:1,dblclick:1,mousedown:1,mouseup:1,mouseover:1,mousemove:1,mouseout:1,mouseenter:1,mouseleave:1,wheel:1,mousewheel:1,DOMMouseScroll:1,touchstart:2,touchmove:2,touchend:2,touchcancel:2,pointerover:3,pointerenter:3,pointerdown:3,pointermove:3,pointerup:3,pointercancel:3,pointerout:3,pointerleave:3},W=n.Class(null,{className:"basis.dom.event.Event",KEY:F,init:function(e){e=c(e);for(var t in e)-1==X.indexOf(t)&&("progress"!=e.type||"totalSize"!=t&&"position"!=t)&&"function"!=typeof e[t]&&t in this==0&&(this[t]=e[t]);var i=d(e);switch(P(this,{event_:e,sender:i,target:i,path:e.path?n.array(e.path):u(i)}),K[e.type]){case 0:P(this,{key:v(e),charCode:g(e)});break;case 1:P(this,{mouseLeft:y(e,Y),mouseMiddle:y(e,z),mouseRight:y(e,G),mouseX:b(e),mouseY:_(e),wheelDelta:N(e),pointerX:b(e),pointerY:_(e)});break;case 2:P(this,{touchX:T(e),touchY:E(e),mouseX:T(e),mouseY:E(e),pointerX:T(e),pointerY:E(e)});break;case 3:P(this,{pointerX:b(e),pointerY:_(e),mouseX:b(e),mouseY:_(e)})}},stopBubble:function(){f(this.event_)},stopPropagation:function(){f(this.event_)},preventDefault:function(){p(this.event_)},die:function(){this.stopBubble(),this.preventDefault()}}),Z={},J={},Q=!V,ee=!0,te={};t.exports={W3CSUPPORT:V,browserEvents:function(e){return $[e]||[e]},getEventInfo:function(e,t){t||(t="div");var n=t+"-"+e;if(te[n])return te[n];var i=!1,r=!1;if(!V){var s="on"+e,a=M.createElement("div"),o=a.appendChild(M.createElement(t));a[s]=function(){r=!0};try{o.fireEvent(s),i=!0}catch(e){}}return te[n]={supported:i,bubble:r}},KEY:F,MOUSE_LEFT:Y,MOUSE_RIGHT:G,MOUSE_MIDDLE:z,Event:W,sender:O(d),cancelBubble:O(f),cancelDefault:O(p),kill:O(m),key:O(v),charCode:O(g),mouseButton:O(y),mouseX:O(b),mouseY:O(_),wheelDelta:O(N),touchX:O(T),touchY:O(E),addGlobalHandler:I,removeGlobalHandler:R,captureEvent:function(e,t,i){J[e]&&j(e),t||(t=n.fn.$undef),I(e,t,i),J[e]={handler:t,thisObject:i}},releaseEvent:j,addHandler:A,addHandlers:function(e,t,n){e=h(e);for(var i in t)A(e,i,t[i],n)},removeHandler:k,clearHandlers:D,fireEvent:function(e,t,n){var r=(e=h(e))===i?B:e[H];if(r&&r[t])try{ee=!1,r[t].fireEvent(n)}finally{ee=!0}},onUnload:function(e,t){n.teardown(e,t)},wrap:c}},"e.js":function(e,t,n,i,r,s,a,o,l){function u(){}function c(){}function h(){}function d(e){e.setDelegate=n.fn.$undef,e.destroy=u}function f(e){var t=e.constructor.prototype;e.setDelegate=t.setDelegate,e.destroy=t.destroy}function p(e){return e.sortingValue}function m(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,+(e>t)||-(e<t)}function v(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,-(e>t)||+(e<t)}function g(e){return e.childNodes.sort(e.sortingDesc?v:m)}function y(e,t,n,i){if(!e.length)return 0;i=!!i;var r,s,a,o=0,l=e.length-1,u=typeof t;do{if(a=o+l>>1,r=n(e[a]),s=typeof r,i){if(u>s||t>r){l=a-1;continue}if(u<s||t<r){o=a+1;continue}}else{if(u<s||t<r){l=a-1;continue}if(u>s||t>r){o=a+1;continue}}return t==r?a:0}while(o<=l);return a+((s<u||r<t)^i)}function b(e,t,n,i,r){if(t!==n){var s,a=e,o=[];for(i&&(e.contextSelection=n,e.selected&&!e.selectedRA_&&o.push(e));a;){if((s=!a.selection||r&&a===e?a.firstChild:null)&&s.contextSelection!==t)throw"Try change wrong context selection";for(;!s;){if(a===e){if(o.length&&(t&&t.remove(o),n)){n.add(o);for(var l=0;l<o.length;l++){var u=o[l];u.selected&&!n.has(u)&&(u.selected=!1,u.emit_unselect())}}return}(s=a.nextSibling)||(a=a.parentNode)}(a=s).selected&&!a.selectedRA_&&o.push(a),a.contextSelection=n}}}function _(e,t){if(e.contextDisabled!=t){if(e.contextDisabled=t,e.disabled)return;t?e.emit_disable():e.emit_enable()}}function T(e){return e.isSubclassOf(oe)?e:oe}function E(e){if(!e)return null;if(e.isSatelliteConfig)return e;if(e instanceof oe)return e;e.constructor!==Object&&(e={instance:e});var t=!1,i="update",r={isSatelliteConfig:!0};for(var s in e){var a=e[s];switch(s){case"instance":a instanceof oe?r.instance=a:I.isClass(a)?r.instanceClass=T(a):("string"==typeof a&&(a=n.getter(a)),r.getInstance=a);break;case"instanceOf":case"satelliteClass":if("instanceOf"==s&&"satelliteClass"in e)break;if("instance"in e)break;I.isClass(a)&&(r.instanceClass=T(a));break;case"existsIf":case"delegate":case"dataSource":a&&("string"==typeof a&&(a=O(a)),"function"!=typeof a?a=n.fn.$const(a):t=!0),r[s]=a;break;case"config":"string"==typeof a&&(a=O(a)),r.config=a;break;case"events":i=e.events}}if(r.instance||r.getInstance||r.instanceClass||(r.instanceClass=T(oe)),t&&(Array.isArray(i)&&(i=i.join(" ")),"string"==typeof i)){var o={};i=i.split(/\s+/);for(var l,u=0;l=i[u];u++)o[l]=se,r.handler=o}return r}function N(e,t){for(var n in t)t[n]&&"object"==typeof t[n]&&e.setSatellite(n,t[n])}function x(e,t){var n=t.length-1;e.childNodes=t,e.firstChild=t[0]||null,e.lastChild=t[n]||null;for(var i,r=n;i=t[r];r--)i.nextSibling=t[r+1]||null,i.previousSibling=t[r-1]||null,e.insertBefore(i,i.nextSibling)}function C(e,t){for(var n,i=0;n=t[i];i++)n.groupNode.nodes.push(n);for(var r,s=[e.grouping.nullGroup].concat(e.grouping.childNodes),a=[],i=0;r=s[i];i++){var o=r.nodes;r.first=o[0]||null,r.last=o[o.length-1]||null,a.push.apply(a,o),r.emit_childNodesModified({inserted:o})}return a}function S(e,t){var n;if("function"==typeof e.childFactory&&(n=e.childFactory(t))instanceof e.childClass)return n;if(!n)throw W;throw K}var j="basis.dom.wrapper",I=n.Class,R=n.object.complete,A=n.array,k=n.array.remove,D=n.fn.$undef,O=n.getter,w=n.fn.nullGetter,q=n.require("./2.js"),M=q.create,P=q.events,L=n.require("./f.js"),U=L.resolveValue,B=L.resolveDataset,H=L.createResolveFunction,V=L.SUBSCRIPTION,F=L.STATE,Y=L.Object,z=L.ReadOnlyDataset,G=L.Dataset,$=j+": Node can't be inserted at specified point in hierarchy",X=j+": Node was not found",K=j+": Child node has wrong class",W=j+": Child node is null",Z=j+": Operation is not allowed because node is under dataSource control",J=j+": Operation is not allowed because node is under dataSource adapter control",Q=j+": Node can't has children and dataSource as childClass isn't specified",ee="__auto__",te={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},ne={},ie={};V.addProperty("owner"),V.addProperty("dataSource"),V.add("CHILD",{childNodesModified:function(e,t){var n;if(n=t.inserted)for(r=0;i=n[r];r++)V.link("child",e,i);if(n=t.deleted)for(var i,r=0;i=n[r];r++)V.unlink("child",e,i)}},function(e,t){for(var n,i=t.childNodes||[],r=0;n=i[r];r++)e("child",t,n)}),V.add("SATELLITE",{satelliteChanged:function(e,t,n){n&&V.unlink("satellite",e,n),e.satellite[t]&&V.link("satellite",e,e.satellite[t])}},function(e,t){var n=t.satellite;if(n!==re)for(var i in n)i!==ee&&e("satellite",t,n[i])});var re=I.customExtendProperty({},function(e,t){for(var n in t)e[n]=E(t[n])}),se=function(){var e=this.name,t=this.config,i=this.owner,r="existsIf"in t==0||t.existsIf(i);if(U(this,se,r,"existsRA_")){if(!(l=this.instance||t.instance)||"value"==this.factoryType){if(!this.factoryType){var s=t.getInstance,a=t.instanceClass;"function"==typeof s&&(s=s.call(i,i),I.isClass(s)&&(a=T(s))),this.factoryType=a?"class":"value",this.factory=a||s}if("class"==this.factoryType){var o={destroy:h};return t.delegate&&(o.autoDelegate=!1,o.delegate=t.delegate(i)),t.dataSource&&(o.dataSource=t.dataSource(i)),t.config&&n.object.complete(o,"function"==typeof t.config?t.config(i):t.config),this.instance=new this.factory(o),void i.setSatellite(e,this.instance,!0)}l=le(this,se,this.factory,"instanceRA_")}this.instance!==l&&(this.instance=l||null,i.setSatellite(e,this.instance,!0)),l&&l.owner===i&&(t.delegate&&l.setDelegate(t.delegate(i)),t.dataSource&&l.setDataSource(t.dataSource(i)))}else{var l=this.instance;l&&(t.instance&&(t.delegate&&l.setDelegate(),t.dataSource&&l.setDataSource()),this.instance=null,i.setSatellite(e,null,!0))}},ae={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},oe=I(Y,{className:j+".AbstractNode",propertyDescriptors:{owner:"ownerChanged",parentNode:"parentChanged",childNodes:{nested:["length"],events:"childNodesModified"},childNodesState:"childNodesStateChanged",dataSource:"dataSourceChanged","getChildNodesDataset()":!0,satellite:{nested:!0,events:"satelliteChanged"},sorting:"sortingChanged",sortingDesc:"sortingChanged",grouping:"groupingChanged",ownerSatelliteName:"ownerSatelliteNameChanged",firstChild:!1,lastChild:!1,previousSibling:!1,nextSibling:!1,groupNode:!1,groupId:!0,autoDelegate:!1,destroyDataSourceMember:!1,name:!0},subscribeTo:Y.prototype.subscribeTo+V.DATASOURCE+V.SATELLITE,isSyncRequired:function(){return this.state==F.UNDEFINED||this.state==F.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(e){Y.prototype.emit_update.call(this,e);var t=this.parentNode;t&&(t.matchFunction&&this.match(t.matchFunction),t.insertBefore(this,this.nextSibling))},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:te.NONE,name:null,childNodes:null,emit_childNodesModified:M("childNodesModified","delta")&&function(e){P.childNodesModified.call(this,e);var t,n=this.listen.childNode;if(n){if(t=e.inserted)for(r=0;i=t[r];r++)i.addHandler(n,this);if(t=e.deleted)for(var i,r=0;i=t[r];r++)i.removeHandler(n,this)}},childNodesState:F.UNDEFINED,emit_childNodesStateChanged:M("childNodesStateChanged","oldState"),childClass:I.SELF,dataSource:null,emit_dataSourceChanged:M("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:M("parentChanged","oldParentNode"),nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:w,sortingDesc:!1,emit_sortingChanged:M("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:M("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:re,emit_satelliteChanged:M("satelliteChanged","name","oldSatellite"),ownerSatelliteName:null,emit_ownerSatelliteNameChanged:M("ownerSatelliteNameChanged","name","oldName"),owner:null,emit_ownerChanged:M("ownerChanged","oldOwner"),init:function(){Y.prototype.init.call(this);var e=this.childNodes,t=this.dataSource;e&&(this.childNodes=null),t&&(this.dataSource=null);var n=this.grouping;n&&(this.grouping=null,this.setGrouping(n)),this.childClass&&(this.childNodes=[],t?this.setDataSource(t):e&&this.setChildNodes(e));var i=this.satellite;i!==re&&(this.satellite=re,N(this,i));var r=this.owner;r&&(this.owner=null,this.setOwner(r))},setChildNodesState:function(e,t){var n=String(e),i=this.childNodesState;if(!F.values[n])throw new Error("Wrong state value");i==n&&i.data==t||(this.childNodesState=Object(n),this.childNodesState.data=t,this.emit_childNodesStateChanged(i))},appendChild:function(e){},insertBefore:function(e,t){},removeChild:function(e){},replaceChild:function(e,t){},clear:function(e){},setChildNodes:function(e){},setGrouping:function(e,t){},setSorting:function(e,t){},setDataSource:function(e){},setOwner:function(e){if(e&&e instanceof oe!=0||(e=null),e&&this.parentNode)throw"basis.dom.wrapper: Node can't has owner and parentNode";var t=this.owner;if(t!==e){var n=this.listen.owner;if(t){if(this.ownerSatelliteName&&t.satellite[ee]&&this.ownerSatelliteName in t.satellite[ee])return;n&&t.removeHandler(n,this),this.ownerSatelliteName&&(this.owner=null,t.setSatellite(this.ownerSatelliteName,null))}e&&n&&e.addHandler(n,this),this.owner=e,this.emit_ownerChanged(t),this.autoDelegate!=te.OWNER&&this.autoDelegate!==te.ANY||this.setDelegate(e)}},setSatellite:function(e,t,n){var i=this.satellite[e]||null,r=this.satellite[ee],s=r&&r[e],a=n&&s;if(a)(t=s.instance)&&s.config.instance&&delete s.config.instance.setOwner;else{if((t=E(t))&&t.owner===this&&r&&t.ownerSatelliteName&&r[t.ownerSatelliteName])return;s&&(delete r[e],s.config.instance&&s.config.instance.removeHandler(ae,s),s.config.handler&&this.removeHandler(s.config.handler,s))}if(i!==t){var o,l=this.listen.satellite,u=this.listen["satellite:"+e];if(i&&(delete this.satellite[e],null!=(f=i.ownerSatelliteName)&&(i.ownerSatelliteName=null,i.emit_ownerSatelliteNameChanged(f)),s&&i.destroy===h?o=i:(l&&i.removeHandler(l,this),u&&i.removeHandler(u,this),i.setOwner(null)),a&&!t&&s.config.instance&&(s.config.instance.setOwner=c)),t){if(t instanceof oe==0){s={owner:this,name:e,config:t,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};return t.handler&&this.addHandler(t.handler,s),t.instance&&(t.instance.addHandler(ae,s),t.instance.setOwner=c),r||(this.satellite===re&&(this.satellite={}),r=this.satellite[ee]={}),r[e]=s,se.call(s,this),!s.instance&&i&&this.emit_satelliteChanged(e,i),void(o&&(delete o.destroy,o.destroy()))}if(t.owner!==this){if(s&&s.config.delegate){var d=t.autoDelegate;t.autoDelegate=!1,t.setOwner(this),t.autoDelegate=d}else t.setOwner(this);if(t.owner!==this)return void this.setSatellite(e,null);l&&t.addHandler(l,this),u&&t.addHandler(u,this)}else t.ownerSatelliteName&&(delete this.satellite[t.ownerSatelliteName],this.emit_satelliteChanged(t.ownerSatelliteName,t));this.satellite==re&&(this.satellite={}),this.satellite[e]=t;var f=t.ownerSatelliteName;f!=e&&(t.ownerSatelliteName=e,t.emit_ownerSatelliteNameChanged(f))}this.emit_satelliteChanged(e,i),o&&(delete o.destroy,o.destroy())}},getChildNodesDataset:function(){return ne[this.basisObjectId]||new me({sourceNode:this})},getSatellitesDataset:function(){return ie[this.basisObjectId]||new ve({sourceNode:this})},destroy:function(){Y.prototype.destroy.call(this),this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear(),this.parentNode&&this.parentNode.removeChild(this),this.grouping&&(this.grouping.setOwner(),this.grouping=null),this.owner&&this.setOwner();var e=this.satellite;if(e!==re){var t=e[ee];delete e[ee];for(var n in t)t[n].config.instance&&!t[n].instance&&t[n].config.instance.destroy(),t[n].existsRA_&&U(t[n],null,null,"existsRA_"),t[n].instanceRA_&&U(t[n],null,null,"instanceRA_");for(var n in e){var i=e[n];i.owner=null,i.ownerSatelliteName=null,i.destroy===h&&delete i.destroy,i.destroy()}this.satellite=null}this.childNodes=null}}),le=H(oe),ue=I(oe,{className:j+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[],oe.prototype.init.call(this)},insert:function(e,t){var n=this.nodes,i=t?n.indexOf(t):-1;-1==i?(n.push(e),this.last=e):n.splice(i,0,e),this.first=n[0],e.groupNode=this,this.emit_childNodesModified({inserted:[e]})},remove:function(e){var t=this.nodes;k(t,e)&&(this.first=t[0]||null,this.last=t[t.length-1]||null,e.groupNode=null,this.emit_childNodesModified({deleted:[e]})),!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var e=this.nodes,t=e.length;t-- >0;)e[t].groupNode=null;this.nodes=[],this.first=null,this.last=null,this.emit_childNodesModified({deleted:e}),this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){oe.prototype.destroy.call(this),this.nodes=null,this.first=null,this.last=null}}),ce={childClass:oe,childFactory:null,listen:{dataSource:{itemsChanged:function(e,t){var n={},i=[];if(t.deleted)if(n.deleted=i,this.childNodes.length==t.deleted.length){i=A(this.childNodes);for(var r,s=0;r=i[s];s++)f(r);this.dataSourceMap_=null,this.clear(!0),this.dataSourceMap_={}}else for(s=0;u=t.deleted[s];s++){var a=u.basisObjectId,o=this.dataSourceMap_[a];f(o),delete this.dataSourceMap_[a],this.removeChild(o),i.push(o)}if(t.inserted){n.inserted=[];for(s=0;u=t.inserted[s];s++){var l=S(this,{delegate:u});d(l),this.dataSourceMap_[u.basisObjectId]=l,n.inserted.push(l),this.firstChild&&this.insertBefore(l)}}if(this.firstChild?this.emit_childNodesModified(n):this.setChildNodes(n.inserted),this.destroyDataSourceMember&&i.length)for(var u,s=0;u=i[s];s++)u.destroy()},stateChanged:function(e){this.setChildNodesState(e.state,e.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}}},getChild:function(e,t){return n.array.search(this.childNodes,e,t)},getChildByName:function(e){return this.getChild(e,"name")},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(!this.childClass)throw Q;if(e.firstChild)for(g=this;g=g.parentNode;)if(g===e)throw $;var n=e&&e instanceof this.childClass;if(this.dataSource){if(!n||!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId]!==e)throw Z}else if(this.dataSourceRA_)throw J;if(n||(e=S(this,e instanceof Y?{delegate:e}:e)),e.owner)throw"basis.dom.wrapper: Node can't has owner and parentNode";var i,r,s,a,o,l=e.parentNode===this,u=this.childNodes,c=this.grouping,h=e.groupNode,d=null,f=this.sorting,m=!1,v=-1;if(l&&(a=e.nextSibling,o=e.previousSibling),f!==w&&(t=null,r=this.sortingDesc,null==(s=f(e))?s=-1/0:"number"==typeof s&&s===s||(s=String(s)),l&&(s===e.sortingValue?m=!0:(m=r?(!a||typeof a.sortingValue<=typeof s&&a.sortingValue<=s)&&(!o||typeof o.sortingValue>=typeof s&&o.sortingValue>=s):(!a||typeof a.sortingValue>=typeof s&&a.sortingValue>=s)&&(!o||typeof o.sortingValue<=typeof s&&o.sortingValue<=s))&&(e.sortingValue=s))),c){var g;if(d=c.getGroupNode(e,!0),i=d.nodes,h===d&&(m||f===w&&a===t))return e;if(f!==w?h===d&&m?v=a&&a.groupNode===d?i.indexOf(a):i.length:(v=y(i,s,p,r),e.sortingValue=s):v=t&&t.groupNode===d?i.indexOf(t):i.length,v<i.length)t=i[v];else if(d.last)t=d.last.nextSibling;else for(g=d,t=null;(g=g.nextSibling)&&!(t=g.first););if(e===t||l&&a===t)return h!==d&&(h&&h.remove(e),d.insert(e,t)),e;v=-1}else if(f!==w){if(m)return e;if(v=y(u,s,p,r,this.lll),t=u[v],e.sortingValue=s,e===t||l&&a===t)return e}else{if(t&&t.parentNode!==this)throw X;if(l){if(a===t)return e;if(e===t)throw $}}if(l){if(a?(a.previousSibling=o,e.nextSibling=null):this.lastChild=o,o?(o.nextSibling=a,e.previousSibling=null):this.firstChild=a,-1==v)k(u,e);else{var T=u.indexOf(e);u.splice(T,1),v-=T<v}h&&(h.remove(e),h=null)}else e.parentNode&&e.parentNode.removeChild(e);if(h!=d&&d.insert(e,t),t){if(-1==v&&(v=u.indexOf(t)),-1==v)throw X;e.nextSibling=t,u.splice(v,0,e)}else v=u.length,u.push(e),t={previousSibling:this.lastChild},this.lastChild=e;return e.parentNode=this,e.previousSibling=t.previousSibling,0==v?this.firstChild=e:t.previousSibling.nextSibling=e,t.previousSibling=e,l||(b(e,e.contextSelection,this.selection||this.contextSelection,!0),_(e,this.disabled||this.contextDisabled),(e.underMatch_||this.matchFunction)&&e.match&&e.match(this.matchFunction),e.autoDelegate!=te.PARENT&&e.autoDelegate!==te.ANY||e.setDelegate(this),e.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[e]}),e.listen.parentNode&&this.addHandler(e.listen.parentNode,e)),e},removeChild:function(e){if(!e||e.parentNode!==this)throw X;if(e instanceof this.childClass==0)throw K;if(this.dataSource){if(!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId])throw Z}else if(this.dataSourceRA_)throw J;var t=this.childNodes.indexOf(e);if(-1==t)throw X;return this.childNodes.splice(t,1),e.parentNode=null,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:this.lastChild=e.previousSibling,e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:this.firstChild=e.nextSibling,e.nextSibling=null,e.previousSibling=null,e.listen.parentNode&&this.removeHandler(e.listen.parentNode,e),b(e,e.contextSelection,null,!0),e.groupNode&&e.groupNode.remove(e),e.emit_parentChanged(this),this.dataSource||this.emit_childNodesModified({deleted:[e]}),e.autoDelegate!=te.PARENT&&e.autoDelegate!==te.ANY||e.setDelegate(),e},replaceChild:function(e,t){if(this.dataSource)throw Z;if(this.dataSourceRA_)throw J;if(null==t||t.parentNode!==this)throw X;return this.insertBefore(e,t),this.removeChild(t)},clear:function(e){if(this.dataSource&&this.dataSourceMap_&&this.dataSource.itemCount)throw Z;if(this.firstChild){e&&b(this,this.selection||this.contextSelection,null,!1,!0);var t=this.childNodes;this.firstChild=null,this.lastChild=null,this.childNodes=[],this.emit_childNodesModified({deleted:t});for(r=t.length;r-- >0;){var n=t[r];n.listen.parentNode&&n.parentNode.removeHandler(n.listen.parentNode,n),n.parentNode=null,n.groupNode=null,e?(n.nextSibling=null,n.previousSibling=null,n.emit_parentChanged(this),n.autoDelegate!=te.PARENT&&n.autoDelegate!==te.ANY||n.setDelegate()):n.destroy()}if(this.grouping)for(var i,r=(t=this.grouping.childNodes).length-1;i=t[r];r--)i.clear()}},setChildNodes:function(e,t){if(this.dataSource||this.dataSourceRA_||this.clear(t),e&&("length"in e==0&&(e=[e]),e.length)){var n=this.emit_childNodesModified;this.emit_childNodesModified=D;for(var i=0,r=e.length;i<r;i++)this.insertBefore(e[i]);this.emit_childNodesModified=n,this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(e){if(!this.childClass)throw Q;if(e=B(this,this.setDataSource,e,"dataSourceRA_"),this.dataSource!==e){var t,n,i=this.dataSource,r=this.dataSourceMap_||{},s=this.listen.dataSource;if(i?(s&&i.removeHandler(s,this),e?(t=e.getItems().filter(function(e){return!i.has(e)}),n=i.getItems().filter(function(t){return!e.has(t)})):n=i.getItems()):e&&(t=e.getItems()),i&&e)i&&n.length&&s&&s.itemsChanged.call(this,i,{deleted:n});else if(this.firstChild){if(i)for(var a,o=0;a=this.childNodes[o];o++)f(a);this.dataSource=null,this.clear(i&&!this.destroyDataSourceMember)}this.dataSource=e,e?(this.dataSourceMap_=r,this.setChildNodesState(e.state,e.state.data),s&&(e.addHandler(s,this),t.length&&s.itemsChanged.call(this,e,{inserted:t}))):(this.dataSourceMap_=null,this.setChildNodesState(F.UNDEFINED)),this.emit_dataSourceChanged(i)}},setGrouping:function(e,t){if("function"!=typeof e&&"string"!=typeof e||(e={rule:e}),e instanceof de==0&&(e=e&&"object"==typeof e?new this.groupingClass(e):null),this.grouping!==e){var n,i=this.grouping;if(i){if(this.grouping=null,!e&&this.firstChild){n=this.sorting!==w?g(this):this.childNodes,i.nullGroup.clear();for(var r=i.childNodes.slice(0),s=0;s<r.length;s++)r[s].clear();x(this,n)}i.setOwner()}if(e&&(this.grouping=e,e.setOwner(this),this.firstChild)){n=this.sorting!==w?g(this):this.childNodes;for(var a,s=0;a=n[s];s++)a.groupNode=this.grouping.getGroupNode(a,!0);x(this,n=C(this,n))}this.emit_groupingChanged(i),i&&!t&&i.destroy()}},setSorting:function(e,t){if(e=O(e),t=!!t,this.sorting!==e||this.sortingDesc!=!!t){var n=this.sorting,i=this.sortingDesc;if(this.sorting=e,this.sortingDesc=!!t,e!==w&&this.firstChild){for(var r,s=[],a=this.firstChild;a;a=a.nextSibling){var o=e(a);null==o?o=-1/0:"number"==typeof o&&o===o||(o=String(o)),a.sortingValue=o}if(this.grouping)for(var l,u=[this.grouping.nullGroup].concat(this.grouping.childNodes),c=0;l=u[c];c++)r=l.nodes=g({childNodes:l.nodes,sortingDesc:this.sortingDesc}),l.first=r[0]||null,l.last=r[r.length-1]||null,s.push.apply(s,r);else s=g(this);x(this,s)}this.emit_sortingChanged(n,i)}},setMatchFunction:function(e){if(this.matchFunction!=e){var t=this.matchFunction;this.matchFunction=e;for(var n=this.lastChild;n;n=n.previousSibling)n.match(e);this.emit_matchFunctionChanged(t)}}},he=I(oe,ce,{className:j+".Node",propertyDescriptors:{disabled:"disable enable",contextDisabled:!1,selected:"select unselect",contextSelection:!1,selection:"selectionChanged",matched:"match unmatch",matchFunction:"matchFunctionChanged"},emit_satelliteChanged:function(e,t){oe.prototype.emit_satelliteChanged.call(this,e,t),this.satellite[e]instanceof he&&_(this.satellite[e],this.disabled||this.contextDisabled)},contextDisabled:!1,disabled:!1,disabledRA_:null,emit_enable:M("enable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)_(e,!1);P.enable.call(this)},emit_disable:M("disable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)_(e,!0);P.disable.call(this)},selection:null,emit_selectionChanged:M("selectionChanged","oldSelection"),contextSelection:null,selected:!1,selectedRA_:null,emit_select:M("select"),emit_unselect:M("unselect"),matched:!0,emit_match:M("match"),emit_unmatch:M("unmatch"),matchFunction:null,emit_matchFunctionChanged:M("matchFunctionChanged","oldMatchFunction"),listen:{owner:{enable:function(){_(this,!1)},disable:function(){_(this,!0)}},selection:{destroy:function(){this.setSelection()}}},init:function(){var e=this.disabled;this.disabled=!1;var t=this.selection;if(t&&(this.selection=null,this.setSelection(t,!0)),oe.prototype.init.call(this),e&&(e=!!U(this,this.setDisabled,e,"disabledRA_"))){this.disabled=e;for(var n=this.firstChild;n;n=n.nextSibling)_(n,!0)}this.selected&&(this.selected=!!U(this,this.setSelected,this.selected,"selectedRA_"))},setSelection:function(e,t){var n=this.selection;if(e instanceof ge==!1&&(e=e?new ge(e):null),n!==e)return b(this,n||this.contextSelection,e||this.contextSelection,!1,!0),this.listen.selection&&(n&&n.removeHandler(this.listen.selection,this),e&&e.addHandler(this.listen.selection,this)),this.selection=e,t||this.emit_selectionChanged(n),!0},setSelected:function(e,t){var n=this.contextSelection;return e=!!U(this,this.setSelected,e,"selectedRA_"),this.selected&&n&&(this.selectedRA_?n.has(this)&&(this.selected=!1,n.remove(this),this.selected=!0):n.has(this)||n.add(this)),e!==this.selected?(this.selectedRA_?(this.selected=e,e?this.emit_select():this.emit_unselect()):e?n?t?n.add(this):n.set(this):(this.selected=!0,this.emit_select()):n?n.remove(this):(this.selected=!1,this.emit_unselect()),!0):(!this.selectedRA_&&e&&n&&(t?n.remove(this):n.set(this)),!1)},select:function(e){return!this.selectedRA_&&this.setSelected(!0,e)},unselect:function(){return!this.selectedRA_&&this.setSelected(!1)},setDisabled:function(e){return e=!!U(this,this.setDisabled,e,"disabledRA_"),this.disabled!==e&&(this.disabled=e,this.contextDisabled||(e?this.emit_disable():this.emit_enable()),!0)},disable:function(){return!this.disabledRA_&&this.setDisabled(!0)},enable:function(){return!this.disabledRA_&&this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(e){"function"!=typeof e&&(e=null),this.underMatch_&&!e&&this.underMatch_(this,!0),this.underMatch_=e;var t=!e||e(this);this.matched!=t&&(this.matched=t,t?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&U(this,null,null,"disabledRA_"),this.selectedRA_&&U(this,null,null,"selectedRA_"),this.contextSelection=null,this.selection&&this.setSelection(),oe.prototype.destroy.call(this)}}),de=I(oe,ce,{className:j+".GroupingNode",emit_childNodesModified:function(e){P.childNodesModified.call(this,e);var t;if(t=e.inserted){for(var n,i=0;n=t[i++];)n.groupId_=n.delegate?n.delegate.basisObjectId:n.data.id,this.map_[n.groupId_]=n;if(this.dataSource&&this.nullGroup.first)for(var r=this.owner,s=A(this.nullGroup.nodes),i=s.length;i-- >0;)r.insertBefore(s[i],s[i].nextSibling)}},emit_ownerChanged:function(e){e&&e.grouping===this&&e.setGrouping(null,!0),this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this),P.ownerChanged.call(this,e),!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:w,childClass:ue,childFactory:function(e){return new this.childClass(R({autoDestroyIfEmpty:!this.dataSource&&this.autoDestroyEmptyGroups},e))},init:function(){this.map_={},this.nullGroup=new ue,oe.prototype.init.call(this)},getGroupNode:function(e,t){var n=this.rule(e),i=n instanceof Y,r=this.map_[i?n.basisObjectId:n];return this.dataSource&&(t=!1),!r&&t&&(r=this.appendChild(i?n:{data:{id:n,title:n}})),r||this.nullGroup},setDataSource:function(e){var t=this.dataSource;ce.setDataSource.call(this,e);var n=this.owner;if(n&&this.dataSource!==t)for(var i=A(n.childNodes),r=i.length-1;r>=0;r--)n.insertBefore(i[r],i[r+1])},insertBefore:function(e,t){var n=(e=ce.insertBefore.call(this,e,t)).first;if(n){for(var i,r,s,a=n.parentNode,o=e.last,l=null,u=e;(u=u.nextSibling)&&!(l=u.first););if(s=l?l.previousSibling:a.lastChild,i=n.previousSibling,(r=o.nextSibling)!==l){var c=a.childNodes,h=e.nodes,d=h.length;i&&(i.nextSibling=r),r&&(r.previousSibling=i),s&&(s.nextSibling=n),l&&(l.previousSibling=o),n.previousSibling=s,o.nextSibling=l;var f=c.indexOf(n),p=l?c.indexOf(l):c.length;if(p>f&&(p-=d),c.splice(f,d),c.splice.apply(c,[p,0].concat(h)),s&&i||(a.firstChild=c[0]),l&&r||(a.lastChild=c[c.length-1]),n instanceof ue)for(var m=d,v=l;m-- >0;)a.insertBefore(h[m],v),v=h[m]}}return e},removeChild:function(e){if(e=ce.removeChild.call(this,e)){delete this.map_[e.groupId_];for(var t,n=0;t=e.nodes[n];n++)t.parentNode.insertBefore(t)}return e},clear:function(e){var t=[],n=this.getGroupNode,i=this.nullGroup;this.getGroupNode=function(){return i};for(var r=this.firstChild;r;r=r.nextSibling)t.push.apply(t,r.nodes);for(var s,a=0;s=t[a];a++)s.parentNode.insertBefore(s);this.getGroupNode=n,ce.clear.call(this,e),this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1,oe.prototype.destroy.call(this),this.nullGroup.destroy(),this.nullGroup=null,this.map_=null}});oe.prototype.groupingClass=de;var fe={childNodesModified:function(e,t){var n,i=this.members_,r={},s=0,a=0,o=t.inserted,l=t.deleted;if(o&&o.length)for(r.inserted=o;n=o[s];)i[n.basisObjectId]=n,s++;if(l&&l.length)for(r.deleted=l;n=l[a];)delete i[n.basisObjectId],a++;(s||a)&&this.emit_itemsChanged(r)},destroy:function(){this.destroy()}},pe={satelliteChanged:function(e,t,n){var i={};e.satellite[t]&&(i.inserted=[e.satellite[t]]),n&&(i.deleted=[n]),this.emit_itemsChanged(i)},destroy:function(){this.destroy()}},me=I(z,{className:j+".ChildNodesDataset",sourceNode:null,init:function(){z.prototype.init.call(this);var e=this.sourceNode;ne[e.basisObjectId]=this,e.firstChild&&fe.childNodesModified.call(this,e,{inserted:e.childNodes}),e.addHandler(fe,this)},destroy:function(){this.sourceNode.removeHandler(fe,this),delete ne[this.sourceNode.basisObjectId],z.prototype.destroy.call(this)}}),ve=n.Class(z,{className:".SatellitesDataset",sourceNode:null,init:function(){z.prototype.init.call(this);var e=this.sourceNode;ie[e.basisObjectId]=this;var t=[];for(var n in e.satellite)if(e.satellite.hasOwnProperty(n)){var i=e.satellite[n];i instanceof oe&&t.push(i)}t.length&&this.emit_itemsChanged({inserted:t}),e.addHandler(pe,this)},destroy:function(){this.sourceNode.removeHandler(pe,this),delete ie[this.sourceNode.basisObjectId],z.prototype.destroy.call(this)}}),ge=I(G,{className:j+".Selection",multiple:!1,emit_itemsChanged:function(e){var t;if(G.prototype.emit_itemsChanged.call(this,e),t=e.deleted)for(i=0;n=t[i];i++)n.selected&&n.contextSelection===this&&(n.selected=!1,n.emit_unselect());if(t=e.inserted)for(var n,i=0;n=t[i];i++)n.selected||n.contextSelection!==this||(n.selected=!0,n.emit_select())},add:function(e){if(e)return!this.multiple&&this.itemCount?this.set(e):(Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]),e.length?G.prototype.add.call(this,e):void 0)},set:function(e){return e?(Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]),e.length?G.prototype.set.call(this,e):this.clear()):this.clear()},filter:function(e){return e instanceof he&&!e.selectedRA_&&e.contextSelection===this}});t.exports={DELEGATE:te,AbstractNode:oe,Node:he,GroupingNode:de,PartitionNode:ue,ChildNodesDataset:me,SatellitesDataset:ve,Selection:ge,nullSelection:new z}},"f.js":function(e,t,n,i,r,s,a,o,l){function u(e,t,i){var r=t[i],s=!1;/^<static>/.test(r)&&(s=!0,r=r.substr(8));var a=e.propertyDescriptors[r],o=a?a.events:null;if(a&&a.isPrivate&&(s=!0,o=null),a&&a.isStatic&&(s=!0),o){if(s)o=null;else if(a&&a.nested&&i<t.length-1){var l=r,u=t[++i],c=l+"."+u;if(Array.isArray(a.nested)&&-1==a.nested.indexOf(u))return;(r=de[c])||(r=function(e){return(e=e&&e[l])?e[u]:void 0},r=de[c]=n.getter(r))}}else if(!s)return;return{getter:r,rest:t.slice(i+1).join("."),events:o||null}}function c(e){var t=he[e];if(!t){t=he[e]=n.getter(function(t){if(t instanceof U)return ne.query(t,e)})}return t}function h(e){return e.factory=G,e.deferred=d,e.compute=f,e.query=v,e.pipe=m,e.as=p,e}function d(){var e=this;return h(function(t){return(t=e(t))?t.deferred():t})}function f(e,t){var n=this;return h(function(i){var r=n(i);return r?r.compute(e,t)(i):r})}function p(e){var t=this;return h(function(n){return(n=t(n))?n.as(e):n})}function m(e,t){var n=this;return h(function(i){return(i=n(i))?i.pipe(e,t):i})}function v(e){var t=this;return h(function(n){return(n=t(n))?n.query(e):n})}function g(e,t){for(;t&&t!==e&&t!==t.delegate;)t=t.delegate;return t===e}function y(e,t,n){var i=e.delegate;if(i&&(e.root=i.root,e.target=i.target,e.data=i.data,e.state=i.state),!X(e.root,t)){var r=e.listen.root;r&&(t&&!X(t,e)&&t.removeHandler(r,e),e.root&&!X(e.root,e)&&e.root.addHandler(r,e)),e.emit_rootChanged(t)}if(!X(e.target,n)){var s=e.listen.target;s&&(n&&!X(n,e)&&n.removeHandler(s,e),e.target&&!X(e.target,e)&&e.target.addHandler(s,e)),e.emit_targetChanged(n)}for(var a=e.delegates_;a;)a.delegate&&y(a.delegate,t,n),a=a.next}function b(e,t){var n,i={};if(e&&e.length&&(n=i.inserted=e),t&&t.length&&(n=i.deleted=t),n)return i}function _(e,t){if(e&&e.itemCount){if(t&&t.itemCount){var n=[],i=[];for(var r in e.items_)(s=e.items_[r]).basisObjectId in t.items_==0&&i.push(s);for(var r in t.items_){var s=t.items_[r];s.basisObjectId in e.items_==0&&n.push(s)}return b(n,i)}if(e.itemCount)return{deleted:e.getItems()}}else if(t&&t.itemCount)return{inserted:t.getItems()}}function T(){this.fn.call(this.context,this.source)}function E(e,t,n,i,r){var s=e[i]||null,a=null;if(t!==T&&"function"==typeof n&&(n=n.call(r||e,r||e)),n){var o=a=s&&s.source===n?s:null;n instanceof be?(a=o||new w(e,t,n,Ee),n=n.dataset):n.bindingBridge&&(n=E(a=o||new q(e,t,n,M),T,n.value,"next"))}if(n instanceof _e==0&&(n=null),i&&s!==a){for(var l=s;l;)(o=l).detach(),l=o.next,o.next=null;a&&a.attach(P),e[i]=a}return n}function N(e){return Array.isArray(e)?e.map(function(e){return{data:e}}):{data:e}}function x(e){return e&&e.constructor===Object||(e={value:e}),new pe({data:e})}var C=n.Class,S=Array.prototype.slice,j=n.object.values,I=n.fn.$self,R=n.require("./g.js"),A=n.require("./h.js"),k=n.require("./i.js"),D=k.createResolveFunction,O=k.resolveValue,w=k.ResolveAdapter,q=k.BBResolveAdapter,M=k.DEFAULT_CHANGE_ADAPTER_HANDLER,P=k.DEFAULT_DESTROY_ADAPTER_HANDLER,L=n.require("./2.js"),U=L.Emitter,B=L.create,H=L.createHandler,V=L.events,F=n.require("./1g.js"),Y={},z=[],G=n.FACTORY,$=n.PROXY;A.addProperty("delegate"),A.addProperty("target"),A.addProperty("dataset"),A.addProperty("value","change");var X=function(e,t){return e===t},K=n.getter.ID,W={destroy:function(e){this.value.unlink(e,this.fn)}},Z={destroy:function(){this.set(null)}},J={},Q={},ee=function(e){ne.prototype.set.call(this,e)},te=function(e,t){t instanceof U?t.removeHandler(this.pipeHandler,this):t=null,e instanceof U?e.addHandler(this.pipeHandler,this):e=null,e!==t&&ne.prototype.set.call(this,e)},ne=C(F,{className:"basis.data.Value",propertyDescriptors:{value:"change",bindingBridge:!1,initValue:!1,locked:!1,proxy:!1,setNullOnEmitterDestroy:!1},subscribeTo:A.VALUE,emit_change:B("change","oldValue")&&function(e){V.change.call(this,e);for(var t=this;t=t.links_;)t.fn.call(t.context,this.value,e)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(e,t,n,i){e.link(n,t,!0,i)},detach:function(e,t,n){e.unlink(n,t)},get:function(e){return e.value}},init:function(){F.prototype.init.call(this),this.proxy&&(this.value=this.proxy(this.value)),this.setNullOnEmitterDestroy&&this.value instanceof U&&this.value.addHandler(Z,this),this.initValue=this.value},set:function(e){var t=this.value,n=this.proxy?this.proxy(e):e,i=n!==t;return i&&(this.setNullOnEmitterDestroy&&(t instanceof U&&t.removeHandler(Z,this),n instanceof U&&n.addHandler(Z,this)),this.value=n,this.locked||this.emit_change(t)),i},reset:function(){this.set(this.initValue)},isLocked:function(){return this.locked>0},lock:function(){this.locked++,1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&(this.locked--,!this.locked)){var e=this.lockedValue_;this.lockedValue_=null,this.value!==e&&this.emit_change(e)}},compute:function(e,t){t||(t=e,e=null),t||(t=I);var n=this,i=H(e,function(e){ne.prototype.set.call(this,t(e,n.value))}),r=t[K]||String(t),s=i.events.concat(r,this.basisObjectId).join("_"),a=J[s];if(!a){var o={};i.destroy=function(e){delete o[e.basisObjectId],this.destroy()},this.addHandler({change:function(){for(var e in o){var n=o[e];ne.prototype.set.call(n.value,t(n.object,this.value))}},destroy:function(){for(var e in o){var t=o[e];t.object.removeHandler(i,t.value),t.value.destroy()}o=null,n=null}}),a=J[s]=function(e){var r=e.basisObjectId,s=o[r],a=t(e,n.value);if(s)ne.prototype.set.call(s.value,a);else{var l=new ie({value:a});e.addHandler(i,l),s=o[r]={value:l,object:e}}return s.value}}return h(a)},pipe:function(e,t){var i,r=H(e,ue),s=t[K]||String(t),a=r.events.join("_")+"_"+s,o=this.pipes_;return o?i=o[a]:o=this.pipes_={},i||((i=new oe({source:this,pipeId:a,pipeHandler:r})).proxy=n.getter(t),this.value instanceof U&&(i.value=i.proxy(this.value),this.value.addHandler(r,i)),o[a]=i,this.link(i,te,!0,i.destroy)),i},as:function(e){if(!e||e===I)return this;if("string"==typeof e&&(e=n.getter(e)),this.links_)for(var t=this,i=e[K]||String(e);t=t.links_;){var r=t.context;if(r instanceof ie&&r.proxy&&(r.proxy[K]||String(r.proxy))==i)return r}var s=new ie({proxy:e,value:this.value});return this.link(s,ee,!0,s.destroy),s},query:function(e){return ne.query(this,"value."+e)},deferred:function(){return this.deferred_||(this.deferred_=new ae({source:this,value:this.value})),this.deferred_},link:function(e,t,n,i){if("function"!=typeof t){var r=String(t);(t=Q[r])||(t=Q[r]=function(e){this[r]=e})}return this.links_={value:this,context:e,fn:t,destroy:i||null,links_:this.links_},e instanceof U&&e.addHandler(W,this.links_),n||t.call(e,this.value),e},unlink:function(e,t){for(var i,r=this;i=r,r=r.links_;)r.context!==e||t&&r.fn!==t||(r.fn=n.fn.$undef,i.links_=r.links_,r.context instanceof U&&r.context.removeHandler(W,r))},destroy:function(){F.prototype.destroy.call(this),this.setNullOnEmitterDestroy&&this.value instanceof U&&this.value.removeHandler(Z,this);var e=this.links_;for(this.links_=null;e;)e.context instanceof U&&e.context.removeHandler(W,e),e.destroy&&e.destroy.call(e.context),e=e.links_;this.proxy=null,this.initValue=null,this.value=null,this.lockedValue_=null,this.deferred_=null,this.pipes_=null}}),ie=C(ne,{className:"basis.data.ReadOnlyValue",setNullOnEmitterDestroy:!1,set:n.fn.$false}),re=n.asap.schedule(function(e){e.unlock()}),se={change:function(e){this.isLocked()||(this.lock(),re.add(this)),ne.prototype.set.call(this,e.value)},destroy:function(){this.destroy()}},ae=C(ie,{className:"basis.data.DeferredValue",source:null,init:function(){ie.prototype.init.call(this),this.source.addHandler(se,this)},deferred:function(){return this},destroy:function(){re.remove(this),this.source=null,ie.prototype.destroy.call(this)}}),oe=C(ie,{className:"basis.data.PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var e=this.source,t=e.value;t instanceof U&&t.removeHandler(this.pipeHandler,this),e.pipes_[this.pipeId]=null,this.source=null,this.pipeHandler=null,ie.prototype.destroy.call(this)}}),le={},ue=function(e){ne.prototype.set.call(this,e)};ne.from=function(e,t,i){var r;if(!e)return null;if(e instanceof U){i||(i=t,t=null),i||(i=I);var s=H(t,ue),a=i[K]||String(i),o=s.events.concat(a,e.basisObjectId).join("_");(r=le[o])||(r=le[o]=new ie({proxy:n.getter(i),value:e,emit_destroy:function(){o in le&&(delete le[o],e.removeHandler(s,this)),ie.prototype.emit_destroy.call(this)}}),s.destroy=function(){o in le&&(delete le[o],this.destroy())},e.addHandler(s,r))}if(!r){var o=e.basisObjectId,l=e.bindingBridge;o&&l&&((r=le[o])||(r=le[o]=new ie({value:l.get(e),handler:{destroy:function(){le[o]=null,l.detach(e,ne.prototype.set,r)}}}),l.attach(e,ne.prototype.set,r,r.destroy)))}if(!r)throw new Error("Bad object type");return r};var ce=new ie({value:void 0}),he={},de={};ne.query=function(e,t){if(1==arguments.length)return t=e,h(function(e){return ne.query(e,t)});if(e instanceof U==0)throw new Error("Bad target type");if("string"!=typeof t)throw new Error("Path should be a string");var n,i=u(e,t.split("."),0);return i?(n=ne.from(e,i.events,i.getter),i.rest&&(n=n.as(c(i.rest)).pipe("change","value")),n):ce},ne.factory=function(e,t){return h(function(n){return ne.from(n,e,t)})},ne.state=function(e){return e instanceof F?ne.from(e,"stateChanged","state"):R.UNDEFINED},ne.stateFactory=function(e,t){return ne.factory(e,t).pipe("stateChanged","state").as(function(e){return e||R.UNDEFINED})};var fe={},pe=C(F,{className:"basis.data.Object",propertyDescriptors:{delegate:"delegateChanged",target:"targetChanged",root:"rootChanged",data:{nested:!0,events:"update"}},subscribeTo:A.DELEGATE+A.TARGET,data:null,emit_update:B("update","delta")&&function(e){var t=this.delegates_;for(V.update.call(this,e);t;)t.delegate&&t.delegate.emit_update(e),t=t.next},emit_stateChanged:function(e){var t=this.delegates_;for(F.prototype.emit_stateChanged.call(this,e);t;)t.delegate&&(t.delegate.state=this.state,t.delegate.emit_stateChanged(e)),t=t.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:B("delegateChanged","oldDelegate"),target:null,emit_targetChanged:B("targetChanged","oldTarget"),root:null,emit_rootChanged:B("rootChanged","oldRoot"),init:function(){this.root=this,F.prototype.init.call(this);var e=this.delegate,t=this.data;e?(this.delegate=null,this.target=null,this.data=fe,this.setDelegate(e),this.data===fe&&(this.data=t||{})):(t||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(e){if((e=me(this,this.setDelegate,e,"delegateRA_"))&&e instanceof pe){if(e.delegate&&g(this,e))return!1}else e=null;if(!X(this.delegate,e)){var t,n=this.state,i=this.data,r=this.delegate,s=this.target,a=this.root,o=this.listen.delegate,l=!1;if(r){o&&r.removeHandler(o,this);for(var u=r.delegates_,c=r;u;){if(X(u.delegate,this)){u.delegate=null,X(c,r)?r.delegates_=u.next:c.next=u.next;break}c=u,u=u.next}}if(e){if(this.delegate=e,o&&e.addHandler(o,this),e.delegates_={delegate:this,next:e.delegates_},this.data!==fe){t={};for(var h in e.data)h in i==!1&&(l=!0,t[h]=void 0);for(var h in i)i[h]!==e.data[h]&&(l=!0,t[h]=i[h])}}else{this.delegate=null,this.target=null,this.root=this,this.data={};for(var h in i)this.data[h]=i[h]}return y(this,a,s),l&&this.emit_update(t),!t||n===this.state||String(n)==this.state&&n.data===this.state.data||this.emit_stateChanged(n),this.emit_delegateChanged(r),!0}return!1},setState:function(e,t){return this.delegate?this.root.setState(e,t):F.prototype.setState.call(this,e,t)},update:function(e){if(this.delegate)return this.root.update(e);if(e){var t={},n=!1;for(var i in e)this.data[i]!==e[i]&&(n=!0,t[i]=this.data[i],this.data[i]=e[i]);if(n)return this.emit_update(t),t}return!1},destroy:function(){F.prototype.destroy.call(this);var e=this.delegates_;for(this.delegates_=null;e;)e.delegate.setDelegate(),e=e.next;this.delegate&&this.setDelegate(),this.delegateRA_&&me(this,!1,!1,"delegateRA_"),this.data=Y,this.root=null,this.target=null}}),me=D(pe),ve=C(pe,{className:"basis.data.Slot"}),ge={destroy:function(){delete this.map[this.id]}},ye=C(F,{className:"basis.data.KeyObjectMap",itemClass:pe,keyGetter:n.getter(I),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={},F.prototype.init.call(this)},resolve:function(e){return this.get(this.keyGetter(e),e)},create:function(e){var t;return t=e instanceof pe?{delegate:e}:{data:{id:e,title:e}},new this.itemClass(t)},get:function(e,t){var n=e instanceof pe?e.basisObjectId:e,i=this.map_[n];if(!i&&t&&(i=this.map_[n]={map:this.map_,id:n,item:this.create(e,t)}).item.addHandler(ge,i),i)return i.item},destroy:function(){F.prototype.destroy.call(this);var e=this.map_;this.map_=null;for(var t in e){var n=e[t];this.autoDestroyMembers?n.item.destroy():n.item.removeHandler(ge,n)}}}),be=C(pe,{className:"basis.data.DatasetWrapper",propertyDescriptors:{dataset:"datasetChanged",itemCount:"itemsChanged","pick()":"itemsChanged","getItems()":"itemsChanged"},active:$,subscribeTo:pe.prototype.subscribeTo+A.DATASET,listen:{dataset:{itemsChanged:function(e,t){this.itemCount=e.itemCount,this.emit_itemsChanged(t)},destroy:function(){this.setDataset()}}},dataset:null,datasetRA_:null,emit_datasetChanged:B("datasetChanged","oldDataset"),emit_itemsChanged:B("itemsChanged","delta"),init:function(){pe.prototype.init.call(this);var e=this.dataset;e&&(this.dataset=null,this.setDataset(e))},setDataset:function(e){if(e=E(this,this.setDataset,e,"datasetRA_"),this.dataset!==e){var t,n=this.listen.dataset,i=this.dataset;n&&(i&&i.removeHandler(n,this),e&&e.addHandler(n,this)),this.itemCount=e?e.itemCount:0,this.dataset=e,(t=_(i,e))&&this.emit_itemsChanged(t),this.emit_datasetChanged(i)}},has:function(e){return this.dataset?this.dataset.has(e):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},getValues:function(e){return this.dataset?this.dataset.getValues(e):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(e){return this.dataset?this.dataset.top(e):[]},forEach:function(e){if(this.dataset)return this.dataset.forEach(e)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset(),pe.prototype.destroy.call(this)}}),_e=C(F,{className:"basis.data.ReadOnlyDataset",propertyDescriptors:{itemCount:"itemsChanged","pick()":"itemsChanged","getItems()":"itemsChanged"},itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:B("itemsChanged","delta")&&function(e){var t,n,i=0,r=0;if(t=e.inserted)for(;n=t[i];)this.items_[n.basisObjectId]=n,i++;if(t=e.deleted)for(;n=t[r];)delete this.items_[n.basisObjectId],r++;this.itemCount+=i-r,this.cache_=i==this.itemCount?e.inserted:null,V.itemsChanged.call(this,e)},init:function(){F.prototype.init.call(this),this.members_={},this.items_={}},has:function(e){return!(!e||!this.items_[e.basisObjectId])},getItems:function(){return this.cache_||(this.cache_=j(this.items_)),this.cache_},getValues:function(e){return this.getItems().map(n.getter(e||I))},pick:function(){for(var e in this.items_)return this.items_[e];return null},top:function(e){var t=[];if(e)for(var n in this.items_)if(t.push(this.items_[n])>=e)break;return t},forEach:function(e){for(var t=this.getItems(),n=0;n<t.length;n++)e(t[n])},destroy:function(){Te.preventAccumulations(this),F.prototype.destroy.call(this),this.cache_=z,this.itemCount=0,this.members_=null,this.items_=null}}),Te=C(_e,{className:"basis.data.Dataset",listen:{item:{destroy:function(e){this.remove([e])}}},init:function(){_e.prototype.init.call(this);var e=this.items;e&&(this.items=null,this.set(e))},add:function(e){var t,n=this.members_,i=this.listen.item,r=[];e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var a=e[s];if(a instanceof pe){var o=a.basisObjectId;n[o]||(n[o]=a,i&&a.addHandler(i,this),r.push(a))}}return r.length&&this.emit_itemsChanged(t={inserted:r}),t},remove:function(e){var t,n=this.members_,i=this.listen.item,r=[];e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var a=e[s];if(a instanceof pe){var o=a.basisObjectId;n[o]&&(i&&a.removeHandler(i,this),delete n[o],r.push(a))}}return r.length&&this.emit_itemsChanged(t={deleted:r}),t},set:function(e){if(!this.itemCount)return this.add(e);if(!e||!e.length)return this.clear();for(var t,n,i=this.members_,r=this.listen.item,s={},a=[],o=[],l=0;l<e.length;l++)(t=e[l])instanceof pe&&(s[u=t.basisObjectId]=t,i[u]||(i[u]=t,r&&t.addHandler(r,this),o.push(t)));for(var u in i)s[u]||(t=i[u],r&&t.removeHandler(r,this),delete i[u],a.push(t));return(n=b(o,a))&&this.emit_itemsChanged(n),n},sync:function(e){return this.setAndDestroyRemoved(e)},setAndDestroyRemoved:function(e){var t=this.set(e)||{},n=t.deleted;if(Te.setAccumulateState(!0),n)for(var i,r=0;i=n[r];r++)i.destroy();return Te.setAccumulateState(!1),t.inserted},clear:function(){Te.flushChanges(this);var e,t=this.getItems(),n=this.listen.item;if(t.length){if(n)for(var i=0;i<t.length;i++)t[i].removeHandler(n,this);this.emit_itemsChanged(e={deleted:t}),this.members_={}}return e},destroy:function(){this.clear(),_e.prototype.destroy.call(this)}}),Ee={datasetChanged:M,destroy:P};!function(){function e(e){o.call(e.dataset,e)}function t(){function t(t){var i=n[t];i&&(n[t]=null,i!==l&&e(i))}var n=c,i=u.emit_itemsChanged;u.emit_itemsChanged=function(e){t(this.basisObjectId),i.call(this,e)},c={};for(var r in n)t(r);u.emit_itemsChanged=i}function i(t){var n=this,i=n.basisObjectId,r=t.inserted,s=t.deleted,a=c[i];if(r&&s||a&&a.mixed)return a&&(c[i]=null,e(a)),void o.call(n,t);if(a){var l=r?"inserted":"deleted",u=a[l];if(u)u.push.apply(u,r||s);else{for(var h=r?"deleted":"inserted",d=a[h],f={},p=r||s,m=[],v=0,g=0;g<d.length;g++)f[d[g].basisObjectId]=g;for(g=0;g<p.length;g++){var y=p[g].basisObjectId;y in f==0?m.push(p[g]):(v||(d=S.call(d)),v++,d[f[y]]=null)}v&&(d=v<d.length?d.filter(Boolean):null,a[h]=d),m.length?(a[l]=m,d&&(a.mixed=!0)):(m=null,d||(c[i]=null))}}else c[i]={inserted:r,deleted:s,dataset:n,mixed:!1}}function r(){a=null,h&&(h=0,s())}function s(){u.emit_itemsChanged=o,t()}var a,o,l={},u=_e.prototype,c={},h=0;Te.flushChanges=function(t){var n=c[t.basisObjectId];n&&e(n),c[t.basisObjectId]=null},Te.preventAccumulations=function(e){var t=c[e.basisObjectId];t&&t!==l&&o.call(t.dataset,t),c[e.basisObjectId]=l},Te.setAccumulateState=function(e){e?(0==h&&(o=u.emit_itemsChanged,u.emit_itemsChanged=i,a||(a=n.setImmediate(r))),h++):0==(h-=h>0)&&s()}}(),t.exports={STATE:R,SUBSCRIPTION:A,AbstractData:F,Value:ne,ReadOnlyValue:ie,DeferredValue:ae,PipeValue:oe,Object:pe,Slot:ve,KeyObjectMap:ye,ReadOnlyDataset:_e,Dataset:Te,DatasetWrapper:be,isEqual:X,chainValueFactory:h,isConnected:g,getDatasetDelta:_,ResolveAdapter:w,createResolveFunction:D,resolveValue:O,resolveObject:me,resolveDataset:E,wrapData:N,wrapObject:x,wrap:function(e,t){var n=t?x:N;return Array.isArray(e)?e.map(n):n(e)}}},"g.js":function(e,t,n,i,r,s,a,o,l){var u=Object.prototype.hasOwnProperty,c=n.object.values,h={},d={priority:[],values:{},add:function(e,t){var n=e,i=e.toLowerCase();d[n]=i,h[i]=n,this.values[i]=n,-1==(t=t?this.priority.indexOf(t):-1)?this.priority.push(i):this.priority.splice(t,0,i)},getList:function(){return c(h)},isValid:function(e){return u.call(h,e)}};d.add("READY"),d.add("DEPRECATED"),d.add("UNDEFINED"),d.add("ERROR"),d.add("PROCESSING"),t.exports=d},"h.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var c={},h=1,d={},f={NONE:0,ALL:0,add:function(e,t,n){c[h]={handler:t,action:n},f[e]=h,f.ALL|=h,h<<=1},addProperty:function(e,t){var n={};n[t||e+"Changed"]=function(t,n){n&&f.unlink(e,t,n),t[e]&&f.link(e,t,t[e])},this.add(e.toUpperCase(),n,function(t,n){n[e]&&t(e,n,n[e])})},getMaskConfig:function(e){var t=d[e];if(!t){var n=[],i={},r=1;for(t=d[e]={actions:n,handler:i};e;){if(1&e){var s=c[r];n.push(s.action);for(var a in s.handler)i[a]=i[a]?u(i[a],s.handler[a]):s.handler[a]}r<<=1,e>>=1}}return t},link:function(e,t,n){var i=e+t.basisObjectId,r=n.subscribers_;r||(r=n.subscribers_={}),r[i]||(r[i]=t,1==(n.subscriberCount+=1)&&n.emit_subscribersChanged(1))},unlink:function(e,t,n){var i=e+t.basisObjectId,r=n.subscribers_;r&&r[i]&&(delete r[i],0==(n.subscriberCount-=1)&&(n.emit_subscribersChanged(-1),n.subscribers_=null))},subscribe:function(e,t){for(var n,i=this.getMaskConfig(t),r=0;n=i.actions[r];r++)n(f.link,e);e.addHandler(i.handler)},unsubscribe:function(e,t){for(var n,i=this.getMaskConfig(t),r=0;n=i.actions[r++];)n(f.unlink,e);e.removeHandler(i.handler)},changeSubscription:function(e,t,n){var i=t^n;if(i){var r=f.getMaskConfig(t),s=f.getMaskConfig(n);e.removeHandler(r.handler),e.addHandler(s.handler);for(var a=1;i;){if(1&i){var o=c[a];t&a?o.action(f.unlink,e):o.action(f.link,e)}a<<=1,i>>=1}}}};t.exports=f},"i.js":function(e,t,n,i,r,s,a,o,l){function u(){this.fn.call(this.context,this.source)}function c(e,t,i,r,s){var a=e[r]||null,o=null;if(i&&t!==u&&n.fn.isFactory(i)&&(i=i.call(s||e,s||e)),i&&i.bindingBridge&&(i=c(o=a&&a.source===i?a:new f(e,t,i,p),u,i.bindingBridge.get(i),"next")),r&&a!==o){for(var l=a;l;){var h=l;h.detach(),l=h.next,h.next=null}o&&o.attach(v),e[r]=o}return i}var h={},d=function(e,t,n,i){this.context=e,this.fn=t,this.source=n,this.handler=i};d.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var f=function(){d.apply(this,arguments)};f.prototype=new d,f.prototype.attach=function(e){this.source.bindingBridge.attach(this.source,this.handler,this,e)},f.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var p=function(){this.fn.call(this.context,this.source)},m=function(){this.fn.call(this.context,null)},v=function(){this.fn.call(this.context,c(h,null,this.source.bindingBridge.get(this.source)))};t.exports={DEFAULT_CHANGE_ADAPTER_HANDLER:p,DEFAULT_DESTROY_ADAPTER_HANDLER:m,ResolveAdapter:d,BBResolveAdapter:f,createResolveFunction:function(e){return function t(n,i,r,s,a){var o=n[s]||null,l=null;if(i!==u&&"function"==typeof r&&(r=r.call(a||n,a||n)),r&&r.bindingBridge&&(r=t(l=o&&o.source===r?o:new f(n,i,r,p),u,r.bindingBridge.get(r),"next")),r instanceof e==0&&(r=null),s&&o!==l){for(var c=o;c;){var h=c;h.detach(),c=h.next,h.next=null}l&&l.attach(m),n[s]=l}return r}},resolveValue:c}},"1g.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=e.syncAction();if(t&&"function"==typeof t.then){var n=e.syncAction;e.state!=f.PROCESSING&&e.setState(f.PROCESSING),t.then(function(){e.syncAction===n&&e.state==f.PROCESSING&&e.setState(f.READY)},function(t){e.syncAction===n&&e.state==f.PROCESSING&&e.setState(f.ERROR,t)})}}var c=n.require("./2.js"),h=c.Emitter,d=c.create,f=n.require("./g.js"),p=n.require("./h.js"),m=n.require("./i.js").resolveValue,v=n.PROXY,g={subscribersChanged:function(e){this.set(e.subscriberCount>0)}},y=h.subclass({className:"basis.data.AbstractData",propertyDescriptors:{state:"stateChanged",active:"activeChanged",subscriberCount:"subscribersChanged",subscribeTo:!1,syncAction:!1,syncEvents:!1},state:f.UNDEFINED,stateRA_:null,emit_stateChanged:d("stateChanged","oldState"),active:!1,activeRA_:null,emit_activeChanged:d("activeChanged"),subscribeTo:p.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:d("subscribersChanged","delta"),syncEvents:n.Class.oneFunctionProperty(function(){this.isSyncRequired()&&u(this)},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){if(h.prototype.init.call(this),this.active&&(this.active===v&&(this.active=new n.Token(this.subscriberCount>0),this.addHandler(g,this.active)),this.active=!!m(this,this.setActive,this.active,"activeRA_"),this.active&&this.addHandler(p.getMaskConfig(this.subscribeTo).handler)),this.state!=f.UNDEFINED){var e=this.state;"string"!=typeof this.state&&(e=m(this,this.setState,e,"stateRA_")),e&&!f.isValid(e)&&(e=!1),this.state=e||f.UNDEFINED}var t=this.syncAction;t&&(this.syncAction=null,this.setSyncAction(t))},setState:function(e,t){e=m(this,this.setState,e,"stateRA_")||f.UNDEFINED;var n=String(e);if(!f.isValid(n))return!1;if(this.stateRA_&&void 0===t&&(t=e.data),this.state!=n||this.state.data!=t){var i=this.state;return this.state=Object(n),this.state.data=t,this.emit_stateChanged(i),!0}return!1},deprecate:function(){this.state!=f.PROCESSING&&this.setState(f.DEPRECATED)},setActive:function(e){var t=this.activeRA_&&this.activeRA_.proxyToken;return e===v?(t||(t=new n.Token(this.subscriberCount>0),this.addHandler(g,t)),e=t):t&&e!==t&&(this.removeHandler(g,t),t=null),e=!!m(this,this.setActive,e,"activeRA_"),t&&this.activeRA_&&(this.activeRA_.proxyToken=t),this.active!=e&&(this.active=e,this.emit_activeChanged(),e?p.subscribe(this,this.subscribeTo):p.unsubscribe(this,this.subscribeTo),!0)},setSubscription:function(e){var t=this.subscribeTo,n=e&p.ALL;return!!(t^n)&&(this.subscribeTo=n,this.active&&p.changeSubscription(this,t,n),!0)},isSyncRequired:function(){return this.subscriberCount>0&&(this.state==f.UNDEFINED||this.state==f.DEPRECATED)},setSyncAction:function(e){var t=this.syncAction;"function"!=typeof e&&(e=null),this.syncAction=e,e?(t||this.addHandler(this.syncEvents),this.isSyncRequired()&&u(this)):t&&this.removeHandler(this.syncEvents)},destroy:function(){if(h.prototype.destroy.call(this),this.active)for(var e,t=p.getMaskConfig(this.subscribeTo),n=0;e=t.actions[n];n++)e(p.unlink,this);this.activeRA_&&m(this,!1,!1,"activeRA_"),this.stateRA_&&m(this,!1,!1,"stateRA_"),this.state=f.UNDEFINED}});t.exports=y},"j.js":function(e,t,n,i,r,s,a,o,l){function u(e){return"string"==typeof e?g.getElementById(e):e}function c(e){if(!p&&!this.ignoreTarget(e.sender,e)){var t=I(e.sender);e.mouseX<t.left||e.mouseX>t.right||e.mouseY<t.top||e.mouseY>t.bottom||(p=this,m={initX:e.mouseX,initY:e.mouseY,deltaX:0,minDeltaX:-1/0,maxDeltaX:1/0,deltaY:0,minDeltaY:-1/0,maxDeltaY:1/0},_("mousedown",d),_("touchstart",d),_("mousemove",h),_("touchmove",h),_("mouseup",d),_("touchend",d),R&&_("selectstart",b.kill),e.preventDefault(),this.prepareDrag(m,e))}}function h(e){var t=e.mouseX-m.initX,i=e.mouseY-m.initY;if(!f){if(!p.startRule(t,i))return;f=!0,p.emit_start(m,e)}p.axisX&&(m.deltaX=p.axisXproxy(n.number.fit(t,m.minDeltaX,m.maxDeltaX))),p.axisY&&(m.deltaY=p.axisYproxy(n.number.fit(i,m.minDeltaY,m.maxDeltaY))),p.emit_drag(m,e)}function d(e){T("mousedown",d),T("touchstart",d),T("mousemove",h),T("touchmove",h),T("mouseup",d),T("touchend",d),R&&T("selectstart",b.kill);var t=p,n=m;p=null,m=null,f&&(f=!1,t.emit_over(n,e)),e.die()}var f,p,m,v="basis.dragdrop",g=i.document,y=n.cleaner,b=n.require("./d.js"),_=b.addGlobalHandler,T=b.removeGlobalHandler,E=n.require("./2.js"),N=E.Emitter,x=E.create,C=n.require("./k.js").get,S=n.require("./l.js"),j=S.getBoundingRect,I=S.getViewportRect,R=b.getEventInfo("selectstart").supported,A=N.subclass({className:v+".DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:n.fn.$self,axisYproxy:n.fn.$self,prepareDrag:n.fn.$undef,startRule:n.fn.$true,ignoreTarget:function(e){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(e.tagName)},emit_start:x("start"),emit_drag:x("drag"),emit_over:x("over"),init:function(){N.prototype.init.call(this);var e=this.element,t=this.trigger;this.element=null,this.trigger=null,this.setElement(e,t),this.setBase(this.baseElement),y.add(this)},setElement:function(e,t){this.element=u(e),t=u(t)||this.element,this.trigger!==t&&(this.trigger&&(b.removeHandler(this.trigger,"mousedown",c,this),b.removeHandler(this.trigger,"touchstart",c,this)),this.trigger=t,this.trigger&&(b.addHandler(this.trigger,"mousedown",c,this),b.addHandler(this.trigger,"touchstart",c,this)))},setBase:function(e){this.baseElement=u(e)},getBase:function(){return"fixed"==C(this.element,"position")?i:this.baseElement?this.baseElement:"CSS1Compat"==g.compatMode?g.documentElement:g.body},isDragging:function(){return p===this},start:function(e){this.isDragging()||c.call(this,e)},stop:function(){this.isDragging()&&d()},destroy:function(){this.stop(),y.remove(this),N.prototype.destroy.call(this),this.setElement(),this.setBase()}}),k=n.Class(null,{className:v+".DeltaWriter",property:null,invert:!1,format:n.fn.$self,init:function(e){"function"==typeof this.property&&(this.property=this.property(e)),"function"==typeof this.invert&&(this.invert=this.invert(this.property)),this.value=this.read(e)},read:function(e){return e[this.property]},write:function(e,t){e[this.property]=t},applyDelta:function(e,t){this.invert&&(t=-t),this.write(e,this.format(this.value+t,t))}}),D=k.subclass({className:v+".StyleDeltaWriter",format:function(e){return e+"px"},read:function(e){return parseFloat(C(e,this.property))||0},write:function(e,t){e.style[this.property]=t}}),O=D.subclass({className:v+".StylePositionX",property:function(e){return"auto"==C(e,"left")&&"auto"!=C(e,"right")?"right":"left"},invert:function(e){return"right"==e}}),w=D.subclass({className:v+".StylePositionY",property:function(e){return"auto"==C(e,"top")&&"auto"!=C(e,"bottom")?"bottom":"top"},invert:function(e){return"bottom"==e}}),q=A.subclass({className:v+".MoveableElement",fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:O,axisY:w,emit_start:function(e,t){var n=this.element;if(n){var i=I(this.getBase()),r=j(n);e.element=n,this.axisX&&(e.axisX=new this.axisX(n),this.fixLeft&&(e.minDeltaX=i.left-r.left),this.fixRight&&(e.maxDeltaX=i.right-r.right)),this.axisY&&(e.axisY=new this.axisY(n),this.fixTop&&(e.minDeltaY=i.top-r.top),this.fixBottom&&(e.maxDeltaY=i.bottom-r.bottom))}A.prototype.emit_start.call(this,e,t)},emit_drag:function(e,t){e.element&&(e.axisX&&e.axisX.applyDelta(e.element,e.deltaX),e.axisY&&e.axisY.applyDelta(e.element,e.deltaY),A.prototype.emit_drag.call(this,e,t))}});t.exports={DragDropElement:A,MoveableElement:q,DeltaWriter:k,StyleDeltaWriter:D}},"k.js":function(e,t,n,i,r,s,a,o,l){var u,c=i.document;if("getComputedStyle"in i){var h={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},d=n.fn.runOnce(function(){var e=c.createElement("div");e.setAttribute("style","position:absolute;top:auto!important"),n.doc.body.add(e),"auto"==i.getComputedStyle(e).top&&(h={}),n.doc.remove(e)});u=function(e,t){var n,r=i.getComputedStyle(e);if(r){if(t in h&&d(),h[t]&&"static"!=r.position){var s=e.style.display;e.style.display="none",n=r.getPropertyValue(t),e.style.display=s}else n=r.getPropertyValue(t);return n}}}else{var f=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,p=/\dpx$/i,m=function(e,t){if(p.test(t))return parseInt(t,10)+"px";var n=e.style,i=e.runtimeStyle,r=n.left,s=i.left;return i.left=e.currentStyle.left,n.left=t||0,t=n.pixelLeft,n.left=r,i.left=s,t+"px"};u=function(e,t){var i=e.currentStyle;if(i){var r=i["float"==t?"styleFloat":n.string.camelize(t)],s=(r||"").match(f);return s&&s[2]&&"px"!=s[2]&&(r=m(e,r)),r}}}t.exports={get:u}},"l.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=0,n=0;if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();t=-r.top,n=-r.left}else if(p)t=i.pageYOffset||d.scrollTop,n=i.pageXOffset||d.scrollLeft;else{var s=h.body;e!==s&&(t=s.scrollTop-s.clientTop,n=s.scrollLeft-s.clientLeft)}return{left:n,top:t}}function c(e,t){var n=0,i=0,r=u(t);if(e&&e.getBoundingClientRect){var s=e.getBoundingClientRect();i=s.top,n=s.left}return{top:i+r.top,left:n+r.left}}var h=i.document,d=h.documentElement,f=n.require("./k.js").get,p="CSS1Compat"==h.compatMode;t.exports={getOffset:u,getOffsetParent:function(e){for(var t=e.offsetParent||d;t&&t!==d&&"static"==f(t,"position");)t=t.offsetParent;return t||d},getTopLeftPoint:c,getBoundingRect:function(e,t){var n=0,i=0,r=0,s=0,a=u(t);if(e&&e.getBoundingClientRect){var o=e.getBoundingClientRect();n=o.top,i=o.left,r=o.right,s=o.bottom}return{top:n+a.top,left:i+a.left,right:r+a.left,bottom:s+a.top,width:r-i,height:s-n}},getViewportRect:function(e,t){var n,r,s=e!==(p?h.documentElement:h.body)||t?c(e,t):u(),a=s.top,o=s.left;return e&&e!==i?(a+=e.clientTop,o+=e.clientLeft,n=e.clientWidth,r=e.clientHeight):(n=i.innerWidth||0,r=i.innerHeight||0),{top:a,left:o,right:o+n,bottom:a+r,width:n,height:r}}}},"m.js":function(e,t,n,i,r,s,a,o,l){t.exports={getDelta:n.require("./1h.js"),createRuleEvents:n.require("./1i.js"),SourceDataset:n.require("./1j.js"),Merge:n.require("./1k.js"),Subtract:n.require("./1l.js"),MapFilter:n.require("./1m.js"),Split:n.require("./1n.js"),Cloud:n.require("./1p.js"),Extract:n.require("./1q.js"),Filter:n.require("./1r.js"),Slice:n.require("./1s.js")}},"1h.js":function(e,t,n,i,r,s,a,o,l){t.exports=function(e,t){var n,i={};if(e&&e.length&&(n=i.inserted=e),t&&t.length&&(n=i.deleted=t),n)return i}},"1i.js":function(e,t,n,i,r,s,a,o,l){var u=n.object.extend,c=n.require("./2.js").createHandler;t.exports=function(e,t){return function t(n){return n?n.__extend__?n:("string"==typeof n||Array.isArray(n)||(n=null),u(c(n,e),{__extend__:t})):null}(t)}},"1j.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./2.js").create,c=n.require("./f.js").resolveDataset,h=n.require("./f.js").ReadOnlyDataset,d=n.require("./f.js").Dataset.setAccumulateState,f=n.require("./h.js");f.addProperty("source"),t.exports=h.subclass({className:"basis.data.dataset.SourceDataset",propertyDescriptors:{source:"sourceChanged",subtrahend:"subtrahendChanged"},active:n.PROXY,subscribeTo:f.SOURCE,source:null,emit_sourceChanged:u("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var e=this.source;this.source=null,this.sourceMap_={},h.prototype.init.call(this),e&&this.setSource(e)},setSource:function(e){if(e=c(this,this.setSource,e,"sourceRA_"),this.source!==e){var t=this.source,n=this.listen.source,i=n&&n.itemsChanged;this.source=null,d(!0),t&&(n&&t.removeHandler(n,this),i&&i.call(this,t,{deleted:t.getItems()})),this.source=e,this.emit_sourceChanged(t),e&&(n&&e.addHandler(n,this),i&&i.call(this,e,{inserted:e.getItems()})),d(!1)}},destroy:function(){this.setSource(),h.prototype.destroy.call(this),this.sourceMap_=null}})},"1k.js":function(e,t,n,i,r,s,a,o,l){var u=n.array.add,c=n.array.remove,h=n.require("./2.js").create,d=n.require("./2.js").Emitter,f=n.require("./f.js").resolveDataset,p=n.require("./f.js").ReadOnlyDataset,m=n.require("./1h.js"),v=n.require("./h.js");v.add("SOURCES",{sourcesChanged:function(e,t){var n;if(n=t.inserted)for(r=0;i=n[r];r++)v.link("source",e,i);if(n=t.deleted)for(var i,r=0;i=n[r];r++)v.unlink("source",e,i)}},function(e,t){for(var n,i=t.sources,r=0;n=i[r++];)e("source",t,n)});var g=function(e){return e>0},y=p.subclass({className:"basis.data.dataset.Merge",propertyDescriptors:{rule:"ruleChanged"},active:n.PROXY,subscribeTo:v.SOURCES,emit_sourcesChanged:h("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:g,emit_ruleChanged:h("ruleChanged","oldRule"),listen:{source:{itemsChanged:function(e,t){var n,i,r=this.members_,s={};if(t.inserted)for(a=0;n=t.inserted[a];a++)r[i=n.basisObjectId]?r[i].count++:r[i]={count:1,isMember:!1,object:n},s[i]=r[i];if(t.deleted)for(var a=0;n=t.deleted[a];a++)s[i=n.basisObjectId]=r[i],r[i].count--;this.applyRule(s)}},sourceValue:{destroy:function(e){this.removeSource(e)}}},init:function(){p.prototype.init.call(this);var e=this.sources;this.sources=[],this.sourcesMap_={},this.sourceValues_=[],e&&this.setSources(e)},setRule:function(e){if(e=n.getter(e||g),this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(e){var t,n,i,r=this.members_,s=this.rule,a=this.sources.length,o=[],l=[];e||(e=r);for(var u in e)t=r[u],(n=a&&t.count&&s(t.count,a))!=t.isMember&&(n?(t.isMember=!0,o.push(t.object)):(t.isMember=!1,l.push(t.object))),0==t.count&&delete r[u];return(i=m(o,l))&&this.emit_itemsChanged(i),i},addDataset_:function(e){this.sources.push(e),this.listen.source&&e.addHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n]?t[n].count++:t[n]={count:1,isMember:!1,object:e.items_[n]};return!0},removeDataset_:function(e){c(this.sources,e),this.listen.source&&e.removeHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n].count--},updateDataset_:function(e){var t,n,i,r=this.owner,s=r.sourcesMap_,a=f(this,r.updateDataset_,e,"adapter",r);if(this.dataset!==a){if(a){o=(s[a.basisObjectId]||0)+1;s[a.basisObjectId]=o,1==o&&(r.addDataset_(a),t=[a])}if(this.dataset){var o=(s[this.dataset.basisObjectId]||0)-1;s[this.dataset.basisObjectId]=o,0==o&&(r.removeDataset_(this.dataset),n=[this.dataset])}if(this.dataset=a,r.applyRule(),i=m(t,n)){var l=r.sourceDelta_;l?(i.inserted&&i.inserted.forEach(function(e){c(this.deleted,e)||u(this.inserted,e)},l),i.deleted&&i.deleted.forEach(function(e){c(this.inserted,e)||u(this.deleted,e)},l)):r.emit_sourcesChanged(i)}return i}},getSourceValues:function(){return this.sourceValues_.map(function(e){return e.source})},addSource:function(e){if(e&&("object"==typeof e||"function"==typeof e)&&!this.hasSource(e)){var t={owner:this,source:e,adapter:null,dataset:null};this.sourceValues_.push(t),this.updateDataset_.call(t,e),this.listen.sourceValue&&e instanceof d&&e.addHandler(this.listen.sourceValue,this)}},removeSource:function(e){for(var t,n=0;t=this.sourceValues_[n];n++)if(t.source===e)return this.listen.sourceValue&&e instanceof d&&e.removeHandler(this.listen.sourceValue,this),this.updateDataset_.call(t,null),void this.sourceValues_.splice(n,1)},hasSource:function(e){for(var t,n=0;t=this.sourceValues_[n];n++)if(t.source===e)return!0;return!1},setSources:function(e){var t,n=this.sourceValues_.map(function(e){return e.source}),i=[],r=[];e||(e=[]),this.sourceDelta_={inserted:i,deleted:r};for(var s=0;s<e.length;s++){var a=e[s];c(n,a)||this.addSource(a)}return n.forEach(this.removeSource,this),this.sourceDelta_=null,(t=m(i,r))&&this.emit_sourcesChanged(t),t},destroy:function(){this.setSources(),p.prototype.destroy.call(this),this.sourceValues_=null,this.sourcesMap_=null,this.sourceDelta_=null,this.sources=null}});y.UNION=g,y.INTERSECTION=function(e,t){return e==t},y.DIFFERENCE=function(e){return 1==e},y.MORE_THAN_ONE_INCLUDE=function(e,t){return 1==t||e>1},y.AT_LEAST_ONE_EXCLUDE=function(e,t){return 1==t||e<t},t.exports=y},"1.js":function(e,t,n,i,r,s,a,o,l){function u(){return R.pop()||h.createDocumentFragment()}function c(e){var t=e.nodes;if(t)for(var n,i=t.length-1;n=t[i];i--)n.parentNode.insertBefore(n,n.nextSibling)}var h=i.document,d=n.Class,f=n.require("./2.js").create,p=n.require("./3.js").Template,m=n.require("./6.js").MARKER,v=n.require("./8.js").TemplateSwitcher,g=n.require("./e.js"),y=g.Node,b=g.PartitionNode,_=g.GroupingNode,T=1,E=function(){var e={},t=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(t,n){e[t]||(e[t]=n)},process:function(n,i){var r,s=i.match(t);return s&&(r=e[s[1]],i=s[2]||n),r?r(i):i}}}();E.add("data",function(e){return{events:"update",getter:"data."+e}}),E.add("satellite",function(e){return{events:"satelliteChanged",getter:function(t){return t.satellite[e]?t.satellite[e].element:null}}});var N,x=d.customExtendProperty({$role:{events:"ownerSatelliteNameChanged",getter:function(e){if(e.role){var t=e.roleId&&e.binding[e.roleId];return t&&"function"==typeof t.getter&&void 0===(t=t.getter(e))?"":e.role+(void 0!==t?"("+t+")":"")}return e.ownerSatelliteName||""}},active:{events:"activeChanged",getter:function(e){return e.active}},state:{events:"stateChanged",getter:function(e){return String(e.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(e){return String(e.childNodesState)}},childCount:{events:"childNodesModified",getter:function(e){return e.childNodes?e.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(e){return!!e.firstChild}},empty:{events:"childNodesModified",getter:function(e){return!e.firstChild}}},function(e,t){e.bindingId=T++;for(var i in t){var r=null,s=t[i];w&&s instanceof w||n.resource.isResource(s)?r={events:"satelliteChanged",getter:function(e,t){var n="function"==typeof t?t:null,i=function(r){if(i=!1,n){if((t=n())instanceof w==0)return;n=null}r.setSatellite(e,t)};return function(t){return i&&i(t),n||(t.satellite[e]?t.satellite[e].element:null)}}(i,s)}:s&&("string"==typeof s?s=E.process(i,s):s.bindingBridge&&(s=n.fn.$const(s)),r="object"!=typeof s?{getter:"function"==typeof s?s:n.getter(s)}:Array.isArray(s)?{events:s[0],getter:n.getter(s[1])}:{events:s.events,getter:n.getter(s.getter)}),e[i]=r}}),C={attach:function(e,t,n){e.addHandler(t,n)},detach:function(e,t,n){e.removeHandler(t,n)}},S=d.extensibleProperty({select:function(e){this.isDisabled()||this.selectedRA_||(this.contextSelection&&this.contextSelection.multiple?this.select(e.ctrlKey||e.metaKey):this.select())}}),j={"*":function(e){var t=this.templateSwitcher_;t&&t.ruleEvents&&t.ruleEvents[e.type]&&this.setTemplate(t.resolve(this))}},I=new p("<div/>"),R=[],A=function(e){return{propertyDescriptors:{action:!1,binding:!1,template:"templateChanged",tmpl:"templateChanged",element:!1,childNodesElement:!1},template:I,emit_templateChanged:f("templateChanged"),templateSwitcher_:null,binding:x,action:S,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=u(),e.init.call(this)},postInit:function(){e.postInit.call(this);var t=this.template;if(t){var n=this.childNodesElement;this.template=null,this.setTemplate(t),R.push(n),this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var e=this.element,t=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,C);if(t.childNodesHere&&(t.childNodesElement=t.childNodesHere.parentNode,t.childNodesElement.insertPoint=t.childNodesHere),this.tmpl=t,this.element=t.element,this.childNodesElement=t.childNodesElement||t.element,1!=this.childNodesElement.nodeType&&(this.childNodesElement=h.createDocumentFragment()),this.grouping){this.grouping.syncDomRefs();for(var n=this;n.grouping;)n=n.grouping;for(var i=n,r=i.lastChild;r;r=r.previousSibling)r instanceof D?i.insertBefore(r,r.nextSibling):c(r);c(i.nullGroup)}else for(var s=this.lastChild;s;s=s.previousSibling)this.insertBefore(s,s.nextSibling);if(this instanceof D&&c(this),e&&e!==this.element&&11!=e.nodeType){var a=e&&e.parentNode;a&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(e,this.element),this.element.parentNode!==a&&a.replaceChild(this.element,e))}this.emit_templateChanged()},setTemplate:function(e){var t,n=this.templateSwitcher_;if(e instanceof v&&(e=(t=e).resolve(this)),e instanceof p==0&&(e=null),e){t&&(this.templateSwitcher_=t,n||this.addHandler(j,this)),n&&n.resolve(this)!==e&&(this.templateSwitcher_=null,this.removeHandler(j,this));var i=this.tmpl,r=this.template;r!==e&&(this.template=e,this.templateSync(),r&&r.clearInstance(i))}},updateBind:function(e){var t=this.binding[e],n=t&&t.getter;n&&this.tmpl&&this.tmpl.set(e,n(this)),this.roleId==e&&this.updateBind("$roleId")},templateAction:function(e,t){var n=this.action[e];n&&n.call(this,t)},focus:function(e){var t=this.tmpl?this.tmpl.focus||this.element:null;t&&(N&&(N=n.clearImmediate(N)),N=n.setImmediate(function(){try{t.focus(),e&&t.select()}catch(e){}}))},blur:function(){var e=this.tmpl?this.tmpl.focus||this.element:null;if(e)try{e.blur()}catch(e){}},destroy:function(){var t=this.template,n=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(j,this)),t.clearInstance(this.tmpl),e.destroy.call(this),this.tmpl=null,this.element=null,this.childNodesElement=null;var i=n&&n.parentNode;i&&1==i.nodeType&&i.removeChild(n)}}},k=function(e){return{insertBefore:function(t,n){var i=((t=e.insertBefore.call(this,t,n)).groupNode||this).childNodesElement||this.childNodesElement,r=t.nextSibling,s=r&&r.element.parentNode==i?r.element:null,a=t.element,o=s||i.insertPoint||null;return a.parentNode===i&&a.nextSibling===o||i.insertBefore(a,o),t},removeChild:function(t){e.removeChild.call(this,t);var n=t.element,i=n.parentNode;return i&&i.removeChild(n),t},clear:function(t){if(t)for(var n=this.firstChild;n;){var i=n.element,r=i.parentNode;r&&r.removeChild(i),n=n.nextSibling}e.clear.call(this,t)},setChildNodes:function(t,n){var i=h.createDocumentFragment(),r=this.grouping||this,s=r.childNodesElement;r.childNodesElement=i,e.setChildNodes.call(this,t,n),s.insertBefore(i,s.insertPoint||null),r.childNodesElement=s}}},D=d(b,A,{className:"basis.ui.PartitionNode",binding:{title:"data:"}}),O=d(_,k,{className:"basis.ui.GroupingNode",childClass:D,groupingClass:d.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(e){this.syncDomRefs(),_.prototype.emit_ownerChanged.call(this,e)},init:function(){this.element=this.childNodesElement=h.createDocumentFragment(),_.prototype.init.call(this)},syncDomRefs:function(){var e=this,t=this.owner,n=null;t&&(n=t.tmpl&&t.tmpl.groupsElement||t.childNodesElement);do{e.element=e.childNodesElement=n}while(e=e.grouping)},destroy:function(){_.prototype.destroy.call(this),this.element=null,this.childNodesElement=null}}),w=d(y,A,k,{className:"basis.ui.Node",binding:{selected:{events:"select unselect",getter:function(e){return e.selected}},unselected:{events:"select unselect",getter:function(e){return!e.selected}},disabled:{events:"disable enable",getter:function(e){return e.isDisabled()}},enabled:{events:"disable enable",getter:function(e){return!e.isDisabled()}},tabindex:{events:"enable disable",getter:function(e){return e.isDisabled()?-1:e.tabindex||0}}},childClass:d.SELF,childFactory:function(e){return new this.childClass(e)},groupingClass:O}),q=w.subclass({className:"basis.ui.ShadowNodeList",emit_ownerChanged:function(e){w.prototype.emit_ownerChanged.call(this,e),this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(e){return e.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(e){this.appendChild(e.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:"basis.ui.ShadowNode",getElement:function(e){return e.element},templateSync:function(){w.prototype.templateSync.call(this);var e=this.getElement(this.delegate);e&&(e[m]=this.delegate.element[m],this.element=e)},listen:{delegate:{templateChanged:function(){var e=this.element,t=e.parentNode,n=this.getElement(this.delegate);n&&(n[m]=this.delegate.element[m]),this.element=n||this.tmpl.element,t&&t.replaceChild(this.element,e)}}}}});t.exports={BINDING_PRESET:E,Node:w,PartitionNode:D,GroupingNode:O,ShadowNodeList:q,ShadowNode:q.prototype.childClass}},"1m.js":function(e,t,n,i,r,s,a,o,l){var u=n.fn.$self,c=n.fn.$true,h=n.fn.$false,d=n.require("./2.js").create,f=n.require("./1i.js"),p=n.require("./1h.js"),m=n.require("./f.js").Object,v=n.require("./f.js").isEqual,g=n.require("./f.js").Dataset.setAccumulateState,y=n.require("./1j.js"),b={itemsChanged:function(e,t){var n,i,r,s=this.sourceMap_,a=this.members_,o=[],l=[],u=this.ruleEvents;if(g(!0),t.inserted)for(c=0;n=t.inserted[c];c++)((r=this.map?this.map(n):n)instanceof m==0||this.filter(r))&&(r=null),u&&n.addHandler(u,this),s[n.basisObjectId]={sourceObject:n,member:r},r&&(a[h=r.basisObjectId]?a[h]++:(a[h]=1,o.push(r)),this.addMemberRef&&this.addMemberRef(r,n));if(t.deleted)for(var c=0;n=t.deleted[c];c++)if(i=n.basisObjectId,r=s[i].member,u&&n.removeHandler(u,this),delete s[i],r){var h=r.basisObjectId;0==--a[h]&&(delete a[h],l.push(r)),this.removeMemberRef&&this.removeMemberRef(r,n)}g(!1),(t=p(o,l))&&this.emit_itemsChanged(t)}};t.exports=y.subclass({className:"basis.data.dataset.MapFilter",propertyDescriptors:{rule:"ruleChanged",addMemberRef:!1,removeMemberRef:!1,ruleEvents:!1},map:u,filter:h,rule:n.getter(c),emit_ruleChanged:d("ruleChanged","oldRule"),ruleEvents:f(function(e){var t=this.map?this.map(e):e;(t instanceof m==0||this.filter(t))&&(t=null);var n=this.sourceMap_[e.basisObjectId],i=n.member;if(!v(i,t)){var r,s,a,o=this.members_;if(n.member=t,i){var l=i.basisObjectId;this.removeMemberRef&&this.removeMemberRef(i,e),0==--o[l]&&(delete o[l],a=[i])}if(t){var u=t.basisObjectId;this.addMemberRef&&this.addMemberRef(t,e),o[u]?o[u]++:(o[u]=1,s=[t])}(r=p(s,a))&&this.emit_itemsChanged(r)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:b},setMap:function(e){if("function"!=typeof e&&(e=u),this.map!==e)return this.map=e,this.applyRule()},setFilter:function(e){if("function"!=typeof e&&(e=h),this.filter!==e)return this.filter=e,this.applyRule()},setRule:function(e){if(e=n.getter(e||c),this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e,t,n,i,r,s,a,o=this.sourceMap_,l=this.members_,u=[],c=[];for(var h in o)r=(s=o[h]).sourceObject,e=s.member,((t=this.map?this.map(r):r)instanceof m==0||this.filter(t))&&(t=null),v(e,t)||(s.member=t,e&&(n=e.basisObjectId,this.removeMemberRef&&this.removeMemberRef(e,r),l[n]--),t&&(i=t.basisObjectId,this.addMemberRef&&this.addMemberRef(t,r),i in l?l[i]++:(l[i]=1,u.push(t))));for(n in this.items_)0==l[n]&&(delete l[n],c.push(this.items_[n]));return(a=p(u,c))&&this.emit_itemsChanged(a),a}})},"1n.js":function(e,t,n,i,r,s,a,o,l){var u=n.fn.$undef,c=n.require("./f.js").ReadOnlyDataset,h=n.require("./f.js").DatasetWrapper,d=n.require("./f.js").KeyObjectMap,f=n.require("./1m.js"),p=n.require("./1o.js");t.exports=f.subclass({className:"basis.data.dataset.Split",subsetClass:c,subsetWrapperClass:h,keyMap:null,map:function(e){return this.keyMap.resolve(e)},rule:n.getter(u),setRule:function(e){if(e=n.getter(e||u),this.rule!==e){var t=this.rule;return this.rule=e,this.keyMap.keyGetter=e,this.emit_ruleChanged(t),this.applyRule()}},addMemberRef:function(e,t){e.dataset.emit_itemsChanged({inserted:[t]})},removeMemberRef:function(e,t){e.dataset.emit_itemsChanged({deleted:[t]})},init:function(){this.keyMap&&this.keyMap instanceof d!=0||(this.keyMap=p(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass)),f.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){f.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}})},"1o.js":function(e,t,n,i,r,s,a,o,l){var u=n.object.extend,c=n.require("./f.js").KeyObjectMap;t.exports=function(e,t,n,i){return new c(u({keyGetter:t,itemClass:n,create:function(e,t){var n=c.prototype.create.call(this,e,t);return n.ruleValue=e,n.setDataset(new i({ruleValue:e})),n}},e))}},"1p.js":function(e,t,n,i,r,s,a,o,l){var u=n.fn.$self,c=n.fn.$undef,h=n.require("./f.js").ReadOnlyDataset,d=n.require("./f.js").DatasetWrapper,f=n.require("./f.js").KeyObjectMap,p=n.require("./f.js").Dataset.setAccumulateState,m=n.require("./1j.js"),v=n.require("./1o.js"),g=n.require("./1i.js"),y=n.require("./1h.js"),b={itemsChanged:function(e,t){var n,i,r=this.sourceMap_,s=this.members_,a=this.ruleEvents,o=[],l=[];if(p(!0),n=t.inserted)for(m=0;f=n[m];m++){var u=this.rule(f),c={object:f,list:{}};if(r[f.basisObjectId]=c,Array.isArray(u))for(var h=0,d={};h<u.length;h++)(i=this.keyMap.get(u[h],!0))&&!d[i.basisObjectId]&&(d[g=i.basisObjectId]=!0,c.list[g]=i,i.dataset.emit_itemsChanged({inserted:[f]}),s[g]?s[g]++:(o.push(i),s[g]=1));a&&f.addHandler(a,this)}if(n=t.deleted)for(var f,m=0;f=n[m];m++){var v=f.basisObjectId,u=r[v].list;delete r[v];for(var g in u)(i=u[g]).dataset.emit_itemsChanged({deleted:[f]}),--s[g]||(delete s[g],l.push(i));a&&f.removeHandler(a,this)}p(!1),(t=y(o,l))&&this.emit_itemsChanged(t)}};t.exports=m.subclass({className:"basis.data.dataset.Cloud",subsetClass:h,subsetWrapperClass:d,rule:n.getter(c),ruleEvents:g(function(e){var t,n,i=this.sourceMap_,r=this.members_,s=e.basisObjectId,a=i[s].list,o=i[s].list={},l=this.rule(e),u=[],c=[];if(Array.isArray(l))for(var h=0;h<l.length;h++)(n=this.keyMap.get(l[h],!0))&&!n.has(e)&&(o[d=n.basisObjectId]=n,a[d]||(n.dataset.emit_itemsChanged({inserted:[e]}),r[d]?r[d]++:(u.push(n),r[d]=1)));for(var d in a)o[d]||((n=a[d]).dataset.emit_itemsChanged({deleted:[e]}),--r[d]||(delete r[d],c.push(n)));(t=y(u,c))&&this.emit_itemsChanged(t)},"update"),keyMap:null,map:u,listen:{source:b},init:function(){this.keyMap&&this.keyMap instanceof f!=0||(this.keyMap=v(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass)),m.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){m.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}})},"1q.js":function(e,t,n,i,r,s,a,o,l){function u(e,t,n){var i=e.sourceMap_[t.basisObjectId];if(i&&i.visited!==n){for(r=i;r=r.ref;)if(r.object===e.source)return!0;i.visited=n;for(var r=i;r=r.ref;)if(u(e,r.object,n||{}))return!0}}function c(e,t,n){for(var i=e.sourceMap_,r=e.members_,s=p(t),a=[],o=0;o<s.length;o++){var l=s[o],u=l.basisObjectId;u||(n=l.ref,u=(l=l.object).basisObjectId);var c=i[u];if(c)c.ref={object:n,ref:c.ref};else if(c=i[u]={source:l,ref:{object:n,ref:null},visited:null,value:null},l instanceof v){var h=e.rule(l)||null;(h instanceof v||h instanceof y)&&(c.value=h,s.push({object:h,ref:l})),r[u]=c,a.push(l),e.ruleEvents&&l.addHandler(e.ruleEvents,e)}else{l.addHandler(N,e);for(var d=0,f=l.getItems();d<f.length;d++)s.push({object:f[d],ref:l})}}return a}function h(e,t,n){for(var i=e.sourceMap_,r=e.members_,s=p(t),a=[],o=0;o<s.length;o++){var l=s[o],c=l.basisObjectId;c||(n=l.ref,c=(l=l.object).basisObjectId);for(var h=i[c],d=h.value,f=h,m=h;f=f.ref;){if(g(f.object,n)){m.ref=f.ref;break}m=f}if(h.ref)d&&!u(e,l)&&(h.value=null,s.push({object:d,ref:l}));else{if(l instanceof v)delete r[c],a.push(l),e.ruleEvents&&l.removeHandler(e.ruleEvents,e),d&&s.push({object:d,ref:l});else{l.removeHandler(N,e);for(var y=0,b=l.getItems();y<b.length;y++)s.push({object:b[y],ref:l})}delete i[c]}}return a}var d=n.object.values,f=n.fn.$undef,p=n.array.from,m=n.require("./2.js").create,v=n.require("./f.js").Object,g=n.require("./f.js").isEqual,y=n.require("./f.js").ReadOnlyDataset,b=n.require("./1j.js"),_=n.require("./1i.js"),T=n.require("./1h.js"),E=function(e,t){var t,n=t.inserted,i=t.deleted;n&&(n=c(this,n,e)),i&&(i=h(this,i,e)),(t=T(n,i))&&this.emit_itemsChanged(t)},N={itemsChanged:E,destroy:function(e){for(var t=this.sourceMap_,n=t[e.basisObjectId];n=n.ref;)t[n.object.basisObjectId].value=null;delete t[e.basisObjectId]}};t.exports=b.subclass({className:"basis.data.dataset.Extract",propertyDescriptors:{rule:"ruleChanged"},rule:n.getter(f),emit_ruleChanged:m("ruleChanged","oldRule"),ruleEvents:_(function(e){var t,n,i,r=this.sourceMap_[e.basisObjectId],s=this.rule(e)||null,a=r.value;g(s,a)||((s instanceof v||s instanceof y)&&(t=c(this,s,e)),a&&(n=h(this,a,e)),r.value=s,(i=T(t,n))&&this.emit_itemsChanged(i))},"update"),listen:{source:{itemsChanged:E}},setRule:function(e){if(e=n.getter(e||f),this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e,t={},n={};for(var i in this.sourceMap_){var r=this.sourceMap_[i],s=r.source;if(s instanceof v){var a=this.rule(s)||null,o=r.value;if(g(a,o))continue;if(a instanceof v||a instanceof y)for(var l=c(this,a,s),u=0;u<l.length;u++)n[m=(p=l[u]).basisObjectId]?delete n[m]:t[m]=p;if(o)for(var f=h(this,o,s),u=0;u<f.length;u++){var p=f[u],m=p.basisObjectId;t[m]?delete t[m]:n[m]=p}r.value=a}}return(e=T(d(t),d(n)))&&this.emit_itemsChanged(e),e}})},"1r.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1m.js");t.exports=u.subclass({className:"basis.data.dataset.Filter",filter:function(e){return!this.rule(e)}})},"1s.js":function(e,t,n,i,r,s,a,o,l){function u(e){return e!==e?void 0:e}function c(e,t){if(!e.length)return 0;var n,i,r,s,a=t.value,o=t.object.basisObjectId,l=0,u=e.length-1;do{if(r=l+u>>1,s=e[r],n=s.value,a<n)u=r-1;else if(a>n)l=r+1;else if(i=s.object.basisObjectId,o<i)u=r-1;else{if(!(o>i))return r;l=r+1}}while(l<=u);return r+(n==a?i<o:n<a)}function h(e,t){return+(e.value>t.value)||-(e.value<t.value)||e.object.basisObjectId-t.object.basisObjectId}var d=n.fn.$true,f=n.object.values,p=n.object.slice,m=n.require("./2.js").create,v=n.require("./f.js").Value,g=n.require("./1i.js"),y=n.require("./1h.js"),b=n.require("./1j.js"),_={itemsChanged:function(e,t){var n,i=this.sourceMap_,r=this.index_,s=this.ruleEvents,a=!1,o=!1,l=t.inserted,d=t.deleted;if(d){d.length>r.length-d.length&&(a=!0,o=d.length!=r.length,r.length=0);for(m=0;p=d[m];m++)a||(n=i[p.basisObjectId],r.splice(c(r,n),1)),delete i[p.basisObjectId],s&&p.removeHandler(s,this);if(o)for(var f in i)n=i[f],r.splice(c(r,n),0,n)}if(l){o=!r.length;for(var p,m=0;p=l[m];m++)n={object:p,value:u(this.rule(p))},i[p.basisObjectId]=n,o?r.push(n):r.splice(c(r,n),0,n),s&&p.addHandler(s,this);o&&r.sort(h)}this.applyRule()}};t.exports=b.subclass({className:"basis.data.dataset.Slice",propertyDescriptors:{limit:"rangeChanged",offset:"rangeChanged",orderDesc:"ruleChanged",rule:"ruleChanged"},rule:n.getter(d),emit_ruleChanged:m("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:g(function(e){var t=this.sourceMap_[e.basisObjectId],n=u(this.rule(e)),i=this.index_;if(n!==t.value){var r=c(i,t),s=i[r-1],a=i[r+1];t.value=n,(s&&(s.value>n||s.value==n&&s.object.basisObjectId>t.object.basisObjectId)||a&&(a.value<n||a.value==n&&a.object.basisObjectId<t.object.basisObjectId))&&(i.splice(r,1),i.splice(c(i,t),0,t),this.applyRule())}},"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:_},emit_rangeChanged:m("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[],b.prototype.init.call(this)},setRange:function(e,t){var n=this.offset,i=this.limit,r=!1;return n==e&&i==t||(this.offset=e,this.limit=t,r=this.applyRule(),this.emit_rangeChanged(n,i)),r},setOffset:function(e){return this.setRange(e,this.limit)},setLimit:function(e){return this.setRange(this.offset,e)},setRule:function(e,t){if(e=n.getter(e||d),t=!!t,this.rule!=e||this.orderDesc!=t){var i=this.rule,r=this.orderDesc;if(this.rule!=e){for(var s=this.index_,a=0;a<s.length;a++)s[a].value=u(e(s[a].object));s.sort(h),this.rule=e}return this.orderDesc=t,this.rule=e,this.emit_ruleChanged(i,r),this.applyRule()}},applyRule:function(){var e=this.offset,t=e+this.limit;this.orderDesc&&(t=(e=this.index_.length-t)+this.limit);for(var n,i=p(this.members_),r=this.index_.slice(Math.max(0,e),Math.max(0,t)),s=[],a=0;u=r[a];a++)i[o=u.object.basisObjectId]?delete i[o]:(s.push(u.object),this.members_[o]=u.object);for(var o in i)delete this.members_[o];if(this.left_)for(var l in this.left_){u=this.index_[this.orderDesc?t+Number(l)-1:e-Number(l)];this.left_[l].set(u?u.object:null)}if(this.right_)for(var l in this.right_){var u=this.index_[this.orderDesc?e-Number(l):t+Number(l)-1];this.right_[l].set(u?u.object:null)}return(n=y(s,f(i)))&&this.emit_itemsChanged(n),n},left:function(e){e=parseInt(e,10)||0,this.left_||(this.left_={});var t=this.left_[e];if(!t){var n=this.offset,i=n+this.limit;this.orderDesc&&(i=(n=this.index_.length-i)+this.limit);var r=this.index_[this.orderDesc?i+e-1:n-e];t=this.left_[e]=new v({value:r?r.object:null})}return t},right:function(e){e=parseInt(e,10)||0,this.right_||(this.right_={});var t=this.right_[e];if(!t){var n=this.offset,i=n+this.limit;this.orderDesc&&(i=(n=this.index_.length-i)+this.limit);var r=this.index_[this.orderDesc?n-e:i+e-1];t=this.right_[e]=new v({value:r?r.object:null})}return t},destroy:function(){if(b.prototype.destroy.call(this),this.left_){for(var e in this.left_)this.left_[e].destroy();this.left_=null}if(this.right_){for(var e in this.right_)this.right_[e].destroy();this.right_=null}this.index_=null}})},"n.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1t.js"),c=n.require("./1u.js");t.exports={ObjectSet:u,Expression:c,expression:c.create}},"1t.js":function(e,t,n,i,r,s,a,o,l){var u=n.cleaner,c=n.require("./f.js"),h=c.AbstractData,d=c.Value,f=c.STATE,p=f.priority,m={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(e){this.remove(e)}},v=n.asap.schedule(function(e){e.update()});t.exports=d.subclass({className:"basis.data.value.ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:p,stateChanged_:!0,init:function(){d.prototype.init.call(this);var e=this.objects;this.objects=[],e&&Array.isArray(e)&&(this.lock(),this.add.apply(this,e),this.unlock()),this.valueChanged_=this.stateChanged_=!!this.calculateOnInit,this.update()},add:function(){for(var e=0,t=arguments.length;e<t;e++){var i=arguments[e];i instanceof h&&n.array.add(this.objects,i)&&i.addHandler(m,this)}this.fire(!0,!0)},remove:function(e){n.array.remove(this.objects,e)&&e.removeHandler(m,this),this.fire(!0,!0)},clear:function(){for(var e,t=0;e=this.objects[t];t++)e.removeHandler(m,this);this.objects.length=0,this.fire(!0,!0)},fire:function(e,t){this.locked||(this.valueChanged_=this.valueChanged_||!!e,this.stateChanged_=this.stateChanged_||!!t,(this.valueChanged_||this.stateChanged_)&&v.add(this))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var e=this.valueChanged_,t=this.stateChanged_;if(this.valueChanged_=!1,this.stateChanged_=!1,v.remove(this),!u.globalDestroy&&(e&&this.set(this.calculateValue()),t)){var n=this.objects.length;if(n){for(var i,r=-2,s=0;s<n;s++){var a=this.objects[s],o=this.statePriority.indexOf(String(a.state));o>r&&(i=a,r=o)}i&&this.setState(i.state,i.state.data)}else this.setState(f.UNDEFINED)}},destroy:function(){this.lock(),this.clear(),v.remove(this),d.prototype.destroy.call(this)}})},"1u.js":function(e,t,n,i,r,s,a,o,l){function u(){var e=arguments.length-1,t=arguments[e],n=new Array(e);if("function"!=typeof t)throw new Error(f+": Last argument of constructor must be a function");for(var i=0;i<e;i++){var r=n[i]=arguments[i];if(!r.bindingBridge)throw new Error(f+": bb-value required");r.bindingBridge.attach(r,m,this,v)}return this.calc_=t,this.values_=n,this.update(),this}var c=n.require("./f.js"),h=c.Value,d=c.ReadOnlyValue,f="basis.data.Expression",p={},m=function(){y.add(this)},v=function(){this.destroy()},g=function(e){return e.bindingBridge.get(e)},y=n.asap.schedule(function(e){e.update()}),b=d.subclass({className:f,calc_:null,values_:null,extendConstructor_:!1,init:function(e){d.prototype.init.call(this),e!==p&&u.apply(this,arguments)},update:function(){y.remove(this),h.prototype.set.call(this,this.calc_.apply(null,this.values_.map(g)))},destroy:function(){y.remove(this);for(var e,t=0;e=this.values_[t];t++)e.bindingBridge.detach(e,m,this);d.prototype.destroy.call(this)}});b.create=function(){return u.apply(new b(p),arguments)},t.exports=b},"o.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1v.js"),c=n.require("./1w.js"),h=n.require("./1x.js"),d=n.require("./1y.js"),f=n.require("./1z.js"),p=n.require("./20.js"),m=n.require("./21.js"),v=n.require("./22.js"),g=n.require("./23.js"),y=n.require("./24.js"),b=n.require("./25.js"),_=n.require("./26.js"),T=p(m,n.fn.$true),E=p(v),N=p(g),x=p(y),C=p(b),S=p(_);t.exports={Index:u,VectorIndex:c,IndexWrapper:h,getDatasetIndex:u.getDatasetIndex,removeDatasetIndex:u.removeDatasetIndex,Count:m,Sum:v,Avg:g,Min:y,Max:b,Distinct:_,createIndexConstructor:p,count:T,sum:E,avg:N,max:C,min:x,distinct:S,CalcIndexPreset:f,percentOfRange:function(e,t){var i=f.getId("min"),r=f.getId("max"),s={};return s[i]=x(e,t),s[r]=C(e,t),t=n.getter(t||e),new f(s,function(e,n,s){return(t(s)-n[i])/(n[r]-n[i])})},percentOfMax:function(e,t){var i=f.getId("max"),r={};return r[i]=C(e,t),t=n.getter(t||e),new f(r,function(e,n,r){return t(r)/n[i]})},percentOfSum:function(e,t){var i=f.getId("sum"),r={};return r[i]=E(e,t),t=n.getter(t||e),new f(r,function(e,n,r){return t(r)/n[i]})},IndexMap:d}},"1v.js":function(e,t,n,i,r,s,a,o,l){function u(e,t,n){var i,r=e.indexCache_;if(e.lock(),t)for(o=0;a=t[o++];){var s=e.normalize(e.valueGetter(a));r[a.basisObjectId]=s,e.add_(s)}if(n)for(var a,o=0;a=n[o++];)i=a.basisObjectId,e.remove_(r[i]),delete r[i];e.unlock()}function c(e,t){var n=f[e.basisObjectId];if(n&&n[t.indexId]){delete n[t.indexId],t.removeHandler(p,e);for(var t in n)return;e.removeHandler(m),m.itemsChanged.call(e,e,{deleted:e.getItems()}),delete f[e.basisObjectId]}}var h=n.require("./f.js").Value,d=h.subclass({className:"basis.data.index.Index",propertyDescriptors:{explicit:!1,wrapperCount:!1,updateEvents:!1},explicit:!1,wrapperCount:0,indexCache_:null,valueGetter:n.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={},h.prototype.init.call(this)},add_:function(e){},remove_:function(e){},update_:function(e,t){},normalize:function(e){return Number(e)||0},destroy:function(){h.prototype.destroy.call(this),this.indexCache_=null}}),f={},p={destroy:function(e){c(this,e)}},m={itemsChanged:function(e,t){var n;if(n=t.inserted)for(i=0;i<n.length;i++)n[i].addHandler(v,this);if(n=t.deleted)for(var i=0;i<n.length;i++)n[i].removeHandler(v,this);var r=f[this.basisObjectId];for(var s in r)u(r[s],t.inserted,t.deleted)},destroy:function(){var e=f[this.basisObjectId];for(var t in e){var n=e[t];c(this,n),n.destroy()}}},v={"*":function(e){var t,n,i,r=e.type,s=e.sender,a=s.basisObjectId,o=f[this.basisObjectId];for(var l in o)(i=o[l]).updateEvents[r]&&(t=i.indexCache_[a],(n=i.normalize(i.valueGetter(s)))!==t&&(i.update_(n,t),i.indexCache_[a]=n))}};d.getDatasetIndex=function(e,t){if(!t||t.prototype instanceof d==0)throw"IndexClass must be an instance of IndexClass";var n=e.basisObjectId,i=f[n];i||(i=f[n]={},e.addHandler(m),m.itemsChanged.call(e,e,{inserted:e.getItems()}));var r=t.indexId,s=i[r];return s||((s=new t).addHandler(p,e),i[r]=s,u(s,e.getItems())),s},d.removeDatasetIndex=c,t.exports=d},"1w.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){if(!e.length)return 0;var n,i,r=0,s=e.length-1;do{if(n=r+s>>1,i=e[n]||0,t<i)s=n-1;else{if(!(t>i))return t==i?n:0;r=n+1}}while(r<=s);return n+(i<t)}var c=n.require("./1v.js");t.exports=c.subclass({className:"basis.data.index.VectorIndex",vectorGetter:n.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[],c.prototype.init.call(this)},add_:function(e){null!==e&&(this.vector_.splice(u(this.vector_,e),0,e),this.value=this.vectorGetter(this.vector_))},remove_:function(e){null!==e&&(this.vector_.splice(u(this.vector_,e),1),this.value=this.vectorGetter(this.vector_))},update_:function(e,t){null!==t&&this.vector_.splice(u(this.vector_,t),1),null!==e&&this.vector_.splice(u(this.vector_,e),0,e),this.set(this.vectorGetter(this.vector_))},normalize:function(e){return"string"==typeof e||"number"==typeof e?e:null},destroy:function(){c.prototype.destroy.call(this),this.vector_=null}})},"1x.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./f.js").Value,c=n.require("./1v.js"),h=n.require("./f.js").resolveDataset,d={destroy:function(){u.prototype.set.call(this,this.initValue),this.index=null}};t.exports=u.subclass({className:"basis.data.index.IndexWrapper",extendConstructor_:!1,source:null,sourceRA_:null,dataset:null,indexConstructor:null,index:null,init:function(e,t){this.source=e,this.indexConstructor=t,this.value=t.prototype.value,u.prototype.init.call(this),e.bindingBridge.attach(e,n.fn.$undef,this,this.destroy),this.setDataset(e)},setDataset:function(e){var t=this.dataset,n=h(this,this.setDataset,e,"sourceRA_");if(n!==t){var i=this.index;i&&(i.removeHandler(d,this),i.wrapperCount-=1,i.wrapperCount||i.explicit?i.unlink(this,u.prototype.set):i.destroy()),n?((i=c.getDatasetIndex(n,this.indexConstructor)).wrapperCount+=1,i.link(this,u.prototype.set),i.addHandler(d,this)):(i=null,u.prototype.set.call(this,this.initValue)),this.dataset=n,this.index=i}},set:function(){},destroy:function(){this.source.bindingBridge.detach(this.source,n.fn.$undef,this),this.setDataset(),u.prototype.destroy.call(this),this.source=null,this.indexConstructor=null}})},"1y.js":function(e,t,n,i,r,s,a,o,l){var u=n.object.iterate,c=n.require("./f.js").Value,h=n.require("./f.js").Object,d=n.require("./m.js").SourceDataset,f=n.require("./m.js").createRuleEvents,p=n.require("./1v.js"),m=n.require("./1x.js"),v=n.require("./1z.js"),g=n.asap.schedule(function(e){e.recalc()});t.exports=d.subclass({className:"basis.data.index.IndexMap",calcs:null,copyDataFromSource:!0,indexes:null,indexValues:null,indexUpdated:!1,awaitToAdd_:null,itemClass:h,listen:{source:{itemsChanged:function(e,t){var n,i=[];if(n=t.inserted)for(l=0;l<n.length;l++)s=(r=n[l]).basisObjectId,this.awaitToAdd_[s]=r,this.scheduleRecalc();if(n=t.deleted)for(l=0;l<n.length;l++){var r=n[l],s=r.basisObjectId,a=this.sourceMap_[s];if(a){var o=a.member;i.push(o),this.listen.member&&o.removeHandler(this.listen.member,this),this.recalcEvents&&r.removeHandler(this.recalcEvents,this),delete this.sourceMap_[s]}else delete this.awaitToAdd_[s]}if(i.length){this.emit_itemsChanged({deleted:i});for(var l=0;l<i.length;l++)(o=i[l]).source=null,o.destroy()}}}},recalcEvents:f(function(e){this.sourceMap_[e.basisObjectId].updated=!0,this.scheduleRecalc()},"update"),init:function(){var e=this.indexes,t=this.calcs;this.calcs={},this.indexes={},this.indexValues={},this.awaitToAdd_={},d.prototype.init.call(this),u(e,this.addIndex,this);for(var n in t){var i=t[n];i instanceof v&&(u(i.indexes,this.addIndex,this),i=i.calc),this.calcs[n]=i}this.recalc()},addIndex:function(e,t){if(t&&t.prototype instanceof p!=!1&&!this.indexes[e]){var n=new m(c.from(this,"sourceChanged","source"),t);this.indexes[e]=n,this.indexValues[e]=n.value,n.link(this,function(t){this.indexValues[e]=t,this.indexUpdated=!0,this.scheduleRecalc()})}},removeIndex:function(e){var t=this.indexes[e];t&&(delete this.indexes[e],delete this.indexValues[e],t.destroy())},lock:function(){for(var e in this.indexes)this.indexes[e].lock()},unlock:function(){for(var e in this.indexes)this.indexes[e].unlock()},scheduleRecalc:function(){g.add(this)},recalc:function(){for(var e in this.sourceMap_)this.calcMember(this.sourceMap_[e]);var t=[],n=this.awaitToAdd_;this.awaitToAdd_={};for(var e in n){var i,r=n[e],s={};for(var a in this.calcs)s[a]=this.calcs[a](r.data,this.indexValues,r);if(this.copyDataFromSource)for(var o in r.data)this.calcs.hasOwnProperty(o)||(s[o]=r.data[o]);i=new this.itemClass({source:r,data:s,update:r.update.bind(r)}),this.listen.member&&i.addHandler(this.listen.member,this),this.recalcEvents&&r.addHandler(this.recalcEvents,this),this.sourceMap_[e]={sourceObject:r,member:i,updated:!1},t.push(i)}t.length&&this.emit_itemsChanged({inserted:t}),this.indexUpdated=!1,g.remove(this)},calcMember:function(e){var t=e.member;if(e.updated||this.indexUpdated){var n,i,r,s=e.sourceObject,a={};for(var o in this.calcs)n=this.calcs[o](s.data,this.indexValues,s),(i=t.data[o])===n||n!==n&&i!==i||(a[o]=n,r=!0);if(this.copyDataFromSource){for(var l in s.data)this.calcs.hasOwnProperty(l)||(n=s.data[l],(i=t.data[l])===n||n!==n&&i!==i||(a[l]=n,r=!0));for(var l in t.data)this.calcs.hasOwnProperty(l)||s.data.hasOwnProperty(l)||(a[l]=void 0,r=!0)}r&&this.itemClass.prototype.update.call(t,a),e.updated=!1}},getMember:function(e){var t=e&&this.sourceMap_[e.basisObjectId];return t?t.member:null},destroy:function(){u(this.indexes,this.removeIndex,this),d.prototype.destroy.call(this),g.remove(this),this.awaitToAdd_=null,this.calcs=null,this.indexes=null,this.indexValues=null}})},"1z.js":function(e,t,n,i,r,s,a,o,l){var u=1,c=function(e,t){this.indexes=e,this.calc=t};c.getId=function(e){return e+"_calc-index-preset-"+n.number.lead(u++,4)},t.exports=c},"20.js":function(e,t,n,i,r,s,a,o,l){function u(e,t,i){if(!c.isClass(e)||!e.isSubclassOf(p))throw"Wrong class for index constructor";if(i=n.getter(i),"string"!=typeof(t=t||"update"))throw"Events must be a event names space separated string";t=t.trim().split(" ").sort();var r=v+[e.basisClassId_,i[n.getter.ID],t].join("_"),s=g[r];if(!s){for(var a={},o=0;o<t.length;o++)a[t[o]]=!0;(s=g[r]=e.subclass({indexId:r,updateEvents:a,valueGetter:i})).indexId=r}return s}var c=n.Class,h=n.require("./f.js").ReadOnlyDataset,d=n.require("./f.js").DatasetWrapper,f=n.require("./f.js").chainValueFactory,p=n.require("./1v.js"),m=n.require("./1x.js"),v="basisjsIndexConstructor"+n.genUID(),g={},y={destroy:function(e){e.source[this.indexId]=null}};t.exports=function(e,t){return function i(r,s,a){if(n.fn.isFactory(r)){var o=r;return f(function(e){return i(o(e),s,a,!0)})}"function"!=typeof r&&"string"!=typeof r||(a=s,s=r,r=null),a||(a=s,s="");var l=u(e,s,a||t);if(!r)return l;if(r instanceof h||r instanceof d){var c=p.getDatasetIndex(r,l);return c.explicit=!0,c}if(r.bindingBridge){var v=r[l.indexId];return v||(v=new m(r,l),r[l.indexId]=v,v.addHandler(y,l)),v}return null}}},"21.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1v.js");t.exports=u.subclass({className:"basis.data.index.Count",valueGetter:n.fn.$true,add_:function(e){this.value+=e},remove_:function(e){this.value-=e},normalize:function(e){return Boolean(e)},update_:function(e,t){this.set(this.value-Boolean(t)+Boolean(e))}})},"22.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1v.js");t.exports=u.subclass({className:"basis.data.index.Sum",add_:function(e){this.value+=e},remove_:function(e){this.value-=e},update_:function(e,t){this.set(this.value-t+e)}})},"23.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1v.js");t.exports=u.subclass({className:"basis.data.index.Avg",sum_:0,count_:0,add_:function(e){this.sum_+=e,this.count_+=1,this.value=this.sum_/this.count_},remove_:function(e){this.sum_-=e,this.count_-=1,this.value=this.count_?this.sum_/this.count_:0},update_:function(e,t){this.sum_+=e-t,this.set(this.sum_/this.count_)}})},"24.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1w.js");t.exports=u.subclass({className:"basis.data.index.Min",vectorGetter:function(e){return e[0]}})},"25.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1w.js");t.exports=u.subclass({className:"basis.data.index.Max",vectorGetter:function(e){return e[e.length-1]}})},"26.js":function(e,t,n,i,r,s,a,o,l){var u=n.require("./1v.js");t.exports=u.subclass({className:"basis.data.index.Distinct",map_:null,init:function(){this.map_={},u.prototype.init.call(this)},add_:function(e){this.map_.hasOwnProperty(e)||(this.map_[e]=0),1==++this.map_[e]&&(this.value+=1)},remove_:function(e){0==--this.map_[e]&&(this.value-=1)},update_:function(e,t){var n=0;this.map_.hasOwnProperty(e)||(this.map_[e]=0),1==++this.map_[e]&&(n+=1),0==--this.map_[t]&&(n-=1),n&&this.set(this.value+n)},normalize:String,destroy:function(){u.prototype.destroy.call(this),this.map_=null}})},"p.js":function(e,t,n,i,r,s,a,o,l){function u(e){return new Function("data","return {"+n.object.iterate(e,function(e,t){return e=e.replace(/"/g,'\\"'),t=t.replace(/"/g,'\\"'),'"'+e+'": data["'+t+'"]'})+"}")}function c(e){this.host.setSource(this.name,e)}var h=n.require("./2.js").create,d=n.require("./f.js").SUBSCRIPTION,f=n.require("./f.js").Object,p=n.require("./f.js").resolveObject;d.add("OBJECTSOURCE",{sourceChanged:function(e,t,n){n&&d.unlink("sources",e,n),e.sources[t]&&d.link("sources",e,e.sources[t])}},function(e,t){var n=t.sources;for(var i in n)e("sources",t,n[i])});var m={update:function(e,t){var n=this.host.fields,i={};if(this.name==n.defaultSource)for(var r in t)r in n.fieldSource==0&&(i[r]=e.data[r]);else for(var r in t){var s=n.fromNames[this.name][r];s&&this.host.fields.fieldSource[s]==this.name&&(i[s]=e.data[r])}for(var r in i)return this.host.update(i)},destroy:function(){this.host.setSource(this.name,null)}},v=function(e){var t={},n={},i={},r={defaultSource:!1,fieldSource:{},toNames:n,fromNames:i,sources:t,__extend__:v};e["*"]&&(r.defaultSource=e["*"]);for(var s in e){var a=e[s].split(":"),o=a.shift(),l=a.length?a.join(":"):s;o!=r.defaultSource&&("-"==o&&l!=s||(n[o]||(n[o]={},i[o]={}),n[o][s]=l,i[o][l]=s,r.fieldSource[s]=o))}for(var o in n)t[o]=u(n[o]);return r.defaultSource&&(t[r.defaultSource]=function(e){var t={};for(var n in e)n in r.fieldSource==0&&(t[n]=e[n]);return t}),r},g=f.subclass({className:"basis.data.object.Merge",subscribeTo:f.prototype.subscribeTo+d.OBJECTSOURCE,propertyDescriptors:{sources:{nested:!0,events:"sourceChanged"}},fields:v({"*":"-"}),sources:null,sourcesContext_:null,emit_sourceChanged:h("sourceChanged","name","oldSource"),delta_:null,init:function(){var e=this.data,t=this.sources;if(this.delegate=null,e&&"-"in this.fields.sources)if("-"!==this.fields.defaultSource)this.data=this.fields.sources["-"](e);else{this.data={};for(var n in e)"-"==(this.fields.fieldSource[n]||this.fields.defaultSource)&&(this.data[n]=e[n])}else this.data={};f.prototype.init.call(this),this.sources={},this.sourcesContext_={},t&&this.setSources(t)},update:function(e){if(!this.delta_){var t,n={};this.delta_=n;for(var i in e)if(r=this.fields.fieldSource[i]||this.fields.defaultSource)if("-"!=r){if(this.sources[r]){s=r!=this.fields.defaultSource?this.fields.toNames[r][i]:i;this.sources[r].data[s]!==e[i]?(t||(t={}),r in t==0&&(t[r]={}),t[r][s]=e[i]):this.data[i]!==e[i]&&(n[i]=this.data[i],this.data[i]=e[i])}}else n[i]=this.data[i],this.data[i]=e[i];if(t)for(var r in t)this.sources[r].update(t[r]);this.delta_=null;for(var i in n)return this.emit_update(n),n;return!1}for(var i in e)if(r=this.fields.fieldSource[i]||this.fields.defaultSource){var s=r!=this.fields.defaultSource?this.fields.toNames[r][i]:i,a=this.sources[r].data[s];a!==this.data[i]&&(i in this.delta_==0?this.delta_[i]=this.data[i]:this.delta_[i]===a&&delete this.delta_[i],this.data[i]=a)}},setDelegate:function(){},setSource:function(e,t){var n=this.sources[e];if(e in this.fields.sources!=0&&"-"!=e&&(e in this.sourcesContext_==0&&(this.sourcesContext_[e]={host:this,name:e,adapter:null}),t=p(this.sourcesContext_[e],c,t,"adapter",this),n!==t)){var i=this.listen["source:"+e];if(n&&(i&&n.removeHandler(i,this),n.removeHandler(m,this.sourcesContext_[e])),this.sources[e]=t,t){t.addHandler(m,this.sourcesContext_[e]),i&&t.addHandler(i,this);var r=this.fields.sources[e](t.data);if(this.fields.defaultSource==e)for(var s in this.data)this.fields.fieldSource.hasOwnProperty(s)||r.hasOwnProperty(s)||(r[s]=void 0);this.update(r)}this.emit_sourceChanged(e,n)}},setSources:function(e){e||(e={});for(var t in this.fields.sources)this.setSource(t,e[t])},destroy:function(){this.setSources(),this.sources=null,this.sourcesContext_=null,f.prototype.destroy.call(this)}});t.exports={Merge:g}},"q.js":function(e,t,n,i,r,s,a,o,l){function u(e){return ee[e]=ee[e]||0,e+ee[e]++}function c(){var e,t=S(arguments),n=t.pop(),i=t[0],r=t[1],s=t[2];if("function"!=typeof n)throw"Last argument for calculate field constructor must be a function";switch(t.length){case 0:e=function(){return n()};break;case 1:e=function(e,t,r){return i in e?n(t[i]):r};break;case 2:e=function(e,t,s){return i in e||r in e?n(t[i],t[r]):s};break;case 3:e=function(e,t,a){return i in e||r in e||s in e?n(t[i],t[r],t[s]):a};break;default:e=function(e,i,r){for(var s,a=!1,o=[],l=0;s=t[l];l++)a=a||s in e,o.push(i[s]);return a?n.apply(null,o):r}}return e.args=t,e.calc=e,e}function h(e){return 1==arguments.length?function(t,n,i){return e in t?null!=n[e]?String(n[e]):null:i}:c.apply(null,S(arguments).concat(function(){for(var e=arguments.length-1;e>=0;e--)if(null==arguments[e])return null;return Array.prototype.join.call(arguments,"-")}))}function d(e,t){var n,i={};if(e&&e.length&&(n=i.inserted=e),t&&t.length&&(n=i.deleted=t),n)return i}function f(e){var t,i,r=n.object.slice(this.items_),s={},a=[],o=[],l=[];e=S(e),L(!0);for(f=0;h=e[f];f++)(i=this.wrapper(h))&&(r[i.basisObjectId]?r[i.basisObjectId]=null:s[i.basisObjectId]=i);L(!1);for(var u in s)this.items_[u]?a.push(s[u]):o.push(s[u]);for(var u in r)r[u]&&l.push(r[u]);if(t=d(o,l)){if(this instanceof le){var c=this.listen.item;if(c){if(t.inserted)for(f=0;h=t.inserted[f];f++)h.addHandler(c,this);if(t.deleted)for(f=0;h=t.deleted[f];f++)h.removeHandler(c,this)}}this.emit_itemsChanged(t)}if(l.length){L(!0);for(var h,f=0;h=l[f];f++)h.destroy();L(!1)}return(o=o.concat(a)).length?o:null}function p(e,t,n){var i=["has"],r=[E],s=[];for(var a in e)if(E.call(e,a)){var o='"'+a.replace(/"/g,'"')+'"';if(E.call(n,a)){s.push(o+":undefined");continue}var l="v"+s.length,u="f"+s.length,c=e[a];i.push(l,u),r.push(c,t[a]);var h="has.call(data,"+o+")?data["+o+"]:"+l+("function"==typeof c?"(data)":""),d=void 0!==c&&"function"!=typeof c?","+l:"";s.push(o+":"+u+"("+h+d+")")}var f=s.sort().join(","),p=me[f];return p||(p=me[f]=new Function(i,"return function(data){return {"+f+"};};")),p.apply(null,r)}function m(e,t,i){if("type"in(i="string"==typeof i||Array.isArray(i)||"function"==typeof i&&i.calc!==i?{type:i}:i?n.object.slice(i):{})){if("string"==typeof i.type&&(i.type=H(i.type,e.fields,t)),Array.isArray(i.type)){var r=i.type.slice();i.type=G(r),-1==r.indexOf(i.defValue)&&(i.defValue=i.type.DEFAULT_VALUE)}i.type===Array&&(i.type=Y,i.defValue=null),i.type===Date&&(i.type=z,i.defValue=null),"function"!=typeof i.type&&(i.type=null)}var s=i.type||C;(i.id||i.index||-1!=[W,Z,J,Q].indexOf(s))&&(e.idFields[t]=i),i.calc?(g(e,t,i.calc),e.fields[t]=ve):(e.fields[t]=s,e.aliases[t]=t),!("defValue"in i)&&"function"==typeof i.type&&"DEFAULT_VALUE"in i.type&&(i.defValue=i.type.DEFAULT_VALUE),e.defaults[t]="defValue"in i?i.defValue:"DEFAULT_VALUE"in s?s.DEFAULT_VALUE:s(),pe[t]||(pe[t]={destroy:function(){this.set(t,null)}})}function v(e,t,n){n in e.fields!=0&&(n in e.calcMap||t in e.aliases||(e.aliases[t]=n))}function g(e,t,i){var r=e.calcs,s=e.deps,a=i.args||[],o={args:a,wrapper:i},l=e.calcs.length,u=0;if(a)for(h=0;c=r[h];h++)-1!=a.indexOf(c.key)&&(u=h+1);if(t){o.key=t,e.calcMap[t]=o;for(var c,h=0;c=r[h];h++)if(-1!=c.args.indexOf(t)){l=h;break}if(u>l)return;s[t]=a.reduce(function(e,t){for(var i=s[t]||[t],r=0;r<i.length;r++)n.array.add(e,i[r]);return e},[]);for(var d in s){var f=s[d].indexOf(t);-1!=f&&Array.prototype.splice.apply(s[d],[f,1].concat(s[t]))}}else l=u;r.splice(Math.min(l,u),0,o)}function y(e){return function(t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]}}function b(e){return function(t,n){return this.set(e,t,n)}}var _="basis.entity",T=n.Class,E=Object.prototype.hasOwnProperty,N=n.object.keys,x=n.object.extend,C=n.fn.$self,S=n.array.from,j=n.require("./2.js"),I=j.Emitter,R=j.create,A=n.require("./f.js"),k=A.Object,D=A.Slot,O=A.Dataset,w=A.ReadOnlyDataset,q=n.require("./m.js"),M=q.Filter,P=q.Split,L=O.setAccumulateState,U=n.require("./r.js"),B=U.defineType,H=U.getTypeByName,V=U.getTypeByNameIfDefined,F=U.validate,Y=U.array.nullable,z=U.date.nullable,G=U.enum,$={},X=[],K={string:!0,number:!0},W=function(e){return null==e||isNaN(e)?null:Number(e)},Z=function(e){return null==e||isNaN(e)?null:Number(e)},J=function(e){return null==e||isNaN(e)?null:parseInt(e,10)},Q=function(e){return null==e?null:String(e)},ee={},te={},ne=T(null,{className:_+".Index",items:null,init:function(){this.items={}},get:function(e,t){var n=E.call(this.items,e)&&this.items[e];if(n&&(!t||n.entityType===t))return n},add:function(e,t){if(t){var n=this.get(e);if(!n)return this.items[e]=t,!0;if(n!==t)throw"basis.entity: Value `"+e+"` for index is already occupied"}},remove:function(e,t){if(this.items[e]===t)return delete this.items[e],!0},destroy:function(){this.items=null}}),ie=function(e){return{name:null,wrapper:C,setAndDestroyRemoved:f,destroy:function(){e.destroy.call(this),this.name=null,this.wrapper=null}}},re="wrapped"+n.genUID(),se=function(e,t){return function(n){n&&!Array.isArray(n)&&(n=[n]);var i=n&&!n[re];if(i){if(this.localId){var r=this.getItems().slice();n=n.map(function(e){for(var t=0;t<r.length;t++)if(this.localId(e,r[t]))return this.wrapper(e,r[t]);return e=this.wrapper(e),r.push(e),e},this)}else n=n.map(this.wrapper);n[re]=!0}var s=e.prototype[t].call(this,n);if(i&&(n[re]=!1,this.localId&&s&&s.deleted)){L(!0);for(var a,o=0;a=s.deleted[o];o++)a.root&&a.destroy();L(!1)}return s}},ae=function(e,t){return function(){this.name||(this.name=u(t)),e.prototype.init.call(this)}},oe=T(w,ie,{className:_+".ReadOnlyEntitySet",init:ae(w,"ReadOnlyEntitySet")}),le=T(O,ie,{className:_+".EntitySet",init:ae(O,"EntitySet"),add:se(O,"add"),remove:se(O,"remove"),set:se(O,"set"),setAndDestroyRemoved:function(e){return this.localId?this.set(e):this.itemCount?(!this.localId||e&&e.length||this.clear(),f.call(this,e)):this.add(e)},clear:function(){var e=O.prototype.clear.call(this);if(this.localId&&e&&e.deleted){L(!0);for(var t,n=0;t=e.deleted[n];n++)t.destroy();L(!1)}return e}}),ue=T(M,ie,{className:_+".EntityCollection",init:ae(M,"EntityCollection")}),ce=T(P,{className:_+".EntityGrouping",name:null,subsetClass:oe,init:ae(P,"EntityGrouping"),getSubset:function(e,t){var n=P.prototype.getSubset.call(this,e,t);return n&&n.dataset&&(n.dataset.wrapper=this.wrapper),n}}),he=function(e,t,n){if(this instanceof he){e||(e=C),t&&!V(t)||(t=u("UntitledEntitySetType"));var i=new de({entitySetClass:{wrapper:e,localId:function(e){return"string"==typeof e?function(t,n){return t[e]==n.data[e]}:"function"==typeof e?e:void 0}(n&&n.localId)}}),r=i.entitySetClass,s=function(e,t){return null!=e?(t instanceof le==0&&(t=i.createEntitySet()),t.set(e instanceof O?e.getItems():S(e)),t):null};return"string"==typeof e&&(r.prototype.wrapper=H(e,r.prototype,"wrapper")),B(t,s),x(s,{type:i,typeName:t,toString:function(){return t+"()"},reader:function(e){if(Array.isArray(e)){var t=r.prototype.wrapper;return e.map(t.reader||t)}return e},extendClass:function(e){return r.extend.call(r,e),s},extendReader:function(e){var t=s.reader;return s.reader=function(n){return Array.isArray(n)&&e(n),t(n)},s},entitySetType:i,extend:function(){return r.extend.apply(r,arguments)}}),s}},de=T(null,{className:_+".EntitySetConstructor",entitySetClass:le,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),fe=function(e){if(this instanceof fe){var t;t=e.singleton?function(e){var t=n.get();return t?e&&t.update(e):t=new i(e||{}),t}:function(e,t){if(null!=e){if(t&&t.entityType===n||(t=null),e===t||e.entityType===n)return e;var r,s=n.idField;if(K[typeof e]){if(!s)return;if(t=n.index.get(e,n))return t;r=e,(e={})[s]=r}else n.compositeKey&&(r=n.compositeKey(e,e)),null!=r&&(t=n.index.get(r,n));return t&&t.entityType===n?t.update(e):t=new i(e),t}};var n=new ge(e||{},t),i=n.entityClass,r=n.name;return B(r,t),x(t,{all:n.all,type:n,typeName:r,toString:function(){return r+"()"},get:function(e){return n.get(e)},getSlot:function(e,t){return n.getSlot(e,t)},reader:function(e){return n.reader(e)},readList:function(e,n){if(!e)return[];Array.isArray(e)||(e=[e]),"function"!=typeof n&&(n=C);for(var i=0;i<e.length;i++)e[i]=t(t.reader(n(e[i],i)));return e},extendClass:function(e){return i.extend.call(i,e),t},extendReader:function(e){var n=t.reader;return t.reader=function(t){return t&&"object"==typeof t&&e(t),n(t)},t},entityType:n,extend:function(){return i.extend.apply(i,arguments)}}),t}},pe={},me={},ve=function(e,t){return t},ge=T(null,{className:_+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(e,t){this.name=e.name,this.name&&!V(this.name)||(this.name=u("UntitledEntityType")),this.fields={},this.calcs=[],this.calcMap={},this.deps={},this.idFields={},this.defaults={},this.aliases={},this.slots={};var n=e.index;if(n&&n instanceof ne&&(this.index=n),this.wrapper=t,("all"in e==0||e.all||e.singleton)&&(this.all=new oe(e.all),this.all.wrapper=t,this.all.set=function(e){return Array.isArray(e)&&(e=e.map(function(e){return e instanceof T==!1?t.reader(e):e})),f.call(this,e)}.bind(this.all)),this.singleton=!!e.singleton,this.singleton){var i;this.get=function(){return i},this.all.addHandler({itemsChanged:function(e,t){i=t.inserted?t.inserted[0]:null}},this)}for(var r in e.fields)m(this,r,e.fields[r]);for(var r in e.aliases)v(this,r,e.aliases[r]);e.constrains&&e.constrains.forEach(function(e){g(this,null,e)},this),this.calcs.length||(this.calcs=null);var s={};if(N(this.idFields).length){for(var a in this.idFields){var o;(n=this.idFields[a].index)&&n instanceof ne!=0||("string"==typeof n?(n in te==0&&(te[n]=new ne),n=te[n]):(this.index||(this.index=new ne),n=this.index)),(o=s[n.basisObjectId])||(o=s[n.basisObjectId]={index:n,fields:[]}),o.fields.push(a),this.idFields[a]=o}this.index&&this.index.basisObjectId in s==0&&(this.index=null);for(var l in s)(o=s[l]).property="__id__"+l,o.compositeKey=h.apply(null,o.fields),1==o.fields.length&&(o.idField=o.fields[0]);var c=N(s),d=s[this.index?this.index.basisObjectId:c[0]];this.index=d.index,this.idField=d.idField,this.compositeKey=d.compositeKey,this.idProperty=d.property,this.indexes=s}else this.index&&(this.index=null);var _={};for(var r in this.defaults)_[r]=void 0;var T=be(this,this.all,this.fields,this.slots);this.entityClass=T,T.extend({entityType:this,type:t,typeName:this.name,generateData:p(this.defaults,this.fields,this.calcMap),initDelta:_});for(var E in this.fields)T.prototype["get_"+E]=y(E),this.fields[E]!==ve&&(T.prototype["set_"+E]=b(E));X.push(this)},reader:function(e){var t={};if(K[typeof e])return this.idField?e:null;if(!e||null==e)return null;for(var n in e){var i=this.aliases[n];if(i){var r=this.fields[i].reader;t[i]=r?r(e[n]):e[n]}}return t},get:function(e){var t=this.getId(e);if(this.index&&null!=t)return this.index.get(t,this)},getId:function(e){if(this.compositeKey&&null!=e){if(K[typeof e])return e;if(e&&e.entityType===this)return e[this.idProperty];if(e instanceof k&&(e=e.data),this.compositeKey)return this.compositeKey(e,e)}},getSlot:function(e){var t=this.getId(e);if(null!=t){var n=E.call(this.slots,t)&&this.slots[t];if(!n){if(K[typeof e]){var i={};this.idField&&(i[this.idField]=e),e=i}n=this.slots[t]=new D({delegate:this.get(t)||null,data:e})}return n}}}),ye=T(k,{className:_+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,propertyDescriptors:{modified:{nested:!0,events:"rollbackUpdate"}},modified:null,emit_rollbackUpdate:R("rollbackUpdate")}),be=function(e,t,i,r){function s(t,n,i){var r=e.calcs,s=t.data,o=!1;try{if(r)for(var l,u=0;l=r[u];u++){var c=s[v=l.key],h=l.wrapper(n,s,c);v&&h!==c&&(n[v]=c,s[v]=h,o=!0)}for(var d in e.indexes){var f=e.indexes[d],p=t[f.property],m=p;f.compositeKey&&(m=f.compositeKey(n,s,p)),m!==p&&(a(f.index,t,p,m),t[f.property]=m)}return o}catch(e){for(var v in n)t.data[v]=n[v];i&&!t.modified&&(t.modified=i)}}function a(e,t,n,i){null!=i&&(e.add(i,t),E.call(r,i)&&r[i].setDelegate(t)),null!=n&&(e.remove(n,t),E.call(r,n)&&r[n].setDelegate())}return T(ye,{className:e.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return k.prototype.isSyncRequired.call(this)&&(!e.idProperty||null!=this[e.idProperty])},init:function(e){this.delegate=null,this.data=this.generateData(e),ye.prototype.init.call(this);var n;for(var i in this.data)(n=this.data[i])&&n!==this&&n instanceof I&&(n.addHandler(pe[i],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[i]=!0);s(this,this.initDelta),t&&t.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[e.idProperty]},get:function(e,t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]},set:function(t,n,r,a){var o=i[t];if(!o)return!1;var l,u=this.modified;o===Y&&u&&t in u&&(n=Y(n,u[t]));var c=o(n,this.data[t]),h=this.data[t];if(!(c===h||c&&h&&c.constructor===Date&&h.constructor===Date&&+c==+h))e:{if(l={},!e.idFields[t])if(r)u||(this.modified=u={}),t in u==!1?(l.rollback={key:t,value:void 0},u[t]=h):u[t]===c&&(l.rollback={key:t,value:c},delete u[t],N(u).length||(this.modified=null));else if(u&&t in u){if(u[t]!==c){l.rollback={key:t,value:u[t]},u[t]=c;break e}return!1}this.data[t]=c,this.fieldHandlers_&&this.fieldHandlers_[t]&&(h.removeHandler(pe[t],this),this.fieldHandlers_[t]=!1),c&&c!==this&&c instanceof I&&(c.addHandler(pe[t],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[t]=!0),l.key=t,l.value=h,l.delta={},l.delta[t]=h}else!r&&u&&t in u&&(l={rollback:{key:t,value:u[t]}},delete u[t],N(u).length||(this.modified=null));if(!a&&l){var d,f=l.key,p=l.delta||{};l.rollback&&((d={})[l.rollback.key]=l.rollback.value),s(this,p,d)&&(f=!0),f&&(this.emit_update(p),l.delta=p),d&&this.emit_rollbackUpdate(d)}return l||!1},update:function(e,t){var n=!1,i={};if(e){var r,a;for(var o in e)(a=this.set(o,e[o],t,!0))&&(a.key&&(n=!0,i[a.key]=a.value),a.rollback&&(r||(r={}),r[a.rollback.key]=a.rollback.value));s(this,i,r)&&(n=!0),n&&this.emit_update(i),r&&this.emit_rollbackUpdate(r)}return!!n&&i},read:function(e){return this.update(this.type.reader(e))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var e={};for(var t in this.data)e[t]=void 0;return this.update(e)},commit:function(e){var t=this.modified;this.modified=null,e&&this.update(e),t&&this.emit_rollbackUpdate(t)},rollback:function(t){var i=this.modified;i&&t&&(Array.isArray(t)||(t=[t]),i=n.object.slice(i,t.reduce(function(t,n){return t.concat(e.deps[n]||n)},[]))),this.update(i,!0)},destroy:function(){if(this.fieldHandlers_){for(var n in this.fieldHandlers_)this.fieldHandlers_[n]&&this.data[n].removeHandler(pe[n],this);this.fieldHandlers_=null}for(var n in e.indexes){var i=e.indexes[n],r=this[i.property];null!=r&&a(i.index,this,r,null)}t&&t.has(this)&&t.emit_itemsChanged({deleted:[this]}),k.prototype.destroy.call(this),this.data=$,this.modified=null}})};t.exports={isEntity:function(e){return e&&e instanceof ye},createType:function(e,t){var i=e||{};return"string"==typeof e?i={name:i,fields:t||{}}:t&&(i=n.object.merge(i,{fields:t})),new fe(i)},createSetType:function(e,t,i){switch(arguments.length){case 0:case 1:e&&e.constructor===Object?(i=n.object.slice(e),t=n.object.splice(i).type,e=n.object.splice(i).name):(t=e,e=void 0);break;case 2:t&&t.constructor===Object&&(i=t,t=e,e=void 0)}return new he(t,e,i)},validate:F,getTypeByName:function(e){return V(e)},getIndexByName:function(e){return te[e]},is:function(e,t){var n;return"string"==typeof t&&(t=V(t)),n=t&&t.type&&(t.type.entitySetClass||t.type.entityClass),!(!e||!n)&&e instanceof n},get:function(e,t){var n=V(e);if(n)return n.get(t)},resolve:function(e,t){var n=V(e);if(n)return n(t)},getByIndex:function(e,t){if(e in te)return te[e].get(t)},NumericId:W,NumberId:Z,IntId:J,StringId:Q,Index:ne,CalculateField:c,ConcatStringField:h,calc:c,arrayField:Y,dateField:z,EntityType:fe,Entity:be,BaseEntity:ye,EntitySetType:he,EntitySet:le,ReadOnlyEntitySet:oe,Collection:ue,Grouping:ce}},"r.js":function(e,t,n,i,r,s,a,o,l){var u="basis.type",c={},h={},d={};t.exports={string:n.require("./27.js"),number:n.require("./28.js"),int:n.require("./29.js"),enum:n.require("./2a.js"),array:n.require("./2b.js"),object:n.require("./2c.js"),date:n.require("./2d.js"),validate:function(){for(var e in d)n.dev.warn(u+": type `"+e+"` is not defined, but used via type.getTypeByName()");for(var e in h)n.dev.warn(u+": type `"+e+"` is not defined, but used by "+h[e].length+" type(s)")},getTypeByName:function(e,t,n){if(c.hasOwnProperty(e))return c[e];if(t&&n){var i=h[e];i||(i=h[e]=[]),i.push([t,n])}else d[e]=!0;return function(t,n){var i=c.hasOwnProperty(e)?c[e]:null;if(i)return i(t,n)}},getTypeByNameIfDefined:function(e){if(c.hasOwnProperty(e))return c[e]},defineType:function(e,t){var n=h[e];if(n){for(var i,r=0;i=n[r];r++)i[0][i[1]]=t;delete h[e]}delete d[e],c[e]=t}}},"27.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){if(t){if(null!==e&&"string"!=typeof e)return c.nullable}else if("string"!=typeof e)return c;var n=function(e,n){return"string"==typeof e?e:t&&null===e?null:n};return n.DEFAULT_VALUE=e,n}var c=u("",!1);c.default=function(e){return u(e,!1)},c.nullable=u(null,!0),c.nullable.default=function(e){return u(e,!0)},t.exports=c},"28.js":function(e,t,n,i,r,s,a,o,l){function u(e){return 0===e||"object"!=typeof e&&isFinite(e)}function c(e,t){if(t){if(null!==e&&!u(e))return h.nullable}else if(!u(e))return h;e=null===e?null:Number(e);var n=function(e,n){return u(e)?Number(e):t&&null===e?null:n};return n.DEFAULT_VALUE=e,n}var h=c(0,!1);h.default=function(e){return c(e,!1)},h.nullable=c(null,!0),h.nullable.default=function(e){return c(e,!0)},t.exports=h},"29.js":function(e,t,n,i,r,s,a,o,l){function u(e){return 0===e||"object"!=typeof e&&isFinite(e)}function c(e,t){if(t){if(null!==e&&!u(e))return h.nullable}else if(!u(e))return h;e=null===e?null:parseInt(e,10);var n=function(e,n){return u(e)?parseInt(e,10):t&&null===e?null:n};return n.DEFAULT_VALUE=e,n}var h=c(0,!1);h.default=function(e){return c(e,!1)},h.nullable=c(null,!0),h.nullable.default=function(e){return c(e,!0)},t.exports=h},"2a.js":function(e,t,n,i,r,s,a,o,l){t.exports=function(e){if(Array.isArray(e)||(e=[e]),!e.length)throw new Error("basis.type.enum constructor expected non-empty array but got empty.");var t=function(t,n){return-1!==e.indexOf(t)?t:n};return t.DEFAULT_VALUE=e[0],t.default=function(n){if(-1===e.indexOf(n))return t;var i=function(){return t.apply(this,arguments)};return i.DEFAULT_VALUE=n,i},t}},"2b.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){if(e===t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function c(e,t){if(t){if(null!==e&&!Array.isArray(e))return h.nullable}else if(!Array.isArray(e))return h;var n=function(e,n){return Array.isArray(e)?n&&u(e,n)?n:e:t&&null===e?null:n};return n.serialize=function(t){try{return JSON.stringify(t)}catch(t){return JSON.stringify(e)}},n.deserialize=function(t){try{return JSON.parse(t)}catch(t){return e}},n.DEFAULT_VALUE=e,n}var h=c([],!1);h.default=function(e){return c(e,!1)},h.nullable=c(null,!0),h.nullable.default=function(e){return c(e,!0)},t.exports=h},"2c.js":function(e,t,n,i,r,s,a,o,l){function u(e){return!!e&&(!Array.isArray(e)&&"object"==typeof e)}function c(e,t){if(t){if(null!==e&&!u(e))return h.nullable}else if(!u(e))return h;var n=function(e,n){return u(e)?e:t&&null===e?null:n};return n.serialize=function(t){try{return JSON.stringify(t)}catch(t){return JSON.stringify(e)}},n.deserialize=function(t){try{return JSON.parse(t)}catch(t){return e}},n.DEFAULT_VALUE=e,n}var h=c({},!1);h.default=function(e){return c(e,!1)},h.nullable=c(null,!0),h.nullable.default=function(e){return c(e,!0)},t.exports=h},"2d.js":function(e,t,n,i,r,s,a,o,l){function u(e){return"number"==typeof e&&isFinite(e)?new Date(e):e&&"string"==typeof e?f(e):e instanceof Date?e:void 0}function c(e,t){var n=u(e);if(t){if(null!==e&&void 0===n)return p.nullable}else if(void 0===n)return p;var i=function(e,n){if(t&&null===e)return null;var i=u(e);return void 0===i?n:i&&n&&i.getTime()===n.getTime()?n:i};return i.serialize=function(e){return e?String(Number(e)):"null"},i.deserialize=function(t){if("null"===t)return null;var n=Number(t);return n?new Date(n):e},i.DEFAULT_VALUE=n||null,i}var h=/\D/,d=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,f=function(){function e(e,n,i,r,s,a,o){var l=new Date(e,n-1,i,r||0,0,a||0,o?o.substr(0,3):0);return l.setMinutes((s||0)-t-l.getTimezoneOffset()),l}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(d,function(e,n,i,r){return t=60*Number(i||0)+Number(r||0),n}).split(h))}}(),p=c(new Date(0),!1);p.default=function(e){return c(e,!1)},p.nullable=c(null,!0),p.nullable.default=function(e){return c(e,!0)},t.exports=p},"s.js":function(e,t,n,i,r,s,a,o,l){function u(){var e=n.fn.publicCallback(function(t){S[e]=t});return e}function c(e){var t=S[e];return delete S[e],t}function h(e){delete S[e],delete i[e]}function d(e,t){var n,r,s=!1;if("number"!=typeof e){if(!e||this.script!==e.target)return;e=(s=e&&"error"==e.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?C:x}if(e!=this.prevReadyState_){if(this.prevReadyState_=e,this.emit_readyStateChanged(e),e==C){this.clearTimeout(),this.script.onload=this.script.onerror=this.script.onreadystatechange=null,this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.script=null,t?(this.emit_abort(),n=this.stateOnAbort):(this.processResponse(),this.isSuccessful()&&!s?(n=N.READY,this.emit_success(this.getResponseData())):(n=N.ERROR,r=this.getResponseError(),this.emit_failure(r))),this.emit_complete(this);var a=this.callback;t?setTimeout(i[a]=function(){h(a)},3e5):h(a)}else n=N.PROCESSING;this.setState(n,r)}}var f=i.document,p=i.encodeURIComponent,m=n.object.extend,v=n.object.slice,g=n.object.merge,y=n.require("./t.js"),b=y.createTransportEvent,_=y.createRequestEvent,T=y.AbstractRequest,E=y.AbstractTransport,N=n.require("./f.js").STATE,x=3,C=4,S={},j=T.subclass({className:"basis.net.jsonp.Request",timeout:3e4,timer_:null,emit_readyStateChanged:_("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==this.data.status},processResponse:function(){this.callback in S&&this.update({contentType:"application/javascript",data:c(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:n.fn.$true,prepareRequestData:function(e){var t=[],n=e.url;e=v(e),this.callback=u();for(var i in e.params){var r=e.params[i];null!=r&&null!=r.toString()&&t.push(p(i)+"="+p(r.toString()))}return t.push(p(e.callbackParam)+"="+p(this.callback)),t=t.join("&"),e.routerParams&&(n=n.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(t,n){return n in e.routerParams?e.routerParams[n]:t})),t&&(n+=(-1==n.indexOf("?")?"?":"&")+t),e.requestUrl=n,e},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(e){if(!f)throw"JSONP is not supported for current environment";var t=f.head||f.getElementByName("head")[0]||f.documentElement,n=f.createElement("script");this.update({data:void 0,status:"",error:""}),this.script=n,n.async=!0,n.src=e.requestUrl,n.charset=e.encoding,n.onload=n.onerror=n.onreadystatechange=d.bind(this),this.prevReadyState_=-1,this.emit_start(),d.call(this,0),this.setTimeout(this.timeout),t.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),d.call(this,C,!0))},setTimeout:function(e){this.timer_=setTimeout(this.timeoutAbort.bind(this),e)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}}),this.emit_timeout(this),this.abort()},destroy:function(){this.abort(),T.prototype.destroy.call(this)}}),I=E.subclass({className:"basis.net.jsonp.Transport",requestClass:j,emit_readyStateChanged:b("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",init:function(){E.prototype.init.call(this),this.params=v(this.params)},setParam:function(e,t){this.params[e]=t},setParams:function(e){this.clearParams();for(var t in e)this.setParam(t,e[t])},removeParam:function(e){delete this.params[e]},clearParams:function(){for(var e in this.params)delete this.params[e]},prepareRequestData:function(e){var t=e.url||this.url;if(!t)throw new Error("URL is not defined");return m(e,{url:t,encoding:e.encoding||this.encoding,params:g(this.params,e.params),routerParams:e.routerParams,callbackParam:e.callbackParam||this.callbackParam}),e}});t.exports={Request:j,Transport:I,request:function(e,t,i){"string"==typeof e&&(e={url:e});var r=new I(e);r.addHandler({success:t&&function(e,n,i){t(i)},failure:i&&function(e,t,n){i(n)},complete:function(){n.nextTick(function(){r.destroy()})}}),r.request()}}},"t.js":function(e,t,n,i,r,s,a,o,l){function u(e){var t=p(e);return function(){t.apply(b,arguments),this.service&&t.apply(this.service,arguments),t.apply(this,arguments)}}function c(e){var t=p(e);return function(){var n=[this].concat(h(arguments));this.transport?this.transport["emit_"+e].apply(this.transport,n):t.apply(b,n),t.apply(this,arguments)}}var h=n.array.from,d=n.object.slice,f=n.require("./2.js"),p=f.create,m=f.Emitter,v=n.require("./f.js").Object,g=n.require("./f.js").STATE,y=[],b=new m({abort:function(){for(var e=h(y),t=0;t<e.length;t++)e[t].abort();return e},handler:{start:function(e){n.array.add(y,e.transport)},complete:function(e){n.array.remove(y,e.transport)}}}),_=v.subclass({className:"basis.net.AbstractRequest",requestData:null,transport:null,stateOnAbort:g.UNDEFINED,emit_start:c("start"),emit_timeout:c("timeout"),emit_abort:c("abort"),emit_success:c("success"),emit_failure:c("failure"),emit_complete:c("complete"),abort:n.fn.$undef,doRequest:n.fn.$undef,destroy:function(){v.prototype.destroy.call(this),this.requestData=null}}),T={start:function(e,t){n.array.add(this.inprogressRequests,t)},complete:function(e,t){n.array.remove(this.inprogressRequests,t)}},E={complete:function(){var e=this.requestQueue.shift();e&&n.nextTick(function(){e.doRequest()})}},N=m.subclass({className:"basis.net.AbstractTransport",requestClass:_,stopped:!1,poolLimit:null,poolHashGetter:null,requests:null,requestQueue:null,inprogressRequests:null,stoppedRequests:null,emit_start:u("start"),emit_timeout:u("timeout"),emit_abort:u("abort"),emit_success:u("success"),emit_failure:u("failure"),emit_complete:u("complete"),init:function(){this.requests={},this.requestQueue=[],this.inprogressRequests=[],m.prototype.init.call(this),this.addHandler(T,this),this.poolLimit&&this.addHandler(E,this)},getRequestByHash:function(e){var t=this.poolHashGetter?this.poolHashGetter(e):e.origin?e.origin.basisObjectId:"default",n=this.requests[t];return n||(n=function(e){for(var t in e.requests){var n=e.requests[t];if(n.isIdle()&&-1==e.requestQueue.indexOf(n))return delete e.requests[t],n}}(this)||new this.requestClass({transport:this}),this.requests[t]=n),n},prepare:n.fn.$true,prepareRequestData:n.fn.$self,request:function(e){if(this.prepare()){var t=this.prepareRequestData(d(e)),n=this.getRequestByHash(t);return n.requestData&&n.abort(),n.requestData=t,!this.poolLimit||this.inprogressRequests.length<this.poolLimit?n.doRequest():(this.requestQueue.push(n),n.setState(g.PROCESSING)),n}},abort:function(){for(;e=this.requestQueue.pop();)e.setState(g.ERROR);for(var e;e=this.inprogressRequests.pop();)e.abort()},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stopped){for(var e;e=this.stoppedRequests.pop();)this.request(e.requestData);this.stopped=!1}},destroy:function(){for(var e in this.requests)this.requests[e].destroy();this.requests=null,this.inprogressRequests=null,this.requestQueue=null,this.stoppedRequests=null,m.prototype.destroy.call(this)}});t.exports={createTransportEvent:u,createRequestEvent:c,transportDispatcher:b,AbstractRequest:_,AbstractTransport:N}},"u.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){e.inprogressRequests=e.inprogressRequests.filter(function(e){return e.transport!==t}),n.array.remove(e.inprogressTransports,t),-1!=e.inprogressTransports.indexOf(t)||e.stoppedTransports&&-1!=e.stoppedTransports.indexOf(t)||t.removeHandler(m,e)}var c=n.require("./2.js"),h=c.create,d=c.Emitter,f=n.require("./v.js").Transport,p=n.require("./x.js").create,m={destroy:function(e){this.stoppedTransports&&n.array.remove(this.stoppedTransports,e),u(this,e)}},v={start:function(e,t){this.inprogressRequests.push(t),!n.array.add(this.inprogressTransports,t.transport)||e.stoppedTransports&&-1!=e.stoppedTransports.indexOf(t.transport)||t.transport.addHandler(m,this)},complete:function(e,t){n.array.remove(this.inprogressRequests,t),this.inprogressRequests.some(function(e){return e.transport===this.transport},t)||u(this,t.transport)}},g=d.subclass({className:"basis.net.service.Service",inprogressRequests:null,inprogressTransports:null,stoppedTransports:null,transportClass:f,emit_sessionOpen:h("sessionOpen"),emit_sessionClose:h("sessionClose"),emit_sessionFreeze:h("sessionFreeze"),emit_sessionUnfreeze:h("sessionUnfreeze"),secure:!1,prepare:n.fn.$true,signature:n.fn.$undef,isSessionExpiredError:n.fn.$false,init:function(){d.prototype.init.call(this),"isSecure"in this&&(this.secure=this.isSecure),this.inprogressRequests=[],this.inprogressTransports=[];var e=this.transportClass;this.transportClass=e.subclass({service:this,secure:this.secure,emit_failure:function(t,i){e.prototype.emit_failure.call(this,t,i),this.secure&&this.service.isSessionExpiredError(t)&&(this.service.freeze(),this.service.stoppedTransports&&n.array.add(this.service.stoppedTransports,this)&&this.addHandler(m,this.service),this.stop())},init:function(){e.prototype.init.call(this),"needSignature"in this&&(this.secure=this.needSignature)},request:function(t){if(this.service.prepare(this,t)&&(!this.secure||this.service.sign(this,t)))return e.prototype.request.call(this,t)}}),this.addHandler(v)},sign:function(e,t){if(this.sessionKey)return this.signature(e,this.sessionData,t),!0},openSession:function(e,t){this.sessionKey=e,this.sessionData=t||e,this.unfreeze(),this.emit_sessionOpen()},closeSession:function(){this.freeze(),this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionKey=null,this.sessionData=null,this.stoppedTransports=this.inprogressTransports.filter(function(e){return e.secure});for(var e,t=0;e=this.inprogressTransports[t];t++)e.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports){for(var e,t=0;e=this.stoppedTransports[t];t++)e.resume();this.stoppedTransports=null}this.emit_sessionUnfreeze()},createTransport:function(e){return new this.transportClass(e)},createAction:function(e){return p(n.object.complete({service:this},e))},destroy:function(){this.inprogressRequests=null,this.inprogressTransports=null,this.stoppedTransports=null,this.sessionKey=null,this.sessionData=null,d.prototype.destroy.call(this)}});t.exports={Service:g}},"v.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){var i={};return k.test(t.method)?v&&t.body instanceof v!=0||(i["Content-Type"]=t.contentType+(t.encoding?";charset="+t.encoding:"")):E.test("ie")&&(i["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT"),i=n.object.merge(i,t.headers),T(t.headers,function(e,t){"content-type"==e.trim().toLowerCase()?i["Content-Type"]=t:i[e]=t}),T(i,function(t,n){null!=n&&"function"!=typeof n?e.setRequestHeader(t,n):delete i[t]}),i}function c(e,t){if(t.responseType&&t.asynchronous&&"responseType"in e)try{e.responseType=t.responseType}catch(e){}}function h(e){try{return n.json.parse(e)}catch(e){}}function d(e){var t=this.xhr;if(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_),t&&("number"!=typeof e&&(e=t.readyState),e!=this.prevReadyState_)){if(this.prevReadyState_=e,this.emit_readyStateChanged(e),e==I)return t.onreadystatechange=n.fn.$undef,this.clearTimeout(),void(this.timer_=setTimeout(f.bind(this),10));this.setState(R.PROCESSING)}}function f(){var e,t;this.clearTimeout(),this.processResponse(),this.isSuccessful()?(e=R.READY,this.emit_success(this.getResponseData())):(e=R.ERROR,t=this.getResponseError(),this.emit_failure(t)),this.emit_complete(),this.setState(e,t)}function p(){this.clearTimeout(),this.emit_abort(),this.emit_complete(this),this.setState(this.stateOnAbort)}var m=i.encodeURIComponent,v=i.FormData,g=i.XMLHttpRequest,y=n.object.extend,b=n.object.slice,_=n.object.merge,T=n.object.iterate,E=n.require("./w.js"),N=n.require("./t.js"),x=N.createTransportEvent,C=N.createRequestEvent,S=N.AbstractRequest,j=N.AbstractTransport,I=4,R=n.require("./f.js").STATE,A="HEAD GET POST PUT PATCH DELETE TRACE LINK UNLINK CONNECT".split(" "),k=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,D=new RegExp("^("+A.join("|")+")\\s+","i"),O=/^application\/json/i,w="native",q=function(){if("XMLHttpRequest"in i)return function(){return new g};var e=i.ActiveXObject;if(e)for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;w=t[n];n++)try{if(new e(w))return function(){return new e(w)}}catch(e){}throw new Error(w="XMLHttpRequest is not supported!")}(),M=S.subclass({className:"basis.net.ajax.Request",requestStartTime:0,timeout:3e4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:C("readyStateChanged"),init:function(){S.prototype.init.call(this),this.xhr=q()},isIdle:function(){return this.xhr.readyState==I||0==this.xhr.readyState},isSuccessful:function(){var e=this.xhr.status;return e>=200&&e<300||304==e},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var e=this.xhr;return e.responseType||"json"!=this.responseType&&!O.test(this.data.contentType)?"response"in e?e.response:e.responseText:h(e.responseText,this.lastRequestUrl_)},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){var e=this.xhr;return{code:"SERVER_ERROR",msg:this.responseType?e.response||e.statusText||"Error":e.responseText,response:this.getResponseData()}},prepare:n.fn.$true,prepareRequestData:function(e){var t=[],n=e.url;e=b(e);for(var i in e.params){var r=e.params[i];null!=r&&null!=r.toString()&&t.push(m(i)+"="+m(r.toString()))}return t=t.join("&"),!e.body&&k.test(e.method)&&(e.body=t||"",t=""),e.routerParams&&(n=n.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(t,n){return n in e.routerParams?e.routerParams[n]:t})),t&&(n+=(-1==n.indexOf("?")?"?":"&")+t),e.requestUrl=n,e},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(e){this.update({contentType:"",status:""}),E.test("gecko1.8.1-")&&e.asynchronous&&(this.xhr=q()),this.emit_start();var t=this.xhr;this.prevReadyState_=-1,t.onreadystatechange=d.bind(this),t.onabort=p.bind(this),e.asynchronous||d.call(this,0),t.open(e.method,e.requestUrl,e.asynchronous),this.lastRequestUrl_=e.requestUrl,c(t,e),this.responseType=e.responseType||"";var n=u(t,e);this.setTimeout(this.timeout);var i=null;return k.test(e.method)&&("function"==typeof(i=e.body)&&(i=i.call(e.bodyContext)),O.test(n["Content-Type"])&&"string"!=typeof i&&(i=JSON.stringify(i)),E.test("ie9-")&&("object"==typeof i&&void 0!==i.documentElement&&"string"==typeof i.xml?i=i.xml:"string"==typeof i?i=i.replace(/\r/g,""):null!=i&&""!=i||(i="[No data]"))),this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null,this.xhr===t&&1==t.readyState&&t.send(i)}.bind(this),this.sendDelay)):t.send(i),!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=I&&0!=this.xhr.readyState&&d.call(this,I))},setTimeout:function(e){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=e,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),e))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}}),this.emit_timeout(this),this.abort()},destroy:function(){this.abort(),this.xhr=null,S.prototype.destroy.call(this)}}),P=j.subclass({className:"basis.net.ajax.Transport",requestClass:M,emit_readyStateChanged:x("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:n.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",body:null,bodyContext:null,init:function(){j.prototype.init.call(this),"postBody"in this&&(null==this.body&&(this.body=this.postBody),this.postBody=null),this.params=b(this.params),this.routerParams=b(this.routerParams)},setParam:function(e,t){this.params[e]=t},setParams:function(e){this.clearParams();for(var t in e)this.setParam(t,e[t])},removeParam:function(e){delete this.params[e]},clearParams:function(){for(var e in this.params)delete this.params[e]},prepareRequestData:function(e){if(!e.url&&!this.url)throw new Error("URL is not defined");y(e,{headers:_(this.requestHeaders,e.headers),params:_(this.params,e.params),routerParams:_(this.routerParams,e.routerParams)}),"postBody"in e&&(null==this.body&&(e.body=e.postBody),e.postBody=null),n.object.complete(e,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,body:this.body,bodyContext:this.bodyContext,responseType:this.responseType});var t=e.url.match(D);return t&&(e.method=t[1],e.url=e.url.substr(t[0].length)),e}});t.exports={Request:M,Transport:P,request:function(e,t,i){"string"==typeof e&&(e={url:e,asynchronous:!(!t&&!i)});var r=new P(e);r.addHandler({success:t&&function(e,n,i){t(i)},failure:i&&function(e,t,n){i(n)},complete:function(){n.nextTick(function(){r.destroy()})}});var s=r.request();if(!s.requestData.asynchronous)return s.getResponseData()}}},"w.js":function(e,t,n,i,r,s,a,o,l){function u(e){for(var t=1e6,n=String(e).split("."),i=0,r=0;i<4&&i<n.length;i++,t/=100)r+=n[i]*t;return r}function c(e){var t=e.toLowerCase();if(t in p)return p[t];var n=t.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(n){p[t]=!1;var i=n[1].toLowerCase(),r=u(n[3]),s=n[4]||"=",a=f[i];if(a)return p[t]=!r||"="==s&&a==r||"+"==s&&a>=r||"-"==s&&a<r}return!1}var h=i.navigator&&i.navigator.userAgent||"",d=i.opera,f={},p={},m="unknown",v={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var g in v){var y=g;if(("MSIE"!=g||!d)&&(("Safari"!=g||!/chrome/i.test(h))&&("AppleWebKit"!=g||!/iphone/i.test(h))&&("MSIE"==g&&/Trident\/\d+/i.test(h)&&/rv:\d+/i.test(h)&&(y="rv"),h.match(new RegExp(y+".(\\d+(\\.\\d+)*)","i"))))){var b=v[g],_=d&&"function"==typeof d.version?d.version():RegExp.$1,T=u(_);m=b[0]+" "+_;for(var E=0;E<b.length;E++)f[b[E].toLowerCase()]=T}}t.exports={prettyName:m,is:c,test:function(){return n.array(arguments).some(c)}}},"x.js":function(e,t,n,i,r,s,a,o,l){function u(e){return e.transport?e.transport:e.service?e.service.createTransport(e):e.createTransport?e.createTransport(e):new m(e)}var c=n.require("./f.js").STATE,h=c.UNDEFINED,d=c.READY,f=c.PROCESSING,p=c.ERROR,m=n.require("./v.js").Transport,v=n.require("./y.js"),g=function(){},y={start:function(e,t){var n=t.requestData.origin;this.start.call(t.requestData.origin),n.state!=f&&n.setState(f)},success:function(e,t,n){var i=t.requestData.origin;this.success.call(i,n),i.state==f&&i.setState(d)},failure:function(e,t,n){var i=t.requestData.origin;this.failure.call(i,n),i.state==f&&i.setState(p,n)},abort:function(e,t){var n=t.requestData.origin;this.abort.call(n),n.state==f&&n.setState(e.stateOnAbort||t.stateOnAbort||h)},complete:function(e,t){this.complete.call(t.requestData.origin)}},b={start:g,success:g,failure:g,abort:g,complete:g},_={success:function(e,t){this.fulfill(t)},abort:function(){this.reject("Request aborted")},failure:function(e,t){this.reject(t)},complete:function(){this.request.removeHandler(_,this)}};t.exports={create:function(e){if("function"==typeof(e=n.object.extend({prepare:g,request:g},e)).body){var t=e.body;e.body=function(){return t.apply(this.context,this.args)}}var i=n.object.splice(e,["prepare","request"]),r=n.object.merge(b,n.object.splice(e,["start","success","failure","abort","complete"])),s=n.fn.lazyInit(function(){var t=u(e);return t.addHandler(y,r),t});return function(){if(this.state!=f){if(i.prepare.apply(this,arguments))return v.reject("Prepare handler returns trulthy result. Operation aborted. Context: ",this);var e,t=n.object.complete({origin:this,bodyContext:{context:this,args:n.array(arguments)}},i.request.apply(this,arguments));if("function"==typeof t.body){var r=t.body;t.body=function(){return r.apply(this.context,this.args)}}return(e=s().request(t))?new v(function(t,n){e.addHandler(_,{request:e,fulfill:t,reject:n})}):v.reject("Request is not performed")}return v.reject("Context in processing state, request is not performed")}}}},"y.js":function(e,t,n,i,r,s,a,o,l){function u(){for(var e=0;e<S.length;e++)S[e][0](S[e][1]);S=[],_=!1}function c(e,t){S.push([e,t]),_||(_=!0,n.nextTick(u,0))}function h(e,t){function n(e){v(t,e)}try{e(function(e){p(t,e)},n)}catch(e){n(e)}}function d(e){var t=e.owner,n=t.state_,i=t.data_,r=e[n],s=e.then;if("function"==typeof r){n=N;try{i=r(i)}catch(e){v(s,e)}}f(s,i)||(n===N&&p(s,i),n===x&&v(s,i))}function f(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var i=t.then;if("function"==typeof i)return i.call(t,function(i){n||(n=!0,t!==i?p(e,i):m(e,i))},function(t){n||(n=!0,v(e,t))}),!0}}catch(t){return n||v(e,t),!0}return!1}function p(e,t){e!==t&&f(e,t)||m(e,t)}function m(e,t){e.state_===T&&(e.state_=E,e.data_=t,c(y,e))}function v(e,t){e.state_===T&&(e.state_=E,e.data_=t,c(b,e))}function g(e){e.then_=e.then_.forEach(d)}function y(e){e.state_=N,g(e)}function b(e){e.state_=x,g(e)}var _,T="pending",E="sealed",N="fulfilled",x="rejected",C=function(){},S=[],j=function(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof j==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],h(e,this)};j.prototype={constructor:j,state_:T,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(C),fulfilled:e,rejected:t};return this.state_===N||this.state_===x?c(d,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},j.all=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new t(function(t,n){for(var i,r=[],s=0,a=0;a<e.length;a++)(i=e[a])&&"function"==typeof i.then?i.then(function(e){return s++,function(n){r[e]=n,--s||t(r)}}(a),n):r[a]=i;s||t(r)})},j.race=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new t(function(t,n){for(var i,r=0;r<e.length;r++)(i=e[r])&&"function"==typeof i.then?i.then(t,n):t(i)})},j.resolve=function(e){var t=this;return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},j.reject=function(e){return new this(function(t,n){n(e)})},t.exports=j},"z.js":function(e,t,n,i,r,s,a,o,l){function u(e,t){for(var n,i=w(e.callbacks_),r=0;n=i[r];r++)t&&n.enterInited||!n.callback.enter||(n.enterInited=!0,n.callback.enter.call(n.context))}function c(e){for(var t,n=w(e.callbacks_),i=0;t=n[i];i++)t.callback.leave&&t.callback.leave.call(t.context)}function h(e,t){for(var n,i=w(e.callbacks_),r=0;n=i[r];r++)t&&n.matchInited||!n.callback.match||(n.matchInited=!0,n.callback.match.apply(n.context,w(e.value)))}function d(){P||(D?j.addHandler(i,"hashchange",m):N=setInterval(m,O),P=!0,m())}function f(e){if(x)return!0;var t=Date.now();if(L=L.filter(function(e){return t-e.time<200}),n.array.lastSearch(L,e,"path")&&n.array.lastSearch(L,e,"path",L.lastSearchIndex))return x=setTimeout(function(){x=null,m()},200),!0;L.push({time:Date.now(),path:e})}function p(e){if(!e)return{};for(var t={},n=e.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),s=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);t[s]=a}return t}function m(){var e=C.hash.substr(1)||"";if(e!=E){if(f(e))return;E=e;var t=[],n=[],i=[];q.forEach(function(r){var s=r.processLocation_(e);s&H&&t.push(r),s&U&&n.push(r),s&B&&i.push(r)});for(r=0;r<t.length;r++)c(t[r]);for(r=0;r<n.length;r++)u(n[r]);for(var r=0;r<i.length;r++)h(i[r])}else q.forEach(function(e){e.value&&(u(e,!0),h(e,!0))})}function v(e,t){return t?new z(e,t):new Y(e)}function g(e){var t=e.path,n=e.config;if(t instanceof Y)return t;var i;if(n||(i=M[t]),!i&&e.autocreate&&(i=v("[object RegExp]"==Object.prototype.toString.call(t)?{path:t,regexp:t,ast:null,params:[]}:R(t),n),q.push(i),i instanceof z==0&&(M[t]=i),"string"==typeof E)){var r=i.processLocation_(E);r&U&&u(i),r&B&&h(i)}return i}function y(e,t,n){var i=g({path:e,autocreate:!0});return i.callbacks_.push({cb_:t,context:n,callback:"function"!=typeof t?t||{}:{match:t}}),V.add(i),i}function b(e,t,i){if(e=g({path:e}))for(var r,s=0;r=e.callbacks_[s];s++)if(r.cb_===t&&r.context===i)return e.callbacks_.splice(s,1),e.value&&t&&t.leave&&t.leave.call(i),void(e.callbacks_.length||e.handler&&e.handler.handler||e.matched.handler||(n.array.remove(q,e),e instanceof z||delete M[e.path]))}function _(e,t){t?C.replace(C.pathname+"#"+e):C.hash=e,P&&m()}function T(e){E=e,C.replace(C.pathname+"#"+e)}var E,N,x,C=i.location,S=i.document,j=n.require("./d.js"),I=n.require("./f.js").Value,R=n.require("./2e.js").parsePath,A=n.require("./2e.js").stringify,k=S.documentMode,D="onhashchange"in i&&(void 0===k||k>7),O=50,w=n.array.from,q=[],M={},P=!1,L=[],U=1,B=2,H=4,V=n.asap.schedule(function(e){e.value&&(u(e,!0),h(e,!0))}),F=n.asap.schedule(function(e){e.flush(!0)}),Y=n.Token.subclass({className:"basis.router.Route",path:null,matched:null,ast_:null,names_:null,regexp_:null,params_:null,callbacks_:null,init:function(e){var t=e.regexp;n.Token.prototype.init.call(this,null),this.path=e.path,this.matched=this.as(Boolean),this.ast_=e.ast,this.names_=e.params,this.regexp_=t,this.params_={},this.callbacks_=[]},matches_:function(e){return{pathMatch:e.match(this.regexp_),query:null}},processLocation_:function(e){V.remove(this);var t=0,n=this.matches_(e);return n.pathMatch?(this.value||(t|=U),this.setMatch_(w(n.pathMatch,1),n.query),t|=B):this.value&&(this.setMatch_(null),t|=H),t},param:function(e){var t="number"==typeof e?e:this.names_.indexOf(e);return t in this.params_==0&&(this.params_[t]=this.as(function(e){return e&&e[t]})),this.params_[t]},setMatch_:function(e){if(e){e=e.slice(0);for(var t in e)t in this.names_&&(e[this.names_[t]]=e[t])}this.set(e)},add:function(e,t){return y(this,e,t)},remove:function(e,t){b(this,e,t)}}),z=Y.subclass({className:"basis.router.ParametrizedRoute",params:null,normalize:n.fn.$undef,paramsConfig_:null,init:function(e,t){Y.prototype.init.apply(this,arguments),this.paramsConfig_=this.constructParamsConfig_(t.params),t.normalize&&"function"==typeof t.normalize&&(this.normalize=t.normalize),this.constructParams_()},constructParamsConfig_:function(e){var t={};return n.object.iterate(e,function(e,i){if("function"==typeof i){var r,s,a;a="DEFAULT_VALUE"in i?i.DEFAULT_VALUE:i(),r="deserialize"in i&&"function"==typeof i.deserialize?i.deserialize:n.fn.$self,s="serialize"in i&&"function"==typeof i.serialize?i.serialize:n.fn.$self,t[e]={transform:i,serialize:s,deserialize:r,defaultValue:a,currentValue:a,nextValue:void 0}}else t[e]={transform:n.fn.$self,serialize:n.fn.$self,deserialize:n.fn.$self,defaultValue:void 0,currentValue:void 0,nextValue:void 0}}),t},constructParams_:function(){var e=this;e.params={},e.attach(function(t){n.object.iterate(e.paramsConfig_,function(n,i){t&&n in t?I.prototype.set.call(e.params[n],t[n]):I.prototype.set.call(e.params[n],i.defaultValue)})}),n.object.iterate(e.paramsConfig_,function(t,n){var i=new I({value:n.defaultValue,set:function(t){if(e.value){F.add(e);var i=n.transform(t,n.currentValue);n.nextValue=i}}});e.params[t]=i})},calculateDelta_:function(e){var t=null;return n.object.iterate(this.paramsConfig_,function(n,i){i.currentValue!==e[n]&&((t=t||{})[n]=i.currentValue)}),t},setMatch_:function(e,t){var i=p(t);if(e){var r=this.paramsArrayToObject_(e),s={};for(var a in this.params)a in r?s[a]=r[a]:a in i&&(s[a]=i[a]);var o={};n.object.iterate(this.paramsConfig_,function(e,t){var n=t.deserialize,i=t.transform;if(e in s){var r=n(s[e]);o[e]=i(r,t.currentValue)}else o[e]=t.defaultValue},this);var l=this.calculateDelta_(o);this.normalize(o,l),n.object.iterate(this.paramsConfig_,function(e,t){var n;n=e in o?t.transform(o[e],t.currentValue):t.defaultValue,t.currentValue=n,t.nextValue=n},this);var u={};n.object.iterate(this.paramsConfig_,function(e,t){u[e]=t.currentValue}),this.set(u),T(this.getCurrentPath_())}else this.set(null)},update:function(e,t){this.value&&(n.object.iterate(e,function(e,t){e in this.params&&this.params[e].set(t)},this),this.flush(t))},navigate:function(e,t){_(this.getPath(e),t)},getPath:function(e){var t={};e=e||{},n.object.iterate(this.paramsConfig_,function(n,i){t[n]=n in e?i.transform(e[n],i.defaultValue):i.defaultValue},this);var i={};return n.object.iterate(this.paramsConfig_,function(e,n){i[e]=n.serialize(t[e])}),A(this.ast_,i,this.areModified_(t))},flush:function(e){_(this.getCurrentPath_(),e)},getCurrentPath_:function(){var e={};return n.object.iterate(this.paramsConfig_,function(t,n){e[t]=n.nextValue}),this.getPath(e)},areModified_:function(e){var t={};return n.object.iterate(this.paramsConfig_,function(n,i){t[n]=e[n]!==i.defaultValue}),t},paramsArrayToObject_:function(e){var t={};for(var n in e)n in this.names_&&e[n]&&(t[this.names_[n]]=decodeURIComponent(e[n]));return t},matches_:function(e){var t=e.split("?"),n=t[0],i=t[1];return{pathMatch:n.match(this.regexp_),query:i}},destroy:function(){this.paramsConfig_=null,this.params=null,F.remove(this),n.array.remove(q,this),Y.prototype.destroy.apply(this,arguments)}});d(),t.exports={debug:!1,start:d,stop:function(){P&&(P=!1,D?j.removeHandler(i,"hashchange",m):clearInterval(N))},checkUrl:m,navigate:_,add:y,remove:b,route:function(e,t){return g({path:e,autocreate:!0,config:t})}}},"2e.js":function(e,t,n,i,r,s,a,o,l){function u(e,t,n){for(var i=null,r=0;r<e.options.length;r++){var s=c(e.options[r].children,t,n,!0);if(s.modifiedParamsWritten)return s;i||(i=s)}return i}function c(e,t,i){function r(e){l||(l={}),l[e]=!0}function s(e){o+=a+e,a=""}var a="",o="",l=null;return e.forEach(function(e){switch(e.type){case h.WORD:s(e.name);break;case h.PLAIN_PARAM:case h.ANY_PARAM:s(encodeURIComponent(t[e.name])),i[e.name]&&r(e.name);break;case h.GROUP:var o=u(e,t,i);o.modifiedParamsWritten?(s(o.result),n.object.iterate(o.modifiedParamsWritten,r)):a+=o.result}}),{result:o,modifiedParamsWritten:l}}var h={PLAIN_PARAM:"PLAIN_PARAM",ANY_PARAM:"ANY_PARAM",WORD:"WORD",GROUP:"GROUP",GROUP_OPTION:"GROUP_OPTION"};t.exports={parsePath:function(e){function t(e){return a.substr(e).match(/^\w+/)}function i(e){return s(e+1,")","|")}function r(e){for(var t,n="",r=[];t=i(e);){if(r.push({type:h.GROUP_OPTION,children:t.ast}),e=t.offset,n+=t.result,")"==t.stoppedAt)return{type:h.GROUP,options:r,result:n,offset:e};n+="|"}return null}function s(e,i,s){function l(){d&&(f.push({type:h.WORD,name:d}),d="")}for(var u,c="",d="",f=[],p=e;p<a.length;p++){var m=a.charAt(p);switch(m){case i:case s:return l(),{result:c,offset:p,stoppedAt:m,ast:f};case"\\":var v=a.charAt(++p);c+="\\"+v,d+=v;break;case"|":c+=")"!=i?"\\|":"|",d+="|";break;case"(":(u=r(p))?(p=u.offset,c+="(?:"+u.result+")?",l(),f.push({type:h.GROUP,options:u.options})):(c+="\\(",d+="(");break;case":":l(),(u=t(p+1))?(p+=u[0].length,c+="([^/]+)",o.push(u[0]),f.push({type:h.PLAIN_PARAM,name:u[0]})):c+=":";break;case"*":l(),(u=t(p+1))?(p+=u[0].length,c+="(.*?)",o.push(u[0]),f.push({type:h.ANY_PARAM,name:u[0]})):c+="\\*";break;default:c+=n.string.forRegExp(m),d+=m}}return l(),i?null:{regexpStr:c,ast:f}}var a=String(e||""),o=[],l=s(0);return{path:e,regexp:new RegExp("^"+l.regexpStr+"$","i"),params:o,ast:l.ast}},stringify:function(e,t,i){var r=c.apply(this,arguments),s=r.modifiedParamsWritten,a=r.result,o=[];return n.object.iterate(t,function(e,t){s&&s[e]||i[e]&&o.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),o.length&&(a+="?"+o.join("&")),a},TYPE:h}},"10.js":function(e,t,n,i,r,s,a,o,l){function u(e){v.title=e}function c(e){return"string"==typeof e?v.getElementById(e):e}function h(e,t){try{return e.parentNode.replaceChild(t,e),t}catch(t){return e}}function d(e,t){try{return e.appendChild(t)}catch(t){return e.appendChild(v.createComment(""))}}var f,p,m=n.require("./f.js").resolveValue,v=i.document||{title:"unknown"},g=v.title,y=n.fn.$undef,b=n.fn.lazyInit(function(e){var t=[],i=!1,r={inited:!1,setTitle:function(e){e!=g&&(g instanceof n.Token&&g.detach(u),e instanceof n.Token?(e.attach(u),u(e.get())):u(e),g=e)},setElement:function(e){(e=m(r,r.setElement,e,"elementRA_"))&&e.element&&(e=e.element);var t=c(e);if(p!==t)if(p)p=h(p,t);else{f||(f={type:"append",node:v.body});var n=c(f.node);p=t,n&&(p="append"==f.type?d(n,p):h(n,p))}},ready:function(e,n){i?e.call(n,r):t.push({fn:e,context:n})}};"function"!=typeof e||n.fn.isFactory(e)?e.constructor!==Object&&(e={element:e}):e={init:e};for(var s in e){var a=e[s];switch(s){case"title":r.setTitle(a);break;case"container":f={type:"append",node:a};break;case"replace":f={type:"replace",node:a};break;case"element":p=a;break;case"init":y="function"==typeof a?a:y}}return n.doc.body.ready(function(){var e=p,n=y.call(r);n&&(e=n),p=null,r.setElement(e),i=!0,r.inited=!0;for(var s;s=t.shift();)s.fn.call(s.context,r)}),r});t.exports={create:b}}};!function i(r,s,a){function o(e){function t(e){return Math.round(e).toString(36)}var n=t(10+25*Math.random());for(e||(e=16);n.length<e;)n+=t(new Date*Math.random());return n.substr(0,e)}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){for(var n in t)n in e==0&&(e[n]=t[n]);return e}function c(e){var t=[];for(var n in e)t.push(n);return t}function h(e,t){var n={};if(!t)return l(n,e);for(var i,r=0;i=t[r++];)i in e&&(n[i]=e[i]);return n}function d(){for(var e={},t=0;t<arguments.length;t++)l(e,arguments[t]);return e}function f(e,t,n){var i=[];for(var r in e)i.push(t.call(n,r,e[r]));return i}function p(e){return e}function m(){}function v(e){"function"!=typeof e&&(e=O(e));var t=function(t){return e(t)};return t.factory=k,t}function g(e){var t=W[e.url];if(t)for(var n=0;n<t.length;n++)t[n](e.get(),e.url)}function y(e,t,n){try{return new Function(t,'"use strict";\n'+n)}catch(t){q.error("Compilation error at "+e+("line"in t?":"+(t.line-1):"")+": "+t)}}function b(e){if(e in re==0){var t=e.split("."),n=t.shift(),i=J(n+":"+t.join("/")+".js").replace(/\/\.js$/,".js");re[e]=i,se[i]=e}return re[e]}function _(t){var n=ie[t];return n||((n=ie[t]=new oe(t)).namespaces_={},n.namespaces_[t]=n,V.noConflict||(x[t]=n)),"library"!=t||e||(e=ie[t]),n}function T(e){if(A.call(ie,e))return ie[e];for(var t=_((e=e.split("."))[0]),n=t,i=1;i<e.length;i++){var r=e[i],s=e.slice(0,i+1).join(".");if(!A.call(t.namespaces_,s)){var a=new oe(s);V.implicitExt&&(n[r]=a),t.namespaces_[s]=a}n=t.namespaces_[s]}return ie[e.join(".")]=n,n}function E(e,t){if(null!=e){var n=e.length;if(void 0===n||"[object Function]"==R.call(e))return[e];if(t||(t=0),n-t>0){for(var i=[],r=0,s=t;s<n;)i[r++]=e[s++];return i}}return[]}function N(e,t,n){for(var i=[],r="function"==typeof t,s=0;s<e;s++)i[s]=r?t.call(n,s,i):t;return i}var x=Function("return this")(),C=x.process,S=x.document,j=x.location,I=!(x===r||!C||!C.argv)&&x,R=Object.prototype.toString,A=Object.prototype.hasOwnProperty,k={},D=function(){},O=function(){function e(t){var s,o,u,h=this;if("function"==typeof t||"string"==typeof t){if(s=n(t,h[a]),u=r+s[a],A.call(h,u))return h[u];"function"==typeof s[l]&&(s=s[l]),o=function(e){return s(h(e))}}else{var d=t;if(!d)return w;o=function(e){return d[h(e)]}}return o[a]=c++,o[l]=t,o.__extend__=i,o.as=e,u&&(h[u]=o),o}function t(e){return new Function("object","return object != null ? object."+e+" : object")}function n(n,r){var s,o=n;if(n&&"string"==typeof n){if(A.call(h,n))return h[n];o=h[n]=t(n)}return"function"!=typeof o?w:o.__extend__===i?o:A.call(o,r)?o[r]:(s=o[r]=o!==n?o:function(e){return o(e)},s[a]=c++,s[l]=n,s.__extend__=i,s.as=e,s)}function i(e,t){var i=e&&e!==w?n(e,s):w;return t||""===t?("string"==typeof t&&(t=pe.formatter(t)),i.as(t)):i}var r="basisGetterId"+o()+"_",s=r+"root",a=r,l=r+"base",u=r+"parent",c=1,h={};return i.ID=a,i.SOURCE=l,i.PARENT=u,i}(),w=function(){var e=function(){};return e[O.ID]=O.ID+"nullGetter",e.__extend__=O,e.as=function(){return e},e}(),q=function(){var e=x.console,t={log:m,info:m,warn:m,error:m};return e&&f(t,function(n){t[n]="bind"in Function.prototype&&"function"==typeof e[n]?Function.prototype.bind.call(e[n],e):function(){Function.prototype.apply.call(e[n],e,arguments)}}),t}(),M=x.setImmediate||x.msSetImmediate,P=x.clearImmediate||x.msSetImmediate;M&&(M=M.bind(x)),P&&(P=P.bind(x)),M||function(){var e=function(){var e={},n=0;return M=function(i){if("function"==typeof i)return e[++n]={fn:i,args:E(arguments,1)},t(n),n},P=function(t){delete e[t]},function(t){var n=e[t];n&&(delete e[t],n.fn.apply(void 0,n.args)),L.process()}}(),t=function(t){setTimeout(function(){e(t)},0)};if(I&&I.process&&"function"==typeof C.nextTick)t=function(t){C.nextTick(function(){e(t)})};else{var n=x.postMessage&&!x.importScripts;if(n){var i=x.onmessage;x.onmessage=function(){n=!1},x.postMessage("","*"),x.onmessage=i}if(n){var r={},s=function(t){if(t&&t.source==x){var n=t.data;if(A.call(r,n)){var i=r[n];delete r[n],e(i)}}};x.addEventListener?x.addEventListener("message",s,!0):x.attachEvent("onmessage",s),t=function(e){var t=o(32);r[t]=e,x.postMessage(t,"*")}}else if(x.MessageChannel){var a=new x.MessageChannel;a.port1.onmessage=function(t){e(t.data)},t=function(e){a.port2.postMessage(e)}}else{var l=function(){return S.createElement("script")};if(S&&"onreadystatechange"in l()){var u=t;t=function n(i){void 0!==_e&&(t=u,_e.head.ready(function(){t=function(t){var n=l();n.onreadystatechange=function(){n.onreadystatechange=null,_e.remove(n),n=null,e(t)},_e.head.add(n)}})),t===n?u(i):t(i)}}}}}();var L=function(){function e(){try{r=!0;for(var e;e=i.shift();)e.fn.call(e.context)}finally{r=!1,i.length&&(n=M(t))}}function t(){n&&(n=P(n)),i.length&&e()}var n,i=[],r=!1,s=function(e,r){return i.push({fn:e,context:r}),n||(n=M(t)),!0};return s.process=function(){r||t()},s.schedule=function(e){function t(){var r=M(t);i=!1;for(var s in n){var a=n[s];delete n[s],e(a)}P(r),i||(n={})}var n={},i=!1;return{add:function(e){n[e.basisObjectId]=e,i||(i=s(t))},remove:function(e){delete n[e.basisObjectId]}}},s}(),U=function(){var e=0,t={id:e,start:function(){t.id=e++},finish:function(){L.process(),t.id="unknown"}};return t}(),B=function(){var e,t,n,i=/^([^\/]+:|\/)/,r=/^[a-zA-Z0-9\-]+:\/?/,s=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,a=/[\?#].*$/;if(I){var o=(C.basisjsBaseURI||"/").replace(/\\/g,"/");e=o.replace(/^[^\/]*/,""),t=o.replace(/\/.*/,"")}else e=j.pathname.replace(/[^\/]+$/,""),t=j.protocol+"//"+j.host;return n={baseURI:e,origin:t,normalize:function(e){for(var t=[],n=(e=(e||"").replace(r,"/").replace(s,"/").replace(a,"")).split("/"),i=0;i<n.length;i++)".."==n[i]?(t.length>1||t[0])&&t.pop():!n[i]&&i||"."==n[i]||t.push(n[i]);return t.join("/")||("/"===e[0]?"/":"")},dirname:function(e){var t=n.normalize(e);return t.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==t[0]?"/":".")},extname:function(e){var t=n.normalize(e).match(/[^\/](\.[^\/\.]*)$/);return t?t[1]:""},basename:function(e,t){var i=n.normalize(e).match(/[^\\\/]*$/);return i=i?i[0]:"",t==n.extname(i)&&(i=i.substring(0,i.length-t.length)),i},resolve:function(){for(var t=E(arguments).reverse(),r=[],s=!1,a=0;!s&&a<t.length;a++)"string"==typeof t[a]&&(r.unshift(t[a]),s=i.test(t[a]));return s?r.length&&"/"==r[0]&&(r[0]=""):r.unshift("/"==e?"":e),n.normalize(r.join("/"))},relative:function(t,i){if("string"!=typeof i&&(i=t,t=e),t=n.normalize(t),i=n.normalize(i),"/"==t[0]&&"/"!=i[0])return t;if("/"==i[0]&&"/"!=t[0])return i;for(var r=t.replace(/^\/$/,"").split(/\//),s=i.replace(/^\/$/,"").split(/\//),a=[],o=0;s[o]==r[o]&&"string"==typeof r[o];)o++;for(var l=r.length-o;l>0;l--)a.push("..");return a.concat(s.slice(o).filter(Boolean)).join("/")}}}(),H=s||"",V=a||{noConflict:!0,implicitExt:!0,modules:{},autoload:["./0.js"]},F=function(){function e(e){return"function"==typeof e&&!!e.basisClassId_}function t(e){for(var t=this;t&&t!==e;)t=t.superClass_;return t===e}function n(o){var c=s++;"function"!=typeof o&&(o=u);var h=function(){};h.prototype=o.prototype;for(var f,p=new h,m={basisClassId_:c,superClass_:o,extendConstructor_:!!o.extendConstructor_,isSubclassOf:t,subclass:function(){return n.apply(null,[y].concat(E(arguments)))},extend:i,factory:function(e){return v(function(t){return new y(d(e,t))})},__extend__:function(t){return t&&t!==a&&("object"==typeof t||"function"==typeof t&&!e(t))?u.create.call(null,y,t):t},prototype:p},g=1;f=arguments[g];g++)m.extend(f);var y=m.extendConstructor_?function(e){this.basisObjectId=r.id++;var t;for(var n in e)t=this[n],this[n]=t&&t.__extend__?t.__extend__(e[n]):e[n];this.init(),this.postInit()}:function(){this.basisObjectId=r.id++,this.init.apply(this,arguments),this.postInit()};p.constructor=y;for(var b in p)p[b]===a&&(p[b]=y);return l(y,m),y}function i(t){var n=this.prototype;"function"!=typeof t||e(t)||(t=t(this.superClass_.prototype,h(n))),t.prototype&&(t=t.prototype);for(var i in t){var r=t[i],s=n[i];"className"==i||"extendConstructor_"==i?this[i]=r:s&&s.__extend__?n[i]=s.__extend__(r):n[i]=r}return o&&t[i="toString"]!==R&&(n[i]=t[i]),this}var r={id:1},s=1,a={},o=function(){for(var e in{toString:1})return!1;return!0}(),u=l(n,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var e in this)A.call(this,e)&&(this[e]=null);this.destroy=m}}}),c=function(e,t){return{__extend__:function(e){if(!e)return e;if(e&&e.__extend__)return e;var n=function(){};n.prototype=this;var i=new n;return t(i,e),i}}.__extend__(e||{})},f=function(e){return c(e,l)};return l(u,{SELF:a,create:n,isClass:e,customExtendProperty:c,extensibleProperty:f,nestedExtendProperty:function(e){return c(e,function(e,t){for(var n in t)if(A.call(t,n)){var i=e[n],r=t[n];e[n]=r?i&&i.__extend__?i.__extend__(r):f(r):null}})},oneFunctionProperty:function(e,t){var n=function(t){var i={__extend__:n};if(t){if(t.__extend__)return t;for(var r in t)A.call(t,r)&&t[r]&&(i[r]=e)}return i};return n(t||{})}})}(),Y=F(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(e,t,n,i){e.attach(t,n,i)},detach:function(e,t,n){e.detach(t,n)},get:function(e){return e.get()}},init:function(e){this.value=e},get:function(){return this.value},set:function(e){this.value!==e&&(this.value=e,this.apply())},attach:function(e,t,n){this.handler={fn:e,context:t,destroy:n||null,handler:this.handler}},detach:function(e,t){for(var n,i=this;n=i,i=i.handler;)if(i.fn===e&&i.context===t)return i.fn=m,i.destroy=i.destroy&&m,void(n.handler=i.handler)},apply:function(){for(var e=this.get(),t=this;t=t.handler;)t.fn.call(t.context,e)},deferred:function(){var e=this.deferredToken;return e||(e=this.deferredToken=new G(this.get()),this.attach(e.set,e)),e},as:function(e){var t=new Y,n=function(t){this.set(e.call(this,t))};return"function"!=typeof e&&(e=O(e)),n.call(t,this.get()),this.attach(n,t,t.destroy),t.attach(m,this,function(){this.detach(n,t)}),t},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null),this.attach=m,this.detach=m;for(var e=this;e=e.handler;)e.destroy&&e.destroy.call(e.context);this.handler=null,this.value=null}}),z=L.schedule(function(e){e.apply()}),G=Y.subclass({className:"basis.DeferredToken",set:function(e){this.value!==e&&(this.value=e,z.add(this))},deferred:function(){return this}}),$={},X={},K={},W={},Z=1;!function(){var e=void 0!==n?n:null;if(e)for(var t in e)K[B.resolve(t)]=e[t]}();var J=function(e,t){var n=e.match(/^([a-zA-Z0-9\_\-]+):/);if(n){var i=n[1];i in ae==0&&(ae[i]=B.baseURI+i+"/"),e=ae[i]+B.normalize("./"+e.substr(n[0].length))}else e=B.resolve(t,e);return e},Q=function(e,t){if(t||!A.call(K,e)){var n="";if(I)try{if("function"!=typeof C.basisjsReadFile)throw new Error("fs not supported for packed basis.js");n=C.basisjsReadFile(e)}catch(t){q.error("basis.resource: Unable to load "+e,t)}else{var i=new x.XMLHttpRequest;i.open("GET",e,!1),i.setRequestHeader("If-Modified-Since",new Date(0).toGMTString()),i.setRequestHeader("X-Basis-Resource",1),i.send(""),i.status>=200&&i.status<400&&(n=i.responseText)}K[e]=n}return K[e]},ee=function(e,t){var n=B.extname(e),i=te.extensions[n],r=arguments.length>1,s=!1,a=!1;r&&(e+="#virtual");var o=function(){if(s)return t;var n=r?t:Q(e);return i?a||(a=!0,t=i(n,e)):t=n,s=!0,g(o),o.apply(),t};return l(o,l(new Y,{url:e,type:n,virtual:r,fetch:function(){return o()},toString:function(){return"[basis.resource "+e+"]"},isResolved:function(){return s},update:function(n){s&&!r&&n==K[e]||(r||(K[e]=n),i?(!a&&r&&(t=n),a&&!i.permanent&&(t=i(n,e,t),g(o),o.apply())):(t=n,s=!0,g(o),o.apply()))},reload:function(){if(!r){var t=K[e],n=Q(e,!0);n!=t&&(s=!1,o.update(n))}},get:function(n){return r&&n?i?void 0:t:n?Q(e):o()},ready:function(e,t){if(!(s&&(e.call(t,o()),i&&i.permanent)))return o.attach(e,t),o}})),$[e]=o,X[e]=o,o},te=function(e,t){e&&"string"!=typeof e&&(e=e.url);var n=t?t+"\0"+e:e,i=X[n];if(!i){var r=J(e,t,"basis.resource('{url}')");i=$[r]||ee(r),X[n]=i}return i};l(te,{resolveURI:J,buildCloak:te,isResource:function(e){return!!e&&$[e.url]===e},isResolved:function(e){var t=te.get(e);return!!t&&t.isResolved()},exists:function(e){return A.call($,J(e,null,"basis.resource.exists('{url}')"))},get:function(e){return e=J(e,null,"basis.resource.get('{url}')"),te.exists(e)?te(e):null},getFiles:function(e){return e?c(K):c($).filter(function(e){return!$[e].virtual})},virtual:function(e,t,n){return ee((n?n+":":B.normalize("/"==B.baseURI?"":B.baseURI)+"/")+"virtual-resource"+Z+++"."+e,t)},extensions:{".js":l(function(e,t){var n=se[t];if(!n){var i=!0,r=(B.dirname(t)+"/"+B.basename(t,B.extname(t))).replace(/^\/\//,"/");for(var s in ae){var a=ae[s]+s+"/";if(r.substr(0,a.length)==a){i=!1,r=r.substr(ae[s].length);break}}n=r.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,"."),i&&(n="implicit."+n)}return(s=T(n)).inited||(s.inited=!0,s.exports=ne({path:s.path,exports:s.exports},t,e).exports,s.exports&&s.exports.constructor===Object&&V.implicitExt&&u(s,s.exports)),s.exports},{permanent:!0}),".css":function(e,t,n){return n||(n=new Ee(t)),n.updateCssText(e),n},".svg":function(e,t,n){return n||(n=new xe(t)),n.updateSvgText(e),n},".json":function(e){if("object"==typeof e)return e;var t;try{e=String(e),t=Se.json.parse(e)}catch(e){}return t||null}}});var ne=function(e,t,n){var i=B.dirname(t),r=n;return e.exports||(e.exports={}),"function"!=typeof r&&(r=y(t,["exports","module","basis","global","__filename","__dirname","resource","require","asset"],n)),"function"==typeof r&&r.call(e.exports,e.exports,e,Se,x,t,i,function(e){return te(e,i)},function(e){return le(e,i)},function(e,t){return!0===t?Q(J(e,i,"asset('{url}',true)")):J(e,i,"asset('{url}')")}),e},ie={},re={},se={},ae={};f(V.modules,function(e,t){ae[e]=t.path+"/",re[e]=t.filename,se[t.filename]=e}),function(e){if(e=void 0!==t?t:null)for(var n in e){var i=B.resolve(n),r=e[n];se[i]=r,re[r]=i}}();var oe=F(null,{className:"basis.Namespace",init:function(e){this.name=e,this.exports={}},toString:function(){return"[basis.namespace "+this.name+"]"},extend:function(e){return l(this.exports,e),u(this,e)}}),le=function(e,t){var n=B.extname(e);return/[^a-z0-9_\.]/i.test(e)||".js"==n?/[\?#]/.test(e)||(n||(e+=".js"),e=J(e,t,"basis.require('{url}')")):e=b(e),te(e).fetch()};u(Function.prototype,{bind:function(e){var t=this,n=E(arguments,1);return n.length?function(){return t.apply(e,n.concat.apply(n,arguments))}:function(){return t.apply(e,arguments)}}}),u(Array,{isArray:function(e){return"[object Array]"===R.call(e)}}),u(Array.prototype,{indexOf:function(e,t){if((t=parseInt(t,10)||0)<0)return-1;for(;t<this.length;t++)if(this[t]===e)return t;return-1},lastIndexOf:function(e,t){var n=this.length;for(t=parseInt(t,10),t=isNaN(t)||t>=n?n-1:(t+n)%n;t>=0;t--)if(this[t]===e)return t;return-1},forEach:function(e,t){for(var n=0,i=this.length;n<i;n++)n in this&&e.call(t,this[n],n,this)},every:function(e,t){for(var n=0,i=this.length;n<i;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},some:function(e,t){for(var n=0,i=this.length;n<i;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},filter:function(e,t){for(var n=[],i=0,r=this.length;i<r;i++)i in this&&e.call(t,this[i],i,this)&&n.push(this[i]);return n},map:function(e,t){for(var n=[],i=0,r=this.length;i<r;i++)i in this&&(n[i]=e.call(t,this[i],i,this));return n},reduce:function(e,t){var n=this.length,i=arguments.length;if(0==n&&1==i)throw new TypeError;var r,s=0;i>1&&(r=t,s=1);for(var a=0;a<n;a++)a in this&&(r=s++?e.call(null,r,this[a],a,this):this[a]);return r}});var ue={from:E,create:N,flatten:function(e){return e.concat.apply([],e)},repeat:function(e,t){return ue.flatten(N(parseInt(t,10)||0,e))},search:function(e,t,n,i){e.lastSearchIndex=-1,n=O(n||p);for(var r=parseInt(i,10)||0,s=e.length;r<s;r++)if(n(e[r])===t)return e[e.lastSearchIndex=r]},lastSearch:function(e,t,n,i){e.lastSearchIndex=-1,n=O(n||p);for(var r=e.length,s=isNaN(i)||null==i?r:parseInt(i,10),a=s>r?r:s;a-- >0;)if(n(e[a])===t)return e[e.lastSearchIndex=a]},add:function(e,t){return-1==e.indexOf(t)&&!!e.push(t)},remove:function(e,t){var n=e.indexOf(t);return-1!=n&&!!e.splice(n,1)},has:function(e,t){return-1!=e.indexOf(t)},sortAsObject:function(){return ue.sort.apply(this,arguments)},sort:function(e,t,n,i){return t=O(t),i=i?-1:1,e.map(function(e,n){return{i:n,v:t(e)}}).sort(n||function(e,t){return i*(e.v>t.v||-(e.v<t.v)||(e.i>t.i?1:-1))}).map(function(e){return this[e.i]},e)}};if(![1,2].splice(1).length){var ce=Array.prototype.splice;Array.prototype.splice=function(){var e=E(arguments);return e.length<2&&(e[1]=this.length),ce.apply(this,e)}}var he=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,de=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,fe={};u(String,{toLowerCase:function(e){return String(e).toLowerCase()},toUpperCase:function(e){return String(e).toUpperCase()},trim:function(e){return String(e).trim()},trimLeft:function(e){return String(e).trimLeft()},trimRight:function(e){return String(e).trimRight()}}),u(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var pe={toObject:function(e,t){try{return new Function("return 0,"+e)()}catch(e){if(t)throw e}},repeat:function(e,t){return new Array(parseInt(t,10)+1||0).join(e)},qw:function(e){var t=e.trim();return t?t.split(/\s+/):[]},forRegExp:function(e){return e.replace(he,"\\$1")},format:function(e,t){var n=E(arguments,1);return"object"==typeof t&&l(n,t),e.replace(de,function(e,t,i,r,s){var a=t in n?n[t]:s?"":e;return i&&!isNaN(a)?(a=Number(a),"."==i?a.toFixed(r):ge.lead(a,r)):a})},formatter:function(e){if(e=String(e),A.call(fe,e))return fe[e];var t=function(t){return pe.format(e,t)};return fe[e]=t,t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},dasherize:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},isEmpty:function(e){return null==e||""==String(e)},isNotEmpty:function(e){return null!=e&&""!=String(e)}};if("|||".split(/\|/).length+"|||".split(/(\|)/).length!=11){var me=String.prototype.split;String.prototype.split=function(e,t){if(!e||e instanceof RegExp==0||""==e.source)return me.call(this,e,t);var n,i=[],r=0;for(e.global||(e=new RegExp(e.source,/\/([mi]*)$/.exec(e)[1]+"g"));n=e.exec(this);)n[0]=this.substring(r,n.index),i.push.apply(i,n),r=e.lastIndex;return i.push(this.substr(r)),i}}if("2"!="12".substr(-1)){var ve=String.prototype.substr;String.prototype.substr=function(e,t){return ve.call(this,e<0?Math.max(0,this.length+e):e,t)}}var ge={fit:function(e,t,n){return!isNaN(t)&&e<t?Number(t):!isNaN(n)&&e>n?Number(n):e},lead:function(e,t,n){return String(e).replace(/\d+/,function(e){return(t-=e.length-1)>1?new Array(t).join(n||0)+e:e})},group:function(e,t,n){return String(e).replace(/\d+/,function(e){return e.replace(/\d/g,function(i,r){return!r+(e.length-r)%(t||3)?i:(n||" ")+i})})},format:function(e,t,n,i,r,s){var a=e.toFixed(t);return(n||s)&&(a=a.replace(/(\d+)(\.?)/,function(e,t,i){return(n?Se.number.group(Number(t),3,n):t)+(i?s||i:"")})),i&&(a=a.replace(/^-?/,"$&"+(i||""))),a+(r||"")}};u(Date,{now:function(){return Number(new Date)}});var ye=function(){function e(){var t;for(i&&(i=P(i)),s.length>1&&(i=M(e));t=s.shift();)t[0].call(t[1]);i=P(i),L.process()}function t(){r++||e()}function n(){try{S.documentElement.doScroll("left"),t()}catch(e){setTimeout(n,1)}}var i,r=!S||"complete"==S.readyState,s=[];if(!r)if(S.addEventListener)S.addEventListener("DOMContentLoaded",t,!1),x.addEventListener("load",t,!1);else{S.attachEvent("onreadystatechange",t),x.attachEvent("onload",t);try{!x.frameElement&&S.documentElement.doScroll&&n()}catch(e){}}return function(t,n){s.length||!r||i||(i=M(e)),s.push([t,n])}}(),be="addEventListener"in x?function(e,t){x.addEventListener("unload",function(n){e.call(t||null,n||x.event)},!1)}:"attachEvent"in x?function(e,t){x.attachEvent("onunload",function(n){e.call(t||null,n||x.event)})}:m,_e=function(){function e(e){if(S&&!a[e]&&(a[e]=S[e]||S.getElementsByTagName(e)[0],a[e])){var t=o[e];delete o[e];for(var n,i=0;n=t[i];i++)n[0].call(n[1],a[e])}return a[e]}function t(){var n=this[0],r=this[1],s=this[2];i(r);var a=e(n);a?(!0===s&&(s=a.firstChild),s&&s.parentNode===a||(s=null),a.insertBefore(r,s)):o[n].push([t,[n,r,s]])}function n(e,t,n){o[e]?o[e].push([t,n]):t.call(n,a[e])}function i(e){for(var t in o){var n=ue.search(o[t],e,function(e){return e[1]&&e[1][1]});n&&ue.remove(o[t],n)}e&&e.parentNode&&1==e.parentNode.nodeType&&e.parentNode.removeChild(e)}function r(){s&&e("head")&&e("body")&&(s=clearInterval(s))}var s,a={},o={head:[],body:[]};return!S||e("head")&&e("body")||(s=setInterval(r,5),ye(r)),{head:{ready:function(e,t){n("head",e,t)},add:function(e,n){t.call(["head",e,n])}},body:{ready:function(e,t){n("body",e,t)},add:function(e,n){t.call(["body",e,n])}},remove:i}}(),Te=function(){var e=[];if(be===m)return{add:m,remove:m};be(function(){t.globalDestroy=!0,t.add=m,t.remove=m;for(var n;n=e.pop();)if("function"==typeof n.destroy)try{n.destroy()}catch(e){}else for(var i in n)n[i]=null;e=[]});var t={add:function(t){null!=t&&e.push(t)},remove:function(t){ue.remove(e,t)}};return t}(),Ee=function(){function e(e){r.setAttribute("href",e),_e.head.add(r,!0)}function t(){r.setAttribute("href",j.href),_e.remove(r)}function n(){e(this.baseURI),this.element||(this.element=S.createElement("style"),i||this.element.appendChild(S.createTextNode(""))),_e.head.add(this.element),this.syncCssText(),t()}var i=function(){try{return!S.createElement("style").appendChild(S.createTextNode(""))}catch(e){return!0}}(),r=S&&S.createElement("base");return F(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(e){this.url=e,this.baseURI=B.dirname(e)+"/"},updateCssText:function(n){this.cssText!=n&&(this.cssText=n,this.inUse&&this.element&&(e(this.baseURI),this.syncCssText(),t()))},syncCssText:i?function(){this.element.styleSheet.cssText=this.cssText}:function(){var e=this.cssText;this.element.firstChild.nodeValue=e},startUse:function(){this.inUse||_e.head.ready(n,this),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&_e.remove(this.element))},destroy:function(){this.element&&_e.remove(this.element),this.element=null,this.cssText=null}})}(),Ne=null,xe=function(){function e(e){i.setAttribute("href",e),_e.head.add(i,!0)}function t(){i.setAttribute("href",j.href),_e.remove(i)}function n(){e(this.baseURI),this.element||(this.element=S.createElement("span")),Ne.appendChild(this.element),this.syncSvgText(),t()}var i=S&&S.createElement("base");return F(null,{className:"basis.SvgResource",inUse:0,url:"",baseURI:"",svgText:void 0,element:null,init:function(e){this.url=e,this.baseURI=B.dirname(e)+"/"},toString:function(){return this.svgText},updateSvgText:function(n){this.svgText!=n&&(this.svgText=n,this.inUse&&this.element&&(e(this.baseURI),this.syncSvgText(),t()))},syncSvgText:function(){this.element.innerHTML=this.svgText},startUse:function(){this.inUse||(Ne||((Ne=S.createElement("span")).style.cssText="position:absolute!important;width:0;height:0;overflow:hidden",_e.body.add(Ne)),_e.body.ready(n,this)),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&Ne.removeChild(this.element))},destroy:function(){this.element&&Ne.removeChild(this.element),this.element=null,this.svgText=null}})}(),Ce={fixSourceOffset:p,setInfo:function(){},patchInfo:function(e,t,n){},patchFactory:function(e){},getInfo:function(e,t){}},Se=T("basis").extend({version:"1.11.1",NODE_ENV:I,config:V,createSandbox:function(e){return i(x,H,u({noConflict:!0,devpanel:!1},e))},dev:q=new oe("basis.dev").extend(q).extend(Ce).extend({warnPropertyAccess:D}),resolveNSFilename:b,patch:function(e,t){e=/[^a-z0-9_\.]/i.test(e)||".js"==B.extname(e)?J(e,null,"basis.patch('{url}')"):b(e),W[e]?W[e].push(t):W[e]=[t];var n=te.get(e);n&&n.isResolved()&&t(n.get(),n.url)},namespace:T,require:le,resource:te,asset:function(e,t){return!0===t?Q(J(e,null,"basis.asset('{url}')")):J(e,null,"basis.asset('{url}')")},setImmediate:M,clearImmediate:P,nextTick:function(){M.apply(null,arguments)},asap:L,FACTORY:k,PROXY:{},Class:F,Token:Y,DeferredToken:G,codeFrame:U,ready:ye,teardown:be,cleaner:Te,genUID:o,getter:O,console:q,path:B,doc:_e,object:{extend:l,complete:u,keys:c,values:function(e){var t=[];for(var n in e)t.push(e[n]);return t},slice:h,splice:function(e,t){var n={};if(!t)return l(n,e);for(var i,r=0;i=t[r++];)i in e&&(n[i]=e[i],delete e[i]);return n},merge:d,iterate:f},fn:{$undefined:function(e){return void 0==e},$defined:function(e){return void 0!=e},$isNull:function(e){return null==e||void 0==e},$isNotNull:function(e){return null!=e&&void 0!=e},$isSame:function(e){return e===this},$isNotSame:function(e){return e!==this},$self:p,$const:function(e){return function(){return e}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:m,getter:O,nullGetter:w,wrapper:function(e){return function(t){var n={};return n[e]=t,n}},factory:v,isFactory:function(e){return"function"==typeof e&&e.factory===k},lazyInit:function(e,t){var n,i,r=0;return n=function(){return r++||(n.inited=!0,n.data=i=e.apply(t||this,arguments)),i}},lazyInitAndRun:function(e,t,n){var i,r,s=0;return i=function(){return s++||(i.inited=!0,i.data=r=e.call(n||this)),t.apply(r,arguments),r}},runOnce:function(e,t){var n=0;return function(){if(!n++)return e.apply(t||this,arguments)}},publicCallback:function(e,t){var n="basisjsCallback"+o();return x[n]=t?e:function(){try{delete x[n]}catch(e){x[n]=void 0}return e.apply(this,arguments)},n}},array:l(E,ue),string:pe,number:ge,bool:{invert:function(e){return!e}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(e){return pe.toObject(e,!0)}}});return I||V.autoload&&V.autoload.forEach(function(e){le(e)}),I&&"undefined"!=typeof module&&module&&(module.exports=Se,module.exports.basis=Se),Se}(this)}).call(this);