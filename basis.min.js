(function(){var pa={"0.js":"library","1.js":"basis.ui","2.js":"basis.l10n","3.js":"basis.event","4.js":"basis.data","5.js":"basis.dom.wrapper","6.js":"basis.template","7.js":"basis.template.html","8.js":"basis.dom.event","9.js":"basis.template.htmlfgen","a.js":"basis.dragdrop","b.js":"basis.dom.computedStyle","c.js":"basis.layout","d.js":"basis.data.dataset","e.js":"basis.data.value","f.js":"basis.data.index","g.js":"basis.data.object","h.js":"basis.entity","i.js":"basis.net.jsonp","j.js":"basis.net",
"k.js":"basis.net.service","l.js":"basis.net.ajax","m.js":"basis.ua","n.js":"basis.net.action","o.js":"basis.router","p.js":"basis.app"},qa,ra={"d.js":function(n,V,a,q,H,v,E,Q){function G(a,c){var w={},d;a&&a.length&&(d=w.inserted=a);c&&c.length&&(d=w.deleted=c);if(d)return w}function F(d,c){return function I(c){if(!c)return null;if(c.__extend__)return c;"string"==typeof c||Array.isArray(c)||(c=null);return S(a.event.createHandler(c,d),{__extend__:I})}(c)}function z(a,c,w,d){return new k(S({keyGetter:c,
itemClass:w,create:function(a,c){var w=k.prototype.create.call(this,a,c);w.ruleValue=a;w.setDataset(new d({ruleValue:a}));return w}},a))}function D(a,c){if(!a.length)return 0;var w=c.value,d=c.object.basisObjectId,f,g,K,b,e=0,k=a.length-1;do if(K=e+k>>1,b=a[K],f=b.value,w<f)k=K-1;else if(w>f)e=K+1;else if(g=b.object.basisObjectId,d<g)k=K-1;else if(d>g)e=K+1;else return K;while(e<=k);return K+(f==w?g<d:f<w)}function x(a,c){return+(a.value>c.value)||-(a.value<c.value)||a.object.basisObjectId-c.object.basisObjectId}
function h(a,c,w){if((c=a.sourceMap_[c.basisObjectId])&&c.visited!==w){for(var d=c;d=d.ref;)if(d.object===a.source)return!0;c.visited=w;for(d=c;d=d.ref;)if(h(a,d.object,w||{}))return!0}}function l(a,c,d){var I=a.sourceMap_,b=a.members_;c=P(c);for(var g=[],K=0;K<c.length;K++){var e=c[K],k=e.basisObjectId;k||(d=e.ref,e=e.object,k=e.basisObjectId);var l=I[k];if(l)l.ref={object:d,ref:l.ref};else if(l=I[k]={source:e,ref:{object:d,ref:null},visited:null,value:null},e instanceof f){var h=a.rule(e)||null;
if(h instanceof f||h instanceof y)l.value=h,c.push({object:h,ref:e});b[k]=l;g.push(e);a.ruleEvents&&e.addHandler(a.ruleEvents,a)}else for(e.addHandler(X,a),k=0,l=e.getItems();k<l.length;k++)c.push({object:l[k],ref:e})}return g}function e(a,c,d){var I=a.sourceMap_,e=a.members_;c=P(c);for(var g=[],K=0;K<c.length;K++){var b=c[K],k=b.basisObjectId;k||(d=b.ref,b=b.object,k=b.basisObjectId);for(var l=I[k],p=l.value,m=l,s=l;m=m.ref;){if(m.object===d){s.ref=m.ref;break}s=m}if(l.ref)p&&!h(a,b)&&(l.value=null,
c.push({object:p,ref:b}));else{if(b instanceof f)delete e[k],g.push(b),a.ruleEvents&&b.removeHandler(a.ruleEvents,a),p&&c.push({object:p,ref:b});else for(b.removeHandler(X,a),l=0,p=b.getItems();l<p.length;l++)c.push({object:p[l],ref:b});delete I[k]}}return g}a.require("./3.js");a.require("./4.js");E=this.path;var p=a.Class,S=a.object.extend,L=a.object.values,u=a.getter,J=a.fn.$self,A=a.fn.$true,t=a.fn.$false,b=a.fn.$undef,P=a.array.from;Q=a.event.create;var M=a.data.SUBSCRIPTION,f=a.data.Object,k=
a.data.KeyObjectMap,y=a.data.ReadOnlyDataset,U=a.data.DatasetWrapper,ba=a.data.Dataset.setAccumulateState;M.add("SOURCE",{sourceChanged:function(a,c){c&&M.unlink("source",a,c);a.source&&M.link("source",a,a.source)},sourcesChanged:function(a,c){var d;if(d=c.inserted)for(var I=0;d[I];I++)M.link("source",a,d[I]);if(d=c.deleted)for(I=0;d[I];I++)M.unlink("source",a,d[I])}},function(a,c){for(var d=c.sources||(c.source?[c.source]:[]),I=0,f;f=d[I++];)a("source",c,f)});M.addProperty("minuend");M.addProperty("subtrahend");
var d=p(y,{className:E+".Merge",subscribeTo:M.SOURCE,emit_sourcesChanged:Q("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:function(a,c){return 0<a},emit_ruleChanged:Q("ruleChanged","oldRule"),listen:{source:{itemsChanged:function(a,c){var d=this.members_,I={},f,g;if(c.inserted)for(var b=0;f=c.inserted[b];b++)g=f.basisObjectId,d[g]?d[g].count++:d[g]={count:1,object:f},I[g]=d[g];if(c.deleted)for(b=0;f=c.deleted[b];b++)g=f.basisObjectId,I[g]=d[g],d[g].count--;
this.applyRule(I)}},sourceValue:{destroy:function(a){this.removeSource(a)}}},init:function(){y.prototype.init.call(this);var a=this.sources;this.sources=[];this.sourcesMap_={};this.sourceValues_=[];a&&this.setSources(a)},setRule:function(a){a=u(a||d.UNION);if(this.rule!==a){var c=this.rule;this.rule=a;this.emit_ruleChanged(c);return this.applyRule()}},applyRule:function(a){var c=this.members_,d=this.rule,I=this.sources.length,f=[],g=[],b,e;a||(a=c);for(var k in a)a=c[k],b=I&&a.count&&d(a.count,I),
b!=k in this.items_&&(b?f.push(a.object):g.push(a.object)),0==a.count&&delete c[k];(e=G(f,g))&&this.emit_itemsChanged(e);return e},addDataset_:function(a){this.sources.push(a);this.listen.source&&a.addHandler(this.listen.source,this);var c=this.members_,d;for(d in a.items_)c[d]?c[d].count++:c[d]={count:1,object:a.items_[d]};return!0},removeDataset_:function(d){a.array.remove(this.sources,d);this.listen.source&&d.removeHandler(this.listen.source,this);var c=this.members_,w;for(w in d.items_)c[w].count--},
updateDataset_:function(d){var c=this.owner,w=c.sourcesMap_;d=a.data.resolveDataset(this,c.updateDataset_,d,"adapter");var I,f;if(this.dataset!==d){if(d){var g=(w[d.basisObjectId]||0)+1;w[d.basisObjectId]=g;1==g&&(c.addDataset_(d),I=[d])}this.dataset&&(g=(w[this.dataset.basisObjectId]||0)-1,w[this.dataset.basisObjectId]=g,0==g&&(c.removeDataset_(this.dataset),f=[this.dataset]));this.dataset=d;c.applyRule();if(w=G(I,f))(I=c.sourceDelta_)?(w.inserted&&w.inserted.forEach(function(c){a.array.remove(this.deleted,
c)||a.array.add(this.inserted,c)},I),w.deleted&&w.deleted.forEach(function(c){a.array.remove(this.inserted,c)||a.array.add(this.deleted,c)},I)):c.emit_sourcesChanged(w);return w}},getSourceValues:function(){return this.sourceValues_.map(function(a){return a.source})},addSource:function(d){if(d&&("object"==typeof d||"function"==typeof d)&&!this.hasSource(d)){var c={owner:this,source:d,adapter:null,dataset:null};this.sourceValues_.push(c);this.updateDataset_.call(c,d);this.listen.sourceValue&&d instanceof
a.event.Emitter&&d.addHandler(this.listen.sourceValue,this)}},removeSource:function(d){for(var c=0,w;w=this.sourceValues_[c];c++)if(w.source===d){this.listen.sourceValue&&d instanceof a.event.Emitter&&d.removeHandler(this.listen.sourceValue,this);this.updateDataset_.call(w,null);this.sourceValues_.splice(c,1);break}},hasSource:function(a){for(var c=0,d;d=this.sourceValues_[c];c++)if(d.source===a)return!0;return!1},setSources:function(d){var c=this.sourceValues_.map(function(a){return a.source}),w=
[],I=[],f;d||(d=[]);this.sourceDelta_={inserted:w,deleted:I};for(var g=0;g<d.length;g++){var b=d[g];a.array.remove(c,b)||this.addSource(b)}c.forEach(this.removeSource,this);this.sourceDelta_=null;(f=G(w,I))&&this.emit_sourcesChanged(f);return f},destroy:function(){this.setSources();y.prototype.destroy.call(this);this.sources=this.sourceDelta_=this.sourcesMap_=this.sourceValues_=null}});d.UNION=d.prototype.rule;d.INTERSECTION=function(a,c){return a==c};d.DIFFERENCE=function(a,c){return 1==a};d.MORE_THAN_ONE_INCLUDE=
function(a,c){return 1==c||1<a};d.AT_LEAST_ONE_EXCLUDE=function(a,c){return 1==c||a<c};var da=function(a){return!this.has(a)};n=p(y,{className:E+".Subtract",subscribeTo:M.MINUEND+M.SUBTRAHEND,minuend:null,minuendAdapter_:null,emit_minuendChanged:Q("minuendChanged","oldMinuend"),subtrahend:null,subtrahendAdapter_:null,emit_subtrahendChanged:Q("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,c){if(this.subtrahend){var d=G(c.inserted&&c.inserted.filter(da,this.subtrahend),
c.deleted&&c.deleted.filter(this.has,this));d&&this.emit_itemsChanged(d)}},destroy:function(){this.minuendAdapter_||this.setMinuend(null)}},subtrahend:{itemsChanged:function(a,c){if(this.minuend){var d=G(c.deleted&&c.deleted.filter(this.minuend.has,this.minuend),c.inserted&&c.inserted.filter(this.has,this));d&&this.emit_itemsChanged(d)}},destroy:function(){this.subtrahendAdapter_||this.setSubtrahend(null)}}},init:function(){y.prototype.init.call(this);var a=this.minuend,c=this.subtrahend;this.subtrahend=
this.minuend=null;(a||c)&&this.setOperands(a,c)},setOperands:function(d,c){var w,f=!1;d=a.data.resolveDataset(this,this.setMinuend,d,"minuendAdapter_");c=a.data.resolveDataset(this,this.setSubtrahend,c,"subtrahendAdapter_");var b=this.minuend,g=this.subtrahend;if(b!==d){f=!0;this.minuend=d;var e=this.listen.minuend;e&&(b&&b.removeHandler(e,this),d&&d.addHandler(e,this));this.emit_minuendChanged(b)}if(g!==c){f=!0;this.subtrahend=c;if(e=this.listen.subtrahend)g&&g.removeHandler(e,this),c&&c.addHandler(e,
this);this.emit_subtrahendChanged(g)}if(!f)return!1;if(d&&c){var f=[],b=[],k;for(k in this.items_)d.items_[k]&&!c.items_[k]||f.push(this.items_[k]);for(k in d.items_)this.items_[k]||c.items_[k]||b.push(d.items_[k]);(w=G(b,f))&&this.emit_itemsChanged(w)}else this.itemCount&&this.emit_itemsChanged(w={deleted:this.getItems()});return w},setMinuend:function(a){return this.setOperands(a,this.subtrahendAdapter_?this.subtrahendAdapter_.source:this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuendAdapter_?
this.minuendAdapter_.source:this.minuend,a)},destroy:function(){this.setOperands();y.prototype.destroy.call(this)}});var T=p(y,{className:E+".SourceDataset",subscribeTo:M.SOURCE,source:null,emit_sourceChanged:Q("sourceChanged","oldSource"),sourceAdapter_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceAdapter_||this.setSource()}}},init:function(){this.sourceMap_={};y.prototype.init.call(this);var a=this.source;a&&(this.source=null,this.setSource(a))},setSource:function(d){d=a.data.resolveDataset(this,
this.setSource,d,"sourceAdapter_");if(this.source!==d){var c=this.source,w=this.listen.source;this.source=d;if(w){var f=w.itemsChanged;ba(!0);c&&(c.removeHandler(w,this),f&&f.call(this,c,{deleted:c.getItems()}));d&&(d.addHandler(w,this),f&&f.call(this,d,{inserted:d.getItems()}));ba(!1)}this.emit_sourceChanged(c)}},destroy:function(){this.setSource();y.prototype.destroy.call(this);this.sourceMap_=null}}),Y=p(T,{className:E+".MapFilter",map:J,filter:t,rule:u(A),emit_ruleChanged:Q("ruleChanged","oldRule"),
ruleEvents:F(function(a){var c=this.map?this.map(a):object;if(!1==c instanceof f||this.filter(c))c=null;var d=this.sourceMap_[a.basisObjectId],b=d.member;if(b!==c){var e=this.members_,g,k,l;d.member=c;b&&(d=b.basisObjectId,this.removeMemberRef&&this.removeMemberRef(b,a),0==--e[d]&&(delete e[d],l=[b]));c&&(b=c.basisObjectId,this.addMemberRef&&this.addMemberRef(c,a),e[b]?e[b]++:(e[b]=1,k=[c]));(g=G(k,l))&&this.emit_itemsChanged(g)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,
c){var d=this.sourceMap_,b=this.members_,e=[],g=[],k,l,h,p=this.ruleEvents;ba(!0);if(c.inserted)for(var y=0;k=c.inserted[y];y++){h=this.map?this.map(k):k;if(!1==h instanceof f||this.filter(h))h=null;p&&k.addHandler(p,this);d[k.basisObjectId]={sourceObject:k,member:h};h&&(l=h.basisObjectId,b[l]?b[l]++:(b[l]=1,e.push(h)),this.addMemberRef&&this.addMemberRef(h,k))}if(c.deleted)for(y=0;k=c.deleted[y];y++)l=k.basisObjectId,h=d[l].member,p&&k.removeHandler(p,this),delete d[l],h&&(l=h.basisObjectId,0==--b[l]&&
(delete b[l],g.push(h)),this.removeMemberRef&&this.removeMemberRef(h,k));ba(!1);(c=G(e,g))&&this.emit_itemsChanged(c)}}},setMap:function(a){"function"!=typeof a&&(a=J);if(this.map!==a)return this.map=a,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=t);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){a=u(a||A);if(this.rule!==a){var c=this.rule;this.rule=a;this.emit_ruleChanged(c);return this.applyRule()}},applyRule:function(){var a=this.sourceMap_,c=this.members_,
d,b,k,g,e,l=[],h=[],p,y;for(y in a){e=a[y];g=e.sourceObject;d=e.member;b=this.map?this.map(g):g;if(!1==b instanceof f||this.filter(b))b=null;d!=b&&(e.member=b,d&&(k=d.basisObjectId,this.removeMemberRef&&this.removeMemberRef(d,g),c[k]--),b&&(d=b.basisObjectId,this.addMemberRef&&this.addMemberRef(b,g),d in c?c[d]++:(c[d]=1,l.push(b))))}for(k in this.items_)0==c[k]&&(delete c[k],h.push(this.items_[k]));(p=G(l,h))&&this.emit_itemsChanged(p);return p}});q=p(Y,{className:E+".Filter",filter:function(a){return!this.rule(a)}});
H=p(Y,{className:E+".Split",subsetClass:y,subsetWrapperClass:U,keyMap:null,map:function(a){return this.keyMap.resolve(a)},rule:u(b),setRule:function(a){a=u(a||b);if(this.rule!==a){var c=this.rule;this.rule=a;this.keyMap.keyGetter=a;this.emit_ruleChanged(c);return this.applyRule()}},addMemberRef:function(a,c){a.dataset.emit_itemsChanged({inserted:[c]})},removeMemberRef:function(a,c){a.dataset.emit_itemsChanged({deleted:[c]})},init:function(){this.keyMap&&!1!=this.keyMap instanceof k||(this.keyMap=
z(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));Y.prototype.init.call(this)},getSubset:function(a,c){return this.keyMap.get(a,c)},destroy:function(){Y.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});v=p(T,{className:E+".Slice",rule:u(A),emit_ruleChanged:Q("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:F(function(a){var c=this.sourceMap_[a.basisObjectId];a=this.rule(a);var d=this.index_;if(a!==c.value){var b=D(d,c),f=d[b-1],g=d[b+1];c.value=a;if(f&&(f.value>
a||f.value==a&&f.object.basisObjectId>c.object.basisObjectId)||g&&(g.value<a||g.value==a&&g.object.basisObjectId<c.object.basisObjectId))d.splice(b,1),d.splice(D(d,c),0,c),this.applyRule()}},"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,c){var d=this.sourceMap_,b=this.index_,f=this.ruleEvents,g=!1,k=!1,e,l=c.inserted,h=c.deleted;if(h){h.length>b.length-h.length&&(g=!0,k=h.length!=b.length,b.length=0);for(var p=0,m;m=h[p];p++)g||(e=d[m.basisObjectId],
b.splice(D(b,e),1)),delete d[m.basisObjectId],f&&m.removeHandler(f,this);if(k)for(var s in d)e=d[s],b.splice(D(b,e),0,e)}if(l){k=!b.length;for(p=0;m=l[p];p++)e={object:m,value:this.rule(m)},d[m.basisObjectId]=e,k?b.push(e):b.splice(D(b,e),0,e),f&&m.addHandler(f,this);k&&b.sort(x)}this.applyRule()}}},emit_rangeChanged:Q("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];T.prototype.init.call(this)},setRange:function(a,d){var b=this.offset,f=this.limit,k=!1;if(b!=a||f!=d)this.offset=
a,this.limit=d,k=this.applyRule(),this.emit_rangeChanged(b,f);return k},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},setRule:function(a,d){a=u(a||A);d=!!d;if(this.rule!=a||this.orderDesc!=d){var b=this.rule,f=this.orderDesc;if(this.rule!=a){for(var k=this.index_,g=0;g<k.length;g++)k[g].value=a(k[g].object);k.sort(x);this.rule=a}this.orderDesc=d;this.rule=a;this.emit_ruleChanged(b,f);return this.applyRule()}},applyRule:function(){var d=
this.offset,c=d+this.limit;this.orderDesc&&(d=this.index_.length-c,c=d+this.limit);for(var b=a.object.slice(this.members_),d=this.index_.slice(Math.max(0,d),Math.max(0,c)),c=[],f,k=0,g;g=d[k];k++){var e=g.object.basisObjectId;b[e]?delete b[e]:(c.push(g.object),this.members_[e]=g.object)}for(e in b)delete this.members_[e];(f=G(c,L(b)))&&this.emit_itemsChanged(f);return f},destroy:function(){T.prototype.destroy.call(this);this.index_=null}});var p=p(T,{className:E+".Cloud",subsetClass:y,subsetWrapperClass:U,
rule:u(b),ruleEvents:F(function(a){var d=this.sourceMap_,b=this.members_,f=a.basisObjectId,k=d[f].list,d=d[f].list={},f=this.rule(a),g,e=[],l=[],h;if(Array.isArray(f))for(var p=0;p<f.length;p++)(h=this.keyMap.get(f[p],!0))&&!h.has(a)&&(y=h.basisObjectId,d[y]=h,k[y]||(h.dataset.emit_itemsChanged({inserted:[a]}),b[y]?b[y]++:(e.push(h),b[y]=1)));for(var y in k)d[y]||(h=k[y],h.dataset.emit_itemsChanged({deleted:[a]}),--b[y]||(delete b[y],l.push(h)));(g=G(e,l))&&this.emit_itemsChanged(g)},"update"),keyMap:null,
map:J,listen:{source:{itemsChanged:function(a,d){var b=this.sourceMap_,f=this.members_,k=this.ruleEvents,g,e,l,h=[],p=[];ba(!0);if(g=d.inserted)for(var y=0,m;m=g[y];y++){var s=this.rule(m),N={object:m,list:{}};b[m.basisObjectId]=N;if(Array.isArray(s))for(var R=0,x={};R<s.length;R++)(e=this.keyMap.get(s[R],!0))&&!x[e.basisObjectId]&&(l=e.basisObjectId,x[l]=!0,N.list[l]=e,e.dataset.emit_itemsChanged({inserted:[m]}),f[l]?f[l]++:(h.push(e),f[l]=1));k&&m.addHandler(k,this)}if(g=d.deleted)for(y=0;m=g[y];y++){e=
m.basisObjectId;s=b[e].list;delete b[e];for(l in s)e=s[l],e.dataset.emit_itemsChanged({deleted:[m]}),--f[l]||(delete f[l],p.push(e));k&&m.removeHandler(k,this)}ba(!1);(d=G(h,p))&&this.emit_itemsChanged(d)}}},init:function(){this.keyMap&&!1!=this.keyMap instanceof k||(this.keyMap=z(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));T.prototype.init.call(this)},getSubset:function(a,d){return this.keyMap.get(a,d)},destroy:function(){T.prototype.destroy.call(this);this.keyMap.destroy();
this.keyMap=null}}),U=function(a,d){var b=d.inserted,f=d.deleted;b&&(b=l(this,b,a));f&&(f=e(this,f,a));(d=G(b,f))&&this.emit_itemsChanged(d)},X={itemsChanged:U,destroy:function(a){for(var d=this.sourceMap_,b=d[a.basisObjectId];b=b.ref;)d[b.object.basisObjectId].value=null;delete d[a.basisObjectId]}};E=T.subclass({className:E+".Extract",rule:u(b),emit_ruleChanged:Q("ruleChanged","oldRule"),ruleEvents:F(function(a){var d=this.sourceMap_[a.basisObjectId],b=this.rule(a)||null,k=d.value,h,g,p;if(b!==k){if(b instanceof
f||b instanceof y)h=l(this,b,a);k&&(g=e(this,k,a));d.value=b;(p=G(h,g))&&this.emit_itemsChanged(p)}},"update"),listen:{source:{itemsChanged:U}},setRule:function(a){a=u(a||b);if(this.rule!==a){var d=this.rule;this.rule=a;this.emit_ruleChanged(d);return this.applyRule()}},applyRule:function(){var a={},d={},b,k;for(k in this.sourceMap_){var h=this.sourceMap_[k],g=h.source;if(g instanceof f){var p=this.rule(g)||null,x=h.value;if(p!==x){if(p instanceof f||p instanceof y)for(var A=l(this,p,g),P=0;P<A.length;P++){var t=
A[P],m=t.basisObjectId;d[m]?delete d[m]:a[m]=t}if(x)for(g=e(this,x,g),P=0;P<g.length;P++)t=g[P],m=t.basisObjectId,a[m]?delete a[m]:d[m]=t;h.value=p}}}(b=G(L(a),L(d)))&&this.emit_itemsChanged(b);return b}});V.exports={getDelta:G,createRuleEvents:F,Merge:d,Subtract:n,SourceDataset:T,MapFilter:Y,Filter:q,Split:H,Extract:E,Slice:v,Cloud:p}},"0.js":function(n,V,a,q,H,v,E,Q){a.require("./1.js");a.require("./a.js");a.require("./d.js");a.require("./e.js");a.require("./f.js");a.require("./g.js");a.require("./h.js");
a.require("./i.js");a.require("./k.js");a.require("./n.js");a.require("./o.js");a.require("./p.js");q.basis=a},"2.js":function(n,V,a,q,H,v,E,Q){function G(a,b,f,k){var e=a.cultureValues[b];k=k?k+".":"";for(var h in f)if(l.call(f,h)){var c=k+h,w=f[h];(e[c]=w)&&("object"==typeof w||Array.isArray(w))&&G(a,b,w,c)}}function F(d){var f;if("string"==typeof d){var k=a.path.extname(d);".l10n"!=k&&(d=a.path.dirname(d)+"/"+a.path.basename(d,k)+".l10n");d=a.resource(d)}a.resource.isResource(d)&&(f=A[d.url]);
return f||new b(d)}function z(a,b){a&&!f[a]&&(f[a]=new ba(a,b));return f[a||M]}function D(d){if(d&&M!=d&&-1!=P.indexOf(d)){M=d;for(var b=0,f;f=J[b];b++)f.syncValues();a.Token.prototype.set.call(z,d)}}function x(d){"string"==typeof d&&(d=d.trim().split(" "));if(d.length){var b={},f,e;k={};for(var l=0,h;f=d[l];l++)f=f.split("/"),2<f.length&&(f=f.slice(0,2)),h=f[0],e||(e=h),b[h]=z(h),k[h]=f;for(h in k)k[h]=a.array.flatten(k[h].map(function(a){return k[a]})).concat(e).filter(function(a,d,b){return!d||
-1==b.lastIndexOf(a,d-1)});P=a.object.keys(b);!1==M in b&&D(e)}}a.require("./3.js");n=this.path;q=a.Class;var h=a.event.Emitter,l=Object.prototype.hasOwnProperty;a.resource.extensions[".l10n"]=function(d,b){return F(b).update(a.resource.extensions[".json"](d,b))};var e=[],p={},S=a.Token.prototype.set,L=q(a.Token,{className:n+".ComputeToken",init:function(d,b){b.computeTokens[this.basisObjectId]=this;this.token=b;a.Token.prototype.init.call(this,d)},get:function(){var a="plural"==this.token.type?f[M].plural(this.value):
this.value;return this.token.dictionary.getValue(this.token.name+"."+a)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];this.token=null;a.Token.prototype.destroy.call(this)}}),u=q(a.Token,{className:n+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(d,b,f,k){a.Token.prototype.init.call(this,k);this.index=e.push(this)-1;this.name=b;this.dictionary=d;this.computeTokens={};f?this.setType(f):this.apply()},
toString:function(){return this.get()},apply:function(){for(var d in this.computeTokens)this.computeTokens[d].apply();a.Token.prototype.apply.call(this)},set:function(){},setType:function(d){"plural"==d||a.l10n.enableMarkup&&"markup"==d||(d="default");this.type!=d&&(this.type=d,this.apply())},compute:function(d,b){1==arguments.length&&(b=d,d="");b=a.getter(b);d=String(d).trim().split(/\s+|\s*,\s*/).sort();var f=d.concat(this.basisObjectId,b[a.getter.ID]).join("_");if(p[f])return p[f];for(var k=this,
e={},l=function(a){S.call(this,b(a))},c={destroy:function(a){delete e[a.basisObjectId];this.destroy()}},w=0,y;y=d[w];w++)"destroy"!=y&&(c[y]=l);return p[f]=function(a){if(!1==a instanceof h)throw 3;var d=a.basisObjectId,f=e[d];f||(f=e[d]=new L(b(a),k),a.addHandler(c,f));return f}},computeToken:function(a){return new L(a,this)},token:function(a){"plural"==this.type&&(a=f[M].plural(a));if(this.dictionary)return this.dictionary.token(this.name+"."+a)},destroy:function(){for(var d in this.computeTokens)this.computeTokens[d].destroy();
this.value=this.computeTokens=null;a.Token.prototype.destroy.call(this)}}),J=[],A={},t=new a.Token,b=q(null,{className:n+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(d){this.tokens={};this.types={};this.cultureValues={};this.index=J.push(this)-1;a.resource.isResource(d)?(this.resource=d,A[d.url]||(A[d.url]=this,t.set(d.url)),d.fetch()):this.update(d||{})},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]=
{},G(this,b,a[b]));this.types=a._meta&&a._meta.type||{};for(var f in this.tokens)this.tokens[f].setType(this.types[f]);this.syncValues();return this},syncValues:function(){for(var a in this.tokens)S.call(this.tokens[a],this.getValue(a))},getValue:function(a){for(var b=k[M]||[],f=0,e;e=b[f];f++)if((e=this.cultureValues[e])&&a in e)return e[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new u(this,
a,this.types[a],this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;a.array.remove(J,this);this.resource&&(delete A[this.resource.url],this.resource=null)}}),P=[],M=null,f={},k={},y={},U=[[1,function(a){return 0}],[2,function(a){return 1==a||1==a%10?0:1}],[2,function(a){return 0==a?0:1}],[2,function(a){return 1==a?0:1}],[2,function(a){return 0==a||1==a?0:1}],[2,function(a){return 1!=a%10||11==a%100?1:0}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=
a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:0!=a?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 0==a?0:1==a?1:2}],[3,function(a){return 1==a?0:0==a||0<a%100&&20>a%100?1:2}],[3,function(a){return 1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2}],[3,function(a){return 1==a?0:2<=a&&4>=a?1:2}],[4,function(a){return 1==a?0:2==a?1:8!=a&&11!=
a?2:3}],[4,function(a){return 1==a?0:2==a?1:3==a?2:3}],[4,function(a){return 1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0}],[4,function(a){return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3}],[4,function(a){return 1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3}],[5,function(a){return 1==a?0:2==a?1:7>a?2:11>a?3:4}],[6,function(a){return 0==a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5}]];"ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh;mk;jv;af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo;ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh;is;csb;lv;lt;be bs hr ru sr uk;mnk;ro;pl;cs sk;cy;kw;sl;mt;gd;ga;ar".split(";").forEach(function(a,
b){a.split(" ").forEach(function(a){y[a]=this},U[b])});var ba=a.Class(null,{className:n+".Culture",name:"",pluralForm:null,init:function(a,b){this.name=a;f[a]||(f[a]=this);this.pluralForm=b||y[a]||y[a.split("-")[0]]||U[0]},plural:function(a){return Number(this.pluralForm[1](Math.abs(parseInt(a,10))))}});a.object.extend(z,new a.Token);z.set=D;x("en-US");D("en-US");V.exports={ComputeToken:L,Token:u,token:function(b){if("#"==b.charAt(0))return e[parseInt(b.substr(1),36)];if(b=b.match(/^(.+?)@(.+)$/))return F(a.path.resolve(b[2])).token(b[1])},
Dictionary:b,dictionary:F,getDictionaries:function(){return J.slice(0)},addCreateDictionaryHandler:t.attach.bind(t),removeCreateDictionaryHandler:t.detach.bind(t),Culture:ba,culture:z,getCulture:function(){return M},setCulture:D,getCultureList:function(){return P.slice(0)},setCultureList:x,pluralForms:U,onCultureChange:function(a,b,f){z.attach(a,b);f&&a.call(b,M)}}},"3.js":function(n,V,a,q,H,v,E,Q){function G(a){var h=z[a];h||(h=function(){for(var l=this,e,h;l=l.handler;){h=l.callbacks[a];if("function"==
typeof h){if(!e){e=[this];for(var q=0;q<arguments.length;q++)e.push(arguments[q])}h.apply(l.context||this,e)}h=l.callbacks["*"];if("function"==typeof h){if(!e)for(e=[this],q=0;q<arguments.length;q++)e.push(arguments[q]);h.call(l.context||this,{sender:this,type:a,args:e})}}},z[a]=h);return h}n=a.Class;var F={},z={},D=function(){};n=n(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:G("destroy"),listen:n.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&
(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(a,h){this.handler={callbacks:a,context:h||this,handler:this.handler}},removeHandler:function(a,h){var l=this,e;for(h=h||this;e=l,l=l.handler;)if(l.callbacks===a&&l.context===h){l.callbacks=F;e.handler=l.handler;break}},destroy:function(){this.destroy=D;this.emit_destroy();this.handler=null}});V.exports={create:G,createHandler:function(a,h){var l={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var l=
{events:a},e=0,p;p=a[e];e++)"destroy"!=p&&(l[p]=h)}return l},events:z,Emitter:n}},"4.js":function(n,V,a,q,H,v,E,Q){function G(a,m){return function(){a.apply(this,arguments);m.apply(this,arguments)}}function F(a){var m=ba[a];if(!m)for(var c=[],b={},s=1,m=ba[a]={actions:c,handler:b};a;){if(a&1){var C=k[s];c.push(C.action);for(var d in C.handler)b[d]=b[d]?G(b[d],C.handler[d]):C.handler[d]}s<<=1;a>>=1}return m}function z(a,m){for(;m&&m!==a&&m!==m.delegate;)m=m.delegate;return m===a}function D(a,m,c){var b=
a.delegate;b&&(a.root=b.root,a.target=b.target,a.data=b.data,a.state=b.state);if(a.root!==m){if(b=a.listen.root)m&&m!==a&&m.removeHandler(b,a),a.root&&a.root!==a&&a.root.addHandler(b,a);a.emit_rootChanged(m)}if(a.target!==c){if(b=a.listen.target)c&&c!==a&&c.removeHandler(b,a),a.target&&a.target!==a&&a.target.addHandler(b,a);a.emit_targetChanged(c)}for(a=a.delegates_;a;)a.delegate&&D(a.delegate,m,c),a=a.next}function x(a,m){var c={},b;a&&a.length&&(b=c.inserted=a);m&&m.length&&(b=c.deleted=m);if(b)return c}
function h(a,m){if(a&&a.itemCount){if(m&&m.itemCount){var c=[],b=[],s;for(s in a.items_){var C=a.items_[s];!1==C.basisObjectId in m.items_&&b.push(C)}for(s in m.items_)C=m.items_[s],!1==C.basisObjectId in a.items_&&c.push(C);return x(c,b)}if(a.itemCount)return{deleted:a.getItems()}}else if(m&&m.itemCount)return{inserted:m.getItems()}}function l(a,c,b,d){var f=a[d]||null,C=null;"function"==typeof b&&(b=b.call(a,a));b&&(b instanceof ja?(C=new m(a,c,b,R),b=b.dataset):b instanceof w?(C=new m(a,c,b,la),
b=l(C,C.proxy,b.value,"next")):b.bindingBridge&&(C=new s(a,c,b,N),b=l(C,C.proxy,b.value,"next")));!1==b instanceof ea&&(b=null);d&&f!==C&&(f&&(f.detach(),f.next&&l(f,null,null,"next")),C&&C.attach(),a[d]=C);return b}function e(a,b,c,d){var f=a[d]||null,C=null;"function"==typeof c&&(c=c.call(a,a));c&&(c instanceof w?(C=new m(a,b,c,la),c=e(C,C.proxy,c.value,"next")):c.bindingBridge&&(C=new s(a,b,c,N),c=e(C,C.proxy,c.value,"next")));!1==c instanceof K&&(c=null);d&&f!==C&&(f&&(f.detach(),f.next&&e(f,
null,null,"next")),C&&C.attach(),a[d]=C);return c}function p(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function S(a){a&&a.constructor===Object||(a={value:a});return new K({data:a})}a.require("./3.js");n=this.path;q=a.Class;var L=Array.prototype.slice,u=a.object.values,J=a.fn.$self,A=a.event.Emitter;H=a.event.create;var t=a.event.events,b={},P=[],M={},f={priority:[],values:{},add:function(a,m){var c=a.toLowerCase();f[a]=c;M[c]=a;this.values[c]=a;m=m?this.priority.indexOf(m):
-1;-1==m?this.priority.push(c):this.priority.splice(m,0,c)},getList:function(){return u(M)}};f.add("READY");f.add("DEPRECATED");f.add("UNDEFINED");f.add("ERROR");f.add("PROCESSING");var k={},y=1,U={NONE:0,ALL:0,link:function(a,m,c){a+=m.basisObjectId;var b=c.subscribers_;b||(b=c.subscribers_={});b[a]||(b[a]=m,1==(c.subscriberCount+=1)&&c.emit_subscribersChanged(1))},unlink:function(a,m,c){a+=m.basisObjectId;(m=c.subscribers_)&&m[a]&&(delete m[a],0==(c.subscriberCount-=1)&&(c.emit_subscribersChanged(-1),
c.subscribers_=null))},add:function(a,m,c){k[y]={handler:m,action:c};U[a]=y;U.ALL|=y;y<<=1},addProperty:function(a,m){var c={};c[m||a+"Changed"]=function(m,c){c instanceof d&&U.unlink(a,m,c);m[a]instanceof d&&U.link(a,m,m[a])};this.add(a.toUpperCase(),c,function(m,c){c[a]&&m(a,c,c[a])})}},ba={};U.addProperty("delegate");U.addProperty("target");U.addProperty("dataset");U.addProperty("value","change");var d=q(A,{className:n+".AbstractData",state:f.UNDEFINED,emit_stateChanged:H("stateChanged","oldState"),
active:!1,emit_activeChanged:H("activeChanged"),subscribeTo:U.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:H("subscribersChanged","delta"),syncEvents:q.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){A.prototype.init.call(this);this.active&&this.addHandler(F(this.subscribeTo).handler);var a=this.syncAction;a&&(this.syncAction=null,this.setSyncAction(a))},setState:function(a,m){var c=
String(a);if(!M[c])throw 4;if(this.state!=c||this.state.data!=m){var b=this.state;this.state=Object(c);this.state.data=m;this.emit_stateChanged(b);return!0}return!1},deprecate:function(){this.state!=f.PROCESSING&&this.setState(f.DEPRECATED)},setActive:function(a){a=!!a;if(this.active!=a){this.active=a;this.emit_activeChanged();if(a){a=F(this.subscribeTo);for(var m=0,c;c=a.actions[m];m++)c(U.link,this);this.addHandler(a.handler)}else{a=F(this.subscribeTo);for(m=0;c=a.actions[m++];)c(U.unlink,this);
this.removeHandler(a.handler)}return!0}return!1},setSubscription:function(a){var m=this.subscribeTo,c=a&U.ALL;if(a=m^c){this.subscribeTo=c;if(this.active){var b=F(m),c=F(c);this.removeHandler(b.handler);this.addHandler(c.handler);for(b=1;a;)a&1&&(c=k[b],m&b?c.action(U.unlink,this):c.action(U.link,this)),b<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==f.UNDEFINED||this.state==f.DEPRECATED)},setSyncAction:function(a){var m=this.syncAction;"function"!=
typeof a&&(a=null);(this.syncAction=a)?(m||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):m&&this.removeHandler(this.syncEvents)},destroy:function(){A.prototype.destroy.call(this);if(this.active)for(var a=F(this.subscribeTo),m=0,c;c=a.actions[m];m++)c(U.unlink,this);this.state=f.UNDEFINED}}),da=a.getter.ID,T={destroy:function(a){this.value.unlink(a,this.fn)}},Y={destroy:function(a){this.set(null)}},X={},fa={},c=function(a){this.set(this.fn(a))},w=q(d,{className:n+".Value",
subscribeTo:U.VALUE,emit_change:H("change","oldValue")&&function(a){t.change.call(this,a);for(var m=this;m=m.links_;)m.fn.call(m.context,this.value,a)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(a,m,c){a.link(c,m,!0)},detach:function(a,m,c){a.unlink(c,m)},get:function(a){return a.value}},init:function(){d.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.setNullOnEmitterDestroy&&
this.value instanceof A&&this.value.addHandler(Y,this);this.initValue=this.value},set:function(a){var m=this.value;a=this.proxy?this.proxy(a):a;var c=a!==m;c&&(this.setNullOnEmitterDestroy&&(m instanceof A&&m.removeHandler(Y,this),a instanceof A&&a.addHandler(Y,this)),this.value=a,this.locked||this.emit_change(m));return c},reset:function(){this.set(this.initValue)},isLocked:function(){return 0<this.locked},lock:function(){this.locked++;1==this.locked&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked&&
(this.locked--,!this.locked)){var a=this.lockedValue_;this.lockedValue_=null;this.value!==a&&this.emit_change(a)}},compute:function(m,c){c||(c=m,m=null);c||(c=J);var b=this,s=a.event.createHandler(m,function(a){this.set(c(a,b.value))}),d=s.events.concat(c[da]||String(c),this.basisObjectId).join("_"),C=X[d];if(!C){var f={};s.destroy=function(a){delete f[a.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var a in f){var m=f[a];m.token.set(c(m.object,this.value))}},destroy:function(){for(var a in f){var m=
f[a];m.object.removeHandler(s,m.token);m.token.destroy()}b=f=null}});C=X[d]=function(m){var r=m.basisObjectId,B=f[r],ca=c(m,b.value);B?B.token.set(ca):(B=new a.Token(ca),m.addHandler(s,B),B=f[r]={token:B,object:m});return B.token};C.deferred=function(){return function(a){return C(a).deferred()}}}return C},as:function(m,b){m||(m=J);if(this.links_)for(var s=this,d=m[da]||String(m);s=s.links_;){var f=s.context;if(f instanceof a.Token&&(f.fn[da]||String(f.fn))==d)return b?f.deferred():f}s=new a.Token;
s.fn=m;this.link(s,c);return b?s.deferred():s},deferred:function(a){return this.as(a,!0)},link:function(a,m,c){if("function"!=typeof m){var b=String(m);(m=fa[b])||(m=fa[b]=function(a){this[b]=a})}this.links_={value:this,context:a,fn:m,links_:this.links_};a instanceof A&&a.addHandler(T,this.links_);c||m.call(a,this.value);return a},unlink:function(m,c){for(var b=this,s;s=b,b=b.links_;)b.context!==m||c&&b.fn!==c||(b.fn=a.fn.$undef,s.links_=b.links_,b.context instanceof A&&b.context.removeHandler(T,
b))},destroy:function(){d.prototype.destroy.call(this);this.setNullOnEmitterDestroy&&this.value instanceof A&&this.value.removeHandler(Y,this);for(var a=this;a=a.links_;)a.context instanceof A&&a.context.removeHandler(T,a);this.links_=this.lockedValue_=this.value=this.initValue=this.proxy=null}}),I={},$=function(a){w.prototype.set.call(this,a)};w.from=function(m,c,b){var s;if(!m)return null;if(m instanceof A){b||(b=c,c=null);b||(b=J);var f=a.event.createHandler(c,$),d=f.events.concat(b[da]||String(b),
m.basisObjectId).join("_");s=I[d];s||(s=I[d]=new w({value:m,proxy:a.getter(b),set:a.fn.$undef,handler:{destroy:function(){I[d]=null;m.removeHandler(f,this)}}}),f.destroy=function(a){I[d]=null;this.destroy()},m.addHandler(f,s))}s||(d=m.basisObjectId,c=m.bindingBridge,d&&c&&(s=I[d],s||(s=I[d]=new w({value:c.get(m)}),c.attach(m,s.set,s))));if(!s)throw 5;return s};w.factory=function(a,m){return function(c){return w.from(c,a,m)}};var g={},K=q(d,{className:n+".Object",subscribeTo:U.DELEGATE+U.TARGET,data:null,
emit_update:H("update","delta")&&function(a){var m=this.delegates_;for(t.update.call(this,a);m;)m.delegate&&m.delegate.emit_update(a),m=m.next},emit_stateChanged:function(a){var m=this.delegates_;for(d.prototype.emit_stateChanged.call(this,a);m;)m.delegate&&(m.delegate.state=this.state,m.delegate.emit_stateChanged(a)),m=m.next},delegate:null,delegateAdapter_:null,delegates_:null,emit_delegateChanged:H("delegateChanged","oldDelegate"),target:null,emit_targetChanged:H("targetChanged","oldTarget"),root:null,
emit_rootChanged:H("rootChanged","oldRoot"),init:function(){this.root=this;d.prototype.init.call(this);var a=this.delegate,m=this.data;a?(this.target=this.delegate=null,this.data=g,this.setDelegate(a),this.data===g&&(this.data=m||{})):(m||(this.data={}),null!==this.target&&(this.target=this))},setDelegate:function(a){if((a=e(this,this.setDelegate,a,"delegateAdapter_"))&&a instanceof K){if(a.delegate&&z(this,a))return!1}else a=null;if(this.delegate!==a){var m=this.state,c=this.data,b=this.delegate,
s=this.target,d=this.root,f=this.listen.delegate,W=!1,r;if(b){f&&b.removeHandler(f,this);for(var B=b.delegates_,ca=b;B;){if(B.delegate===this){B.delegate=null;ca===b?b.delegates_=B.next:ca.next=B.next;break}ca=B;B=B.next}}if(a){if(this.delegate=a,f&&a.addHandler(f,this),a.delegates_={delegate:this,next:a.delegates_},this.data!==g){r={};for(var aa in a.data)!1===aa in c&&(W=!0,r[aa]=void 0);for(aa in c)c[aa]!==a.data[aa]&&(W=!0,r[aa]=c[aa])}}else for(aa in this.target=this.delegate=null,this.root=
this,this.data={},c)this.data[aa]=c[aa];D(this,d,s);W&&this.emit_update(r);!r||m===this.state||String(m)==this.state&&m.data===this.state.data||this.emit_stateChanged(m);this.emit_delegateChanged(b);return!0}return!1},setState:function(a,m){return this.delegate?this.root.setState(a,m):d.prototype.setState.call(this,a,m)},update:function(a){if(this.delegate)return this.root.update(a);if(a){var m={},c=!1,b;for(b in a)this.data[b]!==a[b]&&(c=!0,m[b]=this.data[b],this.data[b]=a[b]);if(c)return this.emit_update(m),
m}return!1},destroy:function(){d.prototype.destroy.call(this);var a=this.delegates_;for(this.delegates_=null;a;)a.delegate.setDelegate(),a=a.next;this.delegate&&this.setDelegate();this.data=b;this.target=this.root=null}});v=q(K,{className:n+".Slot"});var O={destroy:function(){delete this.map[this.id]}};E=q(d,{className:n+".KeyObjectMap",itemClass:K,keyGetter:J,autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={};d.prototype.init.call(this)},resolve:function(a){return this.get(this.keyGetter(a),
a)},create:function(a,m){return new this.itemClass(a instanceof K?{delegate:a}:{data:{id:a,title:a}})},get:function(a,m){var c=a instanceof K?a.basisObjectId:a,b=this.map_[c];!b&&m&&(b=this.map_[c]={map:this.map_,id:c,item:this.create(a,m)},b.item.addHandler(O,b));if(b)return b.item},destroy:function(){d.prototype.destroy.call(this);var a=this.map_;this.map_=null;for(var m in a){var c=a[m];this.autoDestroyMembers?c.item.destroy():c.item.removeHandler(O,c)}}});var ja=q(K,{className:n+".DatasetWrapper",
subscribeTo:K.prototype.subscribeTo+U.DATASET,listen:{dataset:{itemsChanged:function(a,m){this.itemCount=a.itemCount;this.emit_itemsChanged(m)},destroy:function(){this.setDataset()}}},dataset:null,datasetAdapter_:null,emit_datasetChanged:H("datasetChanged","oldDataset"),emit_itemsChanged:H("itemsChanged","delta"),init:function(){K.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){a=l(this,this.setDataset,a,"datasetAdapter_");if(this.dataset!==
a){var m=this.listen.dataset,c=this.dataset,b;m&&(c&&c.removeHandler(m,this),a&&a.addHandler(m,this));this.itemCount=a?a.itemCount:0;(b=h(c,a))&&this.emit_itemsChanged(b);this.dataset=a;this.emit_datasetChanged(c)}},has:function(a){return this.dataset?this.dataset.has(a):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},
destroy:function(){(this.dataset||this.datasetAdapter_)&&this.setDataset();K.prototype.destroy.call(this)}}),ea=q(d,{className:n+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:H("itemsChanged","delta")&&function(a){var m,c=0,b=0,s;if(m=a.inserted)for(;s=m[c];)this.items_[s.basisObjectId]=s,c++;if(m=a.deleted)for(;s=m[b];)delete this.items_[s.basisObjectId],b++;this.itemCount+=c-b;this.cache_=c==this.itemCount?a.inserted:null;t.itemsChanged.call(this,a)},init:function(){d.prototype.init.call(this);
this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},getItems:function(){this.cache_||(this.cache_=u(this.items_));return this.cache_},getValues:function(m){return this.getItems().map(a.getter(m||J))},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var m=[];if(a)for(var c in this.items_)if(m.push(this.items_[c])>=a)break;return m},forEach:function(a){for(var m=this.getItems(),c=0;c<m.length;c++)a(m[c])},destroy:function(){d.prototype.destroy.call(this);
this.cache_=P;this.itemCount=0;this.items_=this.members_=null}}),ka=q(ea,{className:n+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){ea.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var m=this.members_,c=this.listen.item,b=[],s;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var d=a[f];if(d instanceof K){var W=d.basisObjectId;m[W]||(m[W]=d,c&&d.addHandler(c,this),b.push(d))}}b.length&&this.emit_itemsChanged(s=
{inserted:b});return s},remove:function(a){var m=this.members_,c=this.listen.item,b=[],s;a&&!Array.isArray(a)&&(a=[a]);for(var f=0;f<a.length;f++){var d=a[f];if(d instanceof K){var W=d.basisObjectId;m[W]&&(c&&d.removeHandler(c,this),delete m[W],b.push(d))}}b.length&&this.emit_itemsChanged(s={deleted:b});return s},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var m=this.members_,c=this.listen.item,b={},s=[],d=[],f,W,r,B=0;B<a.length;B++)f=a[B],f instanceof
K&&(W=f.basisObjectId,b[W]=f,m[W]||(m[W]=f,c&&f.addHandler(c,this),d.push(f)));for(W in m)b[W]||(f=m[W],c&&f.removeHandler(c,this),delete m[W],s.push(f));(r=x(d,s))&&this.emit_itemsChanged(r);return r},sync:function(a){a=this.set(a)||{};var m=a.deleted;ka.setAccumulateState(!0);if(m)for(var c=0,b;b=m[c];c++)b.destroy();ka.setAccumulateState(!1);return a.inserted},clear:function(){var a=this.getItems(),m=this.listen.item,c;if(a.length){if(m)for(c=0;c<a.length;c++)a[c].removeHandler(m,this);this.emit_itemsChanged(c=
{deleted:a});this.members_={}}return c},destroy:function(){this.clear();ea.prototype.destroy.call(this)}}),m=function(a,m,c,b){this.context=a;this.fn=m;this.source=c;this.handler=b};m.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)},proxy:function(){this.fn.call(this.context,this.source)}};var s=function(){m.apply(this,arguments)};s.prototype=new m;s.prototype.attach=
function(){this.source.bindingBridge.attach(this.source,this.handler,this)};s.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var N=function(){this.fn.call(this.context,this.source)},R={datasetChanged:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}},la={change:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}};ka.setAccumulateState=function(){function m(){var a=
f;f={};for(var c in a){var b=a[c];b&&W.call(b.dataset,b)}}function c(a){var m=this.basisObjectId,b=a.inserted,aa=a.deleted,s=f[m];if(b&&aa||s&&s.mixed)s&&(f[m]=null,W.call(s.dataset,s)),W.call(this,a);else if(s){a=b?"inserted":"deleted";var d=s[a];if(d)d.push.apply(d,b||aa);else{for(var d=b?"deleted":"inserted",C=s[d],g={},b=b||aa,aa=[],k=0,e=0;e<C.length;e++)g[C[e].basisObjectId]=e;for(e=0;e<b.length;e++){var N=b[e].basisObjectId;!1==N in g?aa.push(b[e]):(k||(C=L.call(C)),k++,C[g[N]]=null)}k&&(C=
k<C.length?C.filter(Boolean):null,s[d]=C);aa.length?(s[a]=aa,C&&(s.mixed=!0)):C||(f[m]=null)}}else f[m]={inserted:b,deleted:aa,dataset:this,mixed:!1}}function b(){g=null;d&&(d=0,s.emit_itemsChanged=W,m())}var s=ea.prototype,f={},d=0,g,W;return function(r){r?(0==d&&(W=s.emit_itemsChanged,s.emit_itemsChanged=c,g||(g=a.setImmediate(b))),d++):(d-=0<d,0==d&&(s.emit_itemsChanged=W,m()))}}();V.exports={STATE:f,SUBSCRIPTION:U,AbstractData:d,Value:w,Object:K,Slot:v,KeyObjectMap:E,ReadOnlyDataset:ea,Dataset:ka,
DatasetWrapper:ja,isConnected:z,getDatasetDelta:h,ResolveAdapter:m,resolveDataset:l,resolveObject:e,wrapData:p,wrapObject:S,wrap:function(a,m){var c=m?S:p;return Array.isArray(a)?a.map(c):c(a)}}},"5.js":function(n,V,a,q,H,v,E,Q){function G(){}function F(){}function z(){}function D(a){var c=a.constructor.prototype;a.setDelegate=c.setDelegate;a.destroy=c.destroy}function x(a){return a.sortingValue||0}function h(a,c){a=a.sortingValue||0;c=c.sortingValue||0;return+(a>c)||-(a<c)}function l(a,c){a=a.sortingValue||
0;c=c.sortingValue||0;return-(a>c)||+(a<c)}function e(a){return a.childNodes.sort(a.sortingDesc?l:h)}function p(a,c,b,d){if(!a.length)return 0;d=!!d;var f,g,e=0,k=a.length-1;do if(f=e+k>>1,g=b(a[f]),d?c>g:c<g)k=f-1;else if(d?c<g:c>g)e=f+1;else return c==g?f:0;while(e<=k);return f+(g<c^d)}function S(a,c,b,d,f){if(c!==b){var g=a,e=[];d&&(a.contextSelection=b,a.selected&&e.push(a));for(;g;){if((d=!g.selection||f&&g===a?g.firstChild:null)&&d.contextSelection!==c)throw 6;for(;!d;){if(g===a){e.length&&
(c&&c.remove(e),b&&b.add(e));return}d=g.nextSibling;d||(g=g.parentNode)}g=d;g.selected&&e.push(g);g.contextSelection=b}}}function L(a,c){a.contextDisabled!=c&&(a.contextDisabled=c,a.disabled||(c?a.emit_disable():a.emit_enable()))}function u(a){if(!a)return null;if(a.isSatelliteConfig||a instanceof I)return a;t.isClass(a)&&(a={instanceOf:a});if(a&&a.constructor===Object){var b=!1,d={isSatelliteConfig:!0},f,g;for(g in a)switch(g){case "instance":a[g]instanceof I&&(d[g]=a[g]);break;case "instanceOf":t.isClass(a[g])&&
a[g].isSubclassOf(I)&&(f=a[g]);break;case "existsIf":case "delegate":case "dataSource":b=!0;d[g]=k(a[g]);break;case "config":d[g]=a[g]}d.instance||(d.instanceOf=f||I);if(b&&(a="events"in a?a.events:"update",Array.isArray(a)&&(a=a.join(" ")),"string"==typeof a))for(b={},a=a.split(/\s+/),f=0;g=a[f];f++)b[g]=c,d.handler=b;return d}return null}function J(a,c){var b=c.length-1;a.childNodes=c;a.firstChild=c[0]||null;a.lastChild=c[b]||null;for(var d=b;b=c[d];d--)b.nextSibling=c[d+1]||null,b.previousSibling=
c[d-1]||null,a.insertBefore(b,b.nextSibling)}function A(a,c){var b;if("function"==typeof a.childFactory&&(b=a.childFactory(c),b instanceof a.childClass))return b;if(!b)throw 9;throw 10;}a.require("./3.js");a.require("./4.js");n=this.path;var t=a.Class,b=a.object.complete,P=a.array,M=a.array.remove,f=a.fn.$undef,k=a.getter,y=a.fn.nullGetter;q=a.event.create;var U=a.event.events;H=a.data.SUBSCRIPTION;var ba=a.data.STATE,d=a.data.Object,da=a.data.ReadOnlyDataset,T=a.data.Dataset,Y={ANY:!0,NONE:!1,PARENT:"parent",
OWNER:"owner"},X={};H.addProperty("owner");H.addProperty("dataSource");var fa=t.customExtendProperty({},function(a,c){for(var b in c)a[b]=u(c[b])}),c=function(a){var c=this.name,b=this.config,d=!b.existsIf||b.existsIf(a),f=a.satellite[c];if(d)if(f)b.delegate&&f.setDelegate(b.delegate(a)),b.dataSource&&f.setDataSource(b.dataSource(a));else{if(f=b.instance)b.delegate&&f.setDelegate(b.delegate(a)),b.dataSource&&f.setDataSource(b.dataSource(a));else{var g,d=("function"==typeof b.config?b.config(a):b.config)||
{};d.owner=a;b.delegate&&(d.autoDelegate=!1,d.delegate=b.delegate(a));b.dataSource&&(d.dataSource=b.dataSource(a));f=new b.instanceOf(d);f.destroy=z;(g=a.listen.satellite)&&f.addHandler(g,a);(g=a.listen["satellite:"+c])&&f.addHandler(g,a)}a.satellite.__auto__[c].instance=f;a.setSatellite(c,f,!0)}else f&&(b.instance&&(b.delegate&&f.setDelegate(),b.dataSource&&f.setDataSource()),a.satellite.__auto__[c].instance=null,a.setSatellite(c,null,!0))},w={destroy:function(){this.owner.setSatellite(this.name,
null)}},I=t(d,{className:n+".AbstractNode",subscribeTo:d.prototype.subscribeTo+H.DATASOURCE,isSyncRequired:function(){return this.state==ba.UNDEFINED||this.state==ba.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){d.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:Y.NONE,name:null,childNodes:null,emit_childNodesModified:q("childNodesModified",
"delta")&&function(a){U.childNodesModified.call(this,a);var c=this.listen.childNode,b;if(c){if(b=a.inserted)for(var d=0,f;f=b[d];d++)f.addHandler(c,this);if(b=a.deleted)for(d=0;f=b[d];d++)f.removeHandler(c,this)}},childNodesState:ba.UNDEFINED,emit_childNodesStateChanged:q("childNodesStateChanged","oldState"),childClass:I,dataSource:null,emit_dataSourceChanged:q("dataSourceChanged","oldDataSource"),dataSourceAdapter_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,
previousSibling:null,firstChild:null,lastChild:null,sorting:y,sortingDesc:!1,emit_sortingChanged:q("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:q("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:fa,ownerSatelliteName:null,emit_satelliteChanged:q("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:q("ownerChanged","oldOwner"),init:function(){d.prototype.init.call(this);var a=this.childNodes,c=this.dataSource;
a&&(this.childNodes=null);c&&(this.dataSource=null);var b=this.grouping;b&&(this.grouping=null,this.setGrouping(b));this.childClass&&(this.childNodes=[],c?this.setDataSource(c):a&&this.setChildNodes(a));a=this.satellite;if(a!==fa){this.satellite=fa;for(var f in a)a[f]&&"object"==typeof a[f]&&this.setSatellite(f,a[f])}if(f=this.owner)this.owner=null,this.setOwner(f)},setChildNodesState:function(a,c){var b=String(a),f=this.childNodesState;if(!ba.values[b])throw 7;if(f!=b||f.data!=c)this.childNodesState=
Object(b),this.childNodesState.data=c,this.emit_childNodesStateChanged(f)},appendChild:function(a){},insertBefore:function(a,c){},removeChild:function(a){},replaceChild:function(a,c){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,c){},setSorting:function(a,c){},setDataSource:function(a){},setOwner:function(a){a&&!1!=a instanceof I||(a=null);if(a&&this.parentNode)throw 8;var c=this.owner;if(c!==a){var b=this.listen.owner;if(c){if(this.ownerSatelliteName&&c.satellite.__auto__&&
this.ownerSatelliteName in c.satellite.__auto__)return;b&&c.removeHandler(b,this);this.ownerSatelliteName&&(this.owner=null,c.setSatellite(this.ownerSatelliteName,null))}a&&b&&a.addHandler(b,this);this.owner=a;this.emit_ownerChanged(c);this.autoDelegate!=Y.OWNER&&this.autoDelegate!==Y.ANY||this.setDelegate(a)}},setSatellite:function(a,b,f){var d=this.satellite[a]||null,g=this.satellite.__auto__,e=g&&g[a],k=f&&e;if(k)b=e.instance,e.config.instance&&b&&delete e.config.instance.setOwner;else{if((b=u(b))&&
b.owner&&g&&b.ownerSatelliteName&&g[b.ownerSatelliteName])return;e&&(delete g[a],e.config.instance&&e.config.instance.removeHandler(w,e),e.config.handler&&this.removeHandler(e.config.handler,e))}if(d!==b){f=this.listen.satellite;var l=this.listen["satellite:"+a],h;d&&(delete this.satellite[a],d.ownerSatelliteName=null,e&&d.destroy===z?h=d:(f&&d.removeHandler(f,this),l&&d.removeHandler(l,this),d.setOwner(null)),k&&!b&&e.config.instance&&(e.config.instance.setOwner=F));if(b){if(!1==b instanceof I){e=
{owner:this,name:a,config:b,instance:null};b.handler&&this.addHandler(b.handler,e);b.instance&&(b.instance.addHandler(w,e),b.instance.setOwner=F);g||(this.satellite===fa&&(this.satellite={}),g=this.satellite.__auto__={});g[a]=e;c.call(e,this);!e.instance&&d&&this.emit_satelliteChanged(a,d);h&&(delete h.destroy,h.destroy());return}if(b.owner!==this){e&&e.config.delegate?(g=b.autoDelegate,b.autoDelegate=!1,b.setOwner(this),b.autoDelegate=g):b.setOwner(this);if(b.owner!==this)return;f&&b.addHandler(f,
this);l&&b.addHandler(l,this)}else b.ownerSatelliteName&&(delete this.satellite[b.ownerSatelliteName],this.emit_satelliteChanged(b.ownerSatelliteName,b));this.satellite==fa&&(this.satellite={});this.satellite[a]=b;b.ownerSatelliteName=a}this.emit_satelliteChanged(a,d);h&&(delete h.destroy,h.destroy())}},getChildNodesDataset:function(){return X[this.basisObjectId]||new ea({sourceNode:this})},destroy:function(){d.prototype.destroy.call(this);this.dataSource||this.dataSourceAdapter_?this.setDataSource():
this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();var a=this.satellite;if(a!==fa){var c=a.__auto__;delete a.__auto__;for(var b in c)c[b].config.instance&&!c[b].instance&&c[b].config.instance.destroy();for(b in a)c=a[b],c.owner=null,c.ownerSatelliteName=null,c.destroy===z&&delete c.destroy,c.destroy();this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=
this.parentNode=this.childNodes=null}}),$=t(I,{className:n+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];I.prototype.init.call(this)},insert:function(a,c){var b=this.nodes,d=c?b.indexOf(c):-1;-1==d?(b.push(a),this.last=a):b.splice(d,0,a);this.first=b[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var c=this.nodes;M(c,a)&&(this.first=c[0]||null,this.last=c[c.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));
!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,c=a.length;0<c--;)a[c].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){I.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),g={childClass:I,childFactory:null,listen:{dataSource:{itemsChanged:function(c,b){var d={},f=[];if(b.deleted)if(d.deleted=f,this.childNodes.length==
b.deleted.length){for(var f=P(this.childNodes),g=0,e;e=f[g];g++)D(e);g=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=g;this.dataSourceMap_={}}else for(g=0;e=b.deleted[g];g++){e=e.basisObjectId;var k=this.dataSourceMap_[e];D(k);delete this.dataSourceMap_[e];this.removeChild(k);f.push(k)}if(b.inserted)for(d.inserted=[],g=0;e=b.inserted[g];g++){var h=k=A(this,{delegate:e});h.setDelegate=a.fn.$undef;h.destroy=G;this.dataSourceMap_[e.basisObjectId]=k;d.inserted.push(k);this.firstChild&&
this.insertBefore(k)}this.firstChild?this.emit_childNodesModified(d):this.setChildNodes(d.inserted);if(this.destroyDataSourceMember&&f.length)for(g=0;e=f[g];g++)e.destroy()},stateChanged:function(a){this.setChildNodesState(a.state,a.state.data)},destroy:function(a){this.dataSourceAdapter_||this.setDataSource()}}},getChild:function(c,b){return a.array.search(this.childNodes,c,b)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,
c){if(!this.childClass)throw 11;if(a.firstChild)for(var b=this;b=b.parentNode;)if(b===a)throw 12;var f=a&&a instanceof this.childClass;if(this.dataSource){if(!f||!a.delegate||this.dataSourceMap_[a.delegate.basisObjectId]!==a)throw 13;}else if(this.dataSourceAdapter_)throw 14;f||(a=A(this,a instanceof d?{delegate:a}:a));if(a.owner)throw 15;var f=a.parentNode===this,g=this.childNodes,e=this.grouping,k=a.groupNode,h=null,l=this.sorting,w,C=!1,ga,b=-1,W,r;f&&(W=a.nextSibling,r=a.previousSibling);l!==
y&&(c=null,w=this.sortingDesc,ga=l(a)||0,f&&(ga===a.sortingValue?C=!0:(!W||(w?W.sortingValue<=ga:W.sortingValue>=ga))&&(!r||(w?r.sortingValue>=ga:r.sortingValue<=ga))&&(a.sortingValue=ga,C=!0)));if(e){h=e.getGroupNode(a,!0);e=h.nodes;if(k===h&&(C||l===y&&W===c))return a;l!==y?k===h&&C?b=W&&W.groupNode===h?e.indexOf(W):e.length:(b=p(e,ga,x,w),a.sortingValue=ga):b=c&&c.groupNode===h?e.indexOf(c):e.length;if(b<e.length)c=e[b];else if(h.last)c=h.last.nextSibling;else for(b=h,c=null;(b=b.nextSibling)&&
!(c=b.first););if(a===c||f&&W===c)return k!==h&&(k&&k.remove(a),h.insert(a,c)),a;b=-1}else if(l!==y){if(C)return a;b=p(g,ga,x,w);c=g[b];a.sortingValue=ga;if(a===c||f&&W===c)return a}else{if(c&&c.parentNode!==this)throw 16;if(f){if(W===c)return a;if(a===c)throw 17;}}f?(W?(W.previousSibling=r,a.nextSibling=null):this.lastChild=r,r?(r.nextSibling=W,a.previousSibling=null):this.firstChild=W,-1==b?M(g,a):(w=g.indexOf(a),g.splice(w,1),b-=w<b),k&&(k.remove(a),k=null)):a.parentNode&&a.parentNode.removeChild(a);
k!=h&&h.insert(a,c);if(c){-1==b&&(b=g.indexOf(c));if(-1==b)throw 18;a.nextSibling=c;g.splice(b,0,a)}else b=g.length,g.push(a),c={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=c.previousSibling;0==b?this.firstChild=a:c.previousSibling.nextSibling=a;c.previousSibling=a;f||(S(a,a.contextSelection,this.selection||this.contextSelection,!0),L(a,this.disabled||this.contextDisabled),(a.underMatch_||this.matchFunction)&&a.match&&a.match(this.matchFunction),a.autoDelegate!=
Y.PARENT&&a.autoDelegate!==Y.ANY||a.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[a]}),a.listen.parentNode&&this.addHandler(a.listen.parentNode,a));return a},removeChild:function(a){if(!a||a.parentNode!==this)throw 19;if(!1==a instanceof this.childClass)throw 20;if(this.dataSource){if(this.dataSource.has(a.delegate))throw 21;}else if(this.dataSourceAdapter_)throw 22;var c=this.childNodes.indexOf(a);if(-1==c)throw 23;this.childNodes.splice(c,1);a.parentNode=null;a.nextSibling?
a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);S(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);this.dataSource||this.emit_childNodesModified({deleted:[a]});a.autoDelegate!=Y.PARENT&&a.autoDelegate!==Y.ANY||a.setDelegate();return a},replaceChild:function(a,
c){if(this.dataSource)throw 24;if(this.dataSourceAdapter_)throw 25;if(null==c||c.parentNode!==this)throw 26;this.insertBefore(a,c);return this.removeChild(c)},clear:function(a){if(this.dataSource&&this.dataSource.itemCount)throw 27;if(this.firstChild){a&&S(this,this.selection||this.contextSelection,null,!1,!0);var c=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:c});for(var b=c.length;0<b--;){var f=c[b];f.listen.parentNode&&f.parentNode.removeHandler(f.listen.parentNode,
f);f.parentNode=null;f.groupNode=null;a?(f.nextSibling=null,f.previousSibling=null,f.autoDelegate!=Y.PARENT&&f.autoDelegate!==Y.ANY||f.setDelegate()):f.destroy()}if(this.grouping)for(c=this.grouping.childNodes,b=c.length-1;a=c[b];b--)a.clear()}},setChildNodes:function(a,c){this.dataSource||this.dataSourceAdapter_||this.clear(c);if(a&&(!1=="length"in a&&(a=[a]),a.length)){var b=this.emit_childNodesModified;this.emit_childNodesModified=f;for(var d=0,g=a.length;d<g;d++)this.insertBefore(a[d]);this.emit_childNodesModified=
b;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(c){if(!this.childClass)throw 28;c=a.data.resolveDataset(this,this.setDataSource,c,"dataSourceAdapter_");if(this.dataSource!==c){var b=this.dataSource,f=this.listen.dataSource;b&&(this.dataSource=this.dataSourceMap_=null,f&&b.removeHandler(f,this));if(this.firstChild){if(b)for(var d=0,g;g=this.childNodes[d];d++)D(g);this.clear()}(this.dataSource=c)?(this.dataSourceMap_={},this.setChildNodesState(c.state,c.state.data),
f&&(c.addHandler(f,this),c.itemCount&&f.itemsChanged&&f.itemsChanged.call(this,c,{inserted:c.getItems()}))):this.setChildNodesState(ba.UNDEFINED);this.emit_dataSourceChanged(b)}},setGrouping:function(a,c){if("function"==typeof a||"string"==typeof a)a={rule:a};!1==a instanceof O&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var b=this.grouping,f;if(b){this.grouping=null;if(!a&&this.firstChild){f=this.sorting!==y?e(this):this.childNodes;b.nullGroup.clear();for(var d=
b.childNodes.slice(0),g=0;g<d.length;g++)d[g].clear();J(this,f)}b.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){f=this.sorting!==y?e(this):this.childNodes;for(g=0;d=f[g];g++)d.groupNode=this.grouping.getGroupNode(d,!0);for(g=0;d=f[g];g++)d.groupNode.nodes.push(d);f.length=0;for(g=this.grouping.nullGroup;g;g=g.nextSibling)d=g.nodes,g.first=d[0]||null,g.last=d[d.length-1]||null,f.push.apply(f,d),g.emit_childNodesModified({inserted:d});J(this,f)}this.emit_groupingChanged(b)}},
setSorting:function(a,c){a=k(a);c=!!c;if(this.sorting!==a||this.sortingDesc!=!!c){var b=this.sorting,f=this.sortingDesc;this.sorting=a;this.sortingDesc=!!c;if(a!==y&&this.firstChild){var d=[],g;for(g=this.firstChild;g;g=g.nextSibling)g.sortingValue=a(g)||0;if(this.grouping)for(var h=this.grouping.nullGroup;h;h=h.nextSibling)g=h.nodes=e({childNodes:h.nodes,sortingDesc:this.sortingDesc}),h.first=g[0]||null,h.last=g[g.length-1]||null,d.push.apply(d,g);else d=e(this);J(this,d)}this.emit_sortingChanged(b,
f)}},setMatchFunction:function(a){if(this.matchFunction!=a){var c=this.matchFunction;this.matchFunction=a;for(var b=this.lastChild;b;b=b.previousSibling)b.match(a);this.emit_matchFunctionChanged(c)}}},K=t(I,g,{className:n+".Node",emit_enable:q("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)L(a,!1);U.enable.call(this)},emit_disable:q("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)L(a,!0);U.disable.call(this)},emit_satelliteChanged:function(a,c){I.prototype.emit_satelliteChanged.call(this,
a,c);this.satellite[a]instanceof K&&L(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:q("select"),emit_unselect:q("unselect"),emit_match:q("match"),emit_unmatch:q("unmatch"),emit_matchFunctionChanged:q("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,contextDisabled:!1,listen:{owner:{enable:function(){L(this,!1)},disable:function(){L(this,!0)}}},init:function(){this.selection&&(!1==
this.selection instanceof da&&(this.selection=new ka(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this));I.prototype.init.call(this);this.disabled&&this.emit_disable();this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(a){if(this.selection!==a)return S(this,this.selection||this.contextSelection,a||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=
a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},select:function(a){var c=this.selected,b=this.contextSelection;b?a?c?b.remove([this]):b.add([this]):this.selectable&&b.set([this]):!c&&this.selectable&&(this.selected=!0,this.emit_select());return this.selected!=c},unselect:function(){var a=this.selected;if(a){var c=this.contextSelection;c?c.remove([this]):(this.selected=!1,this.emit_unselect())}return this.selected!=a},setSelected:function(a,c){return a?this.select(c):this.unselect()},
enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.contextDisabled||this.emit_enable());return this.disabled!=a},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.contextDisabled||this.emit_disable());return this.disabled!=a},setDisabled:function(a){return a?this.disable():this.enable()},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=
!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect();this.contextSelection=null;this.selection&&this.setSelection();I.prototype.destroy.call(this)}}),O=t(I,g,{className:n+".GroupingNode",emit_childNodesModified:function(a){U.childNodesModified.call(this,a);this.nullGroup.nextSibling=this.firstChild;var c;if(c=a.inserted){a=0;for(var b;b=c[a++];)b.groupId_=b.delegate?b.delegate.basisObjectId:b.data.id,this.map_[b.groupId_]=b;if(this.dataSource&&
this.nullGroup.first)for(c=this.owner,b=P(this.nullGroup.nodes),a=b.length;0<a--;)c.insertBefore(b[a],b[a].nextSibling)}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);U.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:y,childClass:$,childFactory:function(a){return new this.childClass(b({autoDestroyIfEmpty:this.dataSource?
!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new $;I.prototype.init.call(this)},getGroupNode:function(a,c){var b=this.rule(a),f=b instanceof d,g=this.map_[f?b.basisObjectId:b];this.dataSource&&(c=!1);!g&&c&&(g=this.appendChild(f?b:{data:{id:b,title:b}}));return g||this.nullGroup},setDataSource:function(a){var c=this.dataSource;g.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==c)for(var c=P(a.childNodes),b=c.length-1;0<=b;b--)a.insertBefore(c[b],
c[b+1])},insertBefore:function(a,c){a=g.insertBefore.call(this,a,c);var b=a.first;if(b){for(var f=b.parentNode,d=a.last,e,k,h,l=null,w=a;(w=w.nextSibling)&&!(l=w.first););h=l?l.previousSibling:f.lastChild;e=b.previousSibling;k=d.nextSibling;if(k!==l){var C=f.childNodes,w=a.nodes,p=w.length;e&&(e.nextSibling=k);k&&(k.previousSibling=e);h&&(h.nextSibling=b);l&&(l.previousSibling=d);b.previousSibling=h;d.nextSibling=l;var d=C.indexOf(b),W=l?C.indexOf(l):C.length;W>d&&(W-=p);C.splice(d,p);C.splice.apply(C,
[W,0].concat(w));h&&e||(f.firstChild=C[0]);l&&k||(f.lastChild=C[C.length-1]);if(b instanceof $)for(b=p;0<b--;)f.insertBefore(w[b],l),l=w[b]}}return a},removeChild:function(a){if(a=g.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var c=0,b;b=a.nodes[c];c++)b.parentNode.insertBefore(b)}return a},clear:function(a){var c=[],b=this.getGroupNode,f=this.nullGroup;this.getGroupNode=function(){return f};for(var d=this.firstChild;d;d=d.nextSibling)c.push.apply(c,d.nodes);for(var d=0,e;e=c[d];d++)e.parentNode.insertBefore(e);
this.getGroupNode=b;g.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;I.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});I.prototype.groupingClass=O;var ja={childNodesModified:function(a,c){var b=this.members_,f={},d,g=0,e=0,k=c.inserted,h=c.deleted;if(k&&k.length)for(f.inserted=k;d=k[g];)b[d.basisObjectId]=d,g++;if(h&&h.length)for(f.deleted=h;d=h[e];)delete b[d.basisObjectId],e++;(g||e)&&this.emit_itemsChanged(f)},destroy:function(){this.destroy()}},
ea=t(da,{className:n+".ChildNodesDataset",sourceNode:null,init:function(){da.prototype.init.call(this);var a=this.sourceNode;X[a.basisObjectId]=this;a.firstChild&&ja.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(ja,this)},destroy:function(){this.sourceNode.removeHandler(ja,this);delete X[this.sourceNode.basisObjectId];da.prototype.destroy.call(this)}}),ka=t(T,{className:n+".Selection",multiple:!1,emit_itemsChanged:function(a){T.prototype.emit_itemsChanged.call(this,a);if(a.inserted)for(var c=
0,b;b=a.inserted[c];c++)b.selected||(b.selected=!0,b.emit_select());if(a.deleted)for(c=0;b=a.deleted[c];c++)b.selected&&(b.selected=!1,b.emit_unselect())},add:function(a){if(!this.multiple){if(this.itemCount)return this.set(a);a=[a[0]]}for(var c=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&c.push(f);return T.prototype.add.call(this,c)},set:function(a){for(var c=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&c.push(f);this.multiple||c.splice(1);return T.prototype.set.call(this,
c)}});V.exports={DELEGATE:Y,AbstractNode:I,Node:K,GroupingNode:O,PartitionNode:$,ChildNodesDataset:ea,Selection:ka,nullSelection:new da}},"6.js":function(n,V,a,q,H,v,E,Q){function G(c){"string"==typeof c&&(c=a.l10n.token(c));if(!c)return null;var b=c.basisObjectId,f=ea[b];f||(f=ea[b]=new N(new ka(c)));return f}function F(){return"i"+a.genUID()+"__"}function z(a,c){function b(c){m>e&&(f.push((c||"")+a.substring(e,m)),e=m)}var f=[],d=a.split(""),g=d.length,e=0,k=!1,C;c||(c=F());for(var m=0;m<g;m++)switch(d[m]){case "'":case '"':for(C=
d[m];++m<g;)if("\\"==d[m])m++;else if(d[m]==C){m++;break}break;case "/":if("*"==d[m+1])for(m++;++m<g;)if("*"==d[m]&&"/"==d[m+1]){m+=2;break}break;case "{":k=!0;break;case "}":k=!1;break;case ".":if(!k)for(m++,b();++m<g;)if(!/[a-z0-9\-\_]/.test(d[m])){b(c);m-=1;break}}b();return f.join("")}function D(c){c=a.resource(c).fetch();"function"==typeof c.startUse&&c.startUse()}function x(c){c=a.resource(c).fetch();"function"==typeof c.stopUse&&c.stopUse()}function h(){this.destroyBuilder&&p.call(this);for(var a=
0,c;c=this.attaches_[a];a++)c.handler.call(c.context)}function l(a){for(var c=[],b=0;b<a.length;b++)c.push(Array.isArray(a[b])?l(a[b]):a[b]);return c}function e(c,b,f,d){var g=c,e;"function"==typeof g&&(b="baseURI"in c?c.baseURI:b,e="url"in c?c.url:e,g=g());g instanceof a.Token&&(b="baseURI"in c?c.baseURI:b,e="url"in c?c.url:e,g=g.get());Array.isArray(g)?(f&&(g=l(g)),g={tokens:g}):"object"==typeof g&&Array.isArray(g.tokens)||(g=String(g));"string"==typeof g&&(g=m(g,b,d,e,c));return g}function p(){var a=
e(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),c=this.destroyBuilder,b=this.builder(a.tokens,this),f=this.deps_;if(f){this.deps_=null;for(var d=0,g;g=f[d];d++)g.bindingBridge.detach(g,p,this)}if(a.deps&&a.deps.length)for(this.deps_=f=a.deps,d=0;g=f[d];d++)g.bindingBridge.attach(g,p,this);this.createInstance=b.createInstance;this.clearInstance=b.destroyInstance;this.getBinding=function(){return{names:b.keys}};this.destroyBuilder=b.destroy;if(a=a.resources&&0<a.resources.length?a.resources:
null)for(d=0;f=a[d];d++)D(f);if(this.resources)for(d=0;f=this.resources[d];d++)x(f);this.resources=a;c&&c(!0)}function S(a){var c=s[a];c||(c=s[a]=function(){var c;c=S(a);if(c.template)c=c.template;else{var b=document.getElementById(a),r="";b&&"SCRIPT"==b.tagName&&"text/basis-template"==b.type&&(r=b.textContent||b.text);c=c.template=new N(r)}return c.source});return c}function L(){var c=a.array(arguments).join("."),b=Z[c];b||(b=new na("",c),Z[c]=b);return b}function u(a,c){for(var b=[],f={},d=[],g=
0;g<c.length;g++)f[c[g]]||(f[c[g]]=!0,d.push(c[g]));b.source=d.join("/");f={base:!0};for(d=0;d<c.length;d++)g=c[d]||"base",g==a||f[g]||(A(g),f[g]=!0,b.push(g),c.splice.apply(c,[d+1,0].concat(ia[g].fallback)));b.unshift(a);"base"!=a&&b.push("base");b.value=b.join("/");return b}function J(a,c){for(var b=ia[a].sourcesList,f=0,d;d=b[f];f++)if(d.hasOwnProperty(c))return d[c];return""}function A(c){c||(c="base");if(ia[c])return ia[c].theme;if(!/^([a-z0-9\_\-]+)$/.test(c))throw 31;var b={},f=[b],d=new ma;
ia[c]={theme:d,sources:b,sourcesList:f,fallback:[]};var g=function(a,f){!1==a in b&&(b[a]=f,-1!=ia[C].fallback.indexOf(c)&&L(a).set());return L(a)};a.object.extend(d,{name:c,fallback:function(a){if(d!==ha&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],f={},b=u(c,b);if(ia[c].fallback.source!=b.source){ia[c].fallback.source=b.source;for(var r in ia){var g=ia[r].fallback,b=u(r,(g.source||"").split("/"));if(b.value!=g.value){f[r]=!0;ia[r].fallback=b;g=ia[r].sourcesList;g.length=b.length;
for(var B=0;B<g.length;B++)g[B]=ia[b[B]].sources}}}for(r in f)if(-1!=ia[C].fallback.indexOf(r)){b=void 0;for(b in Z)L(b).set();break}}b=ia[c].fallback.slice(1);b.source=ia[c].fallback.source;return b},define:function(a,c){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof c){var b=a,f=c,r={},B;for(B in f)f.hasOwnProperty(B)&&(r[B]=g(b+"."+B,f[B]));return r}return 1==arguments.length?L(a):g(a,c)}if("object"==typeof a){f=a;for(b in f)f.hasOwnProperty(b)&&g(b,f[b]);return d}},apply:function(){if(c!=
C){C=c;for(var a in Z)L(a).set();a=0;for(var b;b=ga[a];a++)b.fn.call(b.context,c)}return d},getSource:function(a,f){return f?J(c,a):b[a]},drop:function(a){b.hasOwnProperty(a)&&(delete b[a],-1!=ia[C].fallback.indexOf(c)&&L(a).set())}});ia[c].fallback=u(c,[]);f.push(ia.base.sources);return d}a.require("./2.js");n=this.path;q=a.Class;var t=a.cleaner,b=a.path,P=a.array.search,M=a.array.add,f=a.array.remove,k=[],y={},U=/^event-(.+)$/,ba={4:"class",5:"style"},d={"class":4,style:5},da={2:4,4:3,5:3,6:2},
T=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,Y=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,X=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,fa=/(.|[\r\n])*?--\x3e/g,c=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,w=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,I=/"((?:(\\")|[^"])*?)"\s*/g,$=/^/g,g=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,K={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,
style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},O=/\\"/g,ja=function(a){var b=[],f=[],d={childs:b},e,k,C,m=!1,h=0,l,p=T,y=0,s;for(a=a.trim();y<a.length||p!=T;)if(e=p.lastIndex=y,(s=p.exec(a))&&s.index===y){y=p.lastIndex;switch(p){case T:l=e+s[1].length;h!=l&&(e=h==e?s[1]:a.substring(h,l),(k=e.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&d.childs.push({type:3,len:e.length,value:k}));h=l;s[3]?d.childs.push({type:3,refs:["l10n:"+s[3]],value:"{l10n:"+s[3]+"}"}):"{"==s[2]?(C=y-1,d.childs.push(k={type:3}),p=w):s[4]?
"/"==s[4]?(k=null,p=c):(d.childs.push(k={type:8}),s[5]?(C=y-s[5].length,p=w):(C=y,p=fa)):s[2]&&(m=!0,f.push(d),d.childs.push(k={type:1,attrs:[],childs:[]}),d=k,p=Y);break;case c:s[1]!==(d.prefix?d.prefix+":":"")+d.name?d.childs.push({type:3,value:"</"+s[0]}):d=f.pop();p=T;break;case Y:case X:if(":"==s[2]){k.prefix?p=$:k.prefix=s[1];break}s[1]&&(k.name=s[1],2==k.type&&d.attrs.push(k));if("{"==s[2]){p=1==k.type?w:$;break}if(s[3]){m=!1;if("/>"==s[3]||!d.prefix&&g.test(d.name))d=f.pop();else if("b"==
d.prefix&&d.name in K){p=K[d.name];break}p=T;break}if("="==s[2]){p=I;break}k={type:2};p=X;break;case fa:k.value=a.substring(C,y-3);p=T;break;case w:k.refs?k.refs.push(s[1]):k.refs=[s[1]];"|"!=s[2]&&(3==k.type?(y-=s[2].length-1,k.value=a.substring(C,y),p=T):8==k.type?p=fa:2==k.type&&"="==a[y]?(y++,p=I):(k={type:2},p=X));break;case I:k.value=s[1].replace(O,'"');k={type:2};p=X;break;case K.text:case K.style:d.childs.push({type:3,value:s[1]});d=f.pop();p=T;break;default:throw 29;}p==T&&(h=y)}else if(p==
w&&k&&8==k.type)p=fa;else{m&&(d=f.pop());k&&d.childs.pop();if(k=d.childs.pop())3!=k.type||k.refs?d.childs.push(k):h-="len"in k?k.len:k.value.length;m=!1;p=T}h!=y&&d.childs.push({type:3,value:a.substring(h,y)});b.templateTokens=!0;return b},ea={},ka=a.Token.subclass({className:n+".L10nProxyToken",token:null,url:"",init:function(a){this.url=a.dictionary.resource.url+":"+a.name;this.token=a;this.set();a.attach(this.set,this)},set:function(){return a.Token.prototype.set.call(this,"markup"==this.token.type?
'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+'">'+String(this.token.value)+"</span>":"")},destroy:function(){a.Token.prototype.destroy.call(this);this.token=null}}),m=function(){function c(a){return(a.prefix?a.prefix+":":"")+a.name}function r(a,c){ha[c]||("#"==c.charAt(0)?ha[c]=String.fromCharCode("x"==c.charAt(1)||"X"==c.charAt(1)?parseInt(c.substr(2),16):c.substr(1)):O&&(O.innerHTML=a,ha[c]=O.firstChild?O.firstChild.nodeValue:a));return ha[c]||
a}function g(a){return(a=a.refs)&&a.length?a:0}function ca(a){for(var c,b=[],d=[],f={},g=0;g<a.length;g++)g%2?(c=a[g],f[c]||(f[c]=b.length,b.push(c)),d.push(f[c])):a[g]&&d.push(a[g].replace($,r));return[b,d]}function aa(a,c){var b=0,f,g;if(c)switch(a){case "class":if(f=c.match(K)){for(var e=[],b=[],B=0,k;k=f[B];B++)(g=k.match(q))?b.push([g[1]||"",g[2]]):e.push(k);c=e.join(" ")}break;case "style":e=[];b=[];if(f=c.match(u))for(B=0;k=f[B];B++)g=k.match(J),k=g[1],c=g[2].trim(),g=c.split(D),1<g.length?
(g=ca(g),g.push(k),b.push(g)):e.push(k+": "+c.replace($,r));(c=e.join("; "))&&(c+=";");break;default:f=c.split(n),1<f.length?b=ca(f):c=c.replace($,r)}b&&!b.length&&(b=0);return{binding:b,value:c,type:d[a]||2}}function C(a,b,f){var d=a.attrs;a=[];for(var r,e,k,h=0,l;l=d[h];h++)if("b"==l.prefix)switch(l.name){case "ref":l=(l.value||"").trim().split(/\s+/);for(k=0;k<l.length;k++)m(b,l[k]);break;case "show":case "hide":e=l}else if(k=l.name.match(U))a.push(k[1]==l.value?[6,k[1]]:[6,k[1],l.value]);else{k=
aa(l.name,l.value);var oa=[k.type,k.binding,g(l)];2==k.type&&oa.push(c(l));!k.value||f&&k.binding&&2==k.type||oa.push(k.value);5==k.type&&(r=oa);a.push(oa)}e&&(r||(r=[5,0,0],a.push(r)),r[1]||(r[1]=[]),b=ca((e.value||e.name).split(n)),b[0].length-b[1].length?r[3]=(r[3]?r[3]+"; ":"")+("show"==e.name^""===e.value?"":"display: none"):("show"==e.name&&(r[3]=(r[3]?r[3]+"; ":"")+"display: none"),r[1].push(b.concat("display",e.name))));return a.length?a:0}function m(a,c){a[2]||(a[2]=[]);M(a[2],c);"element"!=
c&&(a[1]=1==a[2].length?c:0)}function h(a,c){var b=a[2].indexOf(c);if(-1!=b){var f=a[1]&&"number"==typeof a[1];a[2].splice(b,1);f&&b==a[1]-1&&(a[1]=c);a[2].length?f&&(a[1]-=b<a[1]-1):a[2]=0}}function l(a){var b={};if(a.attrs)for(var f=0,d;d=a.attrs[f];f++)b[c(d)]=d.value;return b}function p(a,c){for(var b=0;b<c.length;b++)M(a,c[b])}function w(a,c,b){for(var f=0,d;d=c[f];f++)d[1]!==X&&(d[1]=b+d[1]);a.unshift.apply(a,c)}function s(c,f,d,r){d?f=b.resolve(c.baseURI+d):(f=f.childs[0],f=a.resource.virtual("css",
f?f.value:"",c.sourceUrl).url);c.resources.push([f,r]);return f}function y(ca,t,K,q){function u(a,c,b){var r=l(a);c&&(r.name=c);if(r.name&&x.test(r.name)){var g=H[r.ref||"element"];if(g&&1==g.token[0]){c=g.token;var e=(a=r.name.match(U))?6:d[r.name]||2,k=da[e]||4,B=c&&P(c,r.name,function(a){return 6==a[0]?"event-"+a[1]:ba[a[0]]||a[3]},4);B||"remove"==b||(a?B=[e,a[1]]:(B=[e,0,0,2==e?r.name:""],2==e&&B.push("")),c||(c=[],g.token.push(c)),c.push(B));g="class"==r.name||"style"==r.name;switch(b){case "set":if(6==
B[0]){r.value==a[1]?B.length=2:B[k]=r.value;break}b=aa(r.name,r.value);B[1]=b.binding;K.optimizeSize&&B[1]&&!g?B.length=k:B[k]=b.value||"";if(g&&!B[1]&&!B[k]){f(c,B);break}break;case "append":b=aa(r.name,r.value);if(!a)if(b.binding)if(e=B[1])switch(r.name){case "style":for(var ca={},r=0,C;C=e[r];r++)ca[C[2]]=r;for(r=0;C=b.binding[r];r++)C[2]in ca?e[ca[C[2]]]=C:e.push(C);break;case "class":e.push.apply(e,b.binding);break;default:for(b.binding[0].forEach(function(a){M(this,a)},e[0]),r=0;r<b.binding[1].length;r++)ca=
b.binding[1][r],"number"==typeof ca&&(ca=e[0].indexOf(b.binding[0][ca])),e[1].push(ca)}else B[1]=b.binding,g||B[1][1].unshift(B[k]);else!g&&B[1]&&B[1][1].push(r.value);b.value&&(B[k]=(B[k]||"")+(B[k]&&(a||g)?" ":"")+b.value);if(g&&!B[1]&&!B[k]){f(c,B);break}break;case "remove":B&&f(c,B)}}}}for(var J=[],D=0,n,ha;n=ca[D];D++){var O=g(n),z=O&&1==O.length?O[0]:0;switch(n.type){case 1:if("b"==n.prefix){var Z=l(n);switch(n.name){case "style":var N=Z.namespace||Z.ns,Y=N?X:q&&q.isolate||"";n=s(t,n,Z.src,
Y);N&&(!1==n in X&&(X[n]=F()),t.styleNSPrefix[N]=X[n]);break;case "isolate":t.isolate||(t.isolate=Z.prefix||K.isolate||F());break;case "l10n":Z.src&&(t.dictURI=b.resolve(t.baseURI,Z.src));break;case "define":if("name"in Z&&!t.defines[Z.name])switch(Z.type){case "bool":t.defines[Z.name]=["true"==Z["default"]?1:0];break;case "enum":n=Z.values?Z.values.trim().split(" "):[],t.defines[Z.name]=[n.indexOf(Z["default"])+1,n]}break;case "text":n=n.childs[0];ca[D--]=a.object.extend(n,{refs:(Z.ref||"").trim().split(/\s+/),
value:"notrim"in Z?n.value:n.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case "include":if(O=Z.src){var z=/^#\d+$/.test(O),T=/^id:/.test(O),O=z?O.substr(1):O,E;E=z?k[O]:T?S(O.substr(3)):/^[a-z0-9\.]+$/i.test(O)&&!/\.tmpl$/.test(O)?L(O):a.resource(b.resolve(t.baseURI+O));if(!E)continue;if(-1==ea.indexOf(E)){O="isolate"in Z?Z.isolate||F():"";T||M(t.deps,E);z?(E.source.bindingBridge&&M(t.deps,E.source),z=e(E.source,E.baseURI,!0,K)):z=e(E,E.url?b.dirname(E.url)+"/":"",!0,K);z.resources&&!1=="no-style"in
Z&&w(t.resources,z.resources,O);z.deps&&p(t.deps,z.deps);var H=A(z.tokens),T=(n.childs||[]).slice();E=a.object.slice(z.styleNSPrefix);Z["class"]&&T.push({type:1,prefix:"b",name:"append-class",attrs:[{type:2,name:"value",value:Z["class"]}]});Z.id&&T.push({type:1,prefix:"b",name:"set-attr",attrs:[{type:2,name:"name",value:"id"},{type:2,name:"value",value:Z.id}]});Z.ref&&H.element&&Z.ref.trim().split(/\s+/).map(function(a){m(H.element.token,a)});for(var Z=0,R;R=T[Z];Z++)if(1==R.type&&"b"==R.prefix)switch(R.name){case "style":var v=
l(R),Y=(N=v.namespace||v.ns)?X:O;n=s(t,R,v.src,Y);N&&(!1==n in X&&(X[n]=F()),E[N]=X[n]);break;case "replace":case "remove":case "before":case "after":n="replace"==R.name||"remove"==R.name;v=l(R);if(N=(N="ref"in v||!n?v.ref:"element")&&H[N])v=N.owner.indexOf(N.token),-1!=v&&(n=[v+("after"==R.name),n],"remove"!=R.name&&(n=n.concat(y(R.childs,t,K)||[])),N.owner.splice.apply(N.owner,n));break;case "prepend":case "append":v=l(R);(n=(N=(N="ref"in v?v.ref:"element")&&H[N])&&N.token)&&1==n[0]&&(v=y(R.childs,
t,K)||[],"prepend"==R.name?n.splice.apply(n,[4,0].concat(v)):n.push.apply(n,v));break;case "attr":case "set-attr":u(R,!1,"set");break;case "append-attr":u(R,!1,"append");break;case "remove-attr":u(R,!1,"remove");break;case "class":case "append-class":u(R,"class","append");break;case "set-class":u(R,"class","set");break;case "remove-class":u(R,"class","remove");break;case "add-ref":v=l(R);(n=(N=(N="ref"in v?v.ref:"element")&&H[N])&&N.token)&&v.name&&m(n,v.name);break;case "remove-ref":v=l(R),(n=(N=
(N="ref"in v?v.ref:"element")&&H[N])&&N.token)&&h(n,v.name||v.ref)}else z.tokens.push.apply(z.tokens,y([R],t,K)||[]);H.element&&h(H.element.token,"element");a.object.complete(t.styleNSPrefix,E);O?I(z.tokens,O):z.isolate&&!t.isolate&&(t.isolate=K.isolate||F());J.push.apply(J,z.tokens)}}}continue}ha=[1,z,O,c(n)];ha.push.apply(ha,C(n,ha,K.optimizeSize)||[]);ha.push.apply(ha,y(n.childs,t,K)||[]);break;case 3:O&&2==O.length&&P(O,"element")&&(z=O[+!O.lastSearchIndex]);if(z&&(T=ga(z,t.dictURI).split(/[:@\{]/),
"l10n"==T[0]&&3==T.length))if(T[2]){if(T=T.slice(1).join("@"),T=a.l10n.token(T),E=G(T),t.l10nResolved=!0,E&&"markup"==T.type){ca[D--]=ja('<b:include src="#'+E.templateId+'"/>')[0];continue}}else f(O,z),0==O.length&&(O=null),z=0,n.value=n.value.replace(/\}$/,"@undefined}");ha=[3,z,O];O&&n.value=="{"+O.join("|")+"}"||ha.push(n.value.replace($,r));break;case 8:if(K.optimizeSize&&!z&&!O)continue;ha=[8,z,O];K.optimizeSize||O&&n.value=="{"+O.join("|")+"}"||ha.push(n.value.replace($,r))}for(;0===ha[ha.length-
1];)ha.pop();J.push(ha)}return J.length?J:0}function ga(a,c){if("string"!=typeof a)return a;var b=a.split(":");2==b.length&&"l10n"==b[0]&&-1==b[1].indexOf("@")&&(b[1]=b[1]+"@"+c);return b.join(":")}function A(a,c,b,f){b||(b={});f=f||0;for(var d;d=a[f];f++)if(6!=d[0]){var r=d[2];if(r)for(var g=r.length-1,B;B=r[g];g--)-1!=B.indexOf(":")?h(d,B):(b[B]&&h(b[B].token,B),d[1]==B&&(d[1]=g+1),b[B]={owner:a,token:d});switch(d[0]){case 3:d[1]=ga(d[1],c);break;case 2:if(d[1])for(d=d[1][0],g=0;g<d.length;g++)d[g]=
ga(d[g],c);break;case 1:A(d,c,b,4)}}return b}function t(a,c,b,d){var f=0;d=d||0;for(var r;r=a[d];d++){var g=r[0];1==g&&(f+=t(r,c,b,4));if(4==g||2==g&&"class"==r[3]){var B=r[1],g=da[g];if(B){for(var e=(r[g]||"").trim().split(" "),k=0,ca;ca=B[k];k++)if(!(2<ca.length)){var C=ca[1].split(":").pop(),aa=c.defines[C];aa?(ca.push.apply(ca,aa),aa.used=!0,aa[0]&&(1==aa.length?M(e,ca[0]+C):M(e,ca[0]+aa[1][aa[0]-1]))):f++}r[g]=e.join(" ");b.optimizeSize&&!r[g]&&(r.length=g)}}}return f}function I(a,c,b,d){function f(a){var d=
a.split(":");return 1==d.length?c+d[0]:b?d[0]?!1==d[0]in b.styleNSPrefix?a:b.styleNSPrefix[d[0]]+d[1]:d[1]:a}d=d||0;for(var r;r=a[d];d++){var g=r[0];1==g&&I(r,c,b,4);if(4==g||2==g&&"class"==r[3]){var B=r[1],g=da[g];r[g]&&(r[g]=r[g].split(/\s+/).map(f).join(" "));if(B)for(r=0;g=B[r];r++)g[0]=f(g[0])}}}var x=/^[a-z_][a-z0-9_\-]*$/i,K=/(\S+)/g,q=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,u=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,J=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,
D=/\{([a-z_][a-z0-9_]*)\}/i,n=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,$=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,ha=a.NODE_ENV?__nodejsRequire("./template/htmlentity.json"):{},O=a.NODE_ENV?null:document.createElement("div"),ea=[],X={};return function(c,b,d,f,r){d=d||{};var g=[],B={sourceUrl:f,baseURI:b||"",tokens:null,resources:[],styleNSPrefix:{},deps:[],defines:{},unpredictable:!0,warns:g,isolate:!1};B.dictURI=f?a.path.resolve(f):b||"";B.dictURI&&
(b=a.path.extname(B.dictURI))&&".l10n"!=b&&(B.dictURI=B.dictURI.substr(0,B.dictURI.length-b.length)+".l10n");c.templateTokens||(c=ja(String(c)));c.warns&&g.push.apply(g,c.warns);r&&ea.push(r);B.tokens=y(c,B,d);r&&ea.pop();B.tokens||(B.tokens=[[3,0,0,""]]);m(B.tokens[0],"element");A(B.tokens,B.dictURI);B.unpredictable=!!t(B.tokens,B,d);if(0==ea.length){I(B.tokens,B.isolate||"",B);if(B.isolate)for(c=0;d=B.resources[c];c++)d[1]!==X&&(d[1]=B.isolate+d[1]);B.resources=B.resources.filter(function(c,b,d){return!a.array.search(d,
String(c),String,b+1)}).map(function(c){var b=c[0],d=c[1];d===X&&(d=X[b]);if(!d)return b;var f=a.resource.virtual("css","").ready(function(c){r();a.object.extend(c,{url:b+"?isolate-prefix="+d,baseURI:a.path.dirname(b)+"/"})}),r=a.resource(b).ready(function(a){a=z(a.cssText||"",d);f.update(a)});return f.url})}delete B.defines;delete B.l10nResolved;g.length||(B.warns=!1);return B}}(),s={},N=q(null,{className:n+".Template",__extend__:function(a){return a instanceof N?a:a instanceof R?new la(a):new N(a)},
source:"",baseURI:"",init:function(a){if(4096==k.length)throw 30;this.attaches_=[];this.setSource(a||"");this.templateId=k.push(this)-1},bindingBridge:{attach:function(a,c,b){for(var d=0,f;f=a.attaches_[d];d++)if(f.handler==c&&f.context==b)return;a.attaches_.push({handler:c,context:b})},detach:function(a,c,b){for(var d=0,f;f=a.attaches_[d];d++)if(f.handler==c&&f.context==b){a.attaches_.splice(d,1);break}},get:function(){}},createInstance:function(a,c,b,d,f){p.call(this);return this.createInstance(a,
c,b,d,f)},clearInstance:function(a){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},getBinding:function(a){p.call(this);return this.getBinding(a)},setSource:function(c){var d=this.source;if(d!=c){if("string"==typeof c){var g=c.match(/^([a-z]+):/);if(g){var e=g[1];c=c.substr(g[0].length);switch(e){case "file":c=a.resource(c);break;case "id":c=S(c);break;case "tokens":c=a.string.toObject(c);c.isDecl=!0;break;case "path":c=L(c)}}}if(d&&d.bindingBridge){if(g=d.url&&y[d.url])f(g,this),g.length||
delete y[d.url];this.baseURI="";this.source.bindingBridge.detach(d,h,this)}c&&c.bindingBridge&&(c.url&&(this.baseURI=b.dirname(c.url)+"/",y[c.url]||(y[c.url]=[]),M(y[c.url],this)),c.bindingBridge.attach(c,h,this));this.source=c;h.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder();this.source=this.resources=this.getBinding=this.createInstance=this.attaches_=null}}),R=function(c){a.object.extend(this,c)},la=a.Class(null,{className:n+".TemplateSwitcher",ruleRet_:null,templates_:null,
templateClass:N,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var c=0,b;b=a[c];c++)this.ruleEvents[b]=!0}t.add(this)},resolve:function(a){a=this.rule(a);var c=this.ruleRet_.indexOf(a);-1==c&&(this.ruleRet_.push(a),c=this.templates_.push(new this.templateClass(a))-1);return this.templates_[c]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),ma=q(null,{className:n+".Theme",get:L}),
na=q(a.Token,{className:n+".SourceWrapper",path:"",url:"",baseURI:"",init:function(c,b){this.path=b;a.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=J(C,this.path);this.value!=a&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,na.prototype.apply,this),this.url=(this.value=a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in
a?a.baseURI:b.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,na.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);a.Token.prototype.destroy.call(this)}}),ia={},Z={},ha=A(),C="base",ga=[];t.add({destroy:function(){for(var a in Z)Z[a].destroy();Z=ia=null;a=0;for(var c;c=k[a];a++)c.destroy();k=null}});V.exports={DECLARATION_VERSION:2,
TYPE_ELEMENT:1,TYPE_ATTRIBUTE:2,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:0,TOKEN_BINDINGS:1,TOKEN_REFS:2,ATTR_NAME:3,ATTR_VALUE:4,ATTR_NAME_BY_TYPE:ba,ELEMENT_NAME:3,ELEMENT_ATTRS:4,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:ka,TemplateSwitchConfig:R,TemplateSwitcher:la,Template:N,SourceWrapper:na,switcher:function(c,b){var d=a.array(arguments);b=d.pop();return new R({rule:b,events:d.join(" ").trim().split(/\s+/)})},
tokenize:ja,isolateCss:z,getDeclFromSource:e,makeDeclaration:m,getL10nTemplate:G,Theme:ma,theme:A,getThemeList:function(){return a.object.keys(ia)},currentTheme:function(){return ia[C].theme},setTheme:function(a){return A(a).apply()},onThemeChange:function(a,c,b){ga.push({fn:a,context:c});b&&a.call(c,C)},define:ha.define,get:L,getPathList:function(){return a.object.keys(Z)}}},"7.js":function(n,V,a,q,H,v,E,Q){function G(c){c=a.template.getL10nTemplate(c);var b=c.templateId,d=ja[b];d||(d=ja[b]=new ka(c.source));
return d}function F(a){return function(c){if("click"!=c.type||3!=c.which){for(var b=X[c.type]||"mouseenter"!=c.type&&"mouseleave"!=c.type,d=c.sender,f;d;){f=d.getAttribute&&d.getAttribute(a);if(!b||"string"==typeof f)break;d=d.parentNode}if("string"==typeof f){var g=d,b=g,e,k;X[c.type]&&(e=c.relatedTarget)&&(g===e||g.contains(e))&&(g=null);for(;g;){e=g[ba];if("number"==typeof e&&(k=z(e)))break;g=g.parentNode}if(k&&k.action)for(f=f.trim().split(/\s+/),c.actionTarget=b,b=0;g=f[b++];)switch(g){case "prevent-default":c.preventDefault();
break;case "stop-propagation":c.stopPropagation();break;default:k.action.call(k.context,g,c)}}if(c.type in Y)Y[c.type](c,d)}}}function z(a){var c=da[a&4095];return c&&c.instances[a>>12]}a.require("./8.js");a.require("./2.js");a.require("./6.js");a.require("./9.js");n=this.path;var D=q.document,x=a.dom.event,h=a.string.camelize,l=a.l10n.token,e=a.template.htmlfgen.getFunctions,p=a.template.TemplateSwitchConfig;H=a.template.TemplateSwitcher;v=a.template.Template;var S=a.template.TYPE_ELEMENT,L=a.template.TYPE_ATTRIBUTE,
u=a.template.TYPE_TEXT,J=a.template.TYPE_COMMENT,A=a.template.TOKEN_TYPE,t=a.template.TOKEN_BINDINGS,b=a.template.TOKEN_REFS,P=a.template.ATTR_NAME,M=a.template.ATTR_VALUE,f=a.template.ATTR_NAME_BY_TYPE,k=a.template.ELEMENT_NAME,y=a.template.TEXT_VALUE,U=a.template.COMMENT_VALUE,ba="basisTemplateId_"+a.genUID(),d={},da={},T={svg:"http://www.w3.org/2000/svg"},Y={},X={},fa="onmouseenter"in D.documentElement,c=!D.addEventListener&&"__basisTemplate"+parseInt(1E9*Math.random());c&&(q[c]=function(a,c){x.fireEvent(D,
a);c.returnValue=!0;var b=d[a];b&&b(new x.Event(c))});var w=function(){var a=D.createElement("div");a.appendChild(D.createTextNode("a"));a.appendChild(D.createTextNode("a"));return 1==a.cloneNode(!0).childNodes.length}(),I=function(){var a=D.createElement("div");a.setAttribute("class","a");return!a.className}(),$=function(){var a=D.createElement("div");a.setAttribute("style","position:absolute");return"absolute"!=a.style.position}(),g;a:{try{g=D.documentElement.style.color="x";break a}catch(K){}g=
void 0}var O=!!g;"undefined"==typeof Node||Node.prototype.contains||(Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)});var ja={},ea=function(a,g){function e(a,c){m(c);X[a]=!0;Y[c]=function(c){c=new x.Event(c);c.type=a;d[a](c)};Y[a]=function(c,b){if(b=b&&b.parentNode)c=new x.Event(c),c.type=a,c.sender=b,d[a](c)}}function m(a){if(!d[a]&&(d[a]=F("event-"+a),!c)){if(!fa&&"mouseenter"==a)return e(a,"mouseover");if(!fa&&"mouseleave"==a)return e(a,"mouseout");for(var b=0,
f=x.browserEvents(a),g;g=f[b];b++)x.addGlobalHandler(g,d[a])}}function h(a,b){m(a);c&&p.setAttribute("on"+a,c+'("'+a+'",event)');p.setAttribute("event-"+a,b)}function l(a,c){I&&"class"==a&&(a="className");if($&&"style"==a)return p.style.cssText=c;p.setAttribute(a,c)}for(var p=g||D.createDocumentFragment(),K=g?4:0,n;n=a[K];K++)switch(n[A]){case S:var C=n[k],ga=C.split(/:/),C=1<ga.length?D.createElementNS(T[ga[0]],C):D.createElement(C);ea(n,C);p.appendChild(C);break;case L:var C=n[P],ga=n[M],W=C.replace(/^event-/,
"");W!=C?h(W,ga):("class"!=C&&"style"!=C?!n[t]:ga)&&l(C,ga||"");break;case 4:case 5:(ga=n[M-1])&&l(f[n[A]],ga);break;case 6:h(n[1],n[2]||n[1]);break;case J:p.appendChild(D.createComment(n[U]||(n[b]?"{"+n[b].join("|")+"}":"")));break;case u:w&&K&&a[K-1][A]==u&&p.appendChild(D.createComment("")),p.appendChild(D.createTextNode(n[y]||(n[b]?"{"+n[b].join("|")+"}":"")||(n[t]?"{"+n[t]+"}":"")))}g||1!=a.length||(p=p.firstChild);return p};g=function(){function c(){this.set(this.name,this.value)}function b(d,
f,g){var e=f&&f.bindingBridge,k=this.attaches&&this.attaches[d],r=null;if(e||k)if(e){if(k&&f===k.value)r=f&&"markup"==f.type?k.tmpl:null;else{k&&(k.tmpl&&(k.tmpl.element.toString=null,G(k.value).clearInstance(k.tmpl)),k.value.bindingBridge.detach(k.value,c,k));if("markup"==f.type&&f instanceof a.l10n.Token){var B=G(f),ca=this.context,aa=this.bindings,m=this.bindingInterface,r=B.createInstance(ca,null,function ta(){r=h.tmpl=B.createInstance(ca,null,ta,aa,m);r.element.toString=function(){return f.value};
c.call(h)},aa,m);r.element.toString=function(){return f.value}}this.attaches||(this.attaches=new g);var h=this.attaches[d]={name:d,value:f,tmpl:r,set:this.tmpl.set};e.attach(f,c,h)}if(r)return r.element;f=e.get(f)}else k&&(k.tmpl&&(k.tmpl.element.toString=null,G(k.value).clearInstance(k.tmpl)),k.value.bindingBridge.detach(k.value,c,k),this.attaches[d]=null);return f}function d(a,c){var b=a[0],f=a[1],g=c[b],r=c[f];switch(a.length){case 1:return function(a){this(b,g(a))};case 2:return function(a){this(b,
g(a));this(f,r(a))};default:var k=a.map(function(a){return c[a]});return function(c){for(var b=0;b<a.length;b++)this(a[b],k[b](c))}}}var f=/\s+/,g="function"==typeof Node&&D instanceof Node?function(a,c,b){a=b&&b instanceof Node?b:a;a!==c&&c.parentNode.replaceChild(a,c);return a}:function(a,c,b){b=b&&"object"==typeof b?b:a;if(b!==c)try{c.parentNode.replaceChild(b,c)}catch(d){b=a,c!==b&&c.parentNode.replaceChild(b,c)}return b},k=function(a,c,b,d){b!==d&&(d?a.setAttribute(c,d):a.removeAttribute(c));
return d},m={bind_textNode:function(a,c,b){c=g(a,c,b);c===a&&(a.nodeValue=b);return c},bind_node:g,bind_element:function(a,c,b){c=g(a,c,b);c===a&&"string"==typeof b&&(a.innerHTML=b);return c},bind_comment:g,bind_attr:k,bind_attrClass:q.DOMTokenList&&D&&D.documentElement.classList instanceof q.DOMTokenList?function(c,b,d,f,g){var r=d?f+d:"";r!=b&&(b&&c.classList.remove(b),r&&(c.classList.add(r),g&&(c.classList.add(r+"-anim"),a.nextTick(function(){c.classList.remove(r+"-anim")}))));return r}:function(c,
b,d,g,k){var r=d?g+d:"";if(r!=b){d=c.className;var e="string"!=typeof d;e&&(d=d.baseVal);d=d.split(f);b&&a.array.remove(d,b);r&&(d.push(r),k&&(a.array.add(d,r+"-anim"),a.nextTick(function(){var b=(e?c.className.baseVal:c.className).split(f);a.array.remove(b,r+"-anim");e?c.className.baseVal=b.join(" "):c.className=b.join(" ")})));e?c.className.baseVal=d.join(" "):c.className=d.join(" ")}return r},bind_attrStyle:O?function(a,c,b,d){b!==d&&(a.style[h(c)]=d);return d}:function(a,c,b,d){if(b!==d)try{a.style[h(c)]=
d}catch(f){}return d},resolve:b,l10nToken:l,createBindingFunction:function(a){var c={};return function(b,f,g,r){if(!b)return{};var k="bindingId"in b?b.bindingId:null,e=c[k];if(!e){for(var e=[],m={},h={},l=0,p;p=a[l];l++){var w=b[p],y=w&&w.getter;if(y&&(m[p]=y,e.push(p),w.events))for(var w=String(w.events).trim().split(/\s+|\s*,\s*/),y=0,t;t=w[y];y++)h[t]?h[t].push(p):h[t]=[p]}b=d(e,m);for(var s in h)h[s]=d(h[s],m);e={names:e,sync:b,handler:s?h:null};k&&(c[k]=e)}f&&g&&e.sync.call(g,f);if(r)return e.handler&&
r.attach(f,e.handler,g),e.handler}}};return function(a){var c=e(a,!0,this.source.url,a.source_,!w,ba),d,f={},g={},r=[],B=0,ca=ea(a),aa=this.templateId;da[aa]={template:this,instances:f};if(c.createL10nSync){var h=c.createL10nSync(ca,g,k,w);a=0;for(var p;p=c.l10nKeys[a];a++)h(p,l(p).value);if(c.l10nKeys)for(a=0;p=c.l10nKeys[a];a++)p={path:p,token:l(p),handler:function(a){h(this.path,a);for(var c in f)f[c].tmpl.set(this.path,a)}},p.token.attach(p.handler,p),r.push(p),p=null}d=c.createInstance(aa,f,
ca,m,g,w);return{createInstance:function(a,c,b,g,r){var e=B++;a=d(e,a,c,b,g,r);f[e]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var c=f[a];if(c){c.handler&&c.bindingInterface.detach(c.context,c.handler,c.tmpl.set);for(var d in c.attaches)b.call(c,d,null);delete f[a]}},keys:c.keys,destroy:function(a){for(var d=0,e;e=r[d];d++)e.token.detach(e.handler,e);for(var k in f)if(d=f[k],a&&d.rebuild&&d.rebuild.call(d.context),!a||k in f)for(k in d.handler&&d.bindingInterface.detach(d.context,
d.handler,d.tmpl.set),d.attaches)b.call(k,null);da[aa]&&da[aa].instances===f&&delete da[aa];f=h=r=g=ca=c=null}}}}();var ka=v.subclass({className:n+".Template",__extend__:function(a){return a instanceof ka?a:a instanceof p?new m(a):new ka(a)},builder:g}),m=H.subclass({className:n+".TemplateSwitcher",templateClass:ka});V.exports={marker:ba,Template:ka,TemplateSwitcher:m};a.template.extend({buildHtml:ea,resolveTemplateById:function(a){return(a=da[a&4095])&&a.template},resolveObjectById:function(a){return(a=
z(a))&&a.context},resolveTmplById:function(a){return(a=z(a))&&a.tmpl}})},"8.js":function(n,V,a,q,H,v,E,Q){function G(a){return a instanceof fa?a.event_:a||q.event}function F(a){return"string"==typeof a?y.getElementById(a):a}function z(a){a=a.target||a.srcElement||y;return 3==a.nodeType?a.parentNode:a}function D(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function x(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function h(a,c){(c=F(c))?P(c,a,h):(x(a),D(a))}function l(a){return a.keyCode||
a.which||0}function e(a){return a.charCode||a.keyCode||0}function p(a,c){return"number"==typeof a.which?a.which==c.VALUE:!!(a.button&c.BIT)}function S(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:"clientX"in a?a.clientX+("CSS1Compat"==y.compatMode?y.documentElement.scrollLeft:y.body.scrollLeft):0}function L(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:"clientY"in a?a.clientY+("CSS1Compat"==y.compatMode?y.documentElement.scrollTop:y.body.scrollTop):
0}function u(a){var c=0;"wheelDelta"in a?c=a.wheelDelta:"DOMMouseScroll"==a.type&&(c=-a.detail);return c&&c/Math.abs(c)}function J(a){var b=ba(c[a.type]),d=w[a.type],f=new fa(a);if(d)d.handler.call(d.thisObject,f),h(a);else if(b)for(a=b.length;0<a--;)d=b[a],d.handler.call(d.thisObject,f)}function A(a){var c=w[a];c&&(b(a,c.handler,c.thisObject),delete w[a])}function t(a,b,d){var f=c[a];if(f){a=0;for(var e;e=f[a];a++)if(e.handler===b&&e.thisObject===d)return}else I?P(y,a,U):y.addEventListener(a,J,!0),
f=c[a]=[];f.push({handler:b,thisObject:d})}function b(a,b,d){var f=c[a];if(f)for(var e=0,k;k=f[e];e++)if(k.handler===b&&k.thisObject===d){f.splice(e,1);f.length||(delete c[a],I?M(y,a,U):y.removeEventListener(a,J,!0));break}}function P(a,b,f,e){a=F(a);if(!a)throw 32;if("function"!=typeof f)throw 33;a.__basisEvents||(a.__basisEvents={});var k={handler:f,thisObject:e},h=a.__basisEvents,m=h[b];if(m){for(a=0;h=m[a];a++)if(h.handler===f&&h.thisObject===e)return;m.push(k)}else m=h[b]=[k],m.fireEvent=function(a){a=
G(a);if(I&&a&&c[b]&&"undefined"==typeof a.returnValue){J(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var d=0;a=new fa(a);for(var f;f=m[d++];)f.handler.call(f.thisObject,a)},d?a.addEventListener(b,m.fireEvent,!1):a.attachEvent("on"+b,m.fireEvent)}function M(a,c,b,d){a=F(a);var e=a.__basisEvents;if(e&&(e=e[c]))for(var k=0,m;m=e[k];k++)if(m.handler===b&&m.thisObject===d){e.splice(k,1);e.length||f(a,c);break}}function f(a,c){a=F(a);var b=a.__basisEvents;if(b)if("string"!=
typeof c)for(c in b)f(a,c);else{var d=b[c];d&&(a.removeEventListener?a.removeEventListener(c,d.fireEvent,!1):a.detachEvent("on"+c,d.fireEvent),delete b[c])}}function k(a){return function(c,b){return a(G(c),b)}}var y=q.document,U=a.fn.$null,ba=a.array.from,d=!!y.addEventListener;n={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,
F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var da={VALUE:1,BIT:1},T={VALUE:2,BIT:4},Y={VALUE:3,BIT:2},X={mousewheel:["mousewheel","DOMMouseScroll"]},fa=a.Class(null,{className:this.path+".Event",KEY:n,init:function(c){c=G(c);for(var b in c)"function"!=typeof c[b]&&!1==b in this&&(this[b]=c[b]);b=z(c);a.object.extend(this,{event_:c,sender:b,target:b,key:l(c),charCode:e(c),mouseLeft:p(c,da),mouseMiddle:p(c,T),mouseRight:p(c,Y),mouseX:S(c),mouseY:L(c),wheelDelta:u(c)})},stopBubble:function(){D(this.event_)},
stopPropagation:function(){D(this.event_)},preventDefault:function(){x(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),c={},w={},I=!d,$={};V.exports={W3CSUPPORT:d,browserEvents:function(a){return X[a]||[a]},getEventInfo:function(a,c){c||(c="div");var b=c+"-"+a;if($[b])return $[b];var f=!1,e=!1;if(!d){var k="on"+a,m=y.createElement("div"),h=m.appendChild(y.createElement(c));m[k]=function(){e=!0};try{h.fireEvent(k),f=!0}catch(l){}}return $[b]={supported:f,bubble:e}},KEY:n,MOUSE_LEFT:da,
MOUSE_RIGHT:Y,MOUSE_MIDDLE:T,Event:fa,sender:k(z),cancelBubble:k(D),cancelDefault:k(x),kill:k(h),key:k(l),charCode:k(e),mouseButton:k(p),mouseX:k(S),mouseY:k(L),wheelDelta:k(u),addGlobalHandler:t,removeGlobalHandler:b,captureEvent:function(a,c,b){w[a]&&A(a);t(a,c,b);w[a]={handler:c,thisObject:b}},releaseEvent:A,addHandler:P,addHandlers:function(a,c,b){a=F(a);for(var d in c)P(a,d,c[d],b)},removeHandler:M,clearHandlers:f,fireEvent:function(a,c,b){a=F(a);(a=a.__basisEvents)&&a[c]&&a[c].fireEvent(b)},
onUnload:function(a,c){P(q,"unload",a,c)},wrap:G}},"9.js":function(n,V,a,q,H,v,E,Q){function G(a,e){return new Function(a,e)}a.require("./6.js");var F=a.template.TYPE_ELEMENT,z=a.template.TYPE_ATTRIBUTE,D=a.template.TYPE_TEXT,x=a.template.TYPE_COMMENT,h=a.template.TOKEN_TYPE,l=a.template.TOKEN_BINDINGS,e=a.template.TOKEN_REFS,p=a.template.ATTR_NAME,S=a.template.ATTR_NAME_BY_TYPE,L=a.template.ELEMENT_NAME,u=a.template.ELEMENT_ATTRS,J={},A=function(){function a(b,d){for(var f=0,e;e=b[f];f++)-1==e.indexOf(":")&&
y.push(e+":"+d)}function t(a){var b=k.length,b=f[b]||"r"+b;k.push(b+"="+a);return b}function n(f,y,z,G){for(var c,w,I,$,g=0,K=0,O=0,E;E=f[g];g++,K++,$=!1){g?f[g+1]?(E[h]==f[g-1][h]&&E[h]==D&&O++,c=y+".childNodes["+(z?K:K+(O?" + "+O+" * TEXT_BUG":""))+"]"):c=y+".lastChild":c=y+".firstChild";if(w=E[e])$=!0,c=t(c),a(w,c);E[l]&&(E[l]&&"number"==typeof E[l]&&(E[l]=E[e][E[l]-1]),$||($=!0,c=t(c)),A.push([E[h],c,E[l]]));if(E[h]==F){I=-1;y==d&&q.push(c+"."+G);$||(c=t(c),I=k.length);for(var v=[],H=[],m=u,s;s=
E[m];m++)s[h]==F||s[h]==D||s[h]==x?H.push(s):v.push(s);for(var m=0,N;N=v[m];m++)if(6!=N[h]){s=S[N[h]]||N[p];if(w=N[e])$=!0,a(w,t(c+'.getAttributeNode("'+s+'")'));if(w=N[l])switch($=!0,s){case "class":N=0;for(var R;R=w[N];N++)R=[2,c,R[1],s,R[0]].concat(R.slice(2)),A.push(R);break;case "style":for(N=0;R=w[N];N++){J++;for(var Q=0,V;V=R[0][Q];Q++)A.push([2,c,V,s,R[0],R[1],R[2],R[3],J])}break;default:for(J++,N=0;V=w[0][N];N++)A.push([2,c,V,s,w[0],w[1],E[L],J])}}H.length&&n(H,c,z);$||I!=k.length||k.pop()}}}
var f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),k,y,A,q,d,J;return function(a,b,f,e){k=[];y=[];A=[];q=[];d=b||"_";J=0;n(a,d,f,e);return{path:k,ref:y,binding:A,markedElementList:q}}}(),t=function(){function b(a,b,f){var d=[],k=a[5];a=a[4];for(var h,l,p=0;p<k.length;p++)if("string"==typeof k[p])d.push('"'+k[p].replace(/"/g,'\\"')+'"');else if(h=a[k[p]],l=h.indexOf(":"),-1==l)d.push("l10n"==b?'"{'+h+'}"':"bool"==b?"(__"+h+'||"")':"__"+h);else{var t=null,c=h.substr(l+1).replace(e,
function(a,c){t=c;return""});t?d.push(f[h.substr(l+1)]):d.push('__l10n["'+c+'"]')}1==d.length&&d.push('""');return d.join("+")}var e=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,h={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},f={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},k={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(l){function t(c){E[c]=
!0;d.push(A+"="+c+"("+a.array(arguments,1)+");")}for(var n={},d,A,x=[],q=[],u,J,c=[],w={},I=1,L,g,S={},E={resolve:!0},G=0,v;v=l[G];G++){L=v[0];var H=v[1],m=v[2];if(-1==["get","set","templateId_"].indexOf(m)){var s=m.split(":");(g="anim"==s[0])&&(m=s[1]);d=n[m];A="_"+G;u="__"+m;if("l10n"==s[0]&&s[1]){var s=s[1],N=null,R=s.replace(e,function(a,c){N=c;return""});if(N){!1==s in w&&(u="$l10n_"+I++,w[s]=u,c.push('set("'+u+'",'+u+")"),x.push(u+'=tools.l10nToken("'+R+'").computeToken()'),d=n[N],d||(d=n[N]=
[],x.push("__"+N)),d.push(u+".set(__"+N+");"));m=w[s];A="_"+G;u="__"+m;d=n[m];d||(d=n[m]=[],x.push(u));L==D?(x.push(A+"="+H),t(k[L],H,A,"value")):(u='"'+v[p]+'"',x.push(A),t("bind_attr",H,u,A,b(v,!1,w)));continue}J||(J={});n[R]||(n[R]=[],J[R]=[]);d=n[R];d.l10n=!0;if(L==D){J[R].push(H+".nodeValue=value;");d.push(H+'.nodeValue=__l10n["'+R+'"]'+(N?"[__"+N+"]":"")+";");continue}else J[R].push("bind_attr("+[H,'"'+v[p]+'"',"NaN",b(v,"l10n",w)]+");")}d||(d=n[m]=[],x.push(u));if(L!=z)if(d.nodeBind)switch(L){case F:t(k[L],
H,H,"value!==null?String(value):null");break;case D:d.push(H+".nodeValue=value;")}else x.push(A+"="+H),t(k[L],H,A,"value"),d.nodeBind=A;else switch(u=v[p],u){case "class":u="";s="value";L=v[4];s=v.length;if(6<=s)if(6==s||"string"==typeof v[6])6==s?(s='value?"'+m+'":""',v[5]&&(u=L+m)):(L="",s='value?"'+v[6]+'":""',v[5]&&(u=v[6]));else{if(!v[6].length)continue;7==s?(s=v[6].map(function(a){return'value=="'+a+'"'}).join("||")+'?value:""',v[5]&&(u=L+v[6][v[5]-1])):(L="",s=v[6].map(function(a,c){return'value=="'+
a+'"?"'+this[c]+'"'},v[7]).join(":")+':""',v[5]&&(u=v[7][v[5]-1]))}else s='typeof value=="string"||typeof value=="number"?value:(value?"'+m+'":"")';x.push(A+'="'+u+'"');t("bind_attrClass",H,A,s,'"'+L+'"',g);break;case "style":u=b(v,!1,w);g=v[8];S[g]||(S[g]=A,x.push(A+"="+("hide"==v[7]?'""':'"none"')));v[7]&&(u=u.replace(/\+""$/,"")+("hide"==v[7]?'?"none":""':'?"":"none"'));A=S[g];t("bind_attrStyle",H,'"'+v[6]+'"',A,u);break;default:L=h[u],g=v[7],S[g]||(x.push(A+"="+b(v,"l10n",w)),S[g]=A),A=S[g],t("bind_attr",
H,'"'+u+'"',A,L&&f[u]?b(v,"bool",w)+'?"'+u+'":""':b(v,!1,w)),!L||"*"!=L&&-1==L.indexOf(v[6].toLowerCase())||d.push("if("+H+"."+u+"!="+A+")"+H+"."+u+"="+(f[u]?"!!"+A:A)+";")}}}q.push(';function set(bindName,value){if(typeof bindName!="string")');for(m in n)n[m].nodeBind&&q.push("if(bindName==="+n[m].nodeBind+')bindName="'+m+'";else ');q.push("return;");q.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(m in n)q.push('case"'+m+'":'+(n[m].l10n?n[m].join(""):"if(__"+
m+"!==value){__"+m+"=value;"+n[m].join("")+"}")+"break;");q.push("}}");l=[];for(var Q in E)l.push(Q+"=tools."+Q);return{keys:a.object.keys(n).filter(function(a){return-1==a.indexOf("@")}),tools:l,vars:x,set:q.join(""),l10n:J,l10nCompute:c}}}();V.exports={getFunctions:function(b,e,h,f,k,l){if(e=J[h&&a.path.relative(h)])return e;k=A(b,"_",k,l);l=t(k.binding);e=k.markedElementList.join("=");h={keys:l.keys,l10nKeys:a.object.keys(l.l10n)};1==b.length&&(k.path[0]="a=_");if(l.l10n){b=[];for(var p in l.l10n)b.push('case"'+
p+'":if(value==null)value="{'+p+'}";__l10n[token]=value;'+l.l10n[p].join("")+"break;");h.createL10nSync=G(["_","__l10n","bind_attr","TEXT_BUG"],"var "+k.path+";return function(token, value){switch(token){"+b.join("")+"}}")}h.createInstance=G("tid map proto tools __l10n TEXT_BUG".split(" "),"var getBindings=tools.createBindingFunction(["+l.keys.map(function(a){return'"'+a+'"'})+"]),"+(l.tools.length?l.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+l.keys.map(function(a){return a+":null"})+
"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=proto.cloneNode(true),"+k.path.concat(l.vars)+",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[k.ref,"templateId_:id","set:set"]+"}}"+(e?";if(obj||onAction)"+e+"=(id<<12)|tid":"")+l.set+";if(bindings)instance.handler=getBindings(bindings,obj,set,bindingInterface);"+l.l10nCompute+";return instance}");return h}}},
"a.js":function(n,V,a,q,H,v,E,Q){function G(a){return"string"==typeof a?x.getElementById(a):a}function F(a){if(!b&&!this.ignoreTarget(a.sender,a)){var k=J(a.sender);a.mouseX<k.left||a.mouseX>k.right||a.mouseY<k.top||a.mouseY>k.bottom||(b=this,P={initX:a.mouseX,initY:a.mouseY,deltaX:0,minDeltaX:-Infinity,maxDeltaX:Infinity,deltaY:0,minDeltaY:-Infinity,maxDeltaY:Infinity},e("mousemove",z),e("mouseup",D),e("mousedown",D),A&&e("selectstart",l.kill),a.preventDefault(),this.prepareDrag(P,a))}}function z(f){var e=
f.mouseX-P.initX,h=f.mouseY-P.initY;if(!t){if(!b.startRule(e,h))return;t=!0;b.emit_start(P,f)}b.axisX&&(P.deltaX=b.axisXproxy(a.number.fit(e,P.minDeltaX,P.maxDeltaX)));b.axisY&&(P.deltaY=b.axisYproxy(a.number.fit(h,P.minDeltaY,P.maxDeltaY)));b.emit_drag(P,f)}function D(a){p("mousemove",z);p("mouseup",D);p("mousedown",D);A&&p("selectstart",l.kill);var e=b,h=P;P=b=null;t&&(t=!1,e.emit_over(h,a));a.die()}a.require("./3.js");a.require("./8.js");a.require("./b.js");a.require("./c.js");n=this.path;var x=
q.document,h=a.cleaner,l=a.dom.event,e=l.addGlobalHandler,p=l.removeGlobalHandler,S=a.event.Emitter;q=a.event.create;var L=a.dom.computedStyle.get,u=a.layout.getBoundingRect,J=a.layout.getViewportRect,A=l.getEventInfo("selectstart").supported,t,b,P,M=S.subclass({className:n+".DragDropElement",element:null,trigger:null,baseElement:null,axisX:!0,axisY:!0,axisXproxy:a.fn.$self,axisYproxy:a.fn.$self,prepareDrag:a.fn.$undef,startRule:a.fn.$true,ignoreTarget:function(a,b){return/^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(a.tagName)},
emit_start:q("start"),emit_drag:q("drag"),emit_over:q("over"),init:function(){S.prototype.init.call(this);var a=this.element,b=this.trigger;this.trigger=this.element=null;this.setElement(a,b);this.setBase(this.baseElement);h.add(this)},setElement:function(a,b){this.element=G(a);b=G(b)||this.element;this.trigger!==b&&(this.trigger&&l.removeHandler(this.trigger,"mousedown",F,this),(this.trigger=b)&&l.addHandler(this.trigger,"mousedown",F,this))},setBase:function(a){this.baseElement=G(a)},getBase:function(){return this.baseElement||
("CSS1Compat"==x.compatMode?x.documentElement:x.body)},isDragging:function(){return b===this},start:function(a){this.isDragging()||F.call(this,a)},stop:function(){this.isDragging()&&D()},destroy:function(){this.stop();h.remove(this);S.prototype.destroy.call(this);this.setElement();this.setBase()}});q=a.Class(null,{className:n+".DeltaWriter",property:null,invert:!1,format:a.fn.$self,init:function(a){"function"==typeof this.property&&(this.property=this.property(a));"function"==typeof this.invert&&
(this.invert=this.invert(this.property));this.value=this.read(a)},read:function(){return element[this.property]},write:function(a,b){a[this.property]=b},applyDelta:function(a,b){this.invert&&(b=-b);this.write(a,this.format(this.value+b,b))}});H=q.subclass({className:n+".StyleDeltaWriter",format:function(a,b){return a+"px"},read:function(a){return parseFloat(L(a,this.property))},write:function(a,b){a.style[this.property]=b}});v=H.subclass({property:function(a){return"auto"==L(a,"left")?"right":"left"},
invert:function(a){return"left"!=a}});E=H.subclass({property:function(a){return"auto"==L(a,"top")?"bottom":"top"},invert:function(a){return"top"!=a}});n=M.subclass({className:n+".MoveableElement",fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:v,axisY:E,emit_start:function(a,b){var e=this.element;if(e){var h=J(this.getBase()),l=u(e);a.element=e;this.axisX&&(a.axisX=new this.axisX(e),this.fixLeft&&(a.minDeltaX=h.left-l.left),this.fixRight&&(a.maxDeltaX=h.right-l.right));this.axisY&&(a.axisY=new this.axisY(e),
this.fixTop&&(a.minDeltaY=h.top-l.top),this.fixBottom&&(a.maxDeltaY=h.bottom-l.bottom))}M.prototype.emit_start.call(this,a,b)},emit_drag:function(a,b){a.element&&(a.axisX&&a.axisX.applyDelta(a.element,a.deltaX),a.axisY&&a.axisY.applyDelta(a.element,a.deltaY),M.prototype.emit_drag.call(this,a,b))}});V.exports={DragDropElement:M,MoveableElement:n,DeltaWriter:q,StyleDeltaWriter:H}},"b.js":function(n,V,a,q,H,v,E,Q){var G=q.document;if("getComputedStyle"in q){var F={top:!0,bottom:!0,left:!0,right:!0,height:!0,
width:!0},z=a.fn.runOnce(function(){var h=G.createElement("div");h.setAttribute("style","position:absolute;top:auto!important");a.doc.body.add(h);"auto"==q.getComputedStyle(h).top&&(F={});a.doc.remove(h)});n=function(a,l){var e=q.getComputedStyle(a);if(e){l in F&&z();if(F[l]&&"static"!=e.position){var p=a.style.display;a.style.display="none";e=e.getPropertyValue(l);a.style.display=p}else e=e.getPropertyValue(l);return e}}}else{var D=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,x=/\dpx$/i;n=function(h,l){var e=h.currentStyle;
if(e){var e=e["float"==l?"styleFloat":a.string.camelize(l)],p=(e||"").match(D);if(p&&p[2]&&"px"!=p[2])if(x.test(e))e=parseInt(e,10)+"px";else{var p=h.style,n=h.runtimeStyle,q=p.left,u=n.left;n.left=h.currentStyle.left;p.left=e||0;e=p.pixelLeft;p.left=q;n.left=u;e+="px"}return e}}}V.exports={get:n}},"c.js":function(n,V,a,q,H,v,E,Q){function G(a){var l=0,e=0;if(a&&a.getBoundingClientRect)a=a.getBoundingClientRect(),e=-a.left,l=-a.top;else if("CSS1Compat"==z.compatMode)l=q.pageYOffset||D.scrollTop,e=
q.pageXOffset||D.scrollLeft;else{var p=z.body;a!==p&&(l=p.scrollTop-p.clientTop,e=p.scrollLeft-p.clientLeft)}return{x:e,y:l}}function F(a,l){var e=0,p=0;if(a&&a.getBoundingClientRect)var e=a.getBoundingClientRect(),n=G(l),p=e.top+n.y,e=e.left+n.x;return{top:p,left:e}}a.require("./b.js");var z=q.document,D=z.documentElement,x=a.dom.computedStyle.get;V.exports={getOffsetParent:function(a){for(a=a.offsetParent||D;a&&a!==D&&"static"==x(a,"position");)a=a.offsetParent;return a||D},getTopLeftPoint:F,getBoundingRect:function(a,
l){var e=0,p=0,n=0,x=0;if(a&&a.getBoundingClientRect)var x=a.getBoundingClientRect(),u=G(l),e=x.top+u.y,p=x.left+u.x,n=x.right+u.x,x=x.bottom+u.y;return{top:e,left:p,right:n,bottom:x,width:n-p,height:x-e}},getViewportRect:function(a,l){var e=F(a,l),p=e.top+a.clientTop,e=e.left+a.clientLeft,n=a.clientWidth,x=a.clientHeight;return{top:p,left:e,bottom:p+x,right:e+n,width:n,height:x}}}},"1.js":function(n,V,a,q,H,v,E,Q){function G(a){if(a=a.nodes)for(var b=a.length-1,e;e=a[b];b--)e.parentNode.insertBefore(e,
e.nextSibling)}a.require("./2.js");a.require("./4.js");a.require("./5.js");a.require("./6.js");a.require("./7.js");n=this.path;var F=q.document;q=a.Class;var z=a.event.create,D=a.template.html.Template,x=a.template.html.marker,h=a.template.TemplateSwitcher;H=a.dom.wrapper.Node;Q=a.dom.wrapper.PartitionNode;var l=a.dom.wrapper.GroupingNode,e=1,p=function(){var a={},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,e){a[b]||(a[b]=e)},process:function(e,l){var h,d=l.match(b);d&&(h=a[d[1]],l=d[2]||
e);return h?h(l):l}}}();p.add("data",function(a){return{events:"update",getter:"data."+a}});p.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var S=q.customExtendProperty({state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?
a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(b,k){b.bindingId=e++;for(var l in k){var h=null,n=k[l];M&&n instanceof M||a.resource.isResource(n)?h={events:"satelliteChanged",getter:function(a,b){var f="function"==typeof b?b:null,e=function(k){e=!1;if(f){b=f();if(!1==b instanceof M)return;f=null}k.setSatellite(a,b)};return function(b){e&&e(b);return f||
(b.satellite[a]?b.satellite[a].element:null)}}(l,n)}:n&&("string"==typeof n?n=p.process(l,n):n.bindingBridge&&(n=a.fn.$const(n)),h="object"!=typeof n?{getter:"function"==typeof n?n:a.getter(n)}:Array.isArray(n)?{events:n[0],getter:a.getter(n[1])}:{events:n.events,getter:a.getter(n.getter)});b[l]=h}}),L={attach:function(a,b,e){a.addHandler(b,e)},detach:function(a,b,e){a.removeHandler(b,e)}},u=q.extensibleProperty({select:function(a){this.isDisabled()||(this.contextSelection&&this.contextSelection.multiple?
this.select(a.ctrlKey||a.metaKey):this.select())}}),J={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&this.setTemplate(b.resolve(this))}},A=new D("<div/>"),t=[],b;v=function(f){return{template:A,emit_templateChanged:z("templateChanged"),templateSwitcher_:null,binding:S,action:u,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=t.pop()||F.createDocumentFragment();f.init.call(this)},postInit:function(){f.postInit.call(this);
var a=this.template;if(a){var b=this.element;this.template=null;this.setTemplate(a);t.push(b);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.tmpl,f=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,L);f.childNodesHere&&(f.childNodesElement=f.childNodesHere.parentNode,f.childNodesElement.insertPoint=f.childNodesHere);this.tmpl=f;this.element=f.element;this.childNodesElement=f.childNodesElement||
f.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=F.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();for(f=this;f.grouping;)f=f.grouping;for(var e=f.lastChild;e;e=e.previousSibling)e instanceof P?f.insertBefore(e,e.nextSibling):G(e);G(f.nullGroup)}else for(f=this.lastChild;f;f=f.previousSibling)this.insertBefore(f,f.nextSibling);this instanceof P&&G(this);a&&a!==this.element&&11!=a.nodeType&&(f=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,
this.element),this.element.parentNode!==f&&f.replaceChild(this.element,a));b&&this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_,f;a instanceof h&&(f=a,a=f.resolve(this));!1==a instanceof D&&(a=null);a&&(f&&(this.templateSwitcher_=f,b||this.addHandler(J,this)),b&&b.resolve(this)!==a&&(this.templateSwitcher_=null,this.removeHandler(J,this)),b=this.tmpl,f=this.template,f!==a&&(this.template=a,this.templateSync(),f&&f.clearInstance(b)))},updateBind:function(a){var b=this.binding[a];
(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var f=this.action[a];f&&f.call(this,b)},focus:function(f){var e=this.tmpl?this.tmpl.focus||this.element:null;e&&(b&&(b=a.clearImmediate(b)),b=a.setImmediate(function(){try{e.focus(),f&&e.select()}catch(a){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){var a=this.template,b=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(J,
this));a.clearInstance(this.tmpl);f.destroy.call(this);this.childNodesElement=this.element=this.tmpl=null;(a=b&&b.parentNode)&&1==a.nodeType&&a.removeChild(b)}}};E=function(a){return{insertBefore:function(b,e){b=a.insertBefore.call(this,b,e);var l=(b.groupNode||this).childNodesElement||this.childNodesElement,h=b.nextSibling,d=b.element,h=(h&&h.element.parentNode==l?h.element:null)||l.insertPoint||null;d.parentNode===l&&d.nextSibling===h||l.insertBefore(d,h);return b},removeChild:function(b){a.removeChild.call(this,
b);var e=b.element,l=e.parentNode;l&&l.removeChild(e);return b},clear:function(b){if(b)for(var e=this.firstChild;e;){var l=e.element,h=l.parentNode;h&&h.removeChild(l);e=e.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,e){var l=F.createDocumentFragment(),h=this.grouping||this,d=h.childNodesElement;h.childNodesElement=l;a.setChildNodes.call(this,b,e);d.insertBefore(l,d.insertPoint||null);h.childNodesElement=d}}};var P=q(Q,v,{className:n+".PartitionNode",binding:{title:"data:"}});Q=q(l,
E,{className:n+".GroupingNode",childClass:P,groupingClass:q.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();l.prototype.emit_ownerChanged.call(this,a)},init:function(){this.element=this.childNodesElement=F.createDocumentFragment();l.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,e=null;b&&(e=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement);do a.element=a.childNodesElement=e;while(a=a.grouping)},destroy:function(){l.prototype.destroy.call(this);
this.childNodesElement=this.element=null}});var M=q(H,v,E,{className:n+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},disabled:{events:"disable enable",getter:function(a){return a.isDisabled()}},enabled:{events:"disable enable",getter:function(a){return!a.isDisabled()}}},childClass:q.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:Q});n=M.subclass({className:n+
".ShadowNodeList",emit_ownerChanged:function(a){M.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:n+".ShadowNode",getElement:function(a){return a.element},templateSync:function(){M.prototype.templateSync.call(this);
var a=this.getElement(this.delegate);a&&(a[x]=this.delegate.element[x],this.element=a)},listen:{delegate:{templateChanged:function(){var a=this.element,b=a.parentNode,e=this.getElement(this.delegate);e&&(e[x]=this.delegate.element[x]);this.element=e||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});V.exports={BINDING_PRESET:p,Node:M,PartitionNode:P,GroupingNode:Q,ShadowNodeList:n,ShadowNode:n.prototype.childClass}},"e.js":function(n,V,a,q,H,v,E,Q){a.require("./3.js");a.require("./4.js");
q=this.path;var G=a.cleaner,F=a.data.AbstractData,z=a.data.Value,D=a.data.STATE;n=z.subclass({className:q+".Property",extendConstructor_:!1,init:function(a,e,h){this.value=a;this.handler=e;this.proxy=h;z.prototype.init.call(this)}});var x={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},h=z.subclass({className:q+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+
1},calculateOnInit:!1,statePriority:D.priority,stateChanged_:!0,timer_:!1,init:function(){z.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var l=0,e=arguments.length;l<e;l++){var h=arguments[l];if(h instanceof F)a.array.add(this.objects,h)&&h.addHandler(x,this);else throw 34;}this.fire(!0,!0)},remove:function(l){a.array.remove(this.objects,
l)&&l.removeHandler(x,this);this.fire(!0,!0)},clear:function(){for(var a=0,e;e=this.objects[a];a++)e.removeHandler(x,this);this.objects.length=0;this.fire(!0,!0)},fire:function(h,e){this.locked||(this.valueChanged_=this.valueChanged_||!!h,this.stateChanged_=this.stateChanged_||!!e,this.timer_||!this.valueChanged_&&!this.stateChanged_||(this.timer_=a.setImmediate(this.update.bind(this))))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var h=this.valueChanged_,
e=this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;this.timer_=a.clearImmediate(this.timer_);if(!G.globalDestroy&&(h&&this.set(this.calculateValue()),e))if(h=this.objects.length){for(var e=-2,p,n=0;n<h;n++){var x=this.objects[n],u=this.statePriority.indexOf(String(x.state));u>e&&(p=x,e=u)}p&&this.setState(p.state,p.state.data)}else this.setState(D.UNDEFINED)},destroy:function(){this.lock();this.clear();this.timer_&&a.clearImmediate(this.timer_);z.prototype.destroy.call(this)}});q=n.subclass({className:q+
".Expression",init:function(l,e){z.prototype.init.call(this);l=a.array(arguments);e=l.pop();"function"!=typeof e&&(e=a.fn.$undef);1==l.length&&l[0].link(this,function(a){this.set(e.call(this,a))});if(1<l.length){var p=new h({objects:l,calculateOnInit:!0,calculateValue:function(){return e.apply(this,l.map(function(a){return a.value}))}});p.link(this,this.set);this.addHandler({destroy:function(){G.globalDestroy||p.destroy()}})}}});V.exports={Property:n,ObjectSet:h,Expression:q}},"f.js":function(n,V,
a,q,H,v,E,Q){function G(a,b){if(!a.length)return 0;var d,f,e=0,k=a.length-1;do if(d=e+k>>1,f=a[d]||0,b<f)k=d-1;else if(b>f)e=d+1;else return b==f?d:0;while(e<=k);return d+(f<b)}function F(){}function z(a,b,d){var f=a.indexCache_;a.lock();if(b)for(var e=0,k;k=b[e++];){var h=a.normalize(a.valueGetter(k));f[k.basisObjectId]=h;a.add_(h)}if(d)for(e=0;k=d[e++];)b=k.basisObjectId,a.remove_(f[b]),delete f[b];a.unlock()}function D(a,d){if(!1==d instanceof F)throw 37;var f=a.basisObjectId,e=Y[f];e||(e=Y[f]=
{},a.addHandler(T),T.itemsChanged.call(a,a,{inserted:a.getItems()}));var f=d.indexId,g=e[f];if(!g){d=b[f];if(!d)throw 38;g=new d.indexClass;g.addHandler(P,a);e[f]=g;z(g,a.getItems())}return g}function x(a,b){var d=Y[a.basisObjectId];if(d&&d[b.indexId]){delete d[b.indexId];b.removeHandler(P,a);for(var f in d)return;a.removeHandler(T);delete Y[a.basisObjectId]}}function h(){return"calc-index-preset-"+a.number.lead(fa++,8)}a.require("./4.js");a.require("./d.js");a.require("./e.js");var l=this.path,e=
a.Class,p=a.data.KeyObjectMap,S=a.data.ReadOnlyDataset,L=a.data.DatasetWrapper,u=a.data.Value,J=a.data.dataset.MapFilter,A=e(u,{className:l+".Index",autoDestroy:!0,indexCache_:null,valueGetter:a.fn.$null,updateEvents:{},value:0,setNullOnEmitterDestroy:!1,init:function(){this.indexCache_={};u.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,b){},normalize:function(a){return Number(a)||0},destroy:function(){u.prototype.destroy.call(this);this.indexCache_=null}});
n=e(A,{className:l+".Sum",add_:function(a){this.value+=a},remove_:function(a){this.value-=a},update_:function(a,b){this.set(this.value-b+a)}});q=e(A,{className:l+".Count",valueGetter:a.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,b){this.set(this.value-!!b+!!a)}});H=e(A,{className:l+".Avg",sum_:0,count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=a;
this.value=(this.count_-=1)?this.sum_/this.count_:0},update_:function(a,b){this.sum_+=a-b;this.set(this.sum_/this.count_)}});v=e(A,{className:l+".VectorIndex",vectorGetter:a.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];A.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(G(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},remove_:function(a){null!==a&&(this.vector_.splice(G(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},
update_:function(a,b){null!==b&&this.vector_.splice(G(this.vector_,b),1);null!==a&&this.vector_.splice(G(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){A.prototype.destroy.call(this);this.vector_=null}});E=e(v,{className:l+".Min",vectorGetter:function(a){return a[0]}});Q=e(v,{className:l+".Max",vectorGetter:function(a){return a[a.length-1]}});var t=e(A,{className:l+".Distinct",map_:null,
init:function(){this.map_={};A.prototype.init.call(this)},add_:function(a){this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(this.value+=1)},remove_:function(a){0==--this.map_[a]&&(this.value-=1)},update_:function(a,b){var d=0;this.map_.hasOwnProperty(a)||(this.map_[a]=0);1==++this.map_[a]&&(d+=1);0==--this.map_[b]&&(d-=1);d&&this.set(this.value+d)},normalize:String,destroy:function(){A.prototype.destroy.call(this);this.map_=null}}),b={},P={destroy:function(a){x(this,a)}},M=function(c,
d){return function(f,k,g){var h;if(f instanceof S||f instanceof L)h=f,f=k,k=g;k||(k=f,f="");k=k||d;if(!e.isClass(c)||!c.isSubclassOf(A))throw 35;k=a.getter(k);f=f||"update";if("string"!=typeof f)throw 36;f=f.trim().split(" ").sort();g=[c.basisClassId_,k[a.getter.ID],f].join("_");var l=b[g];if(l)k=l.owner;else{for(var p={},l=0;l<f.length;l++)p[f[l]]=!0;l=new F;b[g]={owner:l,indexClass:c.subclass({indexId:g,updateEvents:p,valueGetter:k})};l.indexId=g;k=l}return h?D(h,k):k}},f=M(q,a.fn.$true),k=M(n),
y=M(H),U=M(E),ba=M(Q),d=M(t),da={"*":function(a){var b,d,f=a.type,e=a.sender,k=e.basisObjectId,h=Y[this.basisObjectId],l;for(l in h)d=h[l],d.updateEvents[f]&&(a=d.indexCache_[k],b=d.normalize(d.valueGetter(e)),b!==a&&(d.update_(b,a),d.indexCache_[k]=b))}},T={itemsChanged:function(a,b){var d;if(d=b.inserted)for(var f=d.length;0<f--;)d[f].addHandler(da,this);if(d=b.deleted)for(f=d.length;0<f--;)d[f].removeHandler(da,this);d=Y[this.basisObjectId];for(var e in d)z(d[e],b.inserted,b.deleted)},destroy:function(){var a=
Y[this.basisObjectId],b;for(b in a)x(this,a[b])}},Y={},X=e(null,{className:l+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:a.fn.$null}),fa=1,l=e(J,{className:l+".IndexMap",calcs:null,indexes:null,indexes_:null,indexesBind_:null,timer_:void 0,indexUpdated:null,indexValues:null,memberSourceMap:null,keyMap:null,map:function(a){return this.keyMap.get(a,!0)},addMemberRef:function(a,b){this.memberSourceMap[a.basisObjectId]=b.basisObjectId;this.listen.member&&a.addHandler(this.listen.member,this);
this.sourceMap_[b.basisObjectId].updated=!0;0<a.subscriberCount&&this.calcMember(a)},removeMemberRef:function(a,b){delete this.memberSourceMap[a.basisObjectId];this.listen.member&&a.removeHandler(this.listen.member,this)},emit_sourceChanged:function(a){J.prototype.emit_sourceChanged.call(this,a);for(var b in this.indexes_){var d=this.indexes_[b];a&&(this.removeIndex(b),x(a,this.indexes[b]));this.source&&this.addIndex(b,D(this.source,d))}},listen:{index:{change:function(a){var b=this.indexMap;b.indexValues[this.key]=
a.value;b.indexUpdated=!0;b.recalcRequest()}},member:{subscribersChanged:function(a,b){0<a.subscriberCount&&this.calcMember(a)}}},ruleEvents:a.data.dataset.createRuleEvents(function(a,b){J.prototype.ruleEvents.update.call(this,a,b);this.sourceMap_[a.basisObjectId].updated=!0;this.recalcRequest()},"update"),init:function(){this.recalc=this.recalc.bind(this);this.indexUpdated=!1;this.indexesBind_={};this.memberSourceMap={};var b=this.indexes;this.indexes={};this.indexes_={};this.indexValues={};var d=
this.calcs;this.calcs={};this.keyMap&&!1!=this.keyMap instanceof p||(this.keyMap=new p(a.object.complete({create:function(a,b){return new this.itemClass(b)}},this.keyMap)));J.prototype.init.call(this);a.object.iterate(b,this.addIndex,this);a.object.iterate(d,this.addCalc,this)},addIndex:function(a,b){if(!this.indexes[a]){if(b instanceof F){if(this.indexes_[a])return;this.indexes_[a]=b;b=this.source?D(this.source,b):null}if(b instanceof A){this.indexValues[a]=b.value;this.indexes[a]=b;this.indexesBind_[a]=
{key:a,indexMap:this};var d=this.listen.index;d&&(b.addHandler(d,this.indexesBind_[a]),d.change&&d.change.call(this.indexesBind_[a],b,b.value))}}},removeIndex:function(a){if(this.indexes_[a]||this.indexes[a])this.indexes[a]&&this.listen.index&&this.indexes[a].removeHandler(this.listen.index,this.indexesBind_[a]),delete this.indexValues[a],delete this.indexesBind_[a],delete this.indexes[a],delete this.indexes_[a]},addCalc:function(a,b){if(b instanceof X){this.calcs[a]=b.calc;for(var d in b.indexes)this.addIndex(d,
b.indexes[d])}else this.calcs[a]=b;this.recalcRequest()},removeCalc:function(a){var b=this.calcs[a];if(b&&b.preset instanceof X){var b=b.preset.indexes,d;for(d in b)this.removeIndex(d,b[d])}delete this.calcs[a]},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},recalcRequest:function(){this.timer_||(this.timer_=a.setImmediate(this.recalc))},recalc:function(){for(var b in this.items_)this.calcMember(this.items_[b]);
this.indexUpdated=!1;this.timer_=a.clearImmediate(this.timer_)},calcMember:function(a){var b=this.sourceMap_[this.memberSourceMap[a.basisObjectId]];if(a.subscriberCount&&(b.updated||this.indexUpdated)){b.updated=!1;var d={},f,e,k,h;for(h in this.calcs)f=this.calcs[h](b.sourceObject.data,this.indexValues,b.sourceObject),e=a.data[h],a.data[h]===f||"number"==typeof f&&"number"==typeof e&&isNaN(f)&&isNaN(e)||(d[h]=f,k=!0);k&&a.update(d)}},getMember:function(a){return this.keyMap.get(a,!0)},destroy:function(){this.keyMap.destroy();
this.keyMap=null;for(var b in this.indexes)this.removeIndex(b);J.prototype.destroy.call(this);this.timer_=a.clearImmediate(this.timer_);this.indexesBind_=this.memberSourceMap=this.indexValues=this.indexes_=this.indexes=this.calcs=null}});V.exports={IndexConstructor:F,createIndexConstructor:M,getDatasetIndex:D,removeDatasetIndex:x,Index:A,Count:q,Sum:n,Avg:H,VectorIndex:v,Min:E,Max:Q,Distinct:t,count:f,sum:k,avg:y,max:ba,min:U,distinct:d,CalcIndexPreset:X,percentOfRange:function(b,d){var f="min_"+
h(),e="max_"+h(),g={};g[f]=U(b,d);g[e]=ba(b,d);d=a.getter(d||b);var k=function(a,b,c){return(d(c)-b[f])/(b[e]-b[f])};return k.preset=new X({indexes:g,calc:k})},percentOfMax:function(b,d){var f="max_"+h(),e={};e[f]=ba(b,d);d=a.getter(d||b);var g=function(a,b,c){return d(c)/b[f]};return g.preset=new X({indexes:e,calc:g})},percentOfSum:function(b,d){var f="sum_"+h(),e={};e[f]=k(d,b);b=a.getter(b||d);var g=function(a,d,e){return b(e)/d[f]};return g.preset=new X({indexes:e,calc:g})},IndexMap:l}},"g.js":function(n,
V,a,q,H,v,E,Q){function G(n){return new Function("data","return {"+a.object.iterate(n,function(a,l){a=a.replace(/"/g,'\\"');l=l.replace(/"/g,'\\"');return'"'+a+'": data["'+l+'"]'})+"}")}a.require("./4.js");var F=a.data.Object,z={update:function(a,h){var l=this.host.fields,e={};if(this.name==l.defaultSource)for(var p in h)!1==p in l.fieldSource&&(e[p]=a.data[p]);else for(p in h){var n=l.fromNames[this.name][p];n&&this.host.fields.fieldSource[n]==this.name&&(e[n]=a.data[p])}for(p in e)return this.host.update(e)},
destroy:function(){this.host.setSource(this.name,null)}},D=function(a){var h={},l={},e={},p={defaultSource:!1,fieldSource:{},toNames:l,fromNames:e,sources:h,__extend__:D};a["*"]&&(p.defaultSource=a["*"]);for(var n in a){var q=a[n].split(":"),u=q.shift(),q=q.length?q.join(":"):n;u==p.defaultSource||"-"==u&&q!=n||(l[u]||(l[u]={},e[u]={}),l[u][n]=q,e[u][q]=n,p.fieldSource[n]=u)}for(u in l)h[u]=G(l[u]);p.defaultSource&&(h[p.defaultSource]=function(a){var e={},h;for(h in a)!1==h in p.fieldSource&&(e[h]=
a[h]);return e});return p};n=F.subclass({className:this.path+".Merge",emit_sourceChanged:a.event.create("sourceChanged","name","oldSource"),fields:D({"*":"-"}),sources:null,sourcesContext_:null,delta_:null,init:function(){var a=this.data,h=this.sources;this.data={};this.delegate=null;F.prototype.init.call(this);for(var l in a)"-"==(this.fields.fieldSource[l]||this.fields.defaultSource)&&(this.data[l]=a[l]);this.sources={};this.sourcesContext_={};h&&this.setSources(h)},update:function(a){if(this.delta_)for(var h in a){var l=
this.fields.fieldSource[h]||this.fields.defaultSource;if(l){var e=l!=this.fields.defaultSource?this.fields.toNames[l][h]:h;a=this.sources[l].data[e];a!==this.data[h]&&(!1==h in this.delta_?this.delta_[h]=this.data[h]:this.delta_[h]===a&&delete this.delta_[h],this.data[h]=a)}}else{var p,n={};this.delta_=n;for(h in a)if(l=this.fields.fieldSource[h]||this.fields.defaultSource)"-"==l?(n[h]=this.data[h],this.data[h]=a[h]):this.sources[l]&&(e=l!=this.fields.defaultSource?this.fields.toNames[l][h]:h,this.sources[l].data[e]!==
a[h]?(p||(p={}),!1==l in p&&(p[l]={}),p[l][e]=a[h]):this.data[h]!==a[h]&&(n[h]=this.data[h],this.data[h]=a[h]));if(p)for(l in p)this.sources[l].update(p[l]);this.delta_=null;for(h in n)return this.emit_update(n),n;return!1}},setDelegate:function(){},setSource:function(a,h){var l=this.sources[a];if(!1!=a in this.fields.sources&&"-"!=a&&(!1==h instanceof F&&(h=null),l!==h)){var e=this.listen["source:"+a];l&&(e&&l.removeHandler(e,this),l.removeHandler(z,this.sourcesContext_[a]));if(this.sources[a]=h)!1==
a in this.sourcesContext_&&(this.sourcesContext_[a]={host:this,name:a}),h.addHandler(z,this.sourcesContext_[a]),e&&h.addHandler(e,this),this.update(this.fields.sources[a](h.data));this.emit_sourceChanged(a,l)}},setSources:function(a){a||(a={});for(var h in this.fields.sources)this.setSource(h,a[h])},destroy:function(){this.setSources();this.sourcesContext_=this.sources=null;F.prototype.destroy.call(this)}});V.exports={Merge:n}},"h.js":function(n,V,a,q,H,v,E,Q){function G(a){$[a]=$[a]||0;return a+
$[a]++}function F(a,b){var c=O[a];if(c){for(var d=0,f;f=c[d];d++)f[0][f[1]]=b;delete O[a]}g[a]=b}function z(a,b,c){if(g[a])return g[a];var d=O[a];d||(d=O[a]=[]);d.push([b,c]);return function(b,c){var d=g[a];if(d)return d(b,c)}}function D(){var a=k(arguments),b=a.pop(),c=a[0],d=a[1],f=a[2],e;if("function"!=typeof b)throw 40;switch(a.length){case 0:e=function(){return b()};break;case 1:e=function(a,d,f){return c in a?b(d[c]):f};break;case 2:e=function(a,f,e){return c in a||d in a?b(f[c],f[d]):e};break;
case 3:e=function(a,e,g){return c in a||d in a||f in a?b(e[c],e[d],e[f]):g};break;default:e=function(c,d,f){for(var e=!1,r=[],g=0,B;B=a[g];g++)e=e||B in c,r.push(d[B]);return e?b.apply(null,r):f}}e.args=a;return e.calc=e}function x(a){return 1==arguments.length?function(b,c,d){return a in b?null!=c[a]?String(c[a]):null:d}:D.apply(null,k(arguments).concat(function(){for(var a=arguments.length-1;0<=a;a--)if(null==arguments[a])return null;return Array.prototype.join.call(arguments,"-")}))}function h(a,
c){var d=["has"],f=[b],e=[],g;for(g in a)if(b.call(a,g)){var k="v"+e.length,h="f"+e.length,l=a[g];d.push(k,h);f.push(l,c[g]);e.push('"'+g+'":has.call(data,"'+g+'")?'+h+'(data["'+g+'"],'+k+"):"+k+("function"==typeof l?"(data)":""))}e=e.sort().join(",");(g=la[e])||(g=la[e]=new Function(d,"return function(data){return {"+e+"};};"));return g.apply(null,f)}function l(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;
return b}function e(a,b){return"string"==typeof a?na(a):"number"==typeof a?new Date(a):null==a?null:a&&a.constructor===Date?a:b}function p(b,d,g){b.aliases[d]=d;g="string"==typeof g||Array.isArray(g)||"function"==typeof g&&g.calc!==g?{type:g}:g?a.object.slice(g):{};if("type"in g){"string"==typeof g.type&&(g.type=z(g.type,b.fields,d));if(Array.isArray(g.type)){var r=g.type.slice();1==r.length?(g.type=a.fn.$const(r[0]),g.defValue=r[0]):(g.type=function(a,b){return-1!=r.indexOf(a)?a:b},g.defValue=-1!=
r.indexOf(g.defValue)?g.defValue:r[0])}g.type===Array&&(g.type=l);g.type===Date&&(g.type=e);"function"!=typeof g.type&&(g.type=null)}var k=g.type||f;if(g.id||g.index||-1!=[fa,c,w,I].indexOf(k))b.idFields[d]=g;g.calc?(L(b,d,g.calc),b.fields[d]=ma):b.fields[d]=k;b.defaults[d]="defValue"in g?g.defValue:k();R[d]||(R[d]={destroy:function(){this.set(d,null)}})}function S(a,b,c){!1!=c in a.fields&&(b in a.aliases||(a.aliases[b]=c))}function L(b,c,d){b.calcs||(b.calcs=[]);var f=b.calcs,e=b.deps,g=d.args||
[];d={args:g,wrapper:d};b=b.calcs.length;var k=0;if(g)for(var h=0,l;l=f[h];h++)-1!=g.indexOf(l.key)&&(k=h+1);if(c){d.key=c;for(h=0;l=f[h];h++)if(-1!=l.args.indexOf(c)){b=h;break}if(k>b)return;e[c]=g.reduce(function(b,c){for(var d=e[c]||[c],f=0;f<d.length;f++)a.array.add(b,d[f]);return b},[]);for(var m in e)g=e[m].indexOf(c),-1!=g&&Array.prototype.splice.apply(e[m],[g,1].concat(e[c]))}else b=k;f.splice(Math.min(b,k),0,d)}function u(a){return function(b){return b&&this.modified&&a in this.modified?
this.modified[a]:this.data[a]}}function J(a){return function(b,c){return this.set(a,b,c)}}a.require("./3.js");a.require("./4.js");a.require("./d.js");var A=this.path,t=a.Class,b=Object.prototype.hasOwnProperty,P=a.object.keys,M=a.object.extend,f=a.fn.$self,k=a.array.from,y=a.event.Emitter;n=a.event.create;var U=a.data.Object,ba=a.data.Slot,d=a.data.Dataset;v=a.data.dataset.Filter;var da=a.data.dataset.Split,T={},Y=[],X={string:!0,number:!0},fa=function(a){return isNaN(a)?null:Number(a)},c=function(a){return isNaN(a)?
null:Number(a)},w=function(a){return isNaN(a)?null:parseInt(a,10)},I=function(a){return null==a?null:String(a)},$={},g={},K={},O={},ja=t(null,{className:A+".Index",items:null,init:function(a){this.items={}},get:function(a,c){var d=b.call(this.items,a)&&this.items[a];if(d&&(!c||d.entityType===c))return d},add:function(a,b){if(b){var c=this.get(a);if(!c)return this.items[a]=b,!0;if(c!==b)throw 39;}},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=
null}});E=function(a,b){return function(c){return a.prototype[b].call(this,c&&c.map(this.wrapper))}};q=function(a,b){return function(){this.name||(this.name=G(b));a.prototype.init.call(this)}};H=function(b){return function(b){var c=a.object.slice(this.items_),f=[],e=[];if(b){d.setAccumulateState(!0);for(var g=0;g<b.length;g++){var k=this.wrapper(b[g]);k&&(c[k.basisObjectId]=!1)}d.setAccumulateState(!1)}for(var h in this.items_)!1==h in c&&f.push(this.items_[h]);for(h in c)c[h]&&e.push(c[h]);e.length&&
this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:e});d.setAccumulateState(!0);for(g=0;g<e.length;g++)e[g].destroy();d.setAccumulateState(!1);return f.length?f:null}};var ea=t(d,{className:A+".EntitySet",name:null,wrapper:f,init:q(d,"EntitySet"),sync:H(d),set:E(d,"set"),add:E(d,"add"),remove:E(d,"remove"),destroy:function(){d.prototype.destroy.call(this);this.wrapper=null}}),ka=t(ea,{className:A+".ReadOnlyEntitySet",set:a.fn.$false,add:a.fn.$false,remove:a.fn.$false,clear:a.fn.$false});
v=t(v,{className:A+".EntityCollection",name:null,init:q(v,"EntityCollection"),sync:H(v)});q=t(da,{className:A+".EntityGrouping",name:null,subsetClass:ka,init:q(da,"EntityGrouping"),sync:H(da),getSubset:function(a,b){var c=da.prototype.getSubset.call(this,a,b);c&&c.dataset&&(c.dataset.wrapper=this.wrapper);return c}});var m=function(a,b){if(this instanceof m){a||(a=f);if(!b||g[b])b=G("UntitledEntitySetType");var c=new s({entitySetClass:{wrapper:a}}),e=c.entitySetClass,h=function(a,b){return null!=
a?(!1==b instanceof ea&&(b=c.createEntitySet()),b.set(a instanceof d?a.getItems():k(a)),b):null};"string"==typeof a&&(e.prototype.wrapper=z(a,e.prototype,"wrapper"));F(b,h);M(h,{type:c,typeName:b,toString:function(){return b+"()"},reader:function(a){if(Array.isArray(a)){var b=e.prototype.wrapper;return a.map(b.reader||b)}return a},extendClass:function(a){e.extend.call(e,a);return h},extendReader:function(a){var b=h.reader;h.reader=function(c){Array.isArray(c)&&a(c);return b(c)};return h},entitySetType:c,
extend:function(){return e.extend.apply(e,arguments)}});return h}},s=t(null,{className:A+".EntitySetConstructor",entitySetClass:ea,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),N=function(a){if(this instanceof N){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){if(a===b||a.entityType===c)return a;var f,e=c.idField;if(X[typeof a]){if(!e)return;if(b=c.index.get(a,c))return b;f=a;a={};a[e]=f}else c.compositeKey&&
(f=c.compositeKey(a,a)),null!=f&&(b=c.index.get(f,c));b&&b.entityType===c?b.update(a):b=new d(a);return b}};var c=new ia(a||{},b),d=c.entityClass,f=c.name;F(f,b);M(b,{all:c.all,type:c,typeName:f,toString:function(){return f+"()"},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},reader:function(a){return c.reader(a)},extendClass:function(a){d.extend.call(d,a);return b},extendReader:function(a){var c=b.reader;b.reader=function(b){b&&"object"==typeof b&&a(b);return c(b)};
return b},entityType:c,extend:function(){return d.extend.apply(d,arguments)}});return b}},R={},la={},ma=function(a,b){return b},na=function(){function a(c,d,f,e,g,k,h){c=new Date(c,d-1,f,e||0,0,k||0,h?h.substr(0,3):0);c.setMinutes((g||0)-b-c.getTimezoneOffset());return c}var b;return function(c){b=0;return a.apply(null,String(c||"").replace(reIsoTimezoneDesignator,function(a,c,d,f){b=f?60*d+1*f:1*d;return c}).split(reIsoStringSplit))}}(),ia=t(null,{className:A+".EntityType",wrapper:null,all:null,
fields:null,idField:null,idFields:null,defaults:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(b,c){this.name=b.name;if(!this.name||g[this.name])this.name=G("UntitledEntityType");this.fields={};this.deps={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var d=b.index;d&&d instanceof ja&&(this.index=d);this.wrapper=c;if(!1=="all"in b||b.all||b.singleton)this.all=new ka(a.object.complete({wrapper:c},b.all));if(this.singleton=!!b.singleton){var f;
this.get=function(){return f};this.all.addHandler({itemsChanged:function(a,b){f=b.inserted?b.inserted[0]:null}},this)}for(var e in b.fields)p(this,e,b.fields[e]);for(e in b.aliases)S(this,e,b.aliases[e]);b.constrains&&b.constrains.forEach(function(a){L(this,null,a)},this);var k={};if(P(this.idFields).length){for(var l in this.idFields){var d=this.idFields[l].index,m;d&&!1!=d instanceof ja||("string"==typeof d?(!1==d in K&&(K[d]=new ja),d=K[d]):(this.index||(this.index=new ja),d=this.index));(m=k[d.basisObjectId])||
(m=k[d.basisObjectId]={index:d,fields:[]});m.fields.push(l);this.idFields[l]=m}this.index&&!1==this.index.basisObjectId in k&&(this.index=null);for(var n in k)m=k[n],m.property="__id__"+n,m.compositeKey=x.apply(null,m.fields),1==m.fields.length&&(m.idField=m.fields[0]);d=P(k);d=k[this.index?this.index.basisObjectId:d[0]];this.index=d.index;this.idField=d.idField;this.compositeKey=d.compositeKey;this.idProperty=d.property;this.indexes=k}else this.index&&(this.index=null);k={};for(e in this.defaults)k[e]=
void 0;this.entityClass=ha(this,this.all,this.fields,this.slots);this.entityClass.extend({entityType:this,type:c,typeName:this.name,state:b.state||this.entityClass.prototype.state,generateData:h(this.defaults,this.fields),initDelta:k});for(var t in this.fields)this.entityClass.prototype["get_"+t]=u(t),this.fields[t]!==ma&&(this.entityClass.prototype["set_"+t]=J(t));Y.push(this)},reader:function(a){var b={};if(X[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=
this.aliases[c];if(d){var f=this.fields[d].reader;b[d]=f?f(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(this.index&&null!=a)return this.index.get(a,this)},getId:function(a){if(this.compositeKey&&null!=a){if(X[typeof a])return a;if(a&&a.entityType===this)return a[this.idProperty];a instanceof U&&(a=a.data);if(this.compositeKey)return this.compositeKey(a,a)}},getSlot:function(a){var c=this.getId(a);if(null!=c){var d=b.call(this.slots,c)&&this.slots[c];d||(X[typeof a]&&(d={},this.idField&&
(d[this.idField]=a),a=d),d=this.slots[c]=new ba({delegate:this.get(c)||null,data:a}));return d}}}),Z=t(U,{className:A+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:n("rollbackUpdate")}),ha=function(c,d,f,e){function g(a,b,d){var f=c.calcs,e=a.data,r=!1;try{if(f)for(var h=0,l;l=f[h];h++){var m=l.key,B=e[m],p=l.wrapper(b,e,B);m&&p!==B&&(b[m]=B,e[m]=p,r=!0)}for(var n in c.indexes){var t=c.indexes[n],A=a[t.property],f=A;t.compositeKey&&
(f=t.compositeKey(b,e,A));f!==A&&(k(t.index,a,A,f),a[t.property]=f)}return r}catch(u){for(m in b)a.data[m]=b[m];d&&!a.modified&&(a.modified=d)}}function k(a,c,d,f){null!=f&&(a.add(f,c),b.call(e,f)&&e[f].setDelegate(c));null!=d&&(a.remove(d,c),b.call(e,d)&&e[d].setDelegate())}return t(Z,{className:c.name,init:function(a){this.delegate=null;this.data=this.generateData(a);Z.prototype.init.call(this);for(var b in this.data)(a=this.data[b])&&a!==this&&a instanceof y&&(a.addHandler(R[b],this),this.fieldHandlers_||
(this.fieldHandlers_={}),this.fieldHandlers_[b]=!0);g(this,this.initDelta);d&&d.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[c.idProperty]},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(a,b,d,e){var r=f[a];if(!r)return!1;var k,h=this.modified;r===l&&h&&a in h&&(b=l(b,h[a]));b=r(b,this.data[a]);r=this.data[a];if(b===r||b&&r&&
b.constructor===Date&&r.constructor===Date&&+b===+r)!d&&h&&a in h&&(k={rollback:{key:a,value:h[a]}},delete h[a],P(h).length||(this.modified=null));else a:{k={};if(!c.idFields[a])if(d)h||(this.modified=h={}),!1===a in h?(k.rollback={key:a,value:void 0},h[a]=r):h[a]===b&&(k.rollback={key:a,value:b},delete h[a],P(h).length||(this.modified=null));else if(h&&a in h)if(h[a]!==b){k.rollback={key:a,value:h[a]};h[a]=b;break a}else return!1;this.data[a]=b;this.fieldHandlers_&&this.fieldHandlers_[a]&&(r.removeHandler(R[a],
this),this.fieldHandlers_[a]=!1);b&&b!==this&&b instanceof y&&(b.addHandler(R[a],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[a]=!0);k.key=a;k.value=r;k.delta={};k.delta[a]=r}if(!e&&k){a=k.key;d=k.delta||{};var m;k.rollback&&(m={},m[k.rollback.key]=k.rollback.value);g(this,d,m)&&(a=!0);a&&(this.emit_update(d),k.delta=d);m&&this.emit_rollbackUpdate(m)}return k||!1},update:function(a,b){var c=!1,d={};if(a){var f,e,r;for(r in a)if(e=this.set(r,a[r],b,!0))e.key&&(c=!0,d[e.key]=
e.value),e.rollback&&(f||(f={}),f[e.rollback.key]=e.rollback.value);g(this,d,f)&&(c=!0);c&&this.emit_update(d);f&&this.emit_rollbackUpdate(f)}return c?d:!1},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){var b=this.modified;this.modified=null;a&&this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(b){var d=this.modified;d&&b&&(Array.isArray(b)||(b=
[b]),d=a.object.slice(d,b.reduce(function(a,b){return a.concat(c.deps[b]||b)},[])));this.update(d,!0)},destroy:function(){if(this.fieldHandlers_){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(R[a],this);this.fieldHandlers_=null}for(a in c.indexes){var b=c.indexes[a],f=this[b.property];null!=f&&k(b.index,this,f,null)}d&&d.has(this)&&d.emit_itemsChanged({deleted:[this]});U.prototype.destroy.call(this);this.data=T;this.modified=null}})};V.exports={isEntity:function(a){return a&&
a instanceof Z},createType:function(b,c){var d=b||{};"string"==typeof b?d={name:d,fields:c||{}}:c&&(d=a.object.merge(d,{fields:c}));return new N(d)},createSetType:function(a,b){return 1<arguments.length?new m(b,a):new m(a)},validate:function(){for(var b in O)a.dev.warn(A+": type `"+b+"` is not defined, but used by "+O[b].length+" type(s)")},getTypeByName:function(a){return g[a]},getIndexByName:function(a){return K[a]},get:function(a,b){var c=g[a];if(c)return c.get(b)},resolve:function(a,b){var c=
g[a];if(c)return c(b)},getByIndex:function(a,b){if(a in K)return K[a].get(b)},NumericId:fa,NumberId:c,IntId:w,StringId:I,Index:ja,CalculateField:D,ConcatStringField:x,calc:D,EntityType:N,Entity:ha,BaseEntity:Z,EntitySetType:m,EntitySet:ea,ReadOnlyEntitySet:ka,Collection:v,Grouping:q}},"i.js":function(n,V,a,q,H,v,E,Q){function G(){var a="basisjsJsonpCallback"+parseInt(1E11*Math.random());q[a]=function(b){J[a]=b};return a}function F(a){var b=J[a];delete J[a];return b}function z(a){delete J[a];delete q[a]}
function D(a,b){var e,h;e=!1;if("number"!=typeof a){if(!a||this.script!==a.target)return;a=(e=a&&"error"==a.type)||!this.script.readyState||/loaded|complete/.test(this.script.readyState)?4:3}if(a!=this.prevReadyState_){this.prevReadyState_=a;this.emit_readyStateChanged(a);if(4==a){this.clearTimeout();this.script.onload=this.script.onerror=this.script.onreadystatechange=null;this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.script=null;b?(this.emit_abort(),e=this.stateOnAbort):
(this.processResponse(),this.isSuccessful()&&!e?(e=u.READY,this.emit_success(this.getResponseData())):(e=u.ERROR,h=this.getResponseError(),this.emit_failure(h)));this.emit_complete(this);var f=this.callback;b?setTimeout(q[f]=function(){z(f)},3E5):z(f)}else e=u.PROCESSING;this.setState(e,h)}}a.require("./j.js");a.require("./4.js");n=this.path;var x=q.document,h=q.encodeURIComponent,l=a.object.extend,e=a.object.slice,p=a.object.merge;H=a.net.createRequestEvent;var S=a.net.AbstractRequest,L=a.net.AbstractTransport,
u=a.data.STATE,J={};v=S.subclass({className:n+".Request",timeout:3E4,timer_:null,emit_readyStateChanged:H("readyStateChanged"),isIdle:function(){return!this.script},isSuccessful:function(){return 200==this.data.status},processResponse:function(){this.callback in J&&this.update({contentType:"application/javascript",data:F(this.callback),status:200})},getResponseData:function(){return this.data.data},getResponseError:function(){return{code:"ERROR",msg:"ERROR"}},prepare:a.fn.$true,prepareRequestData:function(a){var b=
[],l=a.url;a=e(a);this.callback=G();for(var p in a.params){var f=a.params[p];null!=f&&null!=f.toString()&&b.push(h(p)+"="+h(f.toString()))}b.push(h(a.callbackParam)+"="+h(this.callback));b=b.join("&");a.routerParams&&(l=l.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(b,f){return f in a.routerParams?a.routerParams[f]:b}));b&&(l+=(-1==l.indexOf("?")?"?":"&")+b);a.requestUrl=l;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){if(!x)throw 41;var b=
x.head||x.getElementByName("head")[0]||x.documentElement,e=x.createElement("script");this.update({data:void 0,status:"",error:""});this.script=e;e.async=!0;e.src=a.requestUrl;e.charset=a.encoding;e.onload=e.onerror=e.onreadystatechange=D.bind(this);this.prevReadyState_=-1;this.emit_start();D.call(this,0);this.setTimeout(this.timeout);b.appendChild(this.script)},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),D.call(this,4,!0))},
setTimeout:function(a){this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();S.prototype.destroy.call(this)}});var A=L.subclass({className:n+".Transport",requestClass:v,emit_readyStateChanged:H("readyStateChanged"),encoding:null,params:null,callbackParam:"callback",
init:function(){L.prototype.init.call(this);this.params=e(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw 42;l(a,{url:b,encoding:a.encoding||this.encoding,params:p(this.params,a.params),routerParams:a.routerParams,callbackParam:a.callbackParam||
this.callbackParam,influence:a.influence});return a}});V.exports={Request:v,Transport:A,request:function(e,b,h){"string"==typeof e&&(e={url:e});var l=new A(e);l.addHandler({success:b&&function(a,e,h){b(h)},failure:h&&function(a,b,e){h(e)},complete:function(){a.nextTick(function(){l.destroy()})}});l.request()}}},"j.js":function(n,V,a,q,H,v,E,Q){function G(a){var e=x(a);return function(){e.apply(S,arguments);this.service&&e.apply(this.service,arguments);e.apply(this,arguments)}}function F(a){var e=
x(a);return function(){var h=[this].concat(z(arguments));e.apply(S,h);this.transport&&this.transport["emit_"+a].apply(this.transport,h);e.apply(this,arguments)}}a.require("./3.js");a.require("./4.js");q=this.path;var z=a.array.from,D=a.object.slice,x=a.event.create,h=a.data.STATE,l=a.data.Object,e=a.event.Emitter,p=[],S=new e({abort:function(){for(var a=z(p),e=0;e<a.length;e++)a[e].abort();return a},handler:{start:function(e){a.array.add(p,e.transport)},complete:function(e){a.array.remove(p,e.transport)}}});
n=l.subclass({className:q+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,stateOnAbort:h.UNDEFINED,emit_start:F("start"),emit_timeout:F("timeout"),emit_abort:F("abort"),emit_success:F("success"),emit_failure:F("failure"),emit_complete:F("complete"),emit_stateChanged:function(a){l.prototype.emit_stateChanged.call(this,a);if(this.influence)for(a=0;a<this.influence.length;a++)this.influence[a].setState(this.state,this.state.data)},init:function(){l.prototype.init.call(this);
this.influence=[]},setInfluence:function(a){this.influence=z(a)},clearInfluence:function(){this.influence=null},doRequest:a.fn.$undef,getResponseData:a.fn.$undef,destroy:function(){l.prototype.destroy.call(this);this.requestData=this.initData=null;this.clearInfluence()}});var L={start:function(e,h){a.array.add(this.inprogressRequests,h)},complete:function(e,h){a.array.remove(this.inprogressRequests,h)}},u={complete:function(){var e=this.requestQueue.shift();e&&a.nextTick(function(){e.doRequest()})}};
q=e.subclass({className:q+".AbstractTransport",requestClass:n,requests:null,poolLimit:null,poolHashGetter:a.fn.$true,emit_start:G("start"),emit_timeout:G("timeout"),emit_abort:G("abort"),emit_success:G("success"),emit_failure:G("failure"),emit_complete:G("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];e.prototype.init.call(this);this.addHandler(L,this);this.poolLimit&&this.addHandler(u,this)},getRequestByHash:function(a){var e=this.requests[a];if(!e){for(var h in this.requests)if(this.requests[h].isIdle()&&
-1!=!this.requestQueue.indexOf(this.requests[h])){e=this.requests[h];delete this.requests[h];break}e||(e=new this.requestClass({transport:this}));this.requests[a]=e}return e},prepare:a.fn.$true,prepareRequestData:a.fn.$self,request:function(a){if(this.prepare()){a=D(a);var e=this.poolHashGetter(this.prepareRequestData(a)),e=this.getRequestByHash(e,!0);e.initData&&e.abort();e.initData=a;e.requestData=a;e.setInfluence(a.influence||this.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?
(this.requestQueue.push(e),e.setState(h.PROCESSING)):e.doRequest();return e}},abort:function(){for(var a=0,e;e=this.inprogressRequests[a];a++)e.abort();for(a=0;e=this.requestQueue[a];a++)e.setState(h.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var a=0,e;e=this.stoppedRequests[a];a++)e.transport.request(e.initData);
this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var a in this.requests)this.requests[a].destroy();this.requests={};this.stoppedRequests=this.requestQueue=this.inprogressRequests=null;e.prototype.destroy.call(this)}});V.exports={createTransportEvent:G,createRequestEvent:F,transportDispatcher:S,AbstractRequest:n,AbstractTransport:q}},"k.js":function(n,V,a,q,H,v,E,Q){a.require("./3.js");a.require("./l.js");a.require("./n.js");n=a.event.create;var G=a.net.action.create,F=a.event.Emitter,
z={start:function(n,q){a.array.add(this.inprogressTransports,q.transport)},complete:function(n,q){a.array.remove(this.inprogressTransports,q.transport)}};n=F.subclass({className:this.path+".Service",inprogressTransports:null,transportClass:a.net.ajax.Transport,emit_sessionOpen:n("sessionOpen"),emit_sessionClose:n("sessionClose"),emit_sessionFreeze:n("sessionFreeze"),emit_sessionUnfreeze:n("sessionUnfreeze"),isSecure:!1,prepare:a.fn.$true,signature:a.fn.$undef,isSessionExpiredError:a.fn.$false,init:function(){F.prototype.init.call(this);
this.inprogressTransports=[];var a=this.transportClass;this.transportClass=a.subclass({service:this,needSignature:this.isSecure,emit_failure:function(n,h){a.prototype.emit_failure.call(this,n,h);this.needSignature&&this.service.isSessionExpiredError(n)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(n){if(this.service.prepare(this,n)&&(!this.needSignature||this.service.sign(this)))return a.prototype.request.call(this,n)}});this.addHandler(z)},sign:function(a){if(this.sessionKey)return this.signature(a,
this.sessionData),!0},openSession:function(a,n){this.sessionKey=a;this.sessionData=n;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(a){return a.needSignature});for(var a=0,n;n=this.inprogressTransports[a];a++)n.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports)for(var a=
0,n;n=this.stoppedTransports[a];a++)n.resume();this.emit_sessionUnfreeze()},createTransport:function(a){return new this.transportClass(a)},createAction:function(n){return G(a.object.complete({service:this},n))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=null;F.prototype.destroy.call(this)}});V.exports={Service:n}},"l.js":function(n,V,a,q,H,v,E,Q){function G(b,e){var l={};u.test(e.method)?x&&!1!=e.postBody instanceof x||(l["Content-Type"]=e.contentType+
(e.encoding?";charset="+e.encoding:"")):z.test("ie")&&(l["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");a.object.iterate(h(l,e.headers),function(a,b){null!=b&&"function"!=typeof b&&this.setRequestHeader(a,b)},b)}function F(b){var e=this.xhr,h;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);e&&("number"!=typeof b&&(b=e.readyState),b!=this.prevReadyState_&&(this.prevReadyState_=b,this.emit_readyStateChanged(b),4==b?(this.clearTimeout(),e.onreadystatechange=a.fn.$undef,(b=0==e.status)||
e.responseType||(b="unknown"==typeof e.responseText||!e.responseText&&!e.getAllResponseHeaders()),b?(this.emit_abort(),e=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(e=L.READY,this.emit_success(this.getResponseData())):(e=L.ERROR,h=this.getResponseError(),!h&&this.data.error&&(h=this.data.error),this.emit_failure(h))),this.emit_complete(this)):e=L.PROCESSING,this.setState(e,h)))}a.require("./m.js");a.require("./j.js");a.require("./4.js");n=this.path;var z=a.ua,D=q.encodeURIComponent,
x=q.FormData,h=a.object.extend,l=a.object.slice,e=a.object.merge;H=a.net.createTransportEvent;v=a.net.createRequestEvent;var p=a.net.AbstractRequest,S=a.net.AbstractTransport,L=a.data.STATE,u=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,J="native",A=function(){if("XMLHttpRequest"in q)return function(){return new XMLHttpRequest};var a=q.ActiveXObject;if(a)for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],h=0;J=e[h];h++)try{if(new a(J))return function(){return new a(J)}}catch(f){}throw 43;
}();v=p.subclass({className:n+".Request",requestStartTime:0,timeout:3E4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:v("readyStateChanged"),init:function(){p.prototype.init.call(this);this.xhr=A()},isIdle:function(){return 4==this.xhr.readyState||0==this.xhr.readyState},isSuccessful:function(){var a=this.xhr.status;return 200<=a&&300>a||304==a},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},
getResponseData:function(){var b=this.xhr;if(!b.responseType&&("json"==this.responseType||/^application\/json/i.test(this.data.contentType))){var e;a:{try{e=a.json.parse(b.responseText);break a}catch(h){}e=void 0}return e}return"response"in b?b.response:b.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){return{code:"SERVER_ERROR",msg:this.responseType?this.xhr.response||this.xhr.statusText||"Error":this.xhr.responseText}},prepare:a.fn.$true,
prepareRequestData:function(a){var e=[],h=a.url;a=l(a);for(var f in a.params){var k=a.params[f];null!=k&&null!=k.toString()&&e.push(D(f)+"="+D(k.toString()))}e=e.join("&");!a.postBody&&u.test(a.method)&&(a.postBody=e||"",e="");a.routerParams&&(h=h.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(e,f){return f in a.routerParams?a.routerParams[f]:e}));e&&(h+=(-1==h.indexOf("?")?"?":"&")+e);a.requestUrl=h;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({contentType:"",
status:""});z.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=A());this.emit_start();var e=this.xhr;this.prevReadyState_=-1;e.onreadystatechange=F.bind(this);a.asynchronous||F.call(this,0);e.open(a.method,a.requestUrl,a.asynchronous);this.lastRequestUrl_=a.requestUrl;if(a.responseType&&a.asynchronous&&"responseType"in e)try{e.responseType=a.responseType}catch(h){}this.responseType=a.responseType||"";G(e,a);this.setTimeout(this.timeout);var f=a.postBody;if(u.test(a.method)&&z.test("ie9-"))if("object"==
typeof f&&"undefined"!=typeof f.documentElement&&"string"==typeof f.xml)f=f.xml;else if("string"==typeof f)f=f.replace(/\r/g,"");else if(null==f||""==f)f="[No data]";this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null;this.xhr===e&&1==e.readyState&&e.send(f)}.bind(this),this.sendDelay)):e.send(f);return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||
(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&0!=this.xhr.readyState&&F.call(this,4))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},
destroy:function(){this.abort();this.xhr=null;p.prototype.destroy.call(this)}});var t=S.subclass({className:n+".Transport",requestClass:v,emit_readyStateChanged:H("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:a.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",postBody:null,init:function(){S.prototype.init.call(this);this.params=l(this.params);this.routerParams=l(this.routerParams)},setParam:function(a,
e){this.params[a]=e},setParams:function(a){this.clearParams();for(var e in a)this.setParam(e,a[e])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(b){if(!b.url&&!this.url)throw 44;h(b,{headers:e(this.requestHeaders,b.headers),params:e(this.params,b.params),routerParams:e(this.routerParams,b.routerParams)});a.object.complete(b,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,
encoding:this.encoding,postBody:this.postBody,responseType:this.responseType});return b}});V.exports={Request:v,Transport:t,request:function(b,e,h){"string"==typeof b&&(b={url:b,asynchronous:!(!e&&!h)});var f=new t(b);f.addHandler({success:e&&function(a,b,f){e(f)},failure:h&&function(a,b,e){h(e)},complete:function(){a.nextTick(function(){f.destroy()})}});b=f.request();if(!b.requestData.asynchronous)return b.getResponseData()}}},"m.js":function(n,V,a,q,H,v,E,Q){function G(a){var h=1E6;a=String(a).split(".");
for(var l=0,n=0;4>l&&l<a.length;l++,h/=100)n+=a[l]*h;return n}function F(a){a=a.toLowerCase();if(a in x)return x[a];var h=a.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(h){x[a]=!1;var l=h[1].toLowerCase(),n=G(h[3]),h=h[4]||"=";if(l=D[l])return x[a]=!n||"="==h&&l==n||"+"==h&&l>=n||"-"==h&&l<n}return!1}var z=q.document;n=q.navigator&&q.navigator.userAgent||"";q=q.opera;var D={},x={};Q="unknown";H={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone",
"iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var h in H)if(!("MSIE"==h&&q||"Safari"==h&&/chrome/i.test(n)||"AppleWebKit"==h&&/iphone/i.test(n))&&n.match(new RegExp(h+".(\\d+(\\.\\d+)*)","i"))){v=H[h];Q=q&&"function"==typeof q.version?q.version():RegExp.$1;E=G(Q);Q=v[0]+" "+Q;for(var l=0;l<v.length;l++)D[v[l].toLowerCase()]=
E}V.exports={prettyName:Q,is:F,test:function(){return a.array(arguments).some(F)},cookies:{set:function(a,h,l,n,u){z.cookie=a+"="+(null==h?"":escape(h))+";path="+(n||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(l?";expires="+(new Date(Date.now()+1E3*l)).toGMTString():"")+(u?";domain="+u:"")},get:function(a){return(a=z.cookie.match(new RegExp("(^|;)\\s*"+a+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(a[2])},remove:function(a,h,l){z.cookie=a+"=;expires="+(new Date(0)).toGMTString()+";path="+
(h||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(l?";domain="+l:"")}}}},"n.js":function(n,V,a,q,H,v,E,Q){a.require("./4.js");a.require("./l.js");var G=a.data.STATE.UNDEFINED,F=a.data.STATE.READY,z=a.data.STATE.PROCESSING,D=a.data.STATE.ERROR,x=function(){},h={start:function(a,h){var l=h.requestData.origin;this.start.call(h.requestData.origin);l.state!=z&&l.setState(z)},success:function(a,h,l){a=h.requestData.origin;this.success.call(a,l);a.state==z&&a.setState(F)},failure:function(a,
h,l){a=h.requestData.origin;this.failure.call(a,l);a.state==z&&a.setState(D,l)},abort:function(a,h){var l=h.requestData.origin;this.abort.call(l);l.state==z&&l.setState(G)},complete:function(a,h){this.complete.call(h.requestData.origin)}},l={start:x,success:x,failure:x,abort:x,complete:x};V.exports={create:function(e){e=a.object.extend({prepare:x,request:x},e);var n=a.object.splice(e,["prepare","request"]),q=a.object.merge(l,a.object.splice(e,["start","success","failure","abort","complete"])),v=a.fn.lazyInit(function(){var l;
l=e;l=l.transport?l.transport:l.service?l.service.createTransport(l):l.createTransport?l.createTransport(l):new a.net.ajax.Transport(l);l.addHandler(h,q);return l});return function(){this.state!=z&&(n.prepare.apply(this,arguments),this.request=v().request(a.object.complete({origin:this},n.request.apply(this,arguments))))}}}},"o.js":function(n,V,a,q,H,v,E,Q){function G(e){function h(e,n){for(var b="",p,q=e;q<l.length;q++)switch(p=l.charAt(q),p){case n:return{result:b,offset:q};case "\\":b+="\\"+l.charAt(++q);
break;case "|":b+=")"!=n?"\\|":"|";break;case "(":(p=h(q+1,")"))?(q=p.offset,b+="(?:"+p.result+")?"):b+="\\(";break;case ":":(p=l.substr(q+1).match(/^\w+/))?(q+=p[0].length,b+="([^/]+)"):b+=":";break;case "*":(p=l.substr(q+1).match(/^\w+/))?(q+=p[0].length,b+="(.*?)"):b+="\\*";break;default:b+=a.string.forRegExp(p)}return n?null:b}var l=String(e||"");return new RegExp("^"+h(0)+"$","i")}function F(){var a=z.hash.substr(1)||"";if(a!=p){var e=[],n=[];p=a;for(var q in h){var t=h[q],b=a.match(t.regexp);
b?(l[q]||e.push(t),l[q]=b):l[q]&&(n.push(t),delete l[q])}for(a=0;t=n[a];a++)for(var t=x(t.callbacks),v=0;b=t[v];v++)b.callback.leave&&b.callback.leave.call(b.context);for(a=0;t=e[a];a++)for(t=x(t.callbacks),v=0;b=t[v];v++)b.callback.enter&&b.callback.enter.call(b.context);for(q in l)for(t=h[q],e=x(l[q],1),t=x(t.callbacks),a=0;b=t[a];a++)b.callback.match&&b.callback.match.apply(b.context,e)}}a.require("./8.js");a.namespace(String(this.path));var z=q.location;n=q.document.documentMode;var D="onhashchange"in
q&&(void 0===n||7<n),x=a.array.from,h={},l={},e=!1,p,S;V.exports={debug:!1,add:function(a,e,n){var q=h[a];if(!q&&(q=h[a]={source:a,callbacks:[],regexp:"[object RegExp]"!=Object.prototype.toString.call(a)?G(a):a},"string"==typeof p)){var t=p.match(q.regexp);t&&(l[a]=t)}e={cb_:e,context:n,callback:"function"!=typeof e?e||{}:{match:e}};q.callbacks.push(e);a in l&&(e.callback.enter&&e.callback.enter.call(n),e.callback.match&&e.callback.match.apply(n,x(l[a],1)))},remove:function(a,e,n){var p=h[a];if(p)for(var q=
0,b;b=p.callbacks[q];q++)if(b.cb_===e&&b.context===n){p.callbacks.splice(q,1);p.callbacks.length||(delete h[a],delete l[a]);break}},stop:function(){e&&(D?a.dom.event.removeHandler(q,"hashchange",F):clearInterval(S),e=!1)},start:function(){e||(D?a.dom.event.addHandler(q,"hashchange",F):S=setInterval(F,50),e=!0,F())},checkUrl:F,navigate:function(a,h){h?z.replace(z.pathname+"#"+a):z.hash=a;e&&F()}}},"p.js":function(n,V,a,q,H,v,E,Q){function G(a){z.title=a}function F(a){return"string"==typeof a?z.getElementById(a):
a}var z=q.document||{title:"unknown"},D=z.title,x=a.fn.$undef,h,l;n=a.fn.lazyInit(function(e){var n=[],q=!1,v={inited:!1,setTitle:function(e){e!=D&&(D instanceof a.Token&&D.detach(G),e instanceof a.Token?(e.attach(G),G(e.get())):G(e),D=e)},setElement:function(a){a=F(a);l!=a&&(l?l.parentNode.replaceChild(a,l):(l=a,h||(h={type:"append",node:z.body}),(a=F(h.node))&&("append"==h.type?a.appendChild(l):a.parentNode.replaceChild(l,a))))},ready:function(a,e){q?a.call(e,v):n.push({fn:a,context:e})}},u;for(u in e){var E=
e[u];switch(u){case "title":v.setTitle(E);break;case "container":h={type:"append",node:E};break;case "replace":h={type:"replace",node:E};break;case "element":l=E;break;case "init":x="function"==typeof E?E:x}}a.ready(function(){var a=l,e=x.call(v);e&&(a=e.element?e.element:e);l=null;v.setElement(a);q=!0;for(v.inited=!0;a=n.shift();)a.fn.call(a.context,v)});return v});V.exports={create:n}}};(function V(a,q,H){function v(b){function c(a){return parseInt(Number(a),10).toString(36)}var d=(a.performance?
c(a.performance.now()):"")+c(new Date);for(b||(b=16);d.length<b;)d=c(1E12*Math.random())+d;return d.substr(d.length-b,b)}function E(a,b){for(var c in b)a[c]=b[c];return a}function Q(a,b){for(var c in b)!1==c in a&&(a[c]=b[c]);return a}function G(a){var b=[],c;for(c in a)b.push(c);return b}function F(a,b){var c={};if(!b)return E(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e]);return c}function z(a,b,c){var d=[],e;for(e in a)d.push(b.call(c,e,a[e]));return d}function D(a){return a}function x(){}function h(a){var b=
fa[a.url];if(b)for(var c=0;c<b.length;c++)b[c](a.get(),a.url)}function l(a,c,d){try{return new Function(c,d)}catch(e){b.error("Compilation error at "+a+("line"in e?":"+(e.line-1):"")+": "+e)}}function e(a){if(!1==a in O){var b=a.split("."),c=b.shift(),b=b.join("/")+".js";!1==c in ea&&(ea[c]=k.baseURI+c+"/");b=c==a?ea[c].replace(/\/$/,"")+".js":ea[c]+b;O[a]=b;ja[b]=a}return O[a]}function p(b){b=b.split(".");var c;c=b[0];var d=K[c];d||(d=K[c]=new ka(c),d.namespaces_={},d.namespaces_[c]=d,U.noConflict||
(a[c]=d));"library"!=c||qa||(qa=K[c]);for(var d=c=d,e=1,f;f=b[e];e++){if(!d[f]){var g=b.slice(0,e+1).join(".");d[f]=new ka(g);c.namespaces_[g]=d[f]}d=d[f]}return K[b.join(".")]=d}function S(a,b){if(null!=a){var c=a.length;if("undefined"==typeof c||"[object Function]"==J.call(a))return[a];b||(b=0);if(0<c-b){for(var d=[],e=0,f=b;f<c;)d[e++]=a[f++];return d}}return[]}function L(a,b,c){for(var d=[],e="function"==typeof b,f=0;f<a;f++)d[f]=e?b.call(c,f,d):b;return d}var u=a.document,J=Object.prototype.toString,
A=function(){function a(b){if(d.test(b)){var c=b.split("."),e=c[0],f=c[1],g=c[2];switch(c.length){case 1:b=function(a){return null!=a?a[e]:a};break;case 2:b=function(a){return null!=a?a[e][f]:a};break;case 3:b=function(a){return null!=a?a[e][f][g]:a};break;default:b=function(a){if(null!=a){a=a[e][f][g];for(var b=3,d;d=c[b];b++)a=a[d]}return a}}return b}return new Function("object","return object != null ? object."+b+" : object")}var b="basisGetterId"+v()+"_",c=1,d=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,
e=[],f={},g={},h=function(d,h){var k,l,m;if(!d||d===t)return t;"function"==typeof d?(m=d[b])?k=e[Math.abs(m)-1]:(k=function(a){return d(a)},k.base=d,k.__extend__=A,m=e.push(k),d[b]=-m,k[b]=m):(k=f[d])?m=k[b]:(k=a(d),k.base=d,k.__extend__=A,m=e.push(k),k[b]=m,f[d]=k);l=null!=h&&typeof h;if(!l)return k;var p=g[m],q;if("string"==l)q=l+h;else if("function"==l)q=h.basisModId_;else if("object"!=l)return k;if(q&&p&&p[q])return p[q];"function"==typeof k.base&&(k=k.base);switch(l){case "string":l=function(a){return ma.format(h,
k(a))};break;case "function":q||(q=l+c++,h.basisModId_=q);l=function(a){return h(k(a))};break;default:l=function(a){return h[k(a)]}}l.base=k.base||k;l.__extend__=A;q&&(p||(p={},g[m]=p),p[q]=l,l.mod=h,l[b]=e.push(l));return l};h.ID=b;return h}(),t=E(function(){},{__extend__:A}),b=function(){var a={log:x,info:x,warn:x,error:x};"undefined"!=typeof console&&z(a,function(b){a[b]="bind"in Function.prototype&&"function"==typeof console[b]?Function.prototype.bind.call(console[b],console):function(){Function.prototype.apply.call(console[b],
console,arguments)}});return a}(),P=a.setImmediate||a.msSetImmediate,M=a.clearImmediate||a.msSetImmediate;P&&(P=P.bind(a));M&&(M=M.bind(a));P||function(){var b=function(){var a={},b=1;P=function(d){if("function"==typeof d)return a[++b]={fn:d,args:S(arguments,1)},c(b),b};M=function(b){delete a[b]};return function(b){var c=a[b];if(c)return delete a[b],c.fn.apply(void 0,c.args)}}(),c=function(a){setTimeout(function(){b(a)},0)};if(a.process&&"function"==typeof process.nextTick)c=function(a){process.nextTick(function(){b(a)})};
else if(a.MessageChannel)c=function(c){var d=new a.MessageChannel;d.port1.onmessage=function(){b(c)};d.port2.postMessage("")};else{var d=a.postMessage&&!a.importScripts;if(d){var e=a.onmessage;a.onmessage=function(){d=!1};a.postMessage("","*");a.onmessage=e}if(d)e=function(c){c&&c.source==a&&(c=String(c.data).split("basisjs.setImmediate")[1])&&b(c)},a.addEventListener?a.addEventListener("message",e,!0):a.attachEvent("onmessage",e),c=function(b){a.postMessage("basisjs.setImmediate"+b,"*")};else if(u&&
"onreadystatechange"in u.createElement("script"))var f=c,c=function sa(a){"undefined"!=typeof C&&(c=f,C.head.ready(function(){c=function(a){var c=u.createElement("script");c.onreadystatechange=function(){c.onreadystatechange=null;C.remove(c);c=null;b(a)};C.head.add(c)}}));c===sa?f(a):c(a)}}}();var f="object"==typeof process&&"[object process]"==J.call(process),k=function(){var a=/^([^\/]+:|\/)/,b=/^[a-zA-Z0-9\-]+:\/?/,c=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,d=/[\?#].*$/,e,g,h;f?(g=(process.basisjsBaseURI||
require("path").resolve(".")).replace(/\\/g,"/"),e=g.replace(/^[^\/]*/,""),g=g.replace(/\/.*/,"")):(e=location.pathname.replace(/[^\/]+$/,""),g=location.protocol+"//"+location.host);return h={baseURI:e,origin:g,normalize:function(a){a=(a||"").replace(b,"/").replace(c,"/").replace(d,"");for(var e=[],f=a.split("/"),g=0;g<f.length;g++)".."==f[g]?(1<e.length||e[0])&&e.pop():!f[g]&&g||"."==f[g]||e.push(f[g]);return e.join("/")||("/"===a[0]?"/":"")},dirname:function(a){a=h.normalize(a);return a.replace(/\/([^\/]*)$|^[^\/]+$/,
"")||("/"==a[0]?"/":".")},extname:function(a){return(a=h.normalize(a).match(/[^\/](\.[^\/\.]*)$/))?a[1]:""},basename:function(a,b){var c=h.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==h.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(b,c){for(var d=S(arguments).reverse(),f=[],g=!1,k=0;!g&&k<d.length;k++)"string"==typeof d[k]&&(f.unshift(d[k]),g=a.test(d[k]));g||f.unshift("/"==e?"":e);return h.normalize(f.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=e);
a=h.normalize(a);b=h.normalize(b);if("/"==a[0]&&"/"!=b[0])return a;if("/"==b[0]&&"/"!=a[0])return b;for(var c=a.replace(/^\/$/,"").split(/\//),d=b.replace(/^\/$/,"").split(/\//),f=[],g=0;d[g]==c[g]&&"string"==typeof c[g];)g++;for(c=c.length-g;0<c;c--)f.push("..");return f.concat(d.slice(g).filter(Boolean)).join("/")}}}(),y=q||"",U=H||{noConflict:!0,modules:{},autoload:["./0.js"]},ba=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;
return c===a}function c(h,l){var m=f++;"function"!=typeof h&&(h=k);var p=function(){};p.prototype=h.prototype;for(var p=new p,m={basisClassId_:m,superClass_:h,extendConstructor_:!!h.extendConstructor_,isSubclassOf:b,subclass:function(){return c.apply(null,[t].concat(S(arguments)))},extend:d,__extend__:function(b){return b&&b!==g&&("object"==typeof b||"function"==typeof b&&!a(b))?k.create.call(null,t,b):b},prototype:p},q=1,s;s=arguments[q];q++)m.extend(s);var t=m.extendConstructor_?function(a){this.basisObjectId=
e.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=e.id++;this.init.apply(this,arguments);this.postInit()};p.constructor=t;for(var u in p)p[u]===g&&(p[u]=t);E(t,m);return t}function d(b){var c=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype,F(c)));b.prototype&&(b=b.prototype);for(var e in b){var f=b[e],g=c[e];"className"==e||"extendConstructor_"==e?this[e]=f:c[e]=g&&g.__extend__?
g.__extend__(f):f}h&&b[e="toString"]!==J&&(c[e]=b[e]);return this}var e={id:1},f=1,g={},h=function(){for(var a in{toString:1})return!1;return!0}(),k=E(c,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.destroy=x}}}),l=function(a,b,c){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=
new c;b(c,a);return c}}.__extend__(a||{})},m=function(a){return l(a,E,"extensibleProperty")};return E(k,{SELF:g,create:c,isClass:a,customExtendProperty:l,extensibleProperty:m,nestedExtendProperty:function(a){return l(a,function(a,b){for(var c in b){var d=a[c];a[c]=d&&d.__extend__?d.__extend__(b[c]):m(b[c])}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var d={__extend__:c};if(b){if(b.__extend__)return b;for(var e in b)b[e]&&(d[e]=a)}return d};return c(b||{})}})}(),
d=ba(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c){a.attach(b,c)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b){this.handler={fn:a,context:b,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=x;d.handler=
c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new T(this.value),this.attach(a.set,a));return a},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.value=this.handler=null;this.detach=this.attach=x}}),da=function(){function a(){var d=b;b={};c=null;for(var e in d)d[e].apply()}var b={},c;return function(d){d.basisObjectId in b||(b[d.basisObjectId]=
d,c||P(a))}}(),T=d.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,da(this))},deferred:function(){return this}}),Y={},X={},fa={},c=1;(function(){var a="undefined"!=typeof ra?ra:null;if(a)for(var b in a)X[k.resolve(b)]=a[b]})();var w=function(a,b){if(b||!X.hasOwnProperty(a)){var c="";if(f)try{c=process.basisjsReadFile?process.basisjsReadFile(a):require("fs").readFileSync(a,"utf-8")}catch(d){}else{var e=new XMLHttpRequest;e.open("GET",a,!1);e.setRequestHeader("If-Modified-Since",
(new Date(0)).toGMTString());e.setRequestHeader("X-Basis-Resource",1);e.send("");200<=e.status&&400>e.status&&(c=e.responseText)}X[a]=c}return X[a]},I=function(a,b){var c=k.extname(a),e=$.extensions[c],f=1<arguments.length,g=!1,l=!1;f&&(a+="#virtual");var m=function(){if(g)return b;var c=f?b:w(a);e?l||(l=!0,b=e(c,a)):b=c;g=!0;h(m);m.apply();return b};E(m,E(new d,{url:a,type:c,virtual:f,fetch:function(){return m()},toString:function(){return"[basis.resource "+a+"]"},isResolved:function(){return g},
update:function(c){if(!g||f||c!=X[a])f||(X[a]=c),e?(!l&&f&&(b=c),l&&!e.permanent&&(b=e(c,a,b),h(m),m.apply())):(b=c,g=!0,h(m),m.apply())},reload:function(){if(!f){var b=X[a],c=w(a,!0);c!=b&&(g=!1,m.update(c))}},get:function(c){return f&&c?e?wrappedContent:b:c?w(a):m()},ready:function(a,b){if(g&&(a.call(b,m()),e&&e.permanent))return;m.attach(a,b);return m}}));return Y[a]=m},$=function(a){var b=Y[a];if(b)return b;a=k.resolve(a);return(b=Y[a])||I(a)};E($,{isResource:function(a){return a?Y[a.url]===a:
!1},isResolved:function(a){return(a=$.get(a))?a.isResolved():!1},exists:function(a){return Y.hasOwnProperty(k.resolve(a))},get:function(a){a=k.resolve(a);return $.exists(a)?$(a):null},getFiles:function(a){return G(a?X:Y).map(k.relative)},virtual:function(a,b,d){return I((d?d+":":k.normalize("/"==k.baseURI?"":k.baseURI)+"/")+"virtual-resource"+c++ +"."+a,b)},extensions:{".js":E(function(a,b){var c=ja[b];if(!c){var d=!0,c=k.dirname(b)+"/"+k.basename(b,k.extname(b)),e;for(e in ea){var f=ea[e]+e+"/";
if(c.substr(0,f.length)==f){d=!1;c=c.substr(ea[e].length);break}}c=c.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,".");d&&(c="implicit."+c)}K[c]||(e=p(c),e.exports=g({path:e.path,exports:e.exports},b,a).exports,e.exports&&e.exports.constructor===Object&&Q(e,e.exports));return K[c].exports},{permanent:!0}),".css":function(a,b,c){c||(c=new ga(b));c.updateCssText(a);return c},".json":function(a,b){if("object"==typeof a)return a;var c;try{a=String(a),c=W.json.parse(a)}catch(d){}return c||null}}});
var g=function(b,c,d){var e=k.dirname(c)+"/",f=d;b.exports||(b.exports={});"function"!=typeof f&&(f=l(c,"exports module basis global __filename __dirname resource require".split(" "),'"use strict";\n'+d));"function"==typeof f&&f.call(b.exports,b.exports,b,W,a,c,e,function(a){return $(k.resolve(e,a))},function(a,b){return m(a,b||e)});return b},K={},O={},ja={},ea={};z(U.modules,function(a,b){ea[a]=b.path+"/";O[a]=b.filename;ja[b.filename]=a});(function(a){if(a="undefined"!=typeof pa?pa:null)for(var b in a){var c=
k.resolve(b),d=a[b];ja[c]=d;O[d]=c}})();var ka=ba(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(a){E(this.exports,a);return Q(this,a)}}),m=function(){if(f){var a=module.constructor.prototype;return function(b,c){if(/[^a-z0-9_\.]/i.test(b)&&".js"!=k.extname(b))return b=k.resolve(c,b),require(b);var d=a._compile,e=p(b);a._compile=function(a,b){this.basis=W;a='var __nodejsRequire = require;\nvar basis = module.basis;\nvar resource = function(filename){ return basis.resource(__dirname + "/" + filename) };\nvar require = function(filename, baseURI){ return basis.require(filename, baseURI || __dirname) };\n'+
a;d.call(E(this,e),a,b)};var f=require(__dirname+"/"+b.replace(/\./g,"/"));(e.exports=f)&&f.constructor===Object&&Q(e,f);a._compile=d;return f}}return function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==k.extname(a)?k.resolve(b,a):e(a);return $(a).fetch()}}();Q(Function.prototype,{bind:function(a){var b=this,c=S(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});Q(Array,{isArray:function(a){return"[object Array]"===J.call(a)}});
Q(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=
0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw 1;var e,f=0;1<d&&(e=b,f=1);for(d=0;d<c;d++)d in this&&(e=f++?a.call(null,e,this[d],d,this):this[d]);return e}});
var s={from:S,create:L,flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return s.flatten(L(parseInt(b,10)||0,a))},search:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||D);d=parseInt(d,10)||0;for(var e=a.length;d<e;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=A(c||D);var e=a.length;d=isNaN(d)||null==d?e:parseInt(d,10);for(e=d>e?e:d;0<e--;)if(c(a[e])===b)return a[a.lastSearchIndex=e]},add:function(a,b){return-1==a.indexOf(b)&&
!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(){return s.sort.apply(this,arguments)},sort:function(a,b,c,d){b=A(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(a){return this[a.i]},a)}};if(![1,2].splice(1).length){var N=Array.prototype.splice;Array.prototype.splice=function(){var a=S(arguments);2>a.length&&
(a[1]=this.length);return N.apply(this,a)}}var R=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,la=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;Q(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});Q(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,
"")},trim:function(){return this.trimLeft().trimRight()}});var ma={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw 2;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(R,"\\$1")},format:function(a,b){var c=S(arguments,1);"object"==typeof b&&E(c,b);return a.replace(la,function(a,b,d,e,f){a=b in c?c[b]:f?"":a;return d&&!isNaN(a)?(a=Number(a),"."==d?a.toFixed(e):
Z.lead(a,e)):a})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}};if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var na=String.prototype.split;String.prototype.split=function(a,
b){if(!a||!1==a instanceof RegExp||""==a.source)return na.apply(this,arguments);var c=[],d=0,e;for(a.global||(a=new RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=a.exec(this);)e[0]=this.substring(d,e.index),c.push.apply(c,e),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var ia=String.prototype.substr;String.prototype.substr=function(a,b){return ia.call(this,0>a?Math.max(0,this.length+a):a,b)}}var Z={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):
a},lead:function(a,b,c){return String(a).replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return String(a).replace(/\d+/,function(a){return a.replace(/\d/g,function(d,e){return!e+(a.length-e)%(b||3)?d:(c||" ")+d})})},format:function(a,b,c,d,e,f){a=a.toFixed(b);if(c||f)a=a.replace(/(\d+)(\.?)/,function(a,b,d){return(c?W.number.group(Number(b),3,c):b)+(d?f||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(e||"")}};Q(Date,{now:function(){return Number(new Date)}});
var ha=function(){function b(){if("complete"==u.readyState&&u.body&&!d++)for(;e;)e.callback.call(e.context),e=e.next}function c(){try{u.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,1)}}var d=!u||"complete"==u.readyState&&!!u.body,e;if(!d)if(u.addEventListener)u.addEventListener("DOMContentLoaded",b,!1),a.addEventListener("load",b,!1);else{u.attachEvent("onreadystatechange",b);a.attachEvent("onload",b);try{!a.frameElement&&u.documentElement.doScroll&&c()}catch(f){}}return function(a,
b){d?a.call(b):e={callback:a,context:b,next:e}}}(),C=function(){function a(b){if(u&&!f[b]&&(f[b]=u[b]||u.getElementsByTagName(b)[0],f[b])){var c=g[b];delete g[b];for(var d=0,e;e=c[d];d++)e[0].call(e[1],f[b])}return f[b]}function b(){var d=this[0],e=this[1],f=this[2];c(e);var h=a(d);h?(!0===f&&(f=h.firstChild),f&&f.parentNode===h||(f=null),h.insertBefore(e,f)):g[d].push([b,[d,e,f]])}function c(a){for(var b in g){var d=s.search(g[b],a,function(a){return a[1]&&a[1][1]});d&&s.remove(g[b],d)}a&&a.parentNode&&
1==a.parentNode.nodeType&&a.parentNode.removeChild(a)}function d(){e&&a("head")&&a("body")&&(e=clearInterval(e))}var e,f={},g={head:[],body:[]};!u||a("head")&&a("body")||(e=setInterval(d,5),ha(d));return{head:{ready:function(a,b){g.head?g.head.push([a,b]):a.call(b,f.head)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){g.body?g.body.push([a,b]):a.call(b,f.body)},add:function(a,c){b.call(["body",a,c])}},remove:c}}();q=function(){function b(a){d.globalDestroy=!0;d.add=x;for(d.remove=
x;a=c.pop();)if("function"==typeof a.destroy)try{a.destroy()}catch(e){}else for(var f in a)a[f]=null;c.length=0}var c=[];if("attachEvent"in a)a.attachEvent("onunload",b);else if("addEventListener"in a)a.addEventListener("unload",b,!1);else return{add:x,remove:x};var d={add:function(a){null!=a&&c.push(a)},remove:function(a){s.remove(c,a)}};return d}();var ga=function(){function a(b){f.setAttribute("href",b);C.head.add(f,!0)}function b(){f.setAttribute("href",location.href);C.remove(f)}function c(){a(this.baseURI);
this.element||(this.element=u.createElement("style"),d||this.element.appendChild(u.createTextNode("")));C.head.add(this.element);this.syncCssText();b()}var d;try{d=!u.createElement("style").appendChild(u.createTextNode(""))}catch(e){d=!0}var f=u&&u.createElement("base");return ba(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:void 0,element:null,init:function(a){this.url=a;this.baseURI=k.dirname(a)+"/"},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&
this.element&&(a(this.baseURI),this.syncCssText(),b()))},syncCssText:d?function(){this.element.styleSheet.cssText=this.cssText}:function(){this.element.firstChild.nodeValue=this.cssText},startUse:function(){this.inUse||C.head.ready(c,this);this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&C.remove(this.element))},destroy:function(){this.element&&C.remove(this.element);this.cssText=this.element=null}})}(),W=p("basis").extend({version:"1.3.0",NODE_ENV:f,config:U,
createSandbox:function(b){return V(a,y,Q({noConflict:!0},b))},resolveNSFilename:e,patch:function(a,b){a=/[^a-z0-9_\.]/i.test(a)||".js"==k.extname(a)?k.resolve(a):e(a);fa[a]?fa[a].push(b):fa[a]=[b];var c=$.get(a);c&&c.isResolved()&&b(c.get(),c.url)},namespace:p,require:m,resource:$,asset:function(a){return a},setImmediate:P,clearImmediate:M,nextTick:function(){P.apply(null,arguments)},Class:ba,Token:d,DeferredToken:T,genUID:v,getter:A,ready:ha,cleaner:q,console:b,path:k,doc:C,object:{extend:E,complete:Q,
keys:G,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:F,splice:function(a,b){var c={};if(!b)return E(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e],delete a[e]);return c},merge:function(){return S(arguments).reduce(E,{})},iterate:z},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==
this},$self:D,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:x,getter:A,nullGetter:t,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},lazyInit:function(a,b){var c=0,d,e;return d=function(){c++||(d.inited=!0,d.data=e=a.apply(b||this,arguments));return e}},lazyInitAndRun:function(a,b,c){var d=0,e,f;return e=function(){d++||(e.inited=!0,e.data=f=a.call(c||this));b.apply(f,arguments);return f}},
runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}}},array:E(S,s),string:ma,number:Z,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(a){return ma.toObject(a,!0)}}});p("basis.dev").extend(b);U.autoload&&U.autoload.forEach(function(a){m(a)});return W})(this)}).call(this)